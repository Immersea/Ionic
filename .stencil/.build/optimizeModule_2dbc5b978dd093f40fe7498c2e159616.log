import{r as e,h as a,H as t,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{E as c}from"./p-a9f4af61.js";import{Q as l,X as d,S as n}from"./p-f3984daf.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const r="modal-datasheet-majorfamily ion-list{width:100%}";const h=r;const f=class{constructor(a){e(this,a);this.index=0;this.datasheetMajorFamilies=undefined;this.datasheetMajorFamily=undefined;this.updateView=true;this.validDatasheetMajorFamily=false}async componentWillLoad(){await this.loadDatasheetMajorFamilies()}async loadDatasheetMajorFamilies(){await l.downloadDatasheetSettings();this.datasheetMajorFamilies=o.exports.cloneDeep(l.getDatasheetMajorFamilies());if(this.datasheetMajorFamilies&&this.datasheetMajorFamilies.length>0){this.datasheetMajorFamily=this.datasheetMajorFamilies[0]}else{this.addDatasheetMajorFamily()}this.validateDatasheet()}selectType(e){this.datasheetMajorFamily=this.datasheetMajorFamilies.find((a=>a.majorFamilyId==e.detail.value));this.validateDatasheet()}handleChange(e){const a=e.detail.name;let t=e.detail.value;if(a=="majorFamilyId"){t=t.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetMajorFamily[a]=t;this.validateDatasheet()}validateDatasheet(){this.validDatasheetMajorFamily=o.exports.isString(this.datasheetMajorFamily.majorFamilyId)&&o.exports.isString(this.datasheetMajorFamily.majorFamilyName);this.updateView=!this.updateView}addDatasheetMajorFamily(){this.datasheetMajorFamily=new d;this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}duplicateDatasheetMajorFamily(){this.datasheetMajorFamily=o.exports.cloneDeep(this.datasheetMajorFamily);this.datasheetMajorFamily.majorFamilyId=this.datasheetMajorFamily.majorFamilyId+"_rev.";this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}async deleteDatasheetMajorFamily(){try{this.datasheetMajorFamilies.splice(this.index,1);this.index=0;this.datasheetMajorFamily=this.datasheetMajorFamilies[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await l.uploadDatasheetSettings("majorfamily",this.datasheetMajorFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return a(t,{key:"5bafa7a653a8d8cec23f9c47c48ac3b3f1389501"},a("ion-content",{key:"32184f87cd680f0edde61617541c7df198c8f5dc"},a("ion-grid",{key:"eb86c710ea33911a0d5d3b6244bb348478cee1b8"},a("ion-row",{key:"04083cc51f73fdb800a02329b7775ed8e3aab516"},a("ion-col",{key:"25c740df67379791321d7c8178b7d9d83cc169b3"},a("app-select-search",{key:"a2f10cd4887dba1fa50342745c2d0514348d26a4",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetMajorFamilies[this.index].majorFamilyId:this.datasheetMajorFamilies[0].majorFamilyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetMajorFamilies,selectValueId:"majorFamilyId",selectValueText:["majorFamilyName"],disabled:!this.validDatasheetMajorFamily})),a("ion-col",{key:"7b1c1ea02a979cbebc11c3dbaf0890e7f63f9cd7",size:"1",class:"ion-text-center"},a("ion-button",{key:"fbf7925adb9be5a35d6eb3c4c779412df84f7b71",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.addDatasheetMajorFamily()},a("ion-icon",{key:"7545003b645e38aa35b6175fb8aa967a58d58178",name:"add",slot:"start"}))),a("ion-col",{key:"8c92e003760d03029bbf5b013647e88a65cd0145",size:"1",class:"ion-text-center"},a("ion-button",{key:"3244302f590ee9a156b1d73aba243e0e3a8aef8a",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.duplicateDatasheetMajorFamily()},a("ion-icon",{key:"f262d9230b894331bb3f1cfeca700c36195bd7e0",slot:"start",name:"duplicate"}))),a("ion-col",{key:"75e50211e0125065ee7661288817187c71b1e0b2",size:"1",class:"ion-text-center"},a("ion-button",{key:"e6b13cfbdaa226d0ab2fd220a2b034529a064e58",fill:"clear",color:"danger",disabled:this.datasheetMajorFamilies.length==0,onClick:()=>this.deleteDatasheetMajorFamily()},a("ion-icon",{key:"fb96dcc6001236436f00ef25e74b75673a4d9715",slot:"start",name:"trash"}))))),a("app-form-item",{key:"97275858d11a32f98fae6e56f2afed422a15ffd7","label-text":"ID",value:this.datasheetMajorFamily.majorFamilyId,name:"majorFamilyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"majorFamilyId",list:l.getDatasheetMajorFamilies()}}]}),a("app-form-item",{key:"95176abe691457677707d7855dc1ecce58ba262f","label-text":"Name",value:this.datasheetMajorFamily.majorFamilyName,name:"majorFamilyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),a("app-modal-footer",{key:"a6215d8b2da76195abab157f2b79027200a76f7e",color:c.getAppColor(),disableSave:!this.validDatasheetMajorFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=h;export{f as modal_datasheet_majorfamily};