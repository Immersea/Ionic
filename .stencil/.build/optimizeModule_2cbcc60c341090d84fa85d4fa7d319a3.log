import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{a6 as c,a7 as o,S as d,E as n}from"./p-773bd3de.js";import{l as h}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="modal-datasheet-category ion-list{width:100%}";const l=r;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetCategories=undefined;this.datasheetCategory=undefined;this.updateView=true;this.validDatasheetCategory=false}async componentWillLoad(){await this.loadDatasheetCategories()}async loadDatasheetCategories(){await c.downloadDatasheetSettings();this.datasheetCategories=h.exports.cloneDeep(c.getDatasheetCategories());if(this.datasheetCategories&&this.datasheetCategories.length>0){this.datasheetCategory=this.datasheetCategories[0]}else{this.addDatasheetCategory()}this.validateDatasheet()}selectType(e){this.datasheetCategory=this.datasheetCategories.find((t=>t.categoriesId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="categoriesId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetCategory[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetCategory=h.exports.isString(this.datasheetCategory.categoriesId)&&h.exports.isString(this.datasheetCategory.categoriesName);this.updateView=!this.updateView}addDatasheetCategory(){this.datasheetCategory=new o;this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}duplicateDatasheetCategory(){this.datasheetCategory=h.exports.cloneDeep(this.datasheetCategory);this.datasheetCategory.categoriesId=this.datasheetCategory.categoriesId+"_rev.";this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}async deleteDatasheetCategory(){try{this.datasheetCategories.splice(this.index,1);this.index=0;this.datasheetCategory=this.datasheetCategories[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("category",this.datasheetCategories);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"da5f87adfb5784db20f9e9e7d510b62c445f5703"},t("ion-content",{key:"fe8528d3c4767a825ca2bca7735932c92211a21b"},t("ion-grid",{key:"42119b51e9144672cc2bd46be42af76f263687bf"},t("ion-row",{key:"3da58ca5142103e113e6a81efe0f41f42de16e49"},t("ion-col",{key:"4d12db1e0f51d1b9ebbfaa6276c9f4076d98e9a6"},t("app-select-search",{key:"74282a2c9626a403d347cc8dc8dd657b37b59d3d",color:"trasteel",label:{tag:"datasheet_category",text:"Datasheet Category"},value:this.index?this.datasheetCategories[this.index].categoriesId:this.datasheetCategories[0].categoriesId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetCategories,selectValueId:"categoriesId",selectValueText:["categoriesName"],disabled:!this.validDatasheetCategory})),t("ion-col",{key:"f9e34946febd14c7868b4b8e3b87c92a58482c2f",size:"1",class:"ion-text-center"},t("ion-button",{key:"5f225aa607fab2d3fbdbfda143cad724b6b04261",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.addDatasheetCategory()},t("ion-icon",{key:"b83dd0319db3739a3ce956a154c38fbc623e2d4a",name:"add",slot:"start"}))),t("ion-col",{key:"b4b3c0065ba11866575b9943dc89259a6a421103",size:"1",class:"ion-text-center"},t("ion-button",{key:"276ba16cd86bd36cf388a4944670ef373f64672b",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.duplicateDatasheetCategory()},t("ion-icon",{key:"58ee104518fe9f231352c72d38c146f9c4baad78",slot:"start",name:"duplicate"}))),t("ion-col",{key:"555a9844b0c93098dc46b4806d134aecbdcd7342",size:"1",class:"ion-text-center"},t("ion-button",{key:"15a58c1fc8d16411e7db0ebdd91847f1c4310412",fill:"clear",color:"danger",disabled:this.datasheetCategories.length==0,onClick:()=>this.deleteDatasheetCategory()},t("ion-icon",{key:"8031554ff759529b1da4555ba4ffabafedc76602",slot:"start",name:"trash"}))))),t("app-form-item",{key:"c19afe8164943d439c0f3a9849975c0a77786129","label-text":"ID",value:this.datasheetCategory.categoriesId,name:"categoriesId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"categoriesId",list:c.getDatasheetCategories()}}]}),t("app-form-item",{key:"9ea828638f5538078705bfbbaf277d9515e92534","label-text":"Name",value:this.datasheetCategory.categoriesName,name:"categoriesName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"d16c2357839960e1d2bb680f609e880e823e076c",color:n.getAppColor(),disableSave:!this.validDatasheetCategory,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=l;export{f as modal_datasheet_category};