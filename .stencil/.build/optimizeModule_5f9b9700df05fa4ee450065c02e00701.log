import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{E as o}from"./p-a9f4af61.js";import{Q as c,V as d,S as n}from"./p-30358c9d.js";import{l as r}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const h="modal-datasheet-category ion-list{width:100%}";const l=h;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetCategories=undefined;this.datasheetCategory=undefined;this.updateView=true;this.validDatasheetCategory=false}async componentWillLoad(){await this.loadDatasheetCategories()}async loadDatasheetCategories(){await c.downloadDatasheetSettings();this.datasheetCategories=r.exports.cloneDeep(c.getDatasheetCategories());if(this.datasheetCategories&&this.datasheetCategories.length>0){this.datasheetCategory=this.datasheetCategories[0]}else{this.addDatasheetCategory()}this.validateDatasheet()}selectType(e){this.datasheetCategory=this.datasheetCategories.find((t=>t.categoriesId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="categoriesId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetCategory[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetCategory=r.exports.isString(this.datasheetCategory.categoriesId)&&r.exports.isString(this.datasheetCategory.categoriesName);this.updateView=!this.updateView}addDatasheetCategory(){this.datasheetCategory=new d;this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}duplicateDatasheetCategory(){this.datasheetCategory=r.exports.cloneDeep(this.datasheetCategory);this.datasheetCategory.categoriesId=this.datasheetCategory.categoriesId+"_rev.";this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}async deleteDatasheetCategory(){try{this.datasheetCategories.splice(this.index,1);this.index=0;this.datasheetCategory=this.datasheetCategories[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("category",this.datasheetCategories);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"ced66fb13b52fd750e545393ed62e4a373508f7c"},t("ion-content",{key:"0bfd68b14b9ff30161af18aa63ebf4e1c7a2f825"},t("ion-grid",{key:"b841b26c635d0c0b4b573838685981a53fcdf596"},t("ion-row",{key:"98f87f2cd4e8dc01d6ef2ea9a448617d0761a9fd"},t("ion-col",{key:"12ef45843951f203d82b37b818de9e0d77c9cea1"},t("app-select-search",{key:"b5ed8e9d8560c1ad34600171b986b6e98a18d788",color:"trasteel",label:{tag:"datasheet_category",text:"Datasheet Category"},value:this.index?this.datasheetCategories[this.index].categoriesId:this.datasheetCategories[0].categoriesId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetCategories,selectValueId:"categoriesId",selectValueText:["categoriesName"],disabled:!this.validDatasheetCategory})),t("ion-col",{key:"53d54a806254ec56274a865b05895955e50ad9db",size:"1",class:"ion-text-center"},t("ion-button",{key:"dad35ac1fa7f6ab9e7a34b75a13f2ce8cbf48b9d",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.addDatasheetCategory()},t("ion-icon",{key:"8b6207536cdddc989ea9ebd54ca45eb59ac2af63",name:"add",slot:"start"}))),t("ion-col",{key:"e8edaa356f79070be93e2a80078afaa96e4090d9",size:"1",class:"ion-text-center"},t("ion-button",{key:"6abac4631c468f841d0b09b3e5c4643c2ce84983",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.duplicateDatasheetCategory()},t("ion-icon",{key:"59dc2ddf32673242b8b191a548d6e9a2e24aad15",slot:"start",name:"duplicate"}))),t("ion-col",{key:"70bbb2a3c571f3ec8db4b9416056f30454746b7f",size:"1",class:"ion-text-center"},t("ion-button",{key:"51d1f0a929f5b1f12aff715071717fcf8b3bcbbb",fill:"clear",color:"danger",disabled:this.datasheetCategories.length==0,onClick:()=>this.deleteDatasheetCategory()},t("ion-icon",{key:"28ec038e8bab6334f10fe46cfd0f2b3e4eb5611a",slot:"start",name:"trash"}))))),t("app-form-item",{key:"45991543cc1f3284c49840133f8685011b4048a4","label-text":"ID",value:this.datasheetCategory.categoriesId,name:"categoriesId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"categoriesId",list:c.getDatasheetCategories()}}]}),t("app-form-item",{key:"3a3b8ff9ce916b91a86938905affaff4f8b978b1","label-text":"Name",value:this.datasheetCategory.categoriesName,name:"categoriesName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"eb5bd1984523401db489de2134ddbed5c2d99d8d",color:o.getAppColor(),disableSave:!this.validDatasheetCategory,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=l;export{f as modal_datasheet_category};