import{r as e,h as t,H as i,f as o}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as l}from"./p-c2915cc5.js";import{a6 as a,b4 as n,T as s}from"./p-26083a07.js";import{l as c}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="popover-datasheets-filter{}popover-datasheets-filter ion-list{min-height:300px}";const d=r;const h=class{constructor(t){e(this,t);this.filter=undefined;this.showBaseFilter=true;this.propertyNames=[];this.newFilterCondition=undefined;this.showAddNewProperty=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.datasheetMajorFamilies=a.getDatasheetMajorFamilies();this.datasheetFamilies=a.getDatasheetFamilies();this.propertyNames=a.getDatasheetPropertyNames();this.resetNewFilterCondition()}resetNewFilterCondition(){this.newFilterCondition=new n({field:"properties",fieldName:"name",valueName:"mgo",comparisonField:"lower"});this.validateProperty()}deleteCondition(e){this.filter.properties.splice(e,1);this.updateView=!this.updateView}handleFilter(e){this.filter[e.detail.name]=e.detail.value}handleMajorFamilySelect(e){this.filter.majorFamilyId=e.detail.value}handleFamilySelect(e){this.filter.familyId=e.detail.value}segmentChanged(e){if(e.detail.value=="base"){this.showBaseFilter=true}else{this.showBaseFilter=false}}selectPropertyName(e){this.newFilterCondition.valueName=e.detail.value;this.validateProperty()}selectOperator(e){this.newFilterCondition.operator=e.detail.value;this.validateProperty()}selectValue(e){this.newFilterCondition.value=e.detail.value;this.validateProperty()}addNewProperty(){this.filter.properties.push(c.exports.cloneDeep(this.newFilterCondition));this.resetNewFilterCondition()}validateProperty(){this.showAddNewProperty=c.exports.isString(this.newFilterCondition.field)&&c.exports.isString(this.newFilterCondition.fieldName)&&c.exports.isString(this.newFilterCondition.operator)&&c.exports.isString(this.newFilterCondition.valueName)&&!c.exports.isNull(this.newFilterCondition.value)}close(){l.dismiss()}save(){l.dismiss(this.filter)}render(){return t(i,{key:"b4662d543b3e053bbad0e39f6c0f4f6f0a5c969b"},t("ion-header",{key:"0883d2670087ed276b1e5b444a06d5e6e0fd226b",translucent:true},t("ion-toolbar",{key:"236d1878f5dd59c0e225b488027ce421a773a9e1"},t("ion-title",{key:"cdc1102b404f714b3dafced748cfe55d53fcad8d"},"Filter Datasheets"))),t("ion-content",{key:"6a5c74c5845b36c1d30b37ddc6850f15aaf1b443"},t("ion-segment",{key:"108a43e5e96f81212d767ac416d531ccb651316b",mode:"ios",color:"trasteel",onIonChange:e=>this.segmentChanged(e),value:"base"},t("ion-segment-button",{key:"c907fb5b5771708fcaafa8940dcc8b8fd2d81f3e",value:"base"},t("ion-label",{key:"d0db86d8a4741f3253b0c82d148ff17ff1262874"},"Base")),t("ion-segment-button",{key:"cf25eb43fc282188445d39e483094f046b54d11e",value:"advanced"},t("ion-label",{key:"ea6cd6c4c09b92401f25f4a7b928fbde56b74a7e"},"Advanced"))),t("ion-list",{key:"f604a5267953dc25c17ba118b8c6c0716b196b02"},this.showBaseFilter?[t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("majorFamily","Major Family"),"label-placement":"floating",onIonChange:e=>this.handleMajorFamilySelect(e),value:this.filter.majorFamilyId},this.datasheetMajorFamilies.map((e=>t("ion-select-option",{value:e.majorFamilyId},e.majorFamilyName))))),t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("family","Family"),"label-placement":"floating",onIonChange:e=>this.handleFamilySelect(e),value:this.filter.familyId},this.datasheetFamilies.map((e=>t("ion-select-option",{value:e.familyId},e.familyName))))),t("app-form-item",{"label-text":"Show Old Products",value:this.filter.oldProduct,name:"oldProduct","input-type":"boolean",onFormItemChanged:e=>this.handleFilter(e)})]:[t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("app-select-search",{color:"trasteel",value:this.newFilterCondition.valueName,lines:"none",disabled:this.propertyNames.length==0,selectFn:e=>this.selectPropertyName(e),selectOptions:this.propertyNames,selectValueId:"nameId",selectValueText:["nameName"]})),t("ion-col",{size:"3"},t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",interface:"action-sheet",onIonChange:e=>this.selectOperator(e),value:this.newFilterCondition.operator},t("ion-select-option",{value:">="},t("ion-label",null,">=")),t("ion-select-option",{value:">"},t("ion-label",null,">")),t("ion-select-option",{value:"="},t("ion-label",null,"=")),t("ion-select-option",{value:"<"},t("ion-label",null,"<")),t("ion-select-option",{value:"<="},t("ion-label",null,"<=")))))),t("ion-row",null,t("ion-col",null,t("app-form-item",{value:this.newFilterCondition.value,name:"typical","input-type":"number",onFormItemChanged:e=>this.selectValue(e)})),t("ion-col",{size:"3"},t("ion-button",{"icon-only":true,fill:"outline",onClick:()=>this.addNewProperty(),disabled:!this.showAddNewProperty},t("ion-icon",{name:"add",color:"primary"}))))),t("ion-item-divider",null,t("ion-label",null,"Conditions")),this.filter.properties.map(((e,i)=>t("ion-item",null,t("ion-label",null,a.getDatasheetPropertyNames("id",e.valueName)[0].nameName+" "+e.operator+" "+e.value),t("ion-button",{"icon-only":true,fill:"clear",onClick:()=>this.deleteCondition(i)},t("ion-icon",{name:"trash",color:"danger"})))))])),t("ion-footer",{key:"da2805bfd53d16b7802eebd456ed730f1642bc4e"},t("app-modal-footer",{key:"d2df19e292e0472f08967e4ed65ba3baa0b62d09",saveTag:{tag:"filter",text:"Filter"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return o(this)}};h.style=d;export{h as popover_datasheets_filter};