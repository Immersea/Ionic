import{r as e,h as a,f as t}from"./p-cbe60c68.js";import{h as s,U as i,n as c,T as n,f as o,g as r,d,e as p,D as h,a as m,b,c as l,Q as f,O as u,X as g}from"./p-773bd3de.js";import"./p-c7ee7cfe.js";import{b as k}from"./p-c2915cc5.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const j="page-map ion-icon{color:rgba(255, 255, 255, 0.9)}";const y=j;const v=class{constructor(a){e(this,a);this.searchFilters=[];this.searchTags=undefined;this.markers=[];this.userProfile=undefined}mapLoadingCompletedHandler(){this.mapElement?this.mapElement["triggerMapResize"]():undefined}componentWillLoad(){this.filterButtonTypes=s.getMapDocs();this.searchFilters=Object.keys(this.filterButtonTypes);this.userSub$=i.userProfile$.subscribe((e=>{this.userProfile=new c(e)}))}async componentDidLoad(){this.filterElement=this.el.getElementsByTagName("app-search-filter")[0];await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("app-map");this.filter()}disconnectedCallback(){this.userSub$.unsubscribe()}async addItem(e){let a=null;switch(e){case f:a={tag:"dive-site",text:"Dive Site"};break;case b:a={tag:"diving-center",text:"Diving Center"};break;case h:a={tag:"dive-community",text:"Dive Community"};break;case d:a={tag:"diving-school",text:"Diving School"};break;case o:a={tag:"service-center",text:"Service Center"};break}const t=await k.create({header:n.getTransl(a.tag,a.text),message:n.getTransl("add-item-message","This will add a new item of type:")+" "+n.getTransl(a.tag,a.text)+". "+n.getTransl("are-you-sure","Are you sure?"),buttons:[{text:n.getTransl("cancel","Cancel"),role:"cancel",handler:()=>{}},{text:n.getTransl("ok","OK"),handler:()=>{switch(e){case f:u.presentDiveSiteUpdate();break;case b:l.presentDivingCenterUpdate();break;case h:m.presentDiveCommunityUpdate();break;case d:p.presentDivingSchoolUpdate();break;case o:r.presentServiceCenterUpdate();break}}}]});t.present()}filter(e){this.searchTags=e?e.detail:[];this.mapElement.updateSearchTags(this.searchTags);this.mapElement.fitToBounds()}render(){return[a("ion-header",{key:"b389ddb4834d7ea69f30b82d89a0ab951418f68a"},a("app-search-filter",{key:"9cdd033d602c7cc133ce87a8c2b9eb0aa22e5534",onSearchFilterEmit:e=>this.filter(e)})),a("ion-content",{key:"c1d5d2e9e7b57355462f3f0502f039bfd71cd52f",fullscreen:true},a("app-map",{key:"38e7ee6039c179eb497f03b1caea7384019ac5d4",pageId:"map",searchTags:this.searchTags}),this.userProfile&&this.userProfile.uid?a("ion-fab",{vertical:"bottom",horizontal:"end",slot:"fixed"},a("ion-fab-button",{class:"fab-icon"},a("ion-icon",{name:"add-circle"})),a("ion-fab-list",{side:"start"},this.searchFilters.map((e=>e!=g?a("ion-fab-button",{style:{"--background":this.filterButtonTypes[e].icon.color},onClick:()=>this.addItem(e)},this.filterButtonTypes[e].icon.type=="ionicon"?a("ion-icon",{name:this.filterButtonTypes[e].icon.name}):a("ion-icon",{class:"map-icon "+this.filterButtonTypes[e].icon.name})):undefined)))):undefined)]}get el(){return t(this)}};v.style=y;export{v as page_map};