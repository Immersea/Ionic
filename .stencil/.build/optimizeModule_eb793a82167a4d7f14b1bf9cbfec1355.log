import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{E as c}from"./p-46038295.js";import{Q as o,V as d,S as n}from"./p-736235c6.js";import{l as r}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1819cfda.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const h="modal-datasheet-category ion-list{width:100%}";const l=h;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetCategories=undefined;this.datasheetCategory=undefined;this.updateView=true;this.validDatasheetCategory=false}async componentWillLoad(){await this.loadDatasheetCategories()}async loadDatasheetCategories(){await o.downloadDatasheetSettings();this.datasheetCategories=r.exports.cloneDeep(o.getDatasheetCategories());if(this.datasheetCategories&&this.datasheetCategories.length>0){this.datasheetCategory=this.datasheetCategories[0]}else{this.addDatasheetCategory()}this.validateDatasheet()}selectType(e){this.datasheetCategory=this.datasheetCategories.find((t=>t.categoriesId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="categoriesId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetCategory[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetCategory=r.exports.isString(this.datasheetCategory.categoriesId)&&r.exports.isString(this.datasheetCategory.categoriesName);this.updateView=!this.updateView}addDatasheetCategory(){this.datasheetCategory=new d;this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}duplicateDatasheetCategory(){this.datasheetCategory=r.exports.cloneDeep(this.datasheetCategory);this.datasheetCategory.categoriesId=this.datasheetCategory.categoriesId+"_rev.";this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}async deleteDatasheetCategory(){try{this.datasheetCategories.splice(this.index,1);this.index=0;this.datasheetCategory=this.datasheetCategories[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await o.uploadDatasheetSettings("category",this.datasheetCategories);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"137debf5c1108bf04db70be2b7c9207dadb9620d"},t("ion-content",{key:"7fde290a9393464abaddfda5ca3504b2ec4509d1"},t("ion-grid",{key:"1559fcdeb94d2424ecedb3feec8db0e0872f5e47"},t("ion-row",{key:"6c72f36fe24523f29fd2763e7efee98f3dbfa4e7"},t("ion-col",{key:"209bd167ec5ece44414011859a44a720bc65d47c"},t("app-select-search",{key:"e77f27ca33be9e7e01e2e3189a6e6cc6f8721670",color:"trasteel",label:{tag:"datasheet_category",text:"Datasheet Category"},value:this.index?this.datasheetCategories[this.index].categoriesId:this.datasheetCategories[0].categoriesId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetCategories,selectValueId:"categoriesId",selectValueText:["categoriesName"],disabled:!this.validDatasheetCategory})),t("ion-col",{key:"5e9310310a1b9729432b146cf52788e329a592c4",size:"1",class:"ion-text-center"},t("ion-button",{key:"c52b55d9523b82e5e92cd6533facd7a198fec79e",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.addDatasheetCategory()},t("ion-icon",{key:"864e5f8a999a458b2a458f025e3826ceae5c7cf5",name:"add",slot:"start"}))),t("ion-col",{key:"c23ffcc8c364e26644f159397903dfc8f683b19a",size:"1",class:"ion-text-center"},t("ion-button",{key:"19451ac1f409a6ab8cd1c635617549ea874e92da",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.duplicateDatasheetCategory()},t("ion-icon",{key:"53cc533c3d1aceb4e8210f576e540d4389d6600a",slot:"start",name:"duplicate"}))),t("ion-col",{key:"707d1724c7f9c797f9f8db6a219167d03127a9ef",size:"1",class:"ion-text-center"},t("ion-button",{key:"197afad6562219269b86d3eae9998e9f57ed30c5",fill:"clear",color:"danger",disabled:this.datasheetCategories.length==0,onClick:()=>this.deleteDatasheetCategory()},t("ion-icon",{key:"76b2a48a9be427c825995950931bff9bf664a229",slot:"start",name:"trash"}))))),t("app-form-item",{key:"0aedb3b1fa3e0a1436274df70df51bc620dbd4dc","label-text":"ID",value:this.datasheetCategory.categoriesId,name:"categoriesId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"categoriesId",list:o.getDatasheetCategories()}}]}),t("app-form-item",{key:"cfa6eea052e2371f7f4bb8f4ce11d0887cce8c9b","label-text":"Name",value:this.datasheetCategory.categoriesName,name:"categoriesName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"8069c95b5eafdb3106943b23b2eae34ccbff6e46",color:c.getAppColor(),disableSave:!this.validDatasheetCategory,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=l;export{f as modal_datasheet_category};