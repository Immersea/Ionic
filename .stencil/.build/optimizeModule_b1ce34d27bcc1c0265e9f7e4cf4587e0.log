import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as c}from"./p-1af05547.js";import{ah as o,aj as n,S as l,T as r}from"./p-7f2140c8.js";import{E as d}from"./p-9c15ca07.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-245f2376.js";import"./p-7ee16e8d.js";const f="modal-project-bricksallocationarea ion-list{width:100%}";const h=f;const b=class{constructor(t){e(this,t);this.index=0;this.bricksAllocationAreas=undefined;this.bricksAllocationArea=undefined;this.updateView=true;this.validBricksAllocationArea=false}async componentWillLoad(){await this.loadBricksAllocationAreas()}async loadBricksAllocationAreas(){await o.downloadProjectSettings();this.bricksAllocationAreas=c.exports.cloneDeep(o.getBricksAllocationAreas());if(this.bricksAllocationAreas&&this.bricksAllocationAreas.length>0){this.bricksAllocationArea=this.bricksAllocationAreas[0]}else{this.addBricksAllocationArea()}this.validateProject()}selectType(e){this.bricksAllocationArea=this.bricksAllocationAreas[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="familyId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.bricksAllocationArea[t]=i;this.validateProject()}validateProject(){this.validBricksAllocationArea=c.exports.isString(this.bricksAllocationArea.bricksAllocationAreaId)&&c.exports.isString(this.bricksAllocationArea.bricksAllocationAreaId);this.updateView=!this.updateView}addBricksAllocationArea(){this.bricksAllocationArea=new n;this.bricksAllocationAreas.push(this.bricksAllocationArea);this.index=this.bricksAllocationAreas.length-1}duplicateBricksAllocationArea(){this.bricksAllocationArea=c.exports.cloneDeep(this.bricksAllocationArea);this.bricksAllocationArea.bricksAllocationAreaId=this.bricksAllocationArea.bricksAllocationAreaId+"_rev.";this.bricksAllocationAreas.push(this.bricksAllocationArea);this.index=this.bricksAllocationAreas.length-1}async deleteBricksAllocationArea(){try{this.bricksAllocationAreas.splice(this.index,1);this.index=0;this.bricksAllocationArea=this.bricksAllocationAreas[0];this.validateProject()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await o.uploadProjectSettings("bricksAllocationArea",this.bricksAllocationAreas);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"92af6f329043f77c7cf6bd901d460186d136972f"},t("ion-content",{key:"5e4216d59c684d07531a4003a6965c5dd967ef72"},t("ion-grid",{key:"714a64713e8172831c2ed91f25f95cf751cb6a6c"},t("ion-row",{key:"9fbd492755fff719ff9862c71cf418b1bcf5a093"},t("ion-col",{key:"07d2135a486e970f25689d5ab5210a8e9c481044"},t("ion-item",{key:"4e7e8f294b3a6f4d4b0514b02bd6e094c0c25d58",lines:"none"},t("ion-select",{key:"5aecf7a84a231c74eaf44330eda44c55c21df5fa",color:"trasteel",id:"selectType",interface:"action-sheet",label:r.getTransl("project_bricksallocationarea","Project Bricks Allocation Area"),disabled:!this.validBricksAllocationArea,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.bricksAllocationAreas.map(((e,i)=>t("ion-select-option",{value:i},e.bricksAllocationAreaId+" | "+e.bricksAllocationAreaName.en)))))),t("ion-col",{key:"75546428202d47494e8de53856ac0952ea97e8e0",size:"1",class:"ion-text-center"},t("ion-button",{key:"f2ec4bd000ea68a1e857ca20bdd99eeba6b6a119",fill:"clear",disabled:!this.validBricksAllocationArea,onClick:()=>this.addBricksAllocationArea()},t("ion-icon",{key:"9bffec05b189aa7a71980cb5d1ee7cc8a18405c7",name:"add",slot:"start"}))),t("ion-col",{key:"5b72496dcc608999bb8fd86477c4e3b8f91eb63c",size:"1",class:"ion-text-center"},t("ion-button",{key:"20ae3baad9610f0019152529f74ef4f0a143dc09",fill:"clear",disabled:!this.validBricksAllocationArea,onClick:()=>this.duplicateBricksAllocationArea()},t("ion-icon",{key:"b0afa2787524ea2b6124ef6defa5ead9391667cd",slot:"start",name:"duplicate"}))),t("ion-col",{key:"16e6054383926b9b569efcb9e5eceb8ace1122c0",size:"1",class:"ion-text-center"},t("ion-button",{key:"ecb274e80482bc1c5d6fd26e59da2c5faa880523",fill:"clear",color:"danger",disabled:this.bricksAllocationAreas.length==0,onClick:()=>this.deleteBricksAllocationArea()},t("ion-icon",{key:"f4f4dfa1dd5a669ac115e21e1ae791d56418607b",slot:"start",name:"trash"}))))),t("app-form-item",{key:"fe645a36660cb4fe9135ced3545ff9e5b4c2f306","label-text":"ID",value:this.bricksAllocationArea.bricksAllocationAreaId,name:"bricksAllocationAreaId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"bricksAllocationAreaId",list:o.getBricksAllocationAreas()}}]}),t("app-form-item",{key:"0a4a514ec663d56a0c0560d30239702076e7625a","label-text":"Name",value:this.bricksAllocationArea.bricksAllocationAreaName,name:"bricksAllocationAreaName","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"4cffe6ceeed649b24a5c88dde6ff25da4f195942",color:d.getAppColor(),disableSave:!this.validBricksAllocationArea,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};b.style=h;export{b as modal_project_bricksallocationarea};