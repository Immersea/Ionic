import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{E as c}from"./p-714ce41b.js";import{Q as o,V as d,S as n}from"./p-0287979e.js";import{l as r}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-084d415b.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const h="modal-datasheet-category ion-list{width:100%}";const l=h;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetCategories=undefined;this.datasheetCategory=undefined;this.updateView=true;this.validDatasheetCategory=false}async componentWillLoad(){await this.loadDatasheetCategories()}async loadDatasheetCategories(){await o.downloadDatasheetSettings();this.datasheetCategories=r.exports.cloneDeep(o.getDatasheetCategories());if(this.datasheetCategories&&this.datasheetCategories.length>0){this.datasheetCategory=this.datasheetCategories[0]}else{this.addDatasheetCategory()}this.validateDatasheet()}selectType(e){this.datasheetCategory=this.datasheetCategories.find((t=>t.categoriesId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="categoriesId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetCategory[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetCategory=r.exports.isString(this.datasheetCategory.categoriesId)&&r.exports.isString(this.datasheetCategory.categoriesName);this.updateView=!this.updateView}addDatasheetCategory(){this.datasheetCategory=new d;this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}duplicateDatasheetCategory(){this.datasheetCategory=r.exports.cloneDeep(this.datasheetCategory);this.datasheetCategory.categoriesId=this.datasheetCategory.categoriesId+"_rev.";this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}async deleteDatasheetCategory(){try{this.datasheetCategories.splice(this.index,1);this.index=0;this.datasheetCategory=this.datasheetCategories[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await o.uploadDatasheetSettings("category",this.datasheetCategories);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"97098fcc5c6efb20958ba923bb24fa0ff6dc11c1"},t("ion-content",{key:"5f1efd9fe715606b463e6afb0edc2cb874011182"},t("ion-grid",{key:"37f9742fc4c522210184d598e6b9f36107a20505"},t("ion-row",{key:"71236853f7e5c2700206f042008c029e9e8856f5"},t("ion-col",{key:"714d57dc80fdaf1fb5ba84de2a2198c8aecc71d9"},t("app-select-search",{key:"d5b650a9a4d122b0b90afc8027f21ee1663bd1c0",color:"trasteel",label:{tag:"datasheet_category",text:"Datasheet Category"},value:this.index?this.datasheetCategories[this.index].categoriesId:this.datasheetCategories[0].categoriesId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetCategories,selectValueId:"categoriesId",selectValueText:["categoriesName"],disabled:!this.validDatasheetCategory})),t("ion-col",{key:"e2809892d702c92d75f9629853601373ba323d30",size:"1",class:"ion-text-center"},t("ion-button",{key:"1c69ee89f6ea7aa71e0a2b53e160c9c8568d849b",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.addDatasheetCategory()},t("ion-icon",{key:"18ebf6cdb5241551c08f773dd58425f018cc74ff",name:"add",slot:"start"}))),t("ion-col",{key:"cd05223c472a9a0e53a2022dc6d0d0ea563b9a75",size:"1",class:"ion-text-center"},t("ion-button",{key:"c358648fdd6286e497f606466b18f786317c85dd",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.duplicateDatasheetCategory()},t("ion-icon",{key:"ca1bd593fc75c24bad4b65a1ca978dae4fcb61b5",slot:"start",name:"duplicate"}))),t("ion-col",{key:"f555db2509f9b241dc38eb21ba99268610a615c9",size:"1",class:"ion-text-center"},t("ion-button",{key:"8369f8d00810ee8072113d36901090bdcad83f9b",fill:"clear",color:"danger",disabled:this.datasheetCategories.length==0,onClick:()=>this.deleteDatasheetCategory()},t("ion-icon",{key:"cddde62c99eed7abe70c4054e0f74834d03e9c63",slot:"start",name:"trash"}))))),t("app-form-item",{key:"9923378d5dd3b802a4671fe45c9a3060a0bda4b1","label-text":"ID",value:this.datasheetCategory.categoriesId,name:"categoriesId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"categoriesId",list:o.getDatasheetCategories()}}]}),t("app-form-item",{key:"127609ab8369a7d546f06e0c7f49a753ccaaaeba","label-text":"Name",value:this.datasheetCategory.categoriesName,name:"categoriesName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"ba1c9a63d7d003398d0a0481eef16f3de8568e22",color:c.getAppColor(),disableSave:!this.validDatasheetCategory,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=l;export{f as modal_datasheet_category};