import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{E as c}from"./p-a9f4af61.js";import{Q as d,X as l,S as f}from"./p-30358c9d.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const n="modal-datasheet-majorfamily ion-list{width:100%}";const r=n;const h=class{constructor(t){e(this,t);this.index=0;this.datasheetMajorFamilies=undefined;this.datasheetMajorFamily=undefined;this.updateView=true;this.validDatasheetMajorFamily=false}async componentWillLoad(){await this.loadDatasheetMajorFamilies()}async loadDatasheetMajorFamilies(){await d.downloadDatasheetSettings();this.datasheetMajorFamilies=o.exports.cloneDeep(d.getDatasheetMajorFamilies());if(this.datasheetMajorFamilies&&this.datasheetMajorFamilies.length>0){this.datasheetMajorFamily=this.datasheetMajorFamilies[0]}else{this.addDatasheetMajorFamily()}this.validateDatasheet()}selectType(e){this.datasheetMajorFamily=this.datasheetMajorFamilies.find((t=>t.majorFamilyId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="majorFamilyId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetMajorFamily[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetMajorFamily=o.exports.isString(this.datasheetMajorFamily.majorFamilyId)&&o.exports.isString(this.datasheetMajorFamily.majorFamilyName);this.updateView=!this.updateView}addDatasheetMajorFamily(){this.datasheetMajorFamily=new l;this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}duplicateDatasheetMajorFamily(){this.datasheetMajorFamily=o.exports.cloneDeep(this.datasheetMajorFamily);this.datasheetMajorFamily.majorFamilyId=this.datasheetMajorFamily.majorFamilyId+"_rev.";this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}async deleteDatasheetMajorFamily(){try{this.datasheetMajorFamilies.splice(this.index,1);this.index=0;this.datasheetMajorFamily=this.datasheetMajorFamilies[0];this.validateDatasheet()}catch(e){if(e)f.presentAlertError(e)}}async save(e=true){await d.uploadDatasheetSettings("majorfamily",this.datasheetMajorFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"ac34391256aa5a1e131c2b525157d98fb23d8364"},t("ion-content",{key:"8e496560b66b7259fe92298d7c1ad48cffabbfa4"},t("ion-grid",{key:"bf2fc63ffaaf05ce4df2689c75d43d25ceacf58b"},t("ion-row",{key:"2d8c329e78bdebfca49e95437145b3d99bc57d9c"},t("ion-col",{key:"b7b7bbba8c751402d1acbe298477101b699033d9"},t("app-select-search",{key:"0934efab96b2da78300904a74c10cf091bfea95e",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetMajorFamilies[this.index].majorFamilyId:this.datasheetMajorFamilies[0].majorFamilyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetMajorFamilies,selectValueId:"majorFamilyId",selectValueText:["majorFamilyName"],disabled:!this.validDatasheetMajorFamily})),t("ion-col",{key:"f26b3107b5bea715dac38375b31cb4417710f906",size:"1",class:"ion-text-center"},t("ion-button",{key:"91ffb7e4466f223df8ab23b317edb1009348d131",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.addDatasheetMajorFamily()},t("ion-icon",{key:"6ced46d51738f3feabcfa5d6f7fa6833a331bd59",name:"add",slot:"start"}))),t("ion-col",{key:"e19cf6366f74a4a54a44510969a56a1f540f6a1f",size:"1",class:"ion-text-center"},t("ion-button",{key:"26f1f7af3617ed2fe6ec58df9b7004157f6efb8d",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.duplicateDatasheetMajorFamily()},t("ion-icon",{key:"e21e56c27f5dc151bad64d6c6ed0c1cc433b7f08",slot:"start",name:"duplicate"}))),t("ion-col",{key:"2046bdf80a91702f46710b5fd4335559273514a6",size:"1",class:"ion-text-center"},t("ion-button",{key:"66314c4065c991f692bba8bdd66848132611e7b0",fill:"clear",color:"danger",disabled:this.datasheetMajorFamilies.length==0,onClick:()=>this.deleteDatasheetMajorFamily()},t("ion-icon",{key:"b1b146d01706a7ff78fb056798891d352fe65d13",slot:"start",name:"trash"}))))),t("app-form-item",{key:"d3c30fb3e66cce305a2174a10c28c40d0d98fc3a","label-text":"ID",value:this.datasheetMajorFamily.majorFamilyId,name:"majorFamilyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"majorFamilyId",list:d.getDatasheetMajorFamilies()}}]}),t("app-form-item",{key:"c1ff6191cc57d4052732c6b850f9ebfde2304ae6","label-text":"Name",value:this.datasheetMajorFamily.majorFamilyName,name:"majorFamilyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"925da435685fbfaa03064f374a428157d07bea1b",color:c.getAppColor(),disableSave:!this.validDatasheetMajorFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};h.style=r;export{h as modal_datasheet_majorfamily};