{"version":3,"names":["pageServiceCenterDetailsCss","PageServiceCenterDetailsStyle0","PageServiceCenterDetails","this","admin","markers","tag","componentWillLoad","ServiceCentersService","selectedServiceCenter","scSubscription","selectedServiceCenter$","subscribe","sc","displayName","serviceCenter","centerid","selectedServiceCenterId","titles","getServiceCenter","userRoles","UserService","icon","UDiveFilterService","getMapDocs","SERVICECENTERSCOLLECTION","size","push","latitude","position","geopoint","longitude","componentDidLoad","slider","Swiper","speed","spaceBetween","allowTouchMove","autoHeight","customElements","whenDefined","mapElement","el","querySelector","mapContainer","setAttribute","mapHeight","then","triggerMapResize","disconnectedCallback","unsubscribe","render","h","key","item","color","class","coverURL","slot","onClick","RouterService","goBack","name","presentServiceCenterUpdate","undefined","swiper","vertical","horizontal","style","marginTop","fabButtonTopMarginString","text","description","email","button","href","phoneNumber","website","target","facebook","instagram","twitter","id","pageId","center","show","expand","fill","deleteServiceCenter","isLabel"],"sources":["src/components/udive/pages/service-center/page-service-center-details/page-service-center-details.scss?tag=page-service-center-details","src/components/udive/pages/service-center/page-service-center-details/page-service-center-details.tsx"],"sourcesContent":["page-service-center-details {\n  ion-segment-button {\n    --color-checked: var(--ion-color-servicecenter-contrast);\n  }\n}\n","import {Component, h, Prop, State, Element} from \"@stencil/core\";\nimport {UserRoles} from \"../../../../../interfaces/common/user/user-roles\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  ServiceCentersService,\n  SERVICECENTERSCOLLECTION,\n} from \"../../../../../services/udive/serviceCenters\";\nimport {ServiceCenter} from \"../../../../../interfaces/udive/service-center/serviceCenter\";\nimport {Marker} from \"../../../../../interfaces/interfaces\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {UDiveFilterService} from \"../../../../../services/udive/ud-db-filter\";\nimport {\n  mapHeight,\n  fabButtonTopMarginString,\n} from \"../../../../../helpers/utils\";\nimport {Subscription} from \"rxjs\";\nimport Swiper from \"swiper\";\n\n@Component({\n  tag: \"page-service-center-details\",\n  styleUrl: \"page-service-center-details.scss\",\n})\nexport class PageServiceCenterDetails {\n  @Element() el: HTMLElement;\n  @Prop() centerid: string;\n  admin = false;\n  @State() serviceCenter: ServiceCenter;\n  @State() titles = [{tag: \"map\"}, {tag: \"information\"}, {tag: \"team\"}];\n  @State() slider: Swiper;\n  userRoles: UserRoles;\n  markers: Marker[] = [];\n  mapElement: HTMLAppMapElement;\n  scSubscription: Subscription;\n\n  async componentWillLoad() {\n    //check if admin page or user details page\n    if (ServiceCentersService.selectedServiceCenter) {\n      //admin page\n      this.admin = true;\n      this.scSubscription =\n        ServiceCentersService.selectedServiceCenter$.subscribe((sc) => {\n          if (sc && sc.displayName) {\n            this.serviceCenter = sc;\n            this.centerid = ServiceCentersService.selectedServiceCenterId;\n          }\n        });\n    } else {\n      this.admin = false;\n      delete this.titles[2];\n      this.serviceCenter = await ServiceCentersService.getServiceCenter(\n        this.centerid\n      );\n    }\n\n    this.userRoles = UserService.userRoles;\n    let icon = UDiveFilterService.getMapDocs()[SERVICECENTERSCOLLECTION]\n      .icon as any;\n    icon.size = \"large\";\n    this.markers.push({\n      icon: icon,\n      latitude: this.serviceCenter.position.geopoint.latitude,\n      longitude: this.serviceCenter.position.geopoint.longitude,\n    });\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-service-center\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: false,\n      autoHeight: true,\n    });\n    //reset map height inside slide\n    await customElements.whenDefined(\"app-map\");\n    this.mapElement = this.el.querySelector(\"#map\");\n    const mapContainer = this.el.querySelector(\"#map-container\");\n    mapContainer.setAttribute(\n      \"style\",\n      \"height: \" + mapHeight(this.serviceCenter) + \"px\"\n    ); //-cover photo -slider  - title\n    this.mapElement[\"mapLoaded\"]().then(() => {\n      this.mapElement.triggerMapResize();\n    });\n    this.mapElement.triggerMapResize();\n  }\n\n  disconnectedCallback() {\n    if (this.scSubscription) this.scSubscription.unsubscribe();\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <app-item-cover item={this.serviceCenter}></app-item-cover>\n      </ion-header>,\n      <ion-header>\n        <ion-toolbar color=\"servicecenter\" class=\"no-safe-padding\">\n          {this.serviceCenter && !this.serviceCenter.coverURL\n            ? [\n                <ion-buttons slot=\"start\">\n                  {this.admin ? (\n                    <ion-menu-button />\n                  ) : (\n                    <ion-button\n                      onClick={() => RouterService.goBack()}\n                      icon-only\n                    >\n                      <ion-icon name=\"arrow-back\"></ion-icon>\n                    </ion-button>\n                  )}\n                </ion-buttons>,\n                <ion-buttons slot=\"end\">\n                  {this.admin ? (\n                    <ion-button\n                      onClick={() =>\n                        ServiceCentersService.presentServiceCenterUpdate(\n                          this.centerid\n                        )\n                      }\n                      icon-only\n                    >\n                      <ion-icon name=\"create\"></ion-icon>\n                    </ion-button>\n                  ) : undefined}\n                </ion-buttons>,\n              ]\n            : undefined}\n          <ion-title>{this.serviceCenter.displayName}</ion-title>\n        </ion-toolbar>\n      </ion-header>,\n      <app-header-segment-toolbar\n        color=\"servicecenter\"\n        swiper={this.slider}\n        titles={this.titles}\n      ></app-header-segment-toolbar>,\n      <ion-content class=\"slides\">\n        {this.serviceCenter && this.serviceCenter.coverURL ? (\n          <ion-fab\n            vertical=\"top\"\n            horizontal=\"start\"\n            slot=\"fixed\"\n            style={{marginTop: fabButtonTopMarginString(2)}}\n          >\n            {this.admin ? (\n              <ion-fab-button class=\"fab-icon\">\n                <ion-menu-button />\n              </ion-fab-button>\n            ) : (\n              <ion-fab-button\n                onClick={() => RouterService.goBack()}\n                class=\"fab-icon\"\n              >\n                <ion-icon name=\"arrow-back-circle-outline\"></ion-icon>\n              </ion-fab-button>\n            )}\n          </ion-fab>\n        ) : undefined}\n        {this.admin ? (\n          <ion-fab\n            vertical=\"top\"\n            horizontal=\"end\"\n            slot=\"fixed\"\n            style={{marginTop: fabButtonTopMarginString(2)}}\n          >\n            <ion-fab-button\n              onClick={() =>\n                ServiceCentersService.presentServiceCenterUpdate(this.centerid)\n              }\n              class=\"fab-icon\"\n            >\n              <ion-icon name=\"create\"></ion-icon>\n            </ion-fab-button>\n          </ion-fab>\n        ) : undefined}\n        <swiper-container class=\"slider-service-center swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              <ion-list class=\"ion-no-padding\">\n                <ion-list-header>\n                  <ion-label color=\"servicecenter\">\n                    <my-transl\n                      tag=\"general-information\"\n                      text=\"General Information\"\n                    />\n                  </ion-label>\n                </ion-list-header>\n                <ion-item>\n                  <ion-label class=\"ion-text-wrap\">\n                    <ion-text color=\"dark\">\n                      <p>{this.serviceCenter.description}</p>\n                    </ion-text>\n                  </ion-label>\n                </ion-item>\n                {this.serviceCenter.email ? (\n                  <ion-item button href={\"mailto:\" + this.serviceCenter.email}>\n                    <ion-icon slot=\"start\" name=\"at-outline\"></ion-icon>\n                    <ion-label>{this.serviceCenter.email}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.serviceCenter.phoneNumber ? (\n                  <ion-item\n                    button\n                    href={\"tel:\" + this.serviceCenter.phoneNumber}\n                  >\n                    <ion-icon slot=\"start\" name=\"call-outline\"></ion-icon>\n                    <ion-label>{this.serviceCenter.phoneNumber}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.serviceCenter.website ? (\n                  <ion-item\n                    button\n                    href={\"http://\" + this.serviceCenter.website}\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"link-outline\"></ion-icon>\n                    <ion-label>{this.serviceCenter.website}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.serviceCenter.facebook ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.facebook.com/\" + this.serviceCenter.facebook\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-facebook\"></ion-icon>\n                    <ion-label>{this.serviceCenter.facebook}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.serviceCenter.instagram ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.instagram.com/\" +\n                      this.serviceCenter.instagram\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-instagram\"></ion-icon>\n                    <ion-label>{this.serviceCenter.instagram}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.serviceCenter.twitter ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.twitter.com/\" + this.serviceCenter.twitter\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-twitter\"></ion-icon>\n                    <ion-label>@{this.serviceCenter.twitter}</ion-label>\n                  </ion-item>\n                ) : undefined}\n              </ion-list>\n            </swiper-slide>\n\n            <swiper-slide class=\"swiper-slide\">\n              <div id=\"map-container\">\n                <app-map\n                  id=\"map\"\n                  pageId=\"dive-site-details\"\n                  center={this.serviceCenter}\n                  markers={this.markers}\n                ></app-map>\n              </div>\n            </swiper-slide>\n            {this.admin ? (\n              <swiper-slide class=\"swiper-slide\">\n                <app-users-list\n                  item={this.serviceCenter}\n                  show={[\"owner\", \"editor\"]}\n                />\n              </swiper-slide>\n            ) : undefined}\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n      this.admin ? (\n        <ion-footer class=\"ion-no-border\">\n          <ion-toolbar>\n            <ion-button\n              expand=\"block\"\n              fill=\"solid\"\n              color=\"danger\"\n              onClick={() =>\n                ServiceCentersService.deleteServiceCenter(this.centerid)\n              }\n            >\n              <ion-icon slot=\"start\" name=\"trash\"></ion-icon>\n              <my-transl tag=\"delete\" text=\"Delete\" isLabel></my-transl>\n            </ion-button>\n          </ion-toolbar>\n        </ion-footer>\n      ) : undefined,\n    ];\n  }\n}\n"],"mappings":"8dAAA,MAAMA,EAA8B,0GACpC,MAAAC,EAAeD,E,MCqBFE,EAAwB,M,yBAGnCC,KAAAC,MAAQ,MAKRD,KAAAE,QAAoB,G,iEAHF,CAAC,CAACC,IAAK,OAAQ,CAACA,IAAK,eAAgB,CAACA,IAAK,S,sBAO7D,uBAAMC,GAEJ,GAAIC,EAAsBC,sBAAuB,CAE/CN,KAAKC,MAAQ,KACbD,KAAKO,eACHF,EAAsBG,uBAAuBC,WAAWC,IACtD,GAAIA,GAAMA,EAAGC,YAAa,CACxBX,KAAKY,cAAgBF,EACrBV,KAAKa,SAAWR,EAAsBS,uB,SAGvC,CACLd,KAAKC,MAAQ,aACND,KAAKe,OAAO,GACnBf,KAAKY,oBAAsBP,EAAsBW,iBAC/ChB,KAAKa,S,CAITb,KAAKiB,UAAYC,EAAYD,UAC7B,IAAIE,EAAOC,EAAmBC,aAAaC,GACxCH,KACHA,EAAKI,KAAO,QACZvB,KAAKE,QAAQsB,KAAK,CAChBL,KAAMA,EACNM,SAAUzB,KAAKY,cAAcc,SAASC,SAASF,SAC/CG,UAAW5B,KAAKY,cAAcc,SAASC,SAASC,W,CAIpD,sBAAMC,GACJ7B,KAAK8B,OAAS,IAAIC,EAAO,yBAA0B,CACjDC,MAAO,IACPC,aAAc,IACdC,eAAgB,MAChBC,WAAY,aAGRC,eAAeC,YAAY,WACjCrC,KAAKsC,WAAatC,KAAKuC,GAAGC,cAAc,QACxC,MAAMC,EAAezC,KAAKuC,GAAGC,cAAc,kBAC3CC,EAAaC,aACX,QACA,WAAaC,EAAU3C,KAAKY,eAAiB,MAE/CZ,KAAKsC,WAAW,eAAeM,MAAK,KAClC5C,KAAKsC,WAAWO,kBAAkB,IAEpC7C,KAAKsC,WAAWO,kB,CAGlB,oBAAAC,GACE,GAAI9C,KAAKO,eAAgBP,KAAKO,eAAewC,a,CAG/C,MAAAC,GACE,MAAO,CACLC,EAAA,cAAAC,IAAA,4CACED,EAAA,kBAAAC,IAAA,2CAAgBC,KAAMnD,KAAKY,iBAE7BqC,EAAA,cAAAC,IAAA,4CACED,EAAA,eAAAC,IAAA,2CAAaE,MAAM,gBAAgBC,MAAM,mBACtCrD,KAAKY,gBAAkBZ,KAAKY,cAAc0C,SACvC,CACEL,EAAA,eAAaM,KAAK,SACfvD,KAAKC,MACJgD,EAAA,wBAEAA,EAAA,cACEO,QAAS,IAAMC,EAAcC,SAAQ,kBAGrCT,EAAA,YAAUU,KAAK,iBAIrBV,EAAA,eAAaM,KAAK,OACfvD,KAAKC,MACJgD,EAAA,cACEO,QAAS,IACPnD,EAAsBuD,2BACpB5D,KAAKa,UACN,kBAIHoC,EAAA,YAAUU,KAAK,YAEfE,YAGRA,UACJZ,EAAA,aAAAC,IAAA,4CAAYlD,KAAKY,cAAcD,eAGnCsC,EAAA,8BAAAC,IAAA,2CACEE,MAAM,gBACNU,OAAQ9D,KAAK8B,OACbf,OAAQf,KAAKe,SAEfkC,EAAA,eAAAC,IAAA,2CAAaG,MAAM,UAChBrD,KAAKY,eAAiBZ,KAAKY,cAAc0C,SACxCL,EAAA,WACEc,SAAS,MACTC,WAAW,QACXT,KAAK,QACLU,MAAO,CAACC,UAAWC,EAAyB,KAE3CnE,KAAKC,MACJgD,EAAA,kBAAgBI,MAAM,YACpBJ,EAAA,yBAGFA,EAAA,kBACEO,QAAS,IAAMC,EAAcC,SAC7BL,MAAM,YAENJ,EAAA,YAAUU,KAAK,gCAInBE,UACH7D,KAAKC,MACJgD,EAAA,WACEc,SAAS,MACTC,WAAW,MACXT,KAAK,QACLU,MAAO,CAACC,UAAWC,EAAyB,KAE5ClB,EAAA,kBACEO,QAAS,IACPnD,EAAsBuD,2BAA2B5D,KAAKa,UAExDwC,MAAM,YAENJ,EAAA,YAAUU,KAAK,aAGjBE,UACJZ,EAAA,oBAAAC,IAAA,2CAAkBG,MAAM,gCACtBJ,EAAA,kBAAAC,IAAA,2CAAgBG,MAAM,kBACpBJ,EAAA,gBAAAC,IAAA,2CAAcG,MAAM,gBAClBJ,EAAA,YAAAC,IAAA,2CAAUG,MAAM,kBACdJ,EAAA,mBAAAC,IAAA,4CACED,EAAA,aAAAC,IAAA,2CAAWE,MAAM,iBACfH,EAAA,aAAAC,IAAA,2CACE/C,IAAI,sBACJiE,KAAK,0BAIXnB,EAAA,YAAAC,IAAA,4CACED,EAAA,aAAAC,IAAA,2CAAWG,MAAM,iBACfJ,EAAA,YAAAC,IAAA,2CAAUE,MAAM,QACdH,EAAA,KAAAC,IAAA,4CAAIlD,KAAKY,cAAcyD,gBAI5BrE,KAAKY,cAAc0D,MAClBrB,EAAA,YAAUsB,OAAM,KAACC,KAAM,UAAYxE,KAAKY,cAAc0D,OACpDrB,EAAA,YAAUM,KAAK,QAAQI,KAAK,eAC5BV,EAAA,iBAAYjD,KAAKY,cAAc0D,QAE/BT,UACH7D,KAAKY,cAAc6D,YAClBxB,EAAA,YACEsB,OAAM,KACNC,KAAM,OAASxE,KAAKY,cAAc6D,aAElCxB,EAAA,YAAUM,KAAK,QAAQI,KAAK,iBAC5BV,EAAA,iBAAYjD,KAAKY,cAAc6D,cAE/BZ,UACH7D,KAAKY,cAAc8D,QAClBzB,EAAA,YACEsB,OAAM,KACNC,KAAM,UAAYxE,KAAKY,cAAc8D,QACrCC,OAAO,UAEP1B,EAAA,YAAUM,KAAK,QAAQI,KAAK,iBAC5BV,EAAA,iBAAYjD,KAAKY,cAAc8D,UAE/Bb,UACH7D,KAAKY,cAAcgE,SAClB3B,EAAA,YACEsB,OAAM,KACNC,KACE,4BAA8BxE,KAAKY,cAAcgE,SAEnDD,OAAO,UAEP1B,EAAA,YAAUM,KAAK,QAAQI,KAAK,kBAC5BV,EAAA,iBAAYjD,KAAKY,cAAcgE,WAE/Bf,UACH7D,KAAKY,cAAciE,UAClB5B,EAAA,YACEsB,OAAM,KACNC,KACE,6BACAxE,KAAKY,cAAciE,UAErBF,OAAO,UAEP1B,EAAA,YAAUM,KAAK,QAAQI,KAAK,mBAC5BV,EAAA,iBAAYjD,KAAKY,cAAciE,YAE/BhB,UACH7D,KAAKY,cAAckE,QAClB7B,EAAA,YACEsB,OAAM,KACNC,KACE,2BAA6BxE,KAAKY,cAAckE,QAElDH,OAAO,UAEP1B,EAAA,YAAUM,KAAK,QAAQI,KAAK,iBAC5BV,EAAA,qBAAajD,KAAKY,cAAckE,UAEhCjB,YAIRZ,EAAA,gBAAAC,IAAA,2CAAcG,MAAM,gBAClBJ,EAAA,OAAAC,IAAA,2CAAK6B,GAAG,iBACN9B,EAAA,WAAAC,IAAA,2CACE6B,GAAG,MACHC,OAAO,oBACPC,OAAQjF,KAAKY,cACbV,QAASF,KAAKE,YAInBF,KAAKC,MACJgD,EAAA,gBAAcI,MAAM,gBAClBJ,EAAA,kBACEE,KAAMnD,KAAKY,cACXsE,KAAM,CAAC,QAAS,aAGlBrB,aAIV7D,KAAKC,MACHgD,EAAA,cAAYI,MAAM,iBAChBJ,EAAA,mBACEA,EAAA,cACEkC,OAAO,QACPC,KAAK,QACLhC,MAAM,SACNI,QAAS,IACPnD,EAAsBgF,oBAAoBrF,KAAKa,WAGjDoC,EAAA,YAAUM,KAAK,QAAQI,KAAK,UAC5BV,EAAA,aAAW9C,IAAI,SAASiE,KAAK,SAASkB,QAAO,UAIjDzB,U","ignoreList":[]}