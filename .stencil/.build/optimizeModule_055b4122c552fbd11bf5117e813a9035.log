import{r as e,h as t,f as s}from"./p-cbe60c68.js";import{h as a,U as i,n as o,T as n,D as p,a as c}from"./p-736235c6.js";import"./p-c7ee7cfe.js";import{b as r}from"./p-5d4a8e1f.js";import"./p-1819cfda.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-46038295.js";import"./p-694b8ade.js";import"./p-7ee16e8d.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const m="page-gue-map ion-icon{color:rgba(255, 255, 255, 0.9)}";const d=m;const h=class{constructor(t){e(this,t);this.searchFilters=[];this.searchTags=undefined;this.userProfile=undefined}mapLoadingCompletedHandler(){this.mapElement?this.mapElement["triggerMapResize"]():undefined}componentWillLoad(){this.filterButtonTypes=a.getMapDocs();this.searchFilters=Object.keys(this.filterButtonTypes);this.userSub$=i.userProfile$.subscribe((e=>{this.userProfile=new o(e)}))}async componentDidLoad(){await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("app-map");this.filter()}async addItem(e){let t=null;switch(e){case p:t={tag:"dive-community",text:"Dive Community"};break}const s=await r.create({header:n.getTransl(t.tag,t.text),message:n.getTransl("add-item-message","This will add a new item of type:")+" "+n.getTransl(t.tag,t.text)+". "+n.getTransl("are-you-sure","Are you sure?"),buttons:[{text:n.getTransl("cancel","Cancel"),role:"cancel",handler:()=>{}},{text:n.getTransl("ok","OK"),handler:()=>{switch(e){case p:c.presentDiveCommunityUpdate();break}}}]});s.present()}filter(e){this.searchTags=e?e.detail:[];this.mapElement.updateSearchTags(this.searchTags)}render(){return[t("ion-content",{key:"102e1be612756ca9272f7b09ef0407c8a8a6a8e4",fullscreen:true},t("app-map",{key:"55ef5c9508dcc708defa63761eb9477422d1d6a9",pageId:"map",searchTags:this.searchTags}),this.userProfile&&this.userProfile.uid&&i.userRoles.isAgencyAdmin()?t("ion-fab",{vertical:"bottom",horizontal:"end",slot:"fixed"},t("ion-fab-button",{class:"fab-icon",onClick:()=>this.addItem(p)},t("ion-icon",{name:"add-circle"}))):undefined)]}get el(){return s(this)}};h.style=d;export{h as page_gue_map};