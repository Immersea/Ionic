import{r as t,e as i,h as a}from"./p-cbe60c68.js";import{R as e,v as s,x as o,f as r,g as n,d as p,e as c,D as l,a as h,b as d,c as u,Q as m,O as f,z as g,U as b}from"./p-a7a717b1.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const v="app-upload-covers{width:100%}app-upload-covers ion-thumbnail{position:relative;margin-top:-100px;margin-left:auto;margin-right:auto;margin-bottom:0;width:100px;height:100px}app-upload-covers ion-thumbnail img{border-radius:50%;padding:0.08em;border:solid 0.25em lightsteelblue;background-color:white}app-upload-covers ion-thumbnail ion-button{top:50%;left:50%;margin-right:-50%;transform:translate(-50%, -50%);position:absolute !important;color:#141414;font-size:24px}app-upload-covers .cover{position:relative;height:var(--coverHeightModal);background-color:lightblue;background-size:cover;background-position:center;background-repeat:no-repeat;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2);width:100%}app-upload-covers .cover ion-button{bottom:5%;left:10%;margin-right:-50%;transform:translate(-50%, -50%);position:absolute;color:#141414;font-size:24px}app-upload-covers .save-item{top:-150px;text-align:center;position:relative;color:#494848;font-size:20px}";const w=v;const x=class{constructor(a){t(this,a);this.coverUploaded=i(this,"coverUploaded",7);this.uploading=false;this.item=undefined;this.showPhotoURL=true;this.photoURL=undefined;this.coverURL=undefined;this.addressText=undefined}componentWillLoad(){if(this.item){this.photoURL=this.item.photoURL;this.coverURL=this.item.coverURL}}async updatePhotoURL(t){var i=null;if(t=="photo"){i={aspectRatio:1,maxDimensions:300,round:true}}else{i={aspectRatio:16/6,maxDimensions:2e3,round:false}}const a=await e.openModal("modal-upload-image",i);a.onDidDismiss().then((async i=>{if(i&&i.data){this.uploading=true;i.data.toBlob((async i=>{const a=await this.uploadImage(i,t);if(a){if(t=="photo"){this.photoURL=a;this.item.photoURL=this.photoURL}else{this.coverURL=a;this.item.coverURL=this.coverURL}}this.coverUploaded.emit({type:t,url:a});this.uploading=false}),"image/jpeg",50)}}));await a.present()}async uploadImage(t,i){switch(this.item.collection){case g:return await b.updatePhotoURL(i,this.item.id,t);case m:return await f.updatePhotoURL(i,this.item.id,t);case d:return await u.updatePhotoURL(i,this.item.id,t);case l:return await h.updatePhotoURL(i,this.item.id,t);case p:return await c.updatePhotoURL(i,this.item.id,t);case r:return await n.updatePhotoURL(i,this.item.id,t);case s:return await o.updatePhotoURL(r,i,this.item.id,t)}}render(){return[this.uploading?a("ion-progress-bar",{type:"indeterminate"}):undefined,this.item?[a("div",{class:"cover",style:this.item.coverURL?{backgroundImage:"url("+this.item.coverURL+")"}:undefined},a("ion-button",{fill:"clear","icon-only":true,onClick:()=>this.updatePhotoURL("cover"),disabled:!this.item.id},a("ion-icon",{name:"camera",color:"light"}))),!this.item.id?a("div",{class:"save-item"},a("my-transl",{tag:"save-item-error",text:"Please save the item to upload pictures",isLabel:true})):undefined,this.showPhotoURL?a("ion-thumbnail",null,a("img",{src:this.item.photoURL?this.item.photoURL:"assets/images/avatar.png"}),a("ion-button",{fill:"clear","icon-only":true,onClick:()=>this.updatePhotoURL("photo"),disabled:!this.item.id},a("ion-icon",{name:"camera",color:"light"}))):undefined]:undefined]}};x.style=w;export{x as app_upload_covers};