import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s,a as o}from"./p-5d4a8e1f.js";import{m as n,ag as l,p as d}from"./p-736235c6.js";import{E as r}from"./p-46038295.js";import{T as c}from"./p-9a446c6a.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1819cfda.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";class m{getUserRoles(){return["registered","translator","superAdmin"]}}const b=new m;const h="modal-edit-user-roles ion-list{width:100%}";const p=h;const f=class{constructor(t){e(this,t);this.uid=undefined;this.userRoles=undefined;this.updateView=false}async componentWillLoad(){const e=await n.getDocument(l,this.uid);this.userRoles=new d(e)}async save(){await n.updateDocument(l,this.uid,this.userRoles);s.dismiss()}async cancel(){s.dismiss()}async presentActionSheet(){let e=[];let t=[];if(r.isTrasteel()){t=c.getUserRoles()}else if(r.isDecoplanner()||r.isUdive()){t=b.getUserRoles()}t.forEach((t=>{if(!this.userRoles.roles.includes(t)){e.push({text:t,handler:()=>{this.userRoles.roles.push(t);this.updateView=!this.updateView}})}}));e.push({text:"Close",icon:"close",role:"cancel",handler:()=>{}});const i=await o.create({header:"Add",buttons:e});await i.present()}updateLicense(e,t){this.userRoles.licences[e]=t.detail.checked;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="fromDate"){this.userRoles.licences.trial.fromDate=new Date(e.detail.value)}else{this.userRoles.licences.trial[e.detail.name]=e.detail.value}this.updateView=!this.updateView}deleteRole(e){const t=this.itemSliding.getElementsByClassName("item-sliding-"+e)[0];t.closeOpened();this.userRoles.roles.splice(e,1);this.updateView=!this.updateView}render(){return t(i,{key:"620b51b1b778b831a8faa7ac6b06468b88ddc886"},t("ion-header",{key:"8215252786b29657a2028b4a134a636bfe455b10"},t("ion-toolbar",{key:"827d4458bd962bd20720da74f9554566f407ae69",color:r.getAppColor()},t("ion-title",{key:"7bb9461cc2eba3ce95b8dbfe77cb4647d0db4104"},"User Roles Manager"))),t("ion-content",{key:"54aa3045f5e87699d1151b1879f5744100dcd166"},t("ion-list",{key:"8b01c51d60908aaabc568aab446bfef24ec5c2d4"},t("ion-item",{key:"2c3af13120dd710ffa3b5b5c0b79600b4e7396ab"},"uid: ",this.userRoles.uid),t("ion-item",{key:"90dfa36f25fc076019bbf395c2732e0b4741cb1f"},"email: ",this.userRoles.email),!r.isTrasteel&&Object.keys(this.userRoles.licences).length>0?[t("ion-item-divider",null,"User Licences"),Object.keys(this.userRoles.licences).map((e=>e=="trial"?[t("ion-item-divider",null,t("ion-label",null,"Trial")),t("app-form-item",{"label-tag":"duration","label-text":"Duration",value:this.userRoles.licences.trial.duration,name:"duration","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("app-form-item",{"label-tag":"fromDate","label-text":"From Date",value:this.userRoles.licences.trial.fromDate!==null?this.userRoles.licences.trial.fromDate.toISOString():(new Date).toISOString(),name:"fromDate","input-type":"date",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("app-form-item",{"label-tag":"level","label-text":"Level",value:this.userRoles.licences.trial.level,name:"level","input-type":"string",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("ion-item",null,t("ion-label",null,t("p",null,"Trial Days:"," ",this.userRoles.licences.trialDays())))]:[t("ion-item",null,t("ion-label",null,e),t("ion-toggle",{slot:"end",onIonChange:t=>this.updateLicense(e,t),checked:this.userRoles.licences[e]}))]))]:null),t("ion-list",{key:"60d745e68273651be15ac727d42354244642e276"},t("ion-item-divider",{key:"3fce5f8eaea84bab9a16989bd98545e379dfd95b"},"User Roles"),this.userRoles.roles.map(((e,i)=>t("ion-item-sliding",{class:"item-sliding-"+i},t("ion-item",null,t("ion-label",null,e)),t("ion-item-options",null,t("ion-item-option",{color:"danger",onClick:()=>this.deleteRole(i)},"Delete"))))),t("ion-item",{key:"9d414512d859ad23a75386e1ea3dad55726dc397",button:true,onClick:()=>this.presentActionSheet()},t("ion-icon",{key:"aaca96c8d4bc1e28eda3db03535767ad43e04ff5",name:"add"}),t("ion-label",{key:"b1d8d65c51c047eb0e7a545c826c626539ce41bd"},"Add")))),t("app-modal-footer",{key:"46f475157c726137d10749966363a7fb6dd76cf8",color:r.getAppColor(),onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get itemSliding(){return a(this)}};f.style=p;export{f as modal_edit_user_roles};