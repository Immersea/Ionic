import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as n,Y as c,S as d,T as l}from"./p-30358c9d.js";import{E as r}from"./p-a9f4af61.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const h="modal-datasheet-propertyname ion-list{width:100%}";const f=h;const m=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyNames=undefined;this.datasheetPropertyName=undefined;this.updateView=true;this.validDatasheetPropertyName=false}async componentWillLoad(){await this.loadDatasheetPropertyNames()}async loadDatasheetPropertyNames(){await n.downloadDatasheetSettings();this.datasheetPropertyNames=o.exports.cloneDeep(n.getDatasheetPropertyNames());if(this.datasheetPropertyNames&&this.datasheetPropertyNames.length>0){this.datasheetPropertyName=this.datasheetPropertyNames[0]}else{this.addDatasheetPropertyName()}this.validateDatasheet()}selectType(e){const t=e.detail.value;this.datasheetPropertyName=this.datasheetPropertyNames.find((e=>e.nameId==t));this.validateDatasheet()}selectPropertyType(e){this.datasheetPropertyName.nameType=e.detail.value;this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="nameId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyName[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyName=o.exports.isString(this.datasheetPropertyName.nameId)&&o.exports.isString(this.datasheetPropertyName.nameName)&&o.exports.isNumber(this.datasheetPropertyName.position)&&o.exports.isNumber(this.datasheetPropertyName.decimals);this.updateView=!this.updateView}addDatasheetPropertyName(){this.datasheetPropertyName=new c;this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}duplicateDatasheetPropertyName(){this.datasheetPropertyName=o.exports.cloneDeep(this.datasheetPropertyName);this.datasheetPropertyName.nameId=this.datasheetPropertyName.nameId+"_rev.";this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}async deleteDatasheetPropertyName(){try{this.datasheetPropertyNames.splice(this.index,1);this.index=0;this.datasheetPropertyName=this.datasheetPropertyNames[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyName",this.datasheetPropertyNames);return e?s.dismiss():true}async cancel(){return s.dismiss()}checkComments(){this.datasheetPropertyNames.map((e=>{const t=o.exports.split(e.nameName,"(");if(t.length<2){return null}const a=t[1];const i=o.exports.split(a,"Â°C");if(i.length<2){return null}}))}render(){return t(a,{key:"ee7928e7899ffdddb3a65463caf3d9e898b97f1b"},t("ion-content",{key:"d8cd10703ece42ab4cf81f93ad4b6e1b7ba9f244"},t("ion-grid",{key:"e0cd6cdd0ea1497e98041c2f02c976250216beee"},t("ion-row",{key:"fbe3c0d9b2b5b5c2c42f735e2ade8e7fdd6f25cd"},t("ion-col",{key:"24efe5417daa4f30633d2be12962d2e916d8c3c7"},t("app-select-search",{key:"6a02e9abcf20a07535822011754e763d97121cd7",color:"trasteel",label:{tag:"datasheet_propertyName",text:"Datasheet Property Name"},value:this.index?this.datasheetPropertyNames[this.index].nameId:this.datasheetPropertyNames[0].nameId,lines:"none",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyNames,selectValueId:"nameId",selectValueText:["nameName"],disabled:!this.validDatasheetPropertyName})),t("ion-col",{key:"69aa9710f2bba6a5a0458ae492ccb2d5aaeec842",size:"1",class:"ion-text-center"},t("ion-button",{key:"904bc6ef316d39e9557694d9925ede13aa8d9c30",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.addDatasheetPropertyName()},t("ion-icon",{key:"db99a1285a465c2e8688bcfa9af3a8c31feee721",name:"add",slot:"start"}))),t("ion-col",{key:"61308ce2b840f49bb04f8b8cfd0d494488491f2c",size:"1",class:"ion-text-center"},t("ion-button",{key:"25da40afa64e0e6d9a6796578ee78f83f28722cd",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.duplicateDatasheetPropertyName()},t("ion-icon",{key:"bca8408659210c2feebc848f27b29d717d537c94",slot:"start",name:"duplicate"}))),t("ion-col",{key:"7c69390b6587b949e76a52bfcb4996d960c262e0",size:"1",class:"ion-text-center"},t("ion-button",{key:"39b0a32c4061e3f99de05553fc501d94bb528d97",fill:"clear",color:"danger",disabled:this.datasheetPropertyNames.length==0,onClick:()=>this.deleteDatasheetPropertyName()},t("ion-icon",{key:"d77f3c41d709f308c316a6d54368ecb2e32707fb",slot:"start",name:"trash"}))))),t("ion-item",{key:"053207c536b4b7e7dbebc1fbd6df9ff83d2bc6b9",lines:"none"},t("ion-select",{key:"c1906a586cc68c90ca4411ca98041b7ea576bf81",color:"trasteel",id:"selectType",interface:"action-sheet",label:l.getTransl("datasheet_propertyType","Datasheet Property Type"),"label-placement":"floating",onIonChange:e=>this.selectPropertyType(e)},n.datasheetPropertyTypes.map((e=>t("ion-select-option",{value:e.typeId},e.typeName))))),t("app-form-item",{key:"ebcd019de49f9b16b6a122dee11f7669d793529f","label-text":"Position",value:this.datasheetPropertyName.position,name:"position","input-type":"number",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"b2ce02e50524219b30d669aa18c5a04e6ffd0f92","label-text":"ID",value:this.datasheetPropertyName.nameId,name:"nameId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"nameId",list:n.getDatasheetPropertyNames()}}]}),t("app-form-item",{key:"36a990125c38e9138a9e3c7041e08d68ce511a33","label-text":"Name",value:this.datasheetPropertyName.nameName,name:"nameName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"e96fc31e2a7de4092b19b9d54e9e1fa9e956f1c7","label-text":"Decimals",value:this.datasheetPropertyName.decimals,name:"decimals","input-type":"number",inputStep:"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"b4b62c3f04db5359ce67bf39b03373e04362cc1f","label-text":"Description Left",value:this.datasheetPropertyName.nameDescLeft,name:"nameDescLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"938a77c0efbc1eadd4b01f1d38b10be07bae4a84","label-text":"Description Right",value:this.datasheetPropertyName.nameDescRight,name:"nameDescRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"801d7fcc17c161eed8e684108824ebf3628af1a0","label-text":"Comments",value:this.datasheetPropertyName.comments,name:"comments","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"c6e3d54a99d9094cc67b30c32e67f38c8c7e0880","label-text":"Dimension",value:this.datasheetPropertyName.dimension,name:"dimension","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"})),t("app-modal-footer",{key:"d0eb6c57b34dfc9c9f5d970ed9c46e26ded98a6f",color:r.getAppColor(),disableSave:!this.validDatasheetPropertyName,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};m.style=f;export{m as modal_datasheet_propertyname};