import{r as e,h as a,H as t,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{a as s,n as c}from"./p-c2915cc5.js";import{E as o}from"./p-773bd3de.js";import{T as d,U as f}from"./p-1d025719.js";import{b as n}from"./p-d2a582b5.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1af05547.js";import"./p-e9c4f463.js";const l="modal-user-teams-update ion-list{width:100%}";const b=l;const r=class{constructor(a){e(this,a);this.user=undefined;this.usersTeams=undefined;this.userIndex=undefined;this.userTeams=undefined;this.updateView=false}async componentWillLoad(){this.usersTeams=await d.getUsersTeams();this.userIndex=this.usersTeams.usersTeams.length>0?this.usersTeams.usersTeams.findIndex((e=>e.uid===this.user.uid)):-1;if(this.userIndex<0){this.userTeams=new f(this.user)}else{this.userTeams=this.usersTeams.usersTeams[this.userIndex]}}async addTeam(){let e=[];let a=Object.keys(n);a.forEach((a=>{if(!this.userTeams.teams.includes(a)){e.push({text:a,handler:()=>{this.userTeams.teams.push(a);this.updateView=!this.updateView}})}}));e.push({text:"Close",icon:"close",role:"cancel",handler:()=>{}});const t=await s.create({header:"Add",buttons:e});await t.present()}async deleteTeam(e){this.userTeams.teams.splice(e);this.updateView=!this.updateView}async save(){if(this.userIndex>=0){this.usersTeams.usersTeams[this.userIndex]=this.userTeams}else{this.usersTeams.usersTeams.push(this.userTeams)}d.updateUsersTeams(this.usersTeams);c.dismiss()}async cancel(){return c.dismiss()}render(){return a(t,{key:"f9fc354cb2af7b6c26fa45c4a1baa0bcc1a9a178"},a("ion-header",{key:"390f36fdc9f9d3ba0654e56637a9ba0d118d28aa"},a("ion-toolbar",{key:"59cf22fd7e8be3d86f2d01ef15c4c7cb4c256350",color:"trasteel"},a("ion-title",{key:"c0db6351380b134e3db8f0b52971a4509748f90c"},"USER TEAMS MANAGER"))),a("ion-content",{key:"011e4e5b1e4d4362bb724895da458e002c736057"},a("ion-list",{key:"6da3c275067b211c560aefe1cd24393255212fb3"},a("ion-item",{key:"daf6cf38ea8551457df2642c21921eb5a96e7abd"},this.user.email),a("ion-item-divider",{key:"295b35f7c4f29ffc01132ee8408a4fe79f1dd3e6"},a("ion-label",{key:"18ee831ada2f84f6777e9c1bcfe019dfeba289f3"},a("my-transl",{key:"814377bd650e46ae35f4aeef21b692ad97620b9a",tag:"teams",text:"Teams"}))),this.userTeams.teams.map(((e,t)=>a("ion-item",null,a("ion-label",null,e),a("ion-button",{slot:"end",fill:"clear",onClick:()=>this.deleteTeam(t)},a("ion-icon",{name:"trash",color:"danger"}))))),a("ion-button",{key:"f0e1c60bdb5c8913efa8ebd498ec8fc072444f3a",color:"trasteel",fill:"outline",expand:"full",onClick:()=>{this.addTeam()}},a("ion-icon",{key:"a7cecb9452d452094a8d474e5c8f3a6882a6badf",name:"add",slot:"start"}),a("ion-label",{key:"eb9247bf801cf699ea0bb6a3f727c52bfc02286a"},a("my-transl",{key:"ed0d47ad04c9a62a3baa246d8b86d8c8ab664a4e",tag:"add-team",text:"Add Team"}))))),a("app-modal-footer",{key:"73631a4b262a0b5f2a23043c5d6f26941fd1838e",color:o.getAppColor(),onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};r.style=b;export{r as modal_user_teams_update};