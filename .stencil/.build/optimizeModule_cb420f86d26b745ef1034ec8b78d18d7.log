import{r as e,h as t}from"./p-cbe60c68.js";import{T as s,R as a,o,S as r,aJ as i,aK as l,aL as n}from"./p-30358c9d.js";import"./p-c7ee7cfe.js";import{b as p}from"./p-5d4a8e1f.js";import{E as c}from"./p-a9f4af61.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";import"./p-694b8ade.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const d="page-lostpsw .validation-error{padding-left:18px;font-size:0.7rem;color:red}";const f=d;const g=class{constructor(t){e(this,t);this.email="";this.emailpsw={name:"emailpsw",valid:false,value:""};this.scrollTop=0}componentWillLoad(){if(this.email){this.emailpsw={name:"emailpsw",valid:true,value:this.email}}}async showAlert(e){let t=s.getTransl("login","Login");let r=s.getTransl("new-user","Your email is not registered in our systems. Please register to proceed.");let i=s.getTransl("google-registration","You have previously logged-in through Google registration process. Please click on the related button in the login page to proceed.");let l=s.getTransl("facebook-registration","You have previously logged-in through Facebook registration process. Please click on the related button in the login page to proceed.");let n=s.getTransl("pswreset","You will receive shortly an email to reset your password. Please follow the instructions and then come back to the login page.");let c=s.getTransl("pswreseterror","There was an error in the reset process. Please try again later.");let d="";switch(e){case"newuser":d=r;break;case"google":d=i;break;case"facebook":d=l;break;case"pswreset":d=n;break;case"pswreseterror":d=c;break}const f=await p.create({header:t,message:d,buttons:[{text:s.getTransl("ok","OK"),handler:async()=>{a.push("/login","root")}}]});o.dismissLoading();f.present()}inputHandler(e){this[e.detail.name]=e.detail}async checkEmail(){r.presentLoading("please-wait");const e=await o.fetchSignInMethodsForEmail(this.emailpsw.value);r.dismissLoading();if(e.length==0){r.presentAlertError("newuser")}else{if(e.indexOf(i.EMAIL_PASSWORD_SIGN_IN_METHOD)!=-1){this.sendResetPsw()}else if(e.indexOf(l.GOOGLE_SIGN_IN_METHOD)!=-1){this.showAlert("google")}else if(e.indexOf(n.FACEBOOK_SIGN_IN_METHOD)!=-1){this.showAlert("facebook")}}}sendResetPsw(){r.presentLoading("please-wait");o.passwordReset(this.emailpsw.value).then((()=>{r.dismissLoading();this.showAlert("pswreset")})).catch((()=>{r.dismissLoading();this.showAlert("pswreseterror")}))}render(){return[t("app-navbar",{key:"ed5da5e6eb7eaff945333ca1a31e2e3d295c1063",color:c.getAppColor(),tag:"forgot-psw",text:"Forgot Password","back-button":true}),t("ion-content",{key:"1219869622de9b363202c0b6690ea0ebd00e915e",scrollEvents:true,onIonScroll:e=>this.scrollTop=e.detail.scrollTop},c.isUdive()||c.isDecoplanner()?t("app-banner",{scrollTopValue:this.scrollTop,heightPx:250,link:"assets/images/friendship2SM.jpg"}):undefined,t("ion-grid",{key:"1baf0a863883461b50a569815df0444456e50435"},t("ion-row",{key:"1361a6bb7034dde75743e086ad310bdf13b5001d"},t("ion-col",{key:"f20e5f8fea1f8101ab3dccde4029c7d00906ef8c"},t("app-form-item",{key:"a034f12a1f10cfe17f75da25ff2862bfceb1dad9","label-tag":"email","label-text":"Email",name:"emailpsw","input-type":"email",onFormItemChanged:e=>this.inputHandler(e),validator:["required","email"]}),t("ion-button",{key:"07ed30e64368bcbe36246265a7b6f46d2876088c","margin-top":true,expand:"block",disabled:!this.emailpsw.valid,onClick:()=>this.checkEmail()},t("my-transl",{key:"53c5ec88c9de3241d3a87d910ecf1a9ce1ac1711",tag:"login-resetpsw",text:"Reset my password"}))))))]}};g.style=f;export{g as page_lostpsw};