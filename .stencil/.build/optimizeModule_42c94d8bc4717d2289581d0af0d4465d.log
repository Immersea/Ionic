import{r as e,h as a,f as t}from"./p-cbe60c68.js";import{h as s,U as i,n as c,T as n,f as o,g as r,d as p,e as d,D as h,a as m,b as f,c as b,B as l,z as u,G as g}from"./p-4a2e1f71.js";import"./p-c7ee7cfe.js";import{b as k}from"./p-5d4a8e1f.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-694b8ade.js";import"./p-7ee16e8d.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const j="page-map ion-icon{color:rgba(255, 255, 255, 0.9)}";const y=j;const v=class{constructor(a){e(this,a);this.searchFilters=[];this.searchTags=undefined;this.markers=[];this.userProfile=undefined}mapLoadingCompletedHandler(){this.mapElement?this.mapElement["triggerMapResize"]():undefined}componentWillLoad(){this.filterButtonTypes=s.getMapDocs();this.searchFilters=Object.keys(this.filterButtonTypes);this.userSub$=i.userProfile$.subscribe((e=>{this.userProfile=new c(e)}))}async componentDidLoad(){this.filterElement=this.el.getElementsByTagName("app-search-filter")[0];await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("app-map");this.filter()}disconnectedCallback(){this.userSub$.unsubscribe()}async addItem(e){let a=null;switch(e){case l:a={tag:"dive-site",text:"Dive Site"};break;case f:a={tag:"diving-center",text:"Diving Center"};break;case h:a={tag:"dive-community",text:"Dive Community"};break;case p:a={tag:"diving-school",text:"Diving School"};break;case o:a={tag:"service-center",text:"Service Center"};break}const t=await k.create({header:n.getTransl(a.tag,a.text),message:n.getTransl("add-item-message","This will add a new item of type:")+" "+n.getTransl(a.tag,a.text)+". "+n.getTransl("are-you-sure","Are you sure?"),buttons:[{text:n.getTransl("cancel","Cancel"),role:"cancel",handler:()=>{}},{text:n.getTransl("ok","OK"),handler:()=>{switch(e){case l:u.presentDiveSiteUpdate();break;case f:b.presentDivingCenterUpdate();break;case h:m.presentDiveCommunityUpdate();break;case p:d.presentDivingSchoolUpdate();break;case o:r.presentServiceCenterUpdate();break}}}]});t.present()}filter(e){this.searchTags=e?e.detail:[];this.mapElement.updateSearchTags(this.searchTags);this.mapElement.fitToBounds()}render(){return[a("ion-header",{key:"7be44df11dd60c96c7af413cc08e33c80660b7b8"},a("app-search-filter",{key:"6fe258cdb9a8ae2ce7ab929909745b6905f948ef",onSearchFilterEmit:e=>this.filter(e)})),a("ion-content",{key:"901ab2014e77d543d5d070891216cb7368966e23",fullscreen:true},a("app-map",{key:"22c8318a65ea58ea7e247fbd9f83a4e6b90f92e9",pageId:"map",searchTags:this.searchTags}),this.userProfile&&this.userProfile.uid?a("ion-fab",{vertical:"bottom",horizontal:"end",slot:"fixed"},a("ion-fab-button",{class:"fab-icon"},a("ion-icon",{name:"add-circle"})),a("ion-fab-list",{side:"start"},this.searchFilters.map((e=>e!=g?a("ion-fab-button",{style:{"--background":this.filterButtonTypes[e].icon.color},onClick:()=>this.addItem(e)},this.filterButtonTypes[e].icon.type=="ionicon"?a("ion-icon",{name:this.filterButtonTypes[e].icon.name}):a("ion-icon",{class:"map-icon "+this.filterButtonTypes[e].icon.name})):undefined)))):undefined)]}get el(){return t(this)}};v.style=y;export{v as page_map};