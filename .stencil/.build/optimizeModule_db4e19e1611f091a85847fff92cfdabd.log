import{r as e,h as t,H as i,f as o}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as a}from"./p-5d4a8e1f.js";import{Q as l,aO as n,T as s}from"./p-736235c6.js";import{l as r}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1819cfda.js";import"./p-e9c4f463.js";import"./p-46038295.js";import"./p-7ee16e8d.js";const c="popover-datasheets-filter{}popover-datasheets-filter ion-list{min-height:300px}";const d=c;const h=class{constructor(t){e(this,t);this.filter=undefined;this.showBaseFilter=true;this.propertyNames=[];this.newFilterCondition=undefined;this.showAddNewProperty=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.datasheetMajorFamilies=l.getDatasheetMajorFamilies();this.datasheetFamilies=l.getDatasheetFamilies();this.propertyNames=l.getDatasheetPropertyNames();this.resetNewFilterCondition()}resetNewFilterCondition(){this.newFilterCondition=new n({field:"properties",fieldName:"name",valueName:"mgo",comparisonField:"lower"});this.validateProperty()}deleteCondition(e){this.filter.properties.splice(e,1);this.updateView=!this.updateView}handleFilter(e){this.filter[e.detail.name]=e.detail.value}handleMajorFamilySelect(e){this.filter.majorFamilyId=e.detail.value}handleFamilySelect(e){this.filter.familyId=e.detail.value}segmentChanged(e){if(e.detail.value=="base"){this.showBaseFilter=true}else{this.showBaseFilter=false}}selectPropertyName(e){this.newFilterCondition.valueName=e.detail.value;this.validateProperty()}selectOperator(e){this.newFilterCondition.operator=e.detail.value;this.validateProperty()}selectValue(e){this.newFilterCondition.value=e.detail.value;this.validateProperty()}addNewProperty(){this.filter.properties.push(r.exports.cloneDeep(this.newFilterCondition));this.resetNewFilterCondition()}validateProperty(){this.showAddNewProperty=r.exports.isString(this.newFilterCondition.field)&&r.exports.isString(this.newFilterCondition.fieldName)&&r.exports.isString(this.newFilterCondition.operator)&&r.exports.isString(this.newFilterCondition.valueName)&&!r.exports.isNull(this.newFilterCondition.value)}close(){a.dismiss()}save(){a.dismiss(this.filter)}render(){return t(i,{key:"530435dae215dbab0decfb402d129b5ab7f0b015"},t("ion-header",{key:"d78d37e7ecefebb4e9ca781861b54ea4042740b5",translucent:true},t("ion-toolbar",{key:"4b943e0d6b12012f4766c719c9a3e3cc33aa4d37"},t("ion-title",{key:"50d5faa748e29c020bc7064f039b6b121dfb4822"},"Filter Datasheets"))),t("ion-content",{key:"a22a1a5a7398158e353402da32caa60a88b5c45d"},t("ion-segment",{key:"8bafb720b6636dc478c87fee5d87503510d13f3f",mode:"ios",color:"trasteel",onIonChange:e=>this.segmentChanged(e),value:"base"},t("ion-segment-button",{key:"2c3bbd6b710b6fa874ac5ef30bf6d39dd42b127a",value:"base"},t("ion-label",{key:"54b8e8852d8870f645ee896de398befd23ab4856"},"Base")),t("ion-segment-button",{key:"14a1a6a366d77bdd9e808d79dd5623eae6a8307c",value:"advanced"},t("ion-label",{key:"7ee2dc20c5d4fc792fb23760f926d81f4e1d8a06"},"Advanced"))),t("ion-list",{key:"bdf35dd25f84204e037233da9c3813fedf1dec29"},this.showBaseFilter?[t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("majorFamily","Major Family"),"label-placement":"floating",onIonChange:e=>this.handleMajorFamilySelect(e),value:this.filter.majorFamilyId},this.datasheetMajorFamilies.map((e=>t("ion-select-option",{value:e.majorFamilyId},e.majorFamilyName))))),t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("family","Family"),"label-placement":"floating",onIonChange:e=>this.handleFamilySelect(e),value:this.filter.familyId},this.datasheetFamilies.map((e=>t("ion-select-option",{value:e.familyId},e.familyName))))),t("app-form-item",{"label-text":"Show Old Products",value:this.filter.oldProduct,name:"oldProduct","input-type":"boolean",onFormItemChanged:e=>this.handleFilter(e)})]:[t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("app-select-search",{color:"trasteel",value:this.newFilterCondition.valueName,lines:"none",disabled:this.propertyNames.length==0,selectFn:e=>this.selectPropertyName(e),selectOptions:this.propertyNames,selectValueId:"nameId",selectValueText:["nameName"]})),t("ion-col",{size:"3"},t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",interface:"action-sheet",onIonChange:e=>this.selectOperator(e),value:this.newFilterCondition.operator},t("ion-select-option",{value:">="},t("ion-label",null,">=")),t("ion-select-option",{value:">"},t("ion-label",null,">")),t("ion-select-option",{value:"="},t("ion-label",null,"=")),t("ion-select-option",{value:"<"},t("ion-label",null,"<")),t("ion-select-option",{value:"<="},t("ion-label",null,"<=")))))),t("ion-row",null,t("ion-col",null,t("app-form-item",{value:this.newFilterCondition.value,name:"typical","input-type":"number",onFormItemChanged:e=>this.selectValue(e)})),t("ion-col",{size:"3"},t("ion-button",{"icon-only":true,fill:"outline",onClick:()=>this.addNewProperty(),disabled:!this.showAddNewProperty},t("ion-icon",{name:"add",color:"primary"}))))),t("ion-item-divider",null,t("ion-label",null,"Conditions")),this.filter.properties.map(((e,i)=>t("ion-item",null,t("ion-label",null,l.getDatasheetPropertyNames("id",e.valueName)[0].nameName+" "+e.operator+" "+e.value),t("ion-button",{"icon-only":true,fill:"clear",onClick:()=>this.deleteCondition(i)},t("ion-icon",{name:"trash",color:"danger"})))))])),t("ion-footer",{key:"4688f4d219436f05cbb482164650b6c598db7728"},t("app-modal-footer",{key:"8afbfdfa25da95821771ae70f29df9fa720aea6f",saveTag:{tag:"filter",text:"Filter"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return o(this)}};h.style=d;export{h as popover_datasheets_filter};