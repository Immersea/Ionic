import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as o}from"./p-1af05547.js";import{a6 as c,ab as d,S as n,E as r}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const l="modal-datasheet-propertytype ion-list{width:100%}";const h=l;const p=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyTypes=undefined;this.datasheetPropertyType=undefined;this.updateView=true;this.validDatasheetPropertyType=false}async componentWillLoad(){await this.loadDatasheetPropertyTypes()}async loadDatasheetPropertyTypes(){await c.downloadDatasheetSettings();this.datasheetPropertyTypes=o.exports.cloneDeep(c.getDatasheetPropertyTypes());if(this.datasheetPropertyTypes&&this.datasheetPropertyTypes.length>0){this.datasheetPropertyType=this.datasheetPropertyTypes[0]}else{this.addDatasheetPropertyType()}this.validateDatasheet()}selectType(e){this.datasheetPropertyType=this.datasheetPropertyTypes.find((t=>t.typeId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="typeId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyType[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyType=o.exports.isString(this.datasheetPropertyType.typeId)&&o.exports.isString(this.datasheetPropertyType.typeName);this.updateView=!this.updateView}addDatasheetPropertyType(){this.datasheetPropertyType=new d;this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}duplicateDatasheetPropertyType(){this.datasheetPropertyType=o.exports.cloneDeep(this.datasheetPropertyType);this.datasheetPropertyType.typeId=this.datasheetPropertyType.typeId+"_rev.";this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}async deleteDatasheetPropertyType(){try{this.datasheetPropertyTypes.splice(this.index,1);this.index=0;this.datasheetPropertyType=this.datasheetPropertyTypes[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("propertyType",this.datasheetPropertyTypes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"5bafd87e196c5d1a0e6aec1107a35944a3830200"},t("ion-content",{key:"6652f6d386ddee2fa24beb2bdc10e6567bf4b12d"},t("ion-grid",{key:"3fc5aed8a30c85a98274f1614432c3606eccdb0f"},t("ion-row",{key:"02cccf4b680cb755086cac4f411bee1cdd03bbaa"},t("ion-col",{key:"9834be320cbbd7cdd3b1a23d84d55b2f89025560"},t("app-select-search",{key:"f3306a96bdb752897561d9df1c6140c2914bd4c1",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetPropertyTypes[this.index].typeId:this.datasheetPropertyTypes[0].typeId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyTypes,selectValueId:"typeId",selectValueText:["typeName"],disabled:!this.validDatasheetPropertyType})),t("ion-col",{key:"a1aef39fb0454925959f38bc3ebb5523e904fa28",size:"1",class:"ion-text-center"},t("ion-button",{key:"7ae0426856d6b8619d04a16c5ea6bb9ea75f8abf",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.addDatasheetPropertyType()},t("ion-icon",{key:"454b38d6add6762d536b85e644ab68b3fb8bf2e2",name:"add",slot:"start"}))),t("ion-col",{key:"0a6d9159eabe4eff7965ff49227996dbc146e97e",size:"1",class:"ion-text-center"},t("ion-button",{key:"1d869420a91014205182a02c2f513a6b4b18946b",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.duplicateDatasheetPropertyType()},t("ion-icon",{key:"5206ca8979a18f0fc36093f4c9343d3ad3689b60",slot:"start",name:"duplicate"}))),t("ion-col",{key:"e3f928e4756372241286b6ea50b7e2ace3b916da",size:"1",class:"ion-text-center"},t("ion-button",{key:"45c8ec2642c63dedbeac7447c16db3c40125416b",fill:"clear",color:"danger",disabled:this.datasheetPropertyTypes.length==0,onClick:()=>this.deleteDatasheetPropertyType()},t("ion-icon",{key:"465cfcd4efa50b49c47041493f1753668e257403",slot:"start",name:"trash"}))))),t("app-form-item",{key:"d0f467c6de5efdcfd4a147e30d1f9013e60ada82","label-text":"ID",value:this.datasheetPropertyType.typeId,name:"typeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"propertyTypeId",list:c.getDatasheetPropertyTypes()}}]}),t("app-form-item",{key:"fb181de2cead840823e74186efd2806f85218798","label-text":"Name",value:this.datasheetPropertyType.typeName,name:"typeName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"975d9b579d3477c77ce6152597fe8e4ab13044e6","label-text":"Value Left Description",value:this.datasheetPropertyType.typeLeft,name:"typeLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"5aa7b87595dc59e6dc8ad76dff6b7eb8181e236a","label-text":"Value Right Description",value:this.datasheetPropertyType.typeRight,name:"typeRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"ca8891420310a21749eeff7c0be3f05583a87cbd","label-text":"Value Limit Description",value:this.datasheetPropertyType.typeLimit,name:"typeLimit","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)})),t("app-modal-footer",{key:"2894faf38c4168698adffa52bc0b2a4318a76504",color:r.getAppColor(),disableSave:!this.validDatasheetPropertyType,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};p.style=h;export{p as modal_datasheet_propertytype};