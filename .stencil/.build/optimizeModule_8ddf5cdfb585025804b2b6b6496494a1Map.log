{"version":3,"names":["pageLoginCss","PageLoginStyle0","PageLogin","this","newUserRegistration","name","valid","value","componentWillLoad","SystemService","getNetworkStatus","then","networkObservable","subscribe","status","network","trasteelLogin","Environment","isTrasteel","componentDidLoad","dismissLoading","sendLink","AuthService","sendEmailLink","email","trim","showAlert","error","googleLogin","google","appleLogin","alert","alertController","create","header","TranslationService","getTransl","message","buttons","text","handler","async","apple","present","loginWithEmail","signInWithEmailPsw","emailpsw","psw","DatabaseService","getLocalDocument","forgotPsw","presentLoading","passwordReset","showPswResetAlert","catch","message_error","message_ok","log","code","checkEmail","RouterService","push","pswreset","pswreseterror","show_message","inputHandler","event","detail","checkRetypePassword","retypepsw","emailRegex","toLower","includes","test","checkingEmail","methods","fetchSignInMethodsForEmail","disablePswFields","disableEmailLinkFields","disableGoogle","disableFacebook","disableApple","length","passwordCheck","render","h","key","color","getAppColor","tag","scrollEvents","onIonScroll","ev","scrollTop","isUdive","isDecoplanner","scrollTopValue","heightPx","link","undefined","slot","lines","onFormItemChanged","disabled","debounce","validator","class","expand","onClick","isAndroid"],"sources":["src/components/common/pages/user/page-login/page-login.scss?tag=page-login","src/components/common/pages/user/page-login/page-login.tsx"],"sourcesContent":["page-login {\n  /* Component styles go here */\n  .apple {\n    --background: black;\n  }\n  .facebook {\n    --background: var(--facebook-color);\n  }\n  .google {\n    --background: var(--google-color);\n  }\n\n  .validation-error {\n    padding-left: 18px;\n    font-size: 0.7rem;\n    color: red;\n  }\n\n  .small {\n    font-size: 0.8rem;\n    color: var(--ion-color-tint);\n  }\n\n  .centered {\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n  }\n}\n","import { Component, h, State } from \"@stencil/core\";\nimport { AuthService } from \"../../../../../services/common/auth\";\nimport { TranslationService } from \"../../../../../services/common/translations\";\nimport { alertController } from \"@ionic/core\";\nimport { InputValidator } from \"../../../../../interfaces/interfaces\";\nimport { RouterService } from \"../../../../../services/common/router\";\nimport { DatabaseService } from \"../../../../../services/common/database\";\nimport { Environment } from \"../../../../../global/env\";\nimport { SystemService } from \"../../../../../services/common/system\";\nimport { toLower } from \"lodash\";\n\n@Component({\n  tag: \"page-login\",\n  styleUrl: \"page-login.scss\",\n})\nexport class PageLogin {\n  @State() email: InputValidator = {\n    name: \"email\",\n    valid: false,\n    value: \"\",\n  };\n  @State() emailpsw: InputValidator = {\n    name: \"emailpsw\",\n    valid: false,\n    value: \"\",\n  };\n  @State() psw: InputValidator = {\n    name: \"psw\",\n    valid: false,\n    value: \"\",\n  };\n  @State() retypepsw: InputValidator = {\n    name: \"retypepsw\",\n    valid: true,\n    value: \"\",\n  };\n\n  @State() passwordCheck = true;\n\n  @State() trasteelLogin = false;\n  @State() disablePswFields = false;\n  @State() disableEmailLinkFields = false;\n  @State() disableGoogle = false;\n  @State() disableFacebook = true;\n  @State() disableApple = false;\n\n  @State() network = false;\n  @State() scrollTop = 0;\n\n  newUserRegistration = false;\n\n  checkEmailTimer;\n  @State() checkingEmail = false;\n\n  componentWillLoad() {\n    SystemService.getNetworkStatus().then((networkObservable) => {\n      networkObservable.subscribe((status) => {\n        this.network = status;\n      });\n    });\n    this.trasteelLogin = Environment.isTrasteel();\n  }\n\n  componentDidLoad() {\n    SystemService.dismissLoading();\n  }\n\n  async sendLink() {\n    try {\n      await AuthService.sendEmailLink(this.email.value.trim());\n      this.email.value = \"\";\n      this.showAlert(false);\n    } catch (error) {\n      this.showAlert(error);\n    }\n  }\n\n  async googleLogin() {\n    try {\n      await AuthService.google();\n    } catch (error) {\n      this.showAlert(error);\n    }\n  }\n\n  /*async facebookLogin() {\n    try {\n      await AuthService.facebook();\n    } catch (error) {\n      this.showAlert(error);\n    }\n  }*/\n\n  async appleLogin() {\n    const alert = await alertController.create({\n      header: TranslationService.getTransl(\"login\", \"Login\"),\n      message: TranslationService.getTransl(\n        \"apple-login-message\",\n        \"In order to login with the same Apple account also with other devices, it is necessary to share your original email address.\"\n      ),\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n          handler: async () => {\n            try {\n              await AuthService.apple();\n            } catch (error) {\n              this.showAlert(error);\n            }\n          },\n        },\n        {\n          text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n        },\n      ],\n    });\n    alert.present();\n  }\n\n  async loginWithEmail() {\n    try {\n      await AuthService.signInWithEmailPsw(\n        this.email.valid ? this.email.value.trim() : this.emailpsw.value.trim(),\n        this.psw.value\n      );\n      //check if signedin with link\n      const email = await DatabaseService.getLocalDocument(\"emailForSignIn\");\n      if (email) {\n        this.emailpsw.value = \"\";\n        this.psw.value = \"\";\n        this.showAlert(false);\n      } else {\n        AuthService.dismissLoading();\n      }\n    } catch (error) {\n      this.showAlert(error);\n    }\n  }\n\n  forgotPsw() {\n    //RouterService.push(\"/forgotpsw\", \"forward\");\n    SystemService.presentLoading(\"please-wait\");\n    const email = this.email.value ? this.email.value : this.emailpsw.value;\n    AuthService.passwordReset(email)\n      .then(() => {\n        SystemService.dismissLoading();\n        this.showPswResetAlert(\"pswreset\");\n      })\n      .catch(() => {\n        SystemService.dismissLoading();\n        this.showPswResetAlert(\"pswreseterror\");\n      });\n  }\n\n  async showAlert(error) {\n    let header = TranslationService.getTransl(\"login\", \"Login\");\n    let message_error = TranslationService.getTransl(\n      \"login-error\",\n      \"There was an error in the login process. Please try again later.\"\n    );\n    let message_ok = TranslationService.getTransl(\n      \"registration-success-email\",\n      \"The registration/login has been completed! You will now receive a link in your email to complete the login process. If you don't receive the email within 1 minute please check in your spam folder.\"\n    );\n    if (error) {\n      Environment.log(\"registration/login error\", [error]);\n      switch (error.code) {\n        case \"auth/popup-blocked\":\n          message_error = TranslationService.getTransl(\n            \"popup-error\",\n            \"You should allow popup windows in the browser's preferences in order to complete the login process.\"\n          );\n          break;\n        case \"auth/account-exists-with-different-credential\":\n          if (error.email) {\n            this.emailpsw.value = error.email;\n            this.checkEmail();\n          }\n          message_error = TranslationService.getTransl(\n            \"popup-error-existing-account\",\n            \"You have already logged in with this email using another Sign-In method. Insert your email in the 'Email' field to check your exisiting method.\"\n          );\n          break;\n        case \"auth/missing-or-invalid-nonce\":\n          if (error.email) {\n            this.emailpsw.value = error.email;\n            this.checkEmail();\n          }\n          message_error = TranslationService.getTransl(\n            \"popup-error-duplicate-credential\",\n            \"Duplicate credential received. Please try again with a new credential.\"\n          );\n          break;\n        default:\n          message_error += error.message ? \" (\" + error.message + \")\" : \"\";\n      }\n    }\n\n    const alert = await alertController.create({\n      header: header,\n      message: error ? message_error : message_ok,\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n          handler: async () => {\n            RouterService.push(\"/\", \"root\");\n          },\n        },\n      ],\n    });\n    AuthService.dismissLoading();\n    alert.present();\n  }\n\n  async showPswResetAlert(message) {\n    let header = TranslationService.getTransl(\"login\", \"Login\");\n    let pswreset = TranslationService.getTransl(\n      \"pswreset\",\n      \"You will receive shortly an email to reset your password. Please follow the instructions and then come back to the login page.\"\n    );\n    let pswreseterror = TranslationService.getTransl(\n      \"pswreseterror\",\n      \"There was an error in the reset process. Please try again later.\"\n    );\n    let show_message = \"\";\n    switch (message) {\n      case \"pswreset\":\n        show_message = pswreset;\n        break;\n      case \"pswreseterror\":\n        show_message = pswreseterror;\n        break;\n    }\n\n    const alert = await alertController.create({\n      header: header,\n      message: show_message,\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n        },\n      ],\n    });\n    AuthService.dismissLoading();\n    alert.present();\n  }\n\n  inputHandler(event) {\n    this[event.detail.name] = event.detail;\n    if (event.detail.name == \"retypepsw\") {\n      this.checkRetypePassword();\n    } else if (\n      event.detail.name == \"emailpsw\" ||\n      event.detail.name == \"email\"\n    ) {\n      this.psw.value = \"\";\n      this.psw.valid = true;\n      this.retypepsw.valid = true;\n      this.retypepsw.value = \"\";\n      // Function to validate email using regex\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      //check email address\n      const email = toLower(event.detail.value);\n      this.email.value = toLower(email);\n      this.emailpsw.value = this.email.value;\n      if (Environment.isTrasteel() && event.detail.name == \"email\") {\n        if (\n          (!this.email.value.includes(\"@trasteel.com\") &&\n            !this.email.value.includes(\"@trasteelnetwork.com\") &&\n            !this.email.value.includes(\"@o-range.tech\") &&\n            !this.email.value.includes(\"@ipermediastudio.it\")) ||\n          !emailRegex.test(this.email.value)\n        ) {\n          this.email.valid = false;\n          this.emailpsw.valid = false;\n        } else {\n          this.email.valid = true;\n          this.emailpsw.valid = true;\n        }\n      } else {\n        //check email field\n        if (emailRegex.test(this.email.value)) {\n          this.email.valid = true;\n          this.emailpsw.valid = true;\n        } else {\n          this.email.valid = false;\n          this.emailpsw.valid = false;\n        }\n      }\n      this.checkEmail();\n    }\n  }\n\n  async checkEmail() {\n    if (!this.checkingEmail) {\n      this.checkingEmail = true;\n      if (this.emailpsw.valid) {\n        await SystemService.presentLoading(\"searching\");\n        const methods = await AuthService.fetchSignInMethodsForEmail(\n          this.emailpsw.value\n        );\n        this.disablePswFields = false;\n        this.disableEmailLinkFields = false;\n        this.disableGoogle = false;\n        this.disableFacebook = true; //false;\n        this.disableApple = false;\n        if (methods.length == 0) {\n          //new user\n          this.newUserRegistration = true;\n          //this.retypepsw.valid = false;\n        } else {\n          this.newUserRegistration = false;\n          //this.retypepsw.valid = true;\n          //enable password fields for emailLink and Password methods\n          this.disablePswFields = !methods.includes(\"password\");\n          this.disableEmailLinkFields = !methods.includes(\"emailLink\");\n          this.disableFacebook = true; //!methods.includes(\"facebook.com\");\n          this.disableApple = !methods.includes(\"apple.com\");\n          this.disableGoogle = !methods.includes(\"google.com\");\n          /*if (methods.includes(\"facebook.com\")) {\n            //remove facebook login and allow google or psw\n            this.disablePswFields = true;\n            this.disableGoogle = false;\n          }\n          if (methods.includes(\"apple.com\") && isPlatform(\"android\")) {\n            //alert user for Apple\n            const alert = await alertController.create({\n              header: TranslationService.getTransl(\"login\", \"Login\"),\n              message: TranslationService.getTransl(\n                \"apple-login-error\",\n                \"You previously logged-in using Apple Login. This service is not available on Android devices.\"\n              ),\n              buttons: [\n                {\n                  text: TranslationService.getTransl(\"ok\", \"OK\"),\n                },\n              ],\n            });\n            alert.present();\n          }*/\n        }\n        await SystemService.dismissLoading();\n      } else {\n        this.newUserRegistration = false;\n        //this.retypepsw.valid = true;\n        this.disablePswFields = false;\n        this.disableGoogle = false;\n        this.disableFacebook = true;\n        this.disableApple = false;\n      }\n      if (this.newUserRegistration) this.checkRetypePassword();\n      this.checkingEmail = false;\n    }\n  }\n\n  checkRetypePassword() {\n    this.passwordCheck = this.psw.value == this.retypepsw.value;\n  }\n\n  render() {\n    return [\n      <app-navbar color={Environment.getAppColor()} tag='login' text='Login' />,\n      <ion-content\n        scrollEvents\n        onIonScroll={(ev) => (this.scrollTop = ev.detail.scrollTop)}\n      >\n        {Environment.isUdive() || Environment.isDecoplanner() ? (\n          <app-banner\n            scrollTopValue={this.scrollTop}\n            heightPx={250}\n            link='./assets/images/friendship2SM.jpg'\n          ></app-banner>\n        ) : undefined}\n        <ion-grid>\n          {!this.network ? (\n            <ion-row>\n              <ion-col>\n                <ion-item color='danger'>\n                  <ion-icon name='warning' slot='start'></ion-icon>\n                  <ion-label>\n                    <my-transl tag='no-network' text='Network not available!' />\n                  </ion-label>\n                </ion-item>\n              </ion-col>\n            </ion-row>\n          ) : undefined}\n          <ion-row>\n            <ion-col>\n              {this.trasteelLogin ? (\n                [\n                  <app-form-item\n                    label-tag='email'\n                    label-text='Email'\n                    name='email'\n                    lines='full'\n                    input-type='email'\n                    onFormItemChanged={(ev) => this.inputHandler(ev)}\n                    disabled={!this.network}\n                    debounce={500}\n                    validator={[\"required\", \"email\"]}\n                  ></app-form-item>,\n                  <ion-text class='ion-padding-start small'>\n                    Only emails @trasteel.com or @trasteelnetwork.com are\n                    accepted.\n                  </ion-text>,\n                  !this.disableEmailLinkFields\n                    ? [\n                        <ion-button\n                          margin-top\n                          expand='block'\n                          disabled={!this.email.valid || !this.network}\n                          onClick={() => this.sendLink()}\n                        >\n                          <my-transl\n                            tag='login-email'\n                            text={\n                              (this.newUserRegistration\n                                ? \"Register\"\n                                : \"Login\") + \" with Email Link\"\n                            }\n                          ></my-transl>\n                        </ion-button>,\n                        !this.disablePswFields\n                          ? [\n                              <ion-item-divider></ion-item-divider>,\n                              <ion-item-divider>\n                                <ion-label>\n                                  <p class='centered'>- or type password -</p>\n                                </ion-label>\n                              </ion-item-divider>,\n                            ]\n                          : undefined,\n                      ]\n                    : undefined,\n                ]\n              ) : (\n                <app-form-item\n                  label-tag='email'\n                  label-text='Email'\n                  name='emailpsw'\n                  lines='full'\n                  input-type='email'\n                  onFormItemChanged={(ev) => this.inputHandler(ev)}\n                  disabled={!this.network}\n                  debounce={500}\n                  validator={[\"required\", \"email\"]}\n                ></app-form-item>\n              )}\n              {!this.disablePswFields\n                ? [\n                    <app-form-item\n                      label-tag='password'\n                      label-text='Password'\n                      name='psw'\n                      lines='full'\n                      input-type='password'\n                      onFormItemChanged={(ev) => this.inputHandler(ev)}\n                      disabled={!this.network}\n                      validator={[\"required\"]}\n                    ></app-form-item>,\n                    this.newUserRegistration ? (\n                      <app-form-item\n                        label-tag='retype-password'\n                        label-text='Re-type Password'\n                        name='retypepsw'\n                        lines='full'\n                        input-type='password'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        disabled={!this.network}\n                        validator={[\"required\"]}\n                      ></app-form-item>\n                    ) : undefined,\n                    !this.passwordCheck ? (\n                      <my-transl\n                        class='validation-error'\n                        tag='password-error'\n                        text='Passwords are not the same'\n                      ></my-transl>\n                    ) : undefined,\n                    <ion-button\n                      margin-top\n                      expand='block'\n                      disabled={\n                        !this.emailpsw.valid ||\n                        !this.psw.valid ||\n                        !this.retypepsw.valid ||\n                        !this.network ||\n                        !this.passwordCheck\n                      }\n                      onClick={() => this.loginWithEmail()}\n                    >\n                      {!this.emailpsw.valid && !this.newUserRegistration\n                        ? TranslationService.getTransl(\n                            \"login-emailpsw\",\n                            \"Login/Register with Email and Password\"\n                          )\n                        : this.newUserRegistration\n                          ? TranslationService.getTransl(\n                              \"register-emailpsw\",\n                              \"Register with Email and Password\"\n                            )\n                          : TranslationService.getTransl(\n                              \"login-only-emailpsw\",\n                              \"Login with Email and Password\"\n                            )}\n                    </ion-button>,\n                  ]\n                : undefined}\n            </ion-col>\n          </ion-row>\n          {!this.disablePswFields &&\n          !this.newUserRegistration &&\n          this.emailpsw.valid ? (\n            <ion-row>\n              <ion-col class='ion-text-right'>\n                <a onClick={() => this.forgotPsw()}>\n                  <my-transl\n                    tag='forgot-psw'\n                    text='Forgot password'\n                  ></my-transl>\n                </a>\n              </ion-col>\n            </ion-row>\n          ) : undefined}\n          {!this.trasteelLogin\n            ? [\n                <ion-row>\n                  <ion-col class='ion-text-center'>\n                    {!this.disablePswFields &&\n                    !this.disableGoogle &&\n                    !this.disableFacebook &&\n                    !this.disableApple ? (\n                      <p>- or -</p>\n                    ) : undefined}\n                  </ion-col>\n                </ion-row>,\n\n                !this.disableGoogle ? (\n                  <ion-row>\n                    <ion-col>\n                      <ion-button\n                        expand='block'\n                        onClick={() => this.googleLogin()}\n                        disabled={!this.network}\n                        class='google'\n                      >\n                        <ion-icon name='logo-google' slot='start'></ion-icon>\n                        {(this.newUserRegistration ? \"Register\" : \"Login\") +\n                          \" with Google\"}\n                      </ion-button>\n                    </ion-col>\n                  </ion-row>\n                ) : undefined,\n                !this.disableApple && !SystemService.isAndroid() ? (\n                  <ion-row>\n                    <ion-col>\n                      <ion-button\n                        expand='block'\n                        onClick={() => this.appleLogin()}\n                        disabled={!this.network}\n                        class='apple'\n                      >\n                        <ion-icon name='logo-apple' slot='start'></ion-icon>\n                        {(this.newUserRegistration ? \"Register\" : \"Login\") +\n                          \" with Apple\"}\n                      </ion-button>\n                    </ion-col>\n                  </ion-row>\n                ) : undefined,\n              ]\n            : undefined}\n        </ion-grid>\n      </ion-content>,\n    ];\n  }\n}\n"],"mappings":"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","ignoreList":[]}