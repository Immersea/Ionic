import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{E as c}from"./p-46038295.js";import{Q as n,Z as r,S as d}from"./p-736235c6.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const l="modal-datasheet-propertytype ion-list{width:100%}";const p=l;const h=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyTypes=undefined;this.datasheetPropertyType=undefined;this.updateView=true;this.validDatasheetPropertyType=false}async componentWillLoad(){await this.loadDatasheetPropertyTypes()}async loadDatasheetPropertyTypes(){await n.downloadDatasheetSettings();this.datasheetPropertyTypes=o.exports.cloneDeep(n.getDatasheetPropertyTypes());if(this.datasheetPropertyTypes&&this.datasheetPropertyTypes.length>0){this.datasheetPropertyType=this.datasheetPropertyTypes[0]}else{this.addDatasheetPropertyType()}this.validateDatasheet()}selectType(e){this.datasheetPropertyType=this.datasheetPropertyTypes.find((t=>t.typeId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="typeId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyType[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyType=o.exports.isString(this.datasheetPropertyType.typeId)&&o.exports.isString(this.datasheetPropertyType.typeName);this.updateView=!this.updateView}addDatasheetPropertyType(){this.datasheetPropertyType=new r;this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}duplicateDatasheetPropertyType(){this.datasheetPropertyType=o.exports.cloneDeep(this.datasheetPropertyType);this.datasheetPropertyType.typeId=this.datasheetPropertyType.typeId+"_rev.";this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}async deleteDatasheetPropertyType(){try{this.datasheetPropertyTypes.splice(this.index,1);this.index=0;this.datasheetPropertyType=this.datasheetPropertyTypes[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyType",this.datasheetPropertyTypes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"6e84a0b0a90b672d747a22137f07b763e39aa397"},t("ion-content",{key:"a6395953bcecd9db7890c44ba67e0c955503fbeb"},t("ion-grid",{key:"ae42a0888498dc008cafd7fcd3002b7a493b64ec"},t("ion-row",{key:"278ffc1301447282f7c8dcc40c969df6ce92eeb4"},t("ion-col",{key:"a8955bcc35fc37916bcc60dadd4937b831f3bf13"},t("app-select-search",{key:"46056216c02d287a52298b4780805c62210a8bab",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetPropertyTypes[this.index].typeId:this.datasheetPropertyTypes[0].typeId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyTypes,selectValueId:"typeId",selectValueText:["typeName"],disabled:!this.validDatasheetPropertyType})),t("ion-col",{key:"aee0000cb2347abe54696106f8b7bebaa993616e",size:"1",class:"ion-text-center"},t("ion-button",{key:"44973c1f5fe3d98850bb73339beb6510e8bd1582",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.addDatasheetPropertyType()},t("ion-icon",{key:"9f0718fa2ae87aa22af040b80f797150cfb69a43",name:"add",slot:"start"}))),t("ion-col",{key:"2ceec15af5f403e1b1c6a24cb267753b1f1ebb86",size:"1",class:"ion-text-center"},t("ion-button",{key:"e4edf325da8c565fe68cf76e0c368337ddeb909e",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.duplicateDatasheetPropertyType()},t("ion-icon",{key:"89dc1b70697a06321af1bf68bd65b01009c174c2",slot:"start",name:"duplicate"}))),t("ion-col",{key:"ad0f43ff76799a55fe3e8d6756b4103e714d6bd3",size:"1",class:"ion-text-center"},t("ion-button",{key:"e64fc5f17d1b113e4bf9c76fdab5fb988d6fecd0",fill:"clear",color:"danger",disabled:this.datasheetPropertyTypes.length==0,onClick:()=>this.deleteDatasheetPropertyType()},t("ion-icon",{key:"6298099bde35061d5d589cbd58eeb615d46c5ec3",slot:"start",name:"trash"}))))),t("app-form-item",{key:"3160cc9ca8391b3499e29f41c4dd8c4e4c727943","label-text":"ID",value:this.datasheetPropertyType.typeId,name:"typeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"propertyTypeId",list:n.getDatasheetPropertyTypes()}}]}),t("app-form-item",{key:"95aac02dd324e7fb1de752c2ac6f1968f872b09b","label-text":"Name",value:this.datasheetPropertyType.typeName,name:"typeName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"604d6a80bd15f62b21870c85c5f144ec1642997b","label-text":"Value Left Description",value:this.datasheetPropertyType.typeLeft,name:"typeLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"7a5dafce6218341069a622b63c13de406cad7ec7","label-text":"Value Right Description",value:this.datasheetPropertyType.typeRight,name:"typeRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"1ffa6b3528a1225a620efb2780e68cdebfdd7291","label-text":"Value Limit Description",value:this.datasheetPropertyType.typeLimit,name:"typeLimit","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)})),t("app-modal-footer",{key:"ea64e047436134b7634499a97a39775beea33329",color:c.getAppColor(),disableSave:!this.validDatasheetPropertyType,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};h.style=p;export{h as modal_datasheet_propertytype};