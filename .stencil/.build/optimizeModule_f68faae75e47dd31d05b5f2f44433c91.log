import{r as e,h as t,f as i}from"./p-cbe60c68.js";import{e as a,aa as s,aC as o,U as n,h as d,d as l,a3 as c,R as r,ay as f}from"./p-341ae8a8.js";import{S as b}from"./p-a75993af.js";import"./p-1819cfda.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-46038295.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const h="page-diving-school-details ion-segment-button{--color-checked:var(--ion-color-school-contrast)}";const p=h;const m=class{constructor(t){e(this,t);this.admin=false;this.markers=[];this.dsid=undefined;this.divingSchool=undefined;this.diveTrips=undefined;this.divingCourses=undefined;this.titles=[{tag:"map"},{tag:"information"},{tag:"diving-courses"},{tag:"team"},{tag:"next-trips",text:"Next Dive Trips"}];this.slider=undefined}async componentWillLoad(){if(a.selectedDivingSchool){this.admin=true;this.dsSubscription=a.selectedDivingSchool$.subscribe((e=>{if(e&&e.displayName){this.divingSchool=e;this.dsid=a.selectedDivingSchoolId}}))}else{this.admin=false;delete this.titles[4];delete this.titles[3];this.divingSchool=await a.getDivingSchool(this.dsid);this.diveTrips=await s.getTripsSummary(o,this.dsid)}this.userRoles=n.userRoles;this.divingCourses=await a.loadDivingSchoolCourses(this.divingSchool);let e=d.getMapDocs()[l].icon;e.size="large";this.markers.push({icon:e,latitude:this.divingSchool.position.geopoint.latitude,longitude:this.divingSchool.position.geopoint.longitude})}async componentDidLoad(){this.slider=new b(".slider-diving-school",{speed:400,spaceBetween:100,allowTouchMove:false,autoHeight:true});await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("#map");const e=this.el.querySelector("#map-container");e.setAttribute("style","height: "+c(this.divingSchool)+"px");this.mapElement["mapLoaded"]().then((()=>{this.mapElement.triggerMapResize()}));this.mapElement.triggerMapResize()}disconnectedCallback(){if(this.dsSubscription)this.dsSubscription.unsubscribe()}render(){return[t("ion-header",{key:"3fbcce28f7d226700785e3be9f2af0fa5a2a3ceb"},t("app-item-cover",{key:"e2affefc120fd3ba55ed020d0379d0f5d9df5560",item:this.divingSchool})),t("ion-header",{key:"7d51bbd52e391dbf2e00605bd2369d7737e46c6e"},t("ion-toolbar",{key:"1a4cd2e5544056ac74fa5a6f16b6ea771253f085",color:"school",class:"no-safe-padding"},this.divingSchool&&!this.divingSchool.coverURL?[t("ion-buttons",{slot:"start"},this.admin?t("ion-menu-button",null):t("ion-button",{onClick:()=>r.goBack(),"icon-only":true},t("ion-icon",{name:"arrow-back"}))),t("ion-buttons",{slot:"end"},this.admin?t("ion-button",{onClick:()=>a.presentDivingSchoolUpdate(this.dsid),"icon-only":true},t("ion-icon",{name:"create"})):undefined)]:undefined,t("ion-title",{key:"de178184d7c4189fd32d442debdf895fd74e1303"},this.divingSchool.displayName))),t("app-header-segment-toolbar",{key:"d99a4d45d338d06b9c05d10da8edf110d5ca3c5b",color:"school",swiper:this.slider,titles:this.titles}),t("ion-content",{key:"5d934e442d90e0b85a6d10626a8b0a22e63f41a8",class:"slides"},this.divingSchool&&this.divingSchool.coverURL?t("ion-fab",{vertical:"top",horizontal:"start",slot:"fixed",style:{marginTop:f(2)}},this.admin?t("ion-fab-button",{class:"fab-icon"},t("ion-menu-button",null)):t("ion-fab-button",{onClick:()=>r.goBack(),class:"fab-icon"},t("ion-icon",{name:"arrow-back-circle-outline"}))):undefined,this.admin?t("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed",style:{marginTop:f(2)}},t("ion-fab-button",{onClick:()=>a.presentDivingSchoolUpdate(this.dsid),class:"fab-icon"},t("ion-icon",{name:"create"}))):undefined,t("swiper-container",{key:"b9115b52ba46e3b93eca7bce44870c818f4f7bb6",class:"slider-diving-school swiper"},t("swiper-wrapper",{key:"f6aded3cd3f8db5bbb55e397369dab4a13d3575c",class:"swiper-wrapper"},t("swiper-slide",{key:"c4a5761e7f4a30347165fa6fff4477c62fd66c4e",class:"swiper-slide"},t("ion-list",{key:"bd35c434cb1a98b0db1d39f09def2395e698f142",class:"ion-no-padding"},t("ion-list-header",{key:"4d18593d1a20d0a9d874dde2b671804dc81abfea"},t("ion-label",{key:"fcff715facb5eb9f541996b6c2c6895813134296",color:"school"},t("my-transl",{key:"1f94c2db58c8e6c370535bcc7b20e6a3f591a87c",tag:"general-information",text:"General Information"}))),t("ion-item",{key:"38d8c8ad0fb5c6d209e1daebe5d9565a8fabbbcb"},t("ion-label",{key:"06b4ffa0559b14a9ed4157496618d20edd65eb14",class:"ion-text-wrap"},t("ion-text",{key:"0c1101355faf55cc792e784bff2f672ee1b7df5d",color:"dark"},t("p",{key:"f91fdb686cab3fe48cee2a78017aa62a157e2ac3"},this.divingSchool.description)))),this.divingSchool.email?t("ion-item",{button:true,href:"mailto:"+this.divingSchool.email},t("ion-icon",{slot:"start",name:"at-outline"}),t("ion-label",null,this.divingSchool.email)):undefined,this.divingSchool.phoneNumber?t("ion-item",{button:true,href:"tel:"+this.divingSchool.phoneNumber},t("ion-icon",{slot:"start",name:"call-outline"}),t("ion-label",null,this.divingSchool.phoneNumber)):undefined,this.divingSchool.website?t("ion-item",{button:true,href:"http://"+this.divingSchool.website,target:"_blank"},t("ion-icon",{slot:"start",name:"link-outline"}),t("ion-label",null,this.divingSchool.website)):undefined,this.divingSchool.facebook?t("ion-item",{button:true,href:"https://www.facebook.com/"+this.divingSchool.facebook,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-facebook"}),t("ion-label",null,this.divingSchool.facebook)):undefined,this.divingSchool.instagram?t("ion-item",{button:true,href:"https://www.instagram.com/"+this.divingSchool.instagram,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-instagram"}),t("ion-label",null,this.divingSchool.instagram)):undefined,this.divingSchool.twitter?t("ion-item",{button:true,href:"https://www.twitter.com/"+this.divingSchool.twitter,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-twitter"}),t("ion-label",null,"@",this.divingSchool.twitter)):undefined)),t("swiper-slide",{key:"f15d0a9ac3edf4b8df9f39cf7178b83c4b149033",class:"swiper-slide"},t("div",{key:"a6e5f9ae602b8e27054749aa5c81886837ac505f",id:"map-container"},t("app-map",{key:"698a51d4b0f860c521578383ed0a9ec70ff4bb13",id:"map",pageId:"dive-site-details",center:this.divingSchool,markers:this.markers}))),t("swiper-slide",{key:"f53a0214278e42492a1b00aec5fb809e5bd9faa7",class:"swiper-slide"},t("ion-grid",{key:"e9115623318338f96ffde3ddfe02cee2e22d45fb"},t("ion-row",{key:"54f5db4f48966e9ee0bdba87fdadf566261238e9",class:"ion-text-start"},this.divingCourses.divingSchoolCourses.map((e=>t("ion-col",{"size-sm":"12","size-md":"6","size-lg":"4"},t("app-dive-course-card",{divingCourse:e,edit:false}))))))),this.admin?t("swiper-slide",{class:"swiper-slide"},t("app-users-list",{item:this.divingSchool,show:["owner","editor","instructor"]})):t("swiper-slide",{class:"swiper-slide"},t("app-calendar",{calendarId:"diving-school-calendar",addEvents:{trips:this.diveTrips}}))))),this.admin?t("ion-footer",{class:"ion-no-border"},t("ion-toolbar",null,t("ion-button",{expand:"block",fill:"solid",color:"danger",onClick:()=>a.deleteDivingSchool(this.dsid)},t("ion-icon",{slot:"start",name:"trash"}),t("my-transl",{tag:"delete",text:"Delete",isLabel:true})))):undefined]}get el(){return i(this)}};m.style=p;export{m as page_diving_school_details};