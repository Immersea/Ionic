import{r as e,h as t,H as s,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as o}from"./p-5d4a8e1f.js";import{O as a,F as n,T as c,aP as r}from"./p-736235c6.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1819cfda.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-46038295.js";import"./p-7ee16e8d.js";const h="popover-edit-customer-owner{}popover-edit-customer-owner ion-list{min-height:300px}";const d=h;const p=class{constructor(t){e(this,t);this.owner=undefined;this.group=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.selectedOwner=new a;this.sharePerc=this.owner.groupOwnershipPerc;this.custGroups=n.getCustomerGroups();if(this.owner&&this.owner.groupId){this.selectedOwner=this.custGroups.find((e=>e.groupId==this.owner.groupId));if(!this.selectedOwner){this.newOwnerName=this.owner.groupName}}}componentDidLoad(){this.setOwnersSelect();this.updateView=!this.updateView}setOwnersSelect(){const e=this.el.querySelector("#selectOwner");const t={header:c.getTransl(this.group?"customer_group":"customer_owner",this.group?"Customer Group":"Customer Owner")};e.interfaceOptions=t;const s=Array.from(e.getElementsByTagName("ion-select-option"));s.map((t=>{e.removeChild(t)}));e.placeholder=c.getTransl("select","Select");this.custGroups.map((t=>{const s=document.createElement("ion-select-option");s.value=t;s.textContent=t.groupName;e.appendChild(s)}))}handleSelect(e){this.selectedOwner=e.detail.value}handleChange(e){this[e.detail.name]=e.detail.value;this.updateView=!this.updateView}close(){o.dismiss()}save(){if(this.newOwnerName){this.owner.groupId=r(this.newOwnerName);this.owner.groupName=this.newOwnerName}else{this.owner.groupId=this.selectedOwner.groupId;this.owner.groupName=this.selectedOwner.groupName}this.owner.groupOwnershipPerc=this.sharePerc;o.dismiss({owner:this.owner,new:this.newOwnerName&&this.newOwnerName.length>0})}render(){return t(s,{key:"1dff7bf07f86d0d59ccd99dbcb4913f7a209a1ed"},t("ion-header",{key:"6f2b2cc1339cd851e46cc88ef6df0d5c8f24947c",translucent:true},t("ion-toolbar",{key:"dc39a3da1af1ed611e1897f391bb21ccf3e9b65c"},t("ion-title",{key:"e089cee2b240c30c4698d5a167b6fcaa6e2db274"},"Select Owner/Group"))),t("ion-content",{key:"77e835c0a53e129ba57f9c5d805fcc04b542db37"},t("ion-item",{key:"a24fdfd3b4593e58716b8a9a29ee7e6a43f2cdb5",lines:"none"},t("ion-select",{key:"16a0eb99de670a840fdfee8d94d8d938b579301c",color:"trasteel",id:"selectOwner",interface:"action-sheet",label:"Customer","label-placement":"floating",disabled:this.newOwnerName&&this.newOwnerName.length>0,onIonChange:e=>this.handleSelect(e),value:this.selectedOwner})),t("ion-item-divider",{key:"33e5a2e050b8f642b43019332e6d5f3f40451308"}," - or insert new - "),t("app-form-item",{key:"774e2debe7dd0b3e1c6fb513e4c3b70afd1cad30",lines:"none","label-tag":"name","label-text":"Name",value:this.newOwnerName,name:"newOwnerName","input-type":"string",onFormItemChanged:e=>this.handleChange(e)}),this.group?t("app-form-item",{lines:"full","label-tag":"share_perc","label-text":"Share Percentage",value:this.sharePerc,name:"sharePerc","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"minmaxvalue",options:{min:0,max:100}}]}):undefined),t("ion-footer",{key:"9b978f0aa0932c666479c5102b23f12cdec6c188"},t("app-modal-footer",{key:"37c5bc16504848ad5afd44bd587a7d87df5a5d07",saveTag:{tag:"ok",text:"ok"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return i(this)}};p.style=d;export{p as popover_edit_customer_owner};