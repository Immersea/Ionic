import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as n,Y as c,S as l,T as r}from"./p-83f44900.js";import{E as d}from"./p-46038295.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const f="modal-datasheet-propertyname ion-list{width:100%}";const h=f;const m=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyNames=undefined;this.datasheetPropertyName=undefined;this.updateView=true;this.validDatasheetPropertyName=false}async componentWillLoad(){await this.loadDatasheetPropertyNames()}async loadDatasheetPropertyNames(){await n.downloadDatasheetSettings();this.datasheetPropertyNames=o.exports.cloneDeep(n.getDatasheetPropertyNames());if(this.datasheetPropertyNames&&this.datasheetPropertyNames.length>0){this.datasheetPropertyName=this.datasheetPropertyNames[0]}else{this.addDatasheetPropertyName()}this.validateDatasheet()}selectType(e){const t=e.detail.value;this.datasheetPropertyName=this.datasheetPropertyNames.find((e=>e.nameId==t));this.validateDatasheet()}selectPropertyType(e){this.datasheetPropertyName.nameType=e.detail.value;this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="nameId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyName[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyName=o.exports.isString(this.datasheetPropertyName.nameId)&&o.exports.isString(this.datasheetPropertyName.nameName)&&o.exports.isNumber(this.datasheetPropertyName.position)&&o.exports.isNumber(this.datasheetPropertyName.decimals);this.updateView=!this.updateView}addDatasheetPropertyName(){this.datasheetPropertyName=new c;this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}duplicateDatasheetPropertyName(){this.datasheetPropertyName=o.exports.cloneDeep(this.datasheetPropertyName);this.datasheetPropertyName.nameId=this.datasheetPropertyName.nameId+"_rev.";this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}async deleteDatasheetPropertyName(){try{this.datasheetPropertyNames.splice(this.index,1);this.index=0;this.datasheetPropertyName=this.datasheetPropertyNames[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyName",this.datasheetPropertyNames);return e?s.dismiss():true}async cancel(){return s.dismiss()}checkComments(){this.datasheetPropertyNames.map((e=>{const t=o.exports.split(e.nameName,"(");if(t.length<2){return null}const a=t[1];const i=o.exports.split(a,"Â°C");if(i.length<2){return null}}))}render(){return t(a,{key:"f3b13f3799fee2526a7d6e833c1dfef07e436b4d"},t("ion-content",{key:"e31545f624e32030b597a8f9bc4523b142c31af5"},t("ion-grid",{key:"1e6b7cc4f7afa7b867106fa8e931a0b8a7bd3528"},t("ion-row",{key:"7c34b27190598a22890d6d5cb47b210b771e9c61"},t("ion-col",{key:"b0f20c19ae550f468ca9ccc46c118c1d8b682b32"},t("app-select-search",{key:"b16fa98ecd780f8a841eff34b443e01e649d74d2",color:"trasteel",label:{tag:"datasheet_propertyName",text:"Datasheet Property Name"},value:this.index?this.datasheetPropertyNames[this.index].nameId:this.datasheetPropertyNames[0].nameId,lines:"none",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyNames,selectValueId:"nameId",selectValueText:["nameName"],disabled:!this.validDatasheetPropertyName})),t("ion-col",{key:"116ed80691c01adc83e84760e143b1029c84f4ed",size:"1",class:"ion-text-center"},t("ion-button",{key:"0119068e8947a89082ebabfebff42b4b96845895",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.addDatasheetPropertyName()},t("ion-icon",{key:"1fc2fcfa4529de0f3cc4d1298485b601c03d753a",name:"add",slot:"start"}))),t("ion-col",{key:"af4ea19edc8b2068d774e7119af2e6a4ef2b8963",size:"1",class:"ion-text-center"},t("ion-button",{key:"5c040540f4ccd2657c9141c9e79b5597c662ea8e",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.duplicateDatasheetPropertyName()},t("ion-icon",{key:"241fc228df167937b79d3215d6b6ab73a05d83ea",slot:"start",name:"duplicate"}))),t("ion-col",{key:"486a3accb31c28c6ed95e5aa48f9b470f04d52f6",size:"1",class:"ion-text-center"},t("ion-button",{key:"fee39c31921389b81d026605f2ab10ec0616e5ac",fill:"clear",color:"danger",disabled:this.datasheetPropertyNames.length==0,onClick:()=>this.deleteDatasheetPropertyName()},t("ion-icon",{key:"6f1989d254b68d7757bf71cb54543e5ec5a62785",slot:"start",name:"trash"}))))),t("ion-item",{key:"a11bf4cc08087b2b5ac9ae818c10e5f6157a359d",lines:"none"},t("ion-select",{key:"0322c6b63d9dac1697cc05fff9fb8b840d56f3f6",color:"trasteel",id:"selectType",interface:"action-sheet",label:r.getTransl("datasheet_propertyType","Datasheet Property Type"),"label-placement":"floating",onIonChange:e=>this.selectPropertyType(e)},n.datasheetPropertyTypes.map((e=>t("ion-select-option",{value:e.typeId},e.typeName))))),t("app-form-item",{key:"5a300860a519b147bf4382a1101d03fc21e5fb4e","label-text":"Position",value:this.datasheetPropertyName.position,name:"position","input-type":"number",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"2bd4522b4875edbc0a8dbc93412bc2b48485d179","label-text":"ID",value:this.datasheetPropertyName.nameId,name:"nameId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"nameId",list:n.getDatasheetPropertyNames()}}]}),t("app-form-item",{key:"891982b94395661ce2a8485ec87ffd094f7f8dfe","label-text":"Name",value:this.datasheetPropertyName.nameName,name:"nameName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"c430ca36af407c8f4d1e40cb6a264e4586c27f15","label-text":"Decimals",value:this.datasheetPropertyName.decimals,name:"decimals","input-type":"number",inputStep:"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"9d91d0b3a7f2cf581e500d2ad5a3c71a8703c23d","label-text":"Description Left",value:this.datasheetPropertyName.nameDescLeft,name:"nameDescLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"8a9481f9044b4985ca48eebbc7fe039503fc1af2","label-text":"Description Right",value:this.datasheetPropertyName.nameDescRight,name:"nameDescRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"fa2bf14c6bcc2c7c28c54ba434614e3b879c527f","label-text":"Comments",value:this.datasheetPropertyName.comments,name:"comments","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"0e9cb4192383babbc4f09d16adf6e00b5179b635","label-text":"Dimension",value:this.datasheetPropertyName.dimension,name:"dimension","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"})),t("app-modal-footer",{key:"ba9ade78b666a9aa9d7ef64a2491f946af6173d4",color:d.getAppColor(),disableSave:!this.validDatasheetPropertyName,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};m.style=h;export{m as modal_datasheet_propertyname};