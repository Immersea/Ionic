import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as c,_ as d,S as l,T as n}from"./p-30358c9d.js";import{E as r}from"./p-a9f4af61.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const h="modal-datasheet-qualitycolorcode ion-list{width:100%}";const f=h;const b=class{constructor(t){e(this,t);this.index=0;this.datasheetQualityColorCodes=undefined;this.datasheetQualityColorCode=undefined;this.updateView=true;this.validDatasheetQualityColorCode=false}async componentWillLoad(){await this.loadDatasheetQualityColorCodes()}async loadDatasheetQualityColorCodes(){await c.downloadDatasheetSettings();this.datasheetQualityColorCodes=o.exports.cloneDeep(c.getDatasheetQualityColorCodes());if(this.datasheetQualityColorCodes&&this.datasheetQualityColorCodes.length>0){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0]}else{this.addDatasheetQualityColorCode()}this.validateDatasheet()}selectType(e){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[e.detail.value];this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="qualityColorCodeId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetQualityColorCode[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetQualityColorCode=o.exports.isString(this.datasheetQualityColorCode.qualityColorCodeId)&&o.exports.isString(this.datasheetQualityColorCode.qualityColorCodePicture);this.updateView=!this.updateView}addDatasheetQualityColorCode(){this.datasheetQualityColorCode=new d;this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}duplicateDatasheetQualityColorCode(){this.datasheetQualityColorCode=o.exports.cloneDeep(this.datasheetQualityColorCode);this.datasheetQualityColorCode.qualityColorCodeId=this.datasheetQualityColorCode.qualityColorCodeId+"_rev.";this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}async deleteDatasheetQualityColorCode(){try{this.datasheetQualityColorCodes.splice(this.index,1);this.index=0;this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("qualityColorCode",this.datasheetQualityColorCodes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"1a07b36ce0f48c320c72fea24855165c29bae2c9"},t("ion-content",{key:"b8dce46c894fb8795c90068f2cd372c9b2b32b86"},t("ion-grid",{key:"36e2e41494d139e01f234a308a1aaac8ac14cb14"},t("ion-row",{key:"5ebe385559113e47570977174b21f584aec95143"},t("ion-col",{key:"0e963b95e8ab9efd268fbb49de8adc84dc2e9715"},t("ion-item",{key:"86e583971fa5e42f7202d956469a9f82b72aeb25",lines:"none"},t("ion-select",{key:"abc0d1fa2031d0964a8acc6033a5582f6ab22f91",color:"trasteel",id:"selectType",interface:"action-sheet",label:n.getTransl("datasheet_qualityColorCode","Datasheet QualityColorCode"),disabled:!this.validDatasheetQualityColorCode,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.datasheetQualityColorCodes.map(((e,a)=>t("ion-select-option",{value:a},e.qualityColorCodeId+" | "+e.qualityColorCodePicture)))))),t("ion-col",{key:"941e223a9c0ed14eebe695fafa14ceaec798d84c",size:"1",class:"ion-text-center"},t("ion-button",{key:"37c56aa18050d95bcd637ac75e06863fc32e1b0e",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.addDatasheetQualityColorCode()},t("ion-icon",{key:"e69599d31ef868f2e8384612f5ce6781f742782a",name:"add",slot:"start"}))),t("ion-col",{key:"bf03b80b4e89b129bb8722cbcd33a90917fc5b8e",size:"1",class:"ion-text-center"},t("ion-button",{key:"7fe1cec544046e4ac72d2a6945a765ec97b0a534",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.duplicateDatasheetQualityColorCode()},t("ion-icon",{key:"9e6efdfce73e4ba52a1dbafb780f8a1fe5eeb90e",slot:"start",name:"duplicate"}))),t("ion-col",{key:"0bd4abcb3f7f56b59d9a104da66742d2695d3719",size:"1",class:"ion-text-center"},t("ion-button",{key:"6130fdb5449ddb0f10fd41da3bae87ccbeed84d3",fill:"clear",color:"danger",disabled:this.datasheetQualityColorCodes.length==0,onClick:()=>this.deleteDatasheetQualityColorCode()},t("ion-icon",{key:"784bea0828c86c8f472ddaf81635fc68960affeb",slot:"start",name:"trash"}))))),t("app-form-item",{key:"6362196c2a4d475f666ad791dbe92526a06b7218","label-text":"ID",value:this.datasheetQualityColorCode.qualityColorCodeId,name:"qualityColorCodeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"qualityColorCodeId",list:c.getDatasheetQualityColorCodes()}}]}),t("app-form-item",{key:"b7176d1a2760d4d2bd120917b9538419f5344d72","label-text":"Name",value:this.datasheetQualityColorCode.qualityColorCodePicture,name:"qualityColorCodePicture","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"e3c56cb26749838f757becc5455b1e7d40a6350b",color:r.getAppColor(),disableSave:!this.validDatasheetQualityColorCode,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};b.style=f;export{b as modal_datasheet_qualitycolorcode};