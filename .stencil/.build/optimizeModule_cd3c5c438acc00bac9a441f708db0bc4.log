import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as c}from"./p-1af05547.js";import{ah as o,ai as n,S as l,T as f}from"./p-30358c9d.js";import{E as d}from"./p-a9f4af61.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const p="modal-project-applicationunit ion-list{width:100%}";const r=p;const h=class{constructor(t){e(this,t);this.index=0;this.applicationUnits=undefined;this.applicationUnit=undefined;this.updateView=true;this.validApplicationUnit=false}async componentWillLoad(){await this.loadApplicationUnits()}async loadApplicationUnits(){await o.downloadProjectSettings();this.applicationUnits=c.exports.cloneDeep(o.getApplicationUnits());if(this.applicationUnits&&this.applicationUnits.length>0){this.applicationUnit=this.applicationUnits[0]}else{this.addApplicationUnit()}this.validateProject()}selectType(e){this.applicationUnit=this.applicationUnits[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="familyId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.applicationUnit[t]=i;this.validateProject()}validateProject(){this.validApplicationUnit=c.exports.isString(this.applicationUnit.applicationId)&&c.exports.isString(this.applicationUnit.applicationId);this.updateView=!this.updateView}addApplicationUnit(){this.applicationUnit=new n;this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}duplicateApplicationUnit(){this.applicationUnit=c.exports.cloneDeep(this.applicationUnit);this.applicationUnit.applicationId=this.applicationUnit.applicationId+"_rev.";this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}async deleteApplicationUnit(){try{this.applicationUnits.splice(this.index,1);this.index=0;this.applicationUnit=this.applicationUnits[0];this.validateProject()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await o.uploadProjectSettings("applicationUnit",this.applicationUnits);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"79852bf146bf1e35ba3cc176781e36cf505fd521"},t("ion-content",{key:"b6f840b0a045ce9ff311ed94d8db43cfe4e5db33"},t("ion-grid",{key:"6433bc8c0096fdb0a2b4e315f0b34f25da40ee57"},t("ion-row",{key:"79f06acfc8083e76dde5bf3393e87241e5569471"},t("ion-col",{key:"b566d5a212c4026f344905c8444ddc073f136d7b"},t("ion-item",{key:"cd2ffba77b03e9540555ec71160d0c436ad64ec9",lines:"none"},t("ion-select",{key:"3c3b15dc1cf03ce59a6471bff0360addaa1ebd75",color:"trasteel",id:"selectType",interface:"action-sheet",label:f.getTransl("project_applicationunit","Project Application Unit"),disabled:!this.validApplicationUnit,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.applicationUnits.map(((e,i)=>t("ion-select-option",{value:i},e.applicationId)))))),t("ion-col",{key:"85aa0f4d7c05ca819c10c6f8db561d0def66eaeb",size:"1",class:"ion-text-center"},t("ion-button",{key:"ec9d486b80a3cc837c192b46f09ca7849b3019f8",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.addApplicationUnit()},t("ion-icon",{key:"a295702a3696a8964c1b71b2587a9b8ff172b9c3",name:"add",slot:"start"}))),t("ion-col",{key:"6cfab4828beef9a12341ce5c261a4c42a8f20e62",size:"1",class:"ion-text-center"},t("ion-button",{key:"6ef6a4efd286eecc138c41d209d8e07fb3f2832f",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.duplicateApplicationUnit()},t("ion-icon",{key:"15f305f520e5d3c12a83acc300de01ce74b9f0fc",slot:"start",name:"duplicate"}))),t("ion-col",{key:"eb00816505aba4ca92edc8b347a3c605a42ee57a",size:"1",class:"ion-text-center"},t("ion-button",{key:"b9af735666f83296c9b70cdb7eefa2bbe88e095e",fill:"clear",color:"danger",disabled:this.applicationUnits.length==0,onClick:()=>this.deleteApplicationUnit()},t("ion-icon",{key:"5a5e831b621d8b5934bfb2281bc77402a083d1db",slot:"start",name:"trash"}))))),t("app-form-item",{key:"9f9e2f4693c9620fff31ceccf3804bc145f32b47","label-text":"ID",value:this.applicationUnit.applicationId,name:"applicationId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"applicationId",list:o.getApplicationUnits()}}]}),t("app-form-item",{key:"0fc68182b6656ce8e3deef8670fab2a8bc288fce","label-text":"Name",value:this.applicationUnit.applicationName,name:"applicationName","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"c13fe20c0b309e5521c6b91d18e52d2fa6079be4","label-text":"Associated Goods Description",value:this.applicationUnit.applicationAssociatedGoodsDesc,name:"applicationAssociatedGoodsDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"}),t("app-form-item",{key:"e420026615eb6df22a30f90fe75ec035963f03bf","label-text":"Packing Description",value:this.applicationUnit.applicationPackingDesc,name:"applicationPackingDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"})),t("app-modal-footer",{key:"0006eff345014e73721bcdf55d350817c26c1145",color:d.getAppColor(),disableSave:!this.validApplicationUnit,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};h.style=r;export{h as modal_project_applicationunit};