import{r as e,h as i,f as a}from"./p-cbe60c68.js";import{U as s,ad as t,T as n,S as d,d as c,e as o,R as l,ay as r}from"./p-30358c9d.js";import{S as f}from"./p-a75993af.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const b="page-diving-class-details ion-list{width:100%}page-diving-class-details app-diving-class-schedule{width:100%}page-diving-class-details ion-segment-button{--color-checked:var(--ion-color-divingclass-contrast)}";const h=b;const p=class{constructor(i){e(this,i);this.markers=[];this.classid=undefined;this.divingClass=undefined;this.titles=[{tag:"details"},{tag:"schedule"},{tag:"bookings"}];this.slider=undefined;this.userId=undefined;this.selectedCourse=undefined;this.selectedAgency=undefined;this.selectedDivingSchool=undefined;this.instructors=undefined}async componentWillLoad(){this.userSub=s.userProfile$.subscribe((e=>{this.userId=e&&e.uid?e.uid:null}));this.divingClass=await t.getDivingClass(this.classid);this.userId=s.userProfile&&s.userProfile.uid?s.userProfile.uid:null;this.statusTitles={active:n.getTransl("active","Active"),closed:n.getTransl("closed","Closed"),cancelled:n.getTransl("cancelled","Cancelled")};const e=await d.getDivingCoursesForSchool();if(this.divingClass&&this.divingClass.course){this.selectedCourse=e.find((e=>e.agencyId===this.divingClass.course.agencyId&&e.id===this.divingClass.course.certificationId))}this.selectedAgency=(await d.getDivingAgencies())[this.selectedCourse.agencyId];if(this.divingClass.organiser.collectionId===c)this.selectedDivingSchool=o.getDivingSchoolDetails(this.divingClass.organiser.id);this.instructors=[];for(let e of Object.keys(this.divingClass.users)){if(this.divingClass.users[e].includes("instructor")){this.instructors.push(await s.getMapDataUserDetails(e))}}}async componentDidLoad(){this.slider=new f(".slider-diving-class",{speed:400,spaceBetween:100,allowTouchMove:true,autoHeight:true})}disconnectedCallback(){this.userSub.unsubscribe()}render(){return[this.selectedCourse&&this.selectedCourse.photoURL?i("ion-header",null,i("app-item-cover",{item:this.selectedCourse})):undefined,i("ion-header",{key:"e219c07a2cac71e3aa89c3f467e41736e57af0e3"},i("ion-toolbar",{key:"9a72e809975b3312e281ab031d0fe38899edbe74",color:"divingclass",class:this.selectedCourse&&this.selectedCourse.photoURL?"no-safe-padding":undefined},i("ion-buttons",{key:"427aacccde3b4c3cfabeaec243b185becac7740a",slot:"start"},!this.selectedCourse?i("ion-button",{onClick:()=>l.goBack(),"icon-only":true},i("ion-icon",{name:"arrow-back"})):undefined),i("ion-title",{key:"f96bd1840bea3017d85e2a0b08a114395a0bb060"},this.divingClass.name))),i("app-header-segment-toolbar",{key:"e2516f3ac5685a79c2586ed35216456a08d851fe",color:"divingclass",swiper:this.slider,titles:this.titles}),i("ion-content",{key:"2b12ebbd2eb1e916a2c29638166d69693243e92a",class:"slides"},this.selectedCourse&&this.selectedCourse.coverURL?i("ion-fab",{vertical:"top",horizontal:"start",slot:"fixed",style:{marginTop:r(2)}},i("ion-fab-button",{onClick:()=>l.goBack(),class:"fab-icon"},i("ion-icon",{name:"arrow-back-circle-outline"}))):undefined,i("swiper-container",{key:"27e3eca6e01489a859b8cfc980de066d90709615",class:"slider-diving-class swiper"},i("swiper-wrapper",{key:"65e4aae2230bd0cd8e71cfdba30f4aa2a2df0ea9",class:"swiper-wrapper"},i("swiper-slide",{key:"3bbd9f43f97d22e9b29c76d5bbe28fef02b54b30",class:"swiper-slide"},i("ion-list",{key:"7ec0b9247c680b1e6d7c5e16800b38c674b56653"},this.selectedDivingSchool?i("ion-item",null,i("ion-avatar",{slot:"start"},i("img",{src:this.selectedDivingSchool.photoURL})),i("ion-label",null,this.selectedDivingSchool.displayName)):undefined,this.selectedAgency?i("ion-item",null,i("ion-avatar",{slot:"start"},i("img",{src:this.selectedAgency.photoURL})),i("ion-label",null,this.selectedAgency.name)):undefined,this.selectedCourse?i("ion-item",null,i("ion-avatar",{slot:"start"},i("img",{src:this.selectedCourse.photoURL})),i("ion-label",null,this.selectedCourse.name)):undefined,i("ion-item",{key:"e67e903e473214a021c51b7c01fdad0d946bc6ed"},i("ion-icon",{key:"bc7bf8df224533a234888e544641b470071bd097",slot:"start",name:"navigate-outline"}),i("ion-label",{key:"272cff0d634271bf313d25f9a4d0f5300f966571"},this.divingClass.location.display_name)),i("ion-item",{key:"13d54cce4af7206d0d369ae32dc95bdba248e0cd"},i("ion-icon",{key:"dcb3d0688b61da1e76cb82fe06c4dc2443eedcfe",slot:"start",name:"scan-outline"}),i("ion-label",{key:"d5b21c91e23d3a14d5e97bb0c900d45a40a8ba03"},i("my-transl",{key:"5904d812b9e8e121b3af9fd3337772a7090a99b8",tag:"status",text:"Status"})),i("ion-note",{key:"302ad831aa867cbfcfa6ec3afa2cf5508b11280d",slot:"end"},this.statusTitles[this.divingClass.status])),i("ion-list-header",{key:"2b58d76c4ae58bd7151b8db6122f6b707ed9e96f"},i("my-transl",{key:"5f3daf59c8c347a62389bbd3b1508c82afe2063f",tag:"instructor",text:"Instructor"})),this.instructors.map((e=>i("ion-item",null,e.photoURL?i("ion-avatar",{slot:"start"},i("img",{src:e.photoURL})):i("ion-icon",{slot:"start",name:"person"}),i("ion-label",null,e.displayName)))),this.divingClass.comments?[i("ion-list-header",null,i("my-transl",{tag:"comments",text:"Comments"})),i("ion-item",null,i("ion-label",{class:"ion-text-wrap"},this.divingClass.comments))]:undefined)),i("swiper-slide",{key:"47585ec75d4aa68459a152ac67608885dd0411de",class:"swiper-slide"},i("app-diving-class-schedule",{key:"406e39dd5d0fd593c1a794feaf0aab422067ac85",divingClass:this.divingClass})),i("swiper-slide",{key:"a5f76d7fc52ef58cc1e3cad1bdc2e4c1155fe348",class:"swiper-slide"},i("ion-grid",{key:"4b7ea846bc067bfdeb2963caa7c00d9f3d4b77f9"},i("ion-row",{key:"29cf76a39bedce3a67621555a052fe2781cd5297",class:"ion-text-start"},!this.userId?i("div",{style:{marginTop:"10%",marginLeft:"auto",marginRight:"auto"}},i("ion-card",null,i("ion-card-header",null,i("ion-card-title",null,i("my-transl",{tag:"please-login",text:"Please login to view this page"}))))):i("app-dive-class-bookings",{divingClass:this.divingClass,divingClassId:this.classid})))))))]}get el(){return a(this)}};p.style=h;export{p as page_diving_class_details};