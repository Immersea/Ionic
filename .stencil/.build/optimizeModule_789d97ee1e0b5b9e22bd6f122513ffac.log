import{r as e,h as t}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as i}from"./p-c2915cc5.js";import{aN as a,E as o}from"./p-f42b650b.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const d="popover-media-loading ion-note{padding-left:20px}popover-media-loading .drop-area{width:100%}popover-media-loading app-dragdrop-file p{color:black !important}popover-media-loading app-dragdrop-file #drop-area{border:2px dashed black !important;height:100px !important}";const p=d;const n=class{constructor(t){e(this,t);this.media=undefined;this.file=undefined;this.validMedia=false;this.updateView=false}componentWillLoad(){if(!this.media){this.media=new a}if(this.file){this.updateMedia({detail:this.file})}else{this.validateMedia()}}async close(){i.dismiss()}async save(){i.dismiss({media:this.media,file:this.file})}validateMedia(){this.validMedia=this.media.title&&this.media.title.length>=3&&this.media.size>0&&this.media.type&&this.media.description&&this.media.description.length>5;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="order"){this.media[e.detail.name]=s.exports.toNumber(e.detail.value)}else{this.media[e.detail.name]=e.detail.value}this.validateMedia()}updatePublic(e){this.media.public=e.detail.checked;this.validateMedia()}updateMedia(e){this.file=e.detail;if(!this.media.title){this.media.title=this.file.name}this.media.name=this.file.name;this.media.lastModified=this.file.lastModified;this.media.size=this.file.size;this.media.type=this.file.type;this.validateMedia()}render(){return[t("ion-header",{key:"52f6eb768eea34e355857b74053c45b2c5294e79"},t("ion-toolbar",{key:"2bee837d9d7415d367d269167fd381de85ac3bbf",color:o.getAppColor()},t("ion-title",{key:"552d92a7461fee16e0ecb343002020c587264fe8"},"Media Loader"))),t("ion-content",{key:"20fe4fe5d881239c45c234ff81bb75f4eb3f4acd"},t("ion-list",{key:"1385c849571e49d1bf5261c91234b1ba9f6d99dd"},t("ion-note",{key:"ee467338324c93384c6ae6d5f1f58c22a922fd90"},"Id: ",this.media.id),t("app-form-item",{key:"8eb20b07ad8cb02dce0a6522707db55f74e89850","label-tag":"title","label-text":"Title",value:this.media.title,name:"title","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:3,max:20}}]}),t("app-form-item",{key:"472c5e1f20dad3f3a184553719d1ab4348a08667","label-tag":"subtitle","label-text":"Subtitle",value:this.media.subtitle,name:"subtitle","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"length",options:{min:0,max:30}}]}),t("app-form-item",{key:"f7e9ea49f6db39cef435a02200c1bb4e6d42aeb7","label-tag":"description","label-text":"Description",value:this.media.description,name:"description","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:5,max:100}}]}),t("ion-item",{key:"052d1ce8b4c8d8077120be387360de7532414318"},t("ion-label",{key:"bb1d984678592e92dfec2a4d29584d45fc3235e0"},t("my-transl",{key:"2e08dcec178f749369384c09c7582095622934be",tag:"public",text:"Public"})),t("ion-toggle",{key:"c6670ccef6130f3c7f07d74d8753d5af381b87d0",slot:"end",onIonChange:e=>this.updatePublic(e),checked:this.media.public}))),t("div",{key:"0b1851b1f48a675ba9c3efde7ed2a9fc365ed524",class:"drop-area"},t("app-dragdrop-file",{key:"46db57bde6a0479bd27233758bfb11251187f285",fileTypes:this.media.getTypes(),file:this.file,onFileSelected:e=>this.updateMedia(e)}))),t("app-modal-footer",{key:"011044e41534936c614f241e4fb4e18a95e49e49",color:o.getAppColor(),onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save(),disableSave:!this.validMedia})]}};n.style=p;export{n as popover_media_loading};