{"version":3,"names":["appSelectSearchCss","AppSelectSearchStyle0","AppSelectSearch","componentWillLoad","openSearchPopover","popover","popoverController","create","component","componentProps","label","this","selectOptions","selectValueText","selectValueId","value","placeholder","event","translucent","onDidDismiss","then","async","ev","data","selectFn","detail","updateView","present","getTextValue","item","find","x","text","cloneDeep","ret","index","length","isString","isObject","render","h","key","button","lines","disabled","onClick","style","color","tag","labelAddText","undefined","name","slot","size"],"sources":["src/components/common/app/common/app-select-search/app-select-search.scss?tag=app-select-search&encapsulation=shadow","src/components/common/app/common/app-select-search/app-select-search.tsx"],"sourcesContent":["app-select-search {\n}\n","import {popoverController} from \"@ionic/core\";\nimport {Component, Element, Prop, State, h} from \"@stencil/core\";\nimport {cloneDeep, find, isObject, isString} from \"lodash\";\n\n@Component({\n  tag: \"app-select-search\",\n  styleUrl: \"app-select-search.scss\",\n  shadow: true,\n})\nexport class AppSelectSearch {\n  @Element() el: HTMLElement;\n  @Prop() label: {tag: string; text: string};\n  @Prop() labelAddText: string;\n  @Prop() lines: \"inset\" | \"full\" | \"none\";\n  @Prop() selectFn: any;\n  @Prop() selectOptions: any[];\n  @Prop({mutable: true}) value: string;\n  @Prop() placeholder: string;\n  @Prop() selectValueId: string;\n  @Prop() selectValueText: string[];\n  @Prop() disabled = false;\n  @State() updateView = false;\n\n  componentWillLoad() {}\n\n  async openSearchPopover() {\n    const popover = await popoverController.create({\n      component: \"popover-select-search\",\n      componentProps: {\n        label: this.label,\n        selectOptions: this.selectOptions,\n        selectValueText: this.selectValueText,\n        selectValueId: this.selectValueId,\n        value: this.value,\n        placeholder: this.placeholder,\n      },\n      event: null,\n      translucent: true,\n    });\n    popover.onDidDismiss().then(async (ev) => {\n      if (ev && ev.data) {\n        this.value = ev.data[this.selectValueId];\n        //execute function and return selected value id - return same ev as ion-select\n        this.selectFn({detail: {value: this.value}});\n        this.updateView = !this.updateView;\n      }\n    });\n    popover.present();\n  }\n\n  getTextValue() {\n    const item = find(\n      this.selectOptions,\n      (x) => x[this.selectValueId] == this.value\n    );\n    let text = this.value;\n    if (item) {\n      text = cloneDeep(item);\n    }\n    let ret = null;\n    for (let index = 0; index < this.selectValueText.length; index++) {\n      const value = this.selectValueText[index];\n      if (isString(text[value])) {\n        ret = (ret ? ret + \"-\" : \"\") + text[value];\n      } else if (isObject(text[value])) {\n        index++;\n        //in case of TextMultiLanguage the second text is the language\n        ret = (ret ? ret + \"-\" : \"\") + text[value][this.selectValueText[index]];\n      }\n    }\n    return ret;\n  }\n\n  render() {\n    return (\n      <ion-item\n        button\n        lines={this.lines}\n        disabled={this.disabled}\n        onClick={() => this.openSearchPopover()}\n      >\n        <ion-label>\n          {this.value\n            ? [\n                this.label ? (\n                  <p\n                    style={{\n                      \"font-size\": \"0.75rem\",\n                      color: \"black\",\n                    }}\n                  >\n                    <my-transl\n                      tag={this.label.tag}\n                      text={this.label.text}\n                    ></my-transl>\n                    {this.labelAddText ? this.labelAddText : \"\"}\n                  </p>\n                ) : undefined,\n                <h2>{this.getTextValue()}</h2>,\n              ]\n            : this.label\n              ? [\n                  <my-transl\n                    tag={this.label.tag}\n                    text={this.label.text}\n                  ></my-transl>,\n                  this.labelAddText ? this.labelAddText : \"\",\n                ]\n              : undefined}\n        </ion-label>\n        <ion-icon name=\"caret-down\" slot=\"end\" size=\"small\"></ion-icon>\n      </ion-item>\n    );\n  }\n}\n"],"mappings":"kVAAA,MAAMA,EAAqB,GAC3B,MAAAC,EAAeD,E,MCQFE,EAAe,M,8QAWP,M,gBACG,K,CAEtB,iBAAAC,GAAiB,CAEjB,uBAAMC,GACJ,MAAMC,QAAgBC,EAAkBC,OAAO,CAC7CC,UAAW,wBACXC,eAAgB,CACdC,MAAOC,KAAKD,MACZE,cAAeD,KAAKC,cACpBC,gBAAiBF,KAAKE,gBACtBC,cAAeH,KAAKG,cACpBC,MAAOJ,KAAKI,MACZC,YAAaL,KAAKK,aAEpBC,MAAO,KACPC,YAAa,OAEfb,EAAQc,eAAeC,MAAKC,MAAOC,IACjC,GAAIA,GAAMA,EAAGC,KAAM,CACjBZ,KAAKI,MAAQO,EAAGC,KAAKZ,KAAKG,eAE1BH,KAAKa,SAAS,CAACC,OAAQ,CAACV,MAAOJ,KAAKI,SACpCJ,KAAKe,YAAcf,KAAKe,U,KAG5BrB,EAAQsB,S,CAGV,YAAAC,GACE,MAAMC,EAAOC,eACXnB,KAAKC,eACJmB,GAAMA,EAAEpB,KAAKG,gBAAkBH,KAAKI,QAEvC,IAAIiB,EAAOrB,KAAKI,MAChB,GAAIc,EAAM,CACRG,EAAOC,oBAAUJ,E,CAEnB,IAAIK,EAAM,KACV,IAAK,IAAIC,EAAQ,EAAGA,EAAQxB,KAAKE,gBAAgBuB,OAAQD,IAAS,CAChE,MAAMpB,EAAQJ,KAAKE,gBAAgBsB,GACnC,GAAIE,mBAASL,EAAKjB,IAAS,CACzBmB,GAAOA,EAAMA,EAAM,IAAM,IAAMF,EAAKjB,E,MAC/B,GAAIuB,mBAASN,EAAKjB,IAAS,CAChCoB,IAEAD,GAAOA,EAAMA,EAAM,IAAM,IAAMF,EAAKjB,GAAOJ,KAAKE,gBAAgBsB,G,EAGpE,OAAOD,C,CAGT,MAAAK,GACE,OACEC,EAAA,YAAAC,IAAA,2CACEC,OAAM,KACNC,MAAOhC,KAAKgC,MACZC,SAAUjC,KAAKiC,SACfC,QAAS,IAAMlC,KAAKP,qBAEpBoC,EAAA,aAAAC,IAAA,4CACG9B,KAAKI,MACF,CACEJ,KAAKD,MACH8B,EAAA,KACEM,MAAO,CACL,YAAa,UACbC,MAAO,UAGTP,EAAA,aACEQ,IAAKrC,KAAKD,MAAMsC,IAChBhB,KAAMrB,KAAKD,MAAMsB,OAElBrB,KAAKsC,aAAetC,KAAKsC,aAAe,IAEzCC,UACJV,EAAA,UAAK7B,KAAKiB,iBAEZjB,KAAKD,MACH,CACE8B,EAAA,aACEQ,IAAKrC,KAAKD,MAAMsC,IAChBhB,KAAMrB,KAAKD,MAAMsB,OAEnBrB,KAAKsC,aAAetC,KAAKsC,aAAe,IAE1CC,WAERV,EAAA,YAAAC,IAAA,2CAAUU,KAAK,aAAaC,KAAK,MAAMC,KAAK,U","ignoreList":[]}