import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{a as s,o as c}from"./p-5d4a8e1f.js";import{E as o}from"./p-46038295.js";import{T as d,U as f}from"./p-9a446c6a.js";import{b as n}from"./p-d2a582b5.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-736235c6.js";import"./p-1819cfda.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const r="modal-user-teams-update ion-list{width:100%}";const b=r;const l=class{constructor(t){e(this,t);this.user=undefined;this.usersTeams=undefined;this.userIndex=undefined;this.userTeams=undefined;this.updateView=false}async componentWillLoad(){this.usersTeams=await d.getUsersTeams();this.userIndex=this.usersTeams.usersTeams.length>0?this.usersTeams.usersTeams.findIndex((e=>e.uid===this.user.uid)):-1;if(this.userIndex<0){this.userTeams=new f(this.user)}else{this.userTeams=this.usersTeams.usersTeams[this.userIndex]}}async addTeam(){let e=[];let t=Object.keys(n);t.forEach((t=>{if(!this.userTeams.teams.includes(t)){e.push({text:t,handler:()=>{this.userTeams.teams.push(t);this.updateView=!this.updateView}})}}));e.push({text:"Close",icon:"close",role:"cancel",handler:()=>{}});const a=await s.create({header:"Add",buttons:e});await a.present()}async deleteTeam(e){this.userTeams.teams.splice(e);this.updateView=!this.updateView}async save(){if(this.userIndex>=0){this.usersTeams.usersTeams[this.userIndex]=this.userTeams}else{this.usersTeams.usersTeams.push(this.userTeams)}d.updateUsersTeams(this.usersTeams);c.dismiss()}async cancel(){return c.dismiss()}render(){return t(a,{key:"5eabfac71cbd8c471dba1e9d46203fbecd00035f"},t("ion-header",{key:"7e2ac126a02b950d65506a47b5c130ea7005fca0"},t("ion-toolbar",{key:"f91716ead72bd46e1df50e41fb3c96deb9308b02",color:"trasteel"},t("ion-title",{key:"28f2d13c7069e7fb876578c583b1c4399cf8e562"},"USER TEAMS MANAGER"))),t("ion-content",{key:"dbc0ecad2c673760d8eb16c31b63e96b6e1024c2"},t("ion-list",{key:"cc207f25418003dd2d2a27bad9b0877f9e1a602f"},t("ion-item",{key:"7bb859c3fe1a8bf9b168f8bbcb9f296e9a31cbf3"},this.user.email),t("ion-item-divider",{key:"b42fa629a9fcdd6a0142e70fc37f8aa9759369c7"},t("ion-label",{key:"8d78947bb4ac063c2a703bf5afe6c4e1f9f082f4"},t("my-transl",{key:"fb3168851baf87c9dca4580f9f6e7526634f92b9",tag:"teams",text:"Teams"}))),this.userTeams.teams.map(((e,a)=>t("ion-item",null,t("ion-label",null,e),t("ion-button",{slot:"end",fill:"clear",onClick:()=>this.deleteTeam(a)},t("ion-icon",{name:"trash",color:"danger"}))))),t("ion-button",{key:"14a603967cd981e1f356a557dc3537c17e2be205",color:"trasteel",fill:"outline",expand:"full",onClick:()=>{this.addTeam()}},t("ion-icon",{key:"8f9913f1c51197ac5803689479cf086cfa9418bc",name:"add",slot:"start"}),t("ion-label",{key:"598d82feb4b169fd1f7cd632c5d012aeac81809c"},t("my-transl",{key:"bc299b7dc25fc5d7f990dd6ca7ac9962fdb78dea",tag:"add-team",text:"Add Team"}))))),t("app-modal-footer",{key:"8884bbccc0698e773374af4cf15235575044636d",color:o.getAppColor(),onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};l.style=b;export{l as modal_user_teams_update};