{"version":3,"names":["popoverSelectSearchCss","PopoverSelectSearchStyle0","PopoverSelectSearch","componentWillLoad","this","popover","el","closest","filteredOptions","cloneDeep","selectOptions","componentDidLoad","searchbar","querySelector","componentOnReady","then","setTimeout","setFocus","handleSearch","ev","searchString","target","value","toLowerCase","forEach","option","text","getTextValue","includes","toLower","push","handleSelect","popoverController","dismiss","close","item","textValue","ret","index","selectValueText","length","isString","isObject","render","h","Host","key","translucent","class","size","animated","debounce","placeholder","onIonInput","color","Environment","getAppColor","fill","onClick","name","map","button","selectValueId","undefined"],"sources":["src/components/common/popovers/popover-select-search/popover-select-search.scss?tag=popover-select-search","src/components/common/popovers/popover-select-search/popover-select-search.tsx"],"sourcesContent":["popover-select-search {\n  /* Component styles go here */\n  .boldText {\n    font-weight: bold;\n  }\n}\n","import {Component, h, Host, Element, Prop, State} from \"@stencil/core\";\nimport {popoverController} from \"@ionic/core\";\nimport {cloneDeep, includes, isObject, isString, toLower} from \"lodash\";\nimport {Environment} from \"../../../../global/env\";\n@Component({\n  tag: \"popover-select-search\",\n  styleUrl: \"popover-select-search.scss\",\n})\nexport class PopoverSelectSearch {\n  @Element() el: HTMLElement;\n  @Prop() selectOptions: any[];\n  @Prop() selectValueText: string[];\n  @Prop() placeholder: string = \"Search\";\n  @Prop() selectValueId: string;\n  @Prop() value: string;\n  @State() filteredOptions: any;\n  popover: HTMLIonPopoverElement;\n\n  componentWillLoad() {\n    this.popover = this.el.closest(\"ion-popover\");\n    this.filteredOptions = cloneDeep(this.selectOptions);\n  }\n\n  componentDidLoad() {\n    const searchbar = this.el.querySelector(\"ion-searchbar\");\n    if (searchbar) {\n      searchbar.componentOnReady().then(() => {\n        setTimeout(() => {\n          searchbar.setFocus();\n        });\n      });\n    }\n  }\n\n  handleSearch(ev) {\n    let searchString = \"\";\n    const target = ev.target as HTMLIonSearchbarElement;\n    if (target) searchString = target.value!.toLowerCase();\n    this.filteredOptions = [];\n    this.selectOptions.forEach((option) => {\n      const text = this.getTextValue(option);\n      if (includes(toLower(text), searchString)) {\n        this.filteredOptions.push(option);\n      }\n    });\n  }\n\n  handleSelect(ev) {\n    popoverController.dismiss(ev);\n  }\n\n  close() {\n    popoverController.dismiss();\n  }\n\n  getTextValue(item) {\n    let textValue = cloneDeep(item);\n    let ret = null;\n    for (let index = 0; index < this.selectValueText.length; index++) {\n      const value = this.selectValueText[index];\n      if (isString(textValue[value])) {\n        ret = (ret ? ret + \"-\" : \"\") + textValue[value];\n      } else if (isObject(textValue[value])) {\n        index++;\n        //in case of TextMultiLanguage the second text is the language\n        ret =\n          (ret ? ret + \"-\" : \"\") +\n          textValue[value][this.selectValueText[index]];\n      }\n    }\n    return ret;\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header translucent>\n          <ion-toolbar>\n            <ion-grid class=\"ion-no-padding\">\n              <ion-row>\n                <ion-col size=\"10\">\n                  <ion-searchbar\n                    animated={true}\n                    debounce={250}\n                    placeholder={this.placeholder}\n                    onIonInput={(ev) => this.handleSearch(ev)}\n                  ></ion-searchbar>\n                </ion-col>\n                <ion-col size=\"1\">\n                  <ion-button\n                    color={Environment.getAppColor()}\n                    icon-only\n                    fill=\"clear\"\n                    onClick={this.close}\n                  >\n                    <ion-icon name=\"close\"></ion-icon>\n                  </ion-button>\n                </ion-col>\n              </ion-row>\n            </ion-grid>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            {this.filteredOptions.map((option) => (\n              <ion-item\n                button\n                onClick={() => this.handleSelect(option)}\n                class={\n                  option[this.selectValueId] == this.value ? \"boldText\" : \"\"\n                }\n              >\n                {option[this.selectValueId] == this.value ? (\n                  <ion-icon name=\"checkmark\"></ion-icon>\n                ) : undefined}\n                <ion-label>{this.getTextValue(option)}</ion-label>\n              </ion-item>\n            ))}\n          </ion-list>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"mappings":"6XAAA,MAAMA,EAAyB,2EAC/B,MAAAC,EAAeD,E,MCOFE,EAAmB,M,sGAIA,S,iFAM9B,iBAAAC,GACEC,KAAKC,QAAUD,KAAKE,GAAGC,QAAQ,eAC/BH,KAAKI,gBAAkBC,oBAAUL,KAAKM,c,CAGxC,gBAAAC,GACE,MAAMC,EAAYR,KAAKE,GAAGO,cAAc,iBACxC,GAAID,EAAW,CACbA,EAAUE,mBAAmBC,MAAK,KAChCC,YAAW,KACTJ,EAAUK,UAAU,GACpB,G,EAKR,YAAAC,CAAaC,GACX,IAAIC,EAAe,GACnB,MAAMC,EAASF,EAAGE,OAClB,GAAIA,EAAQD,EAAeC,EAAOC,MAAOC,cACzCnB,KAAKI,gBAAkB,GACvBJ,KAAKM,cAAcc,SAASC,IAC1B,MAAMC,EAAOtB,KAAKuB,aAAaF,GAC/B,GAAIG,mBAASC,kBAAQH,GAAON,GAAe,CACzChB,KAAKI,gBAAgBsB,KAAKL,E,KAKhC,YAAAM,CAAaZ,GACXa,EAAkBC,QAAQd,E,CAG5B,KAAAe,GACEF,EAAkBC,S,CAGpB,YAAAN,CAAaQ,GACX,IAAIC,EAAY3B,oBAAU0B,GAC1B,IAAIE,EAAM,KACV,IAAK,IAAIC,EAAQ,EAAGA,EAAQlC,KAAKmC,gBAAgBC,OAAQF,IAAS,CAChE,MAAMhB,EAAQlB,KAAKmC,gBAAgBD,GACnC,GAAIG,mBAASL,EAAUd,IAAS,CAC9Be,GAAOA,EAAMA,EAAM,IAAM,IAAMD,EAAUd,E,MACpC,GAAIoB,mBAASN,EAAUd,IAAS,CACrCgB,IAEAD,GACGA,EAAMA,EAAM,IAAM,IACnBD,EAAUd,GAAOlB,KAAKmC,gBAAgBD,G,EAG5C,OAAOD,C,CAGT,MAAAM,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,cAAAE,IAAA,2CAAYC,YAAW,MACrBH,EAAA,eAAAE,IAAA,4CACEF,EAAA,YAAAE,IAAA,2CAAUE,MAAM,kBACdJ,EAAA,WAAAE,IAAA,4CACEF,EAAA,WAAAE,IAAA,2CAASG,KAAK,MACZL,EAAA,iBAAAE,IAAA,2CACEI,SAAU,KACVC,SAAU,IACVC,YAAahD,KAAKgD,YAClBC,WAAalC,GAAOf,KAAKc,aAAaC,MAG1CyB,EAAA,WAAAE,IAAA,2CAASG,KAAK,KACZL,EAAA,cAAAE,IAAA,2CACEQ,MAAOC,EAAYC,cAAa,iBAEhCC,KAAK,QACLC,QAAStD,KAAK8B,OAEdU,EAAA,YAAAE,IAAA,2CAAUa,KAAK,gBAO3Bf,EAAA,eAAAE,IAAA,4CACEF,EAAA,YAAAE,IAAA,4CACG1C,KAAKI,gBAAgBoD,KAAKnC,GACzBmB,EAAA,YACEiB,OAAM,KACNH,QAAS,IAAMtD,KAAK2B,aAAaN,GACjCuB,MACEvB,EAAOrB,KAAK0D,gBAAkB1D,KAAKkB,MAAQ,WAAa,IAGzDG,EAAOrB,KAAK0D,gBAAkB1D,KAAKkB,MAClCsB,EAAA,YAAUe,KAAK,cACbI,UACJnB,EAAA,iBAAYxC,KAAKuB,aAAaF,S","ignoreList":[]}