import{r as e,h as t}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as i}from"./p-5d4a8e1f.js";import{aw as a}from"./p-30358c9d.js";import{E as o}from"./p-a9f4af61.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const d="popover-media-loading ion-note{padding-left:20px}popover-media-loading .drop-area{width:100%}popover-media-loading app-dragdrop-file p{color:black !important}popover-media-loading app-dragdrop-file #drop-area{border:2px dashed black !important;height:100px !important}";const p=d;const n=class{constructor(t){e(this,t);this.media=undefined;this.file=undefined;this.validMedia=false;this.updateView=false}componentWillLoad(){if(!this.media){this.media=new a}if(this.file){this.updateMedia({detail:this.file})}else{this.validateMedia()}}async close(){i.dismiss()}async save(){i.dismiss({media:this.media,file:this.file})}validateMedia(){this.validMedia=this.media.title&&this.media.title.length>=3&&this.media.size>0&&this.media.type&&this.media.description&&this.media.description.length>5;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="order"){this.media[e.detail.name]=s.exports.toNumber(e.detail.value)}else{this.media[e.detail.name]=e.detail.value}this.validateMedia()}updatePublic(e){this.media.public=e.detail.checked;this.validateMedia()}updateMedia(e){this.file=e.detail;if(!this.media.title){this.media.title=this.file.name}this.media.name=this.file.name;this.media.lastModified=this.file.lastModified;this.media.size=this.file.size;this.media.type=this.file.type;this.validateMedia()}render(){return[t("ion-header",{key:"2757e33b5a0eda4441a0972702a8a5065e21edfc"},t("ion-toolbar",{key:"5806635449cda8edcd2ab8cf11f828ddff0660f3",color:o.getAppColor()},t("ion-title",{key:"3b679a10278554c7eaf04580298eee679c1b6475"},"Media Loader"))),t("ion-content",{key:"1049087d68fca510b3701fb2eae96dc42043f498"},t("ion-list",{key:"fc3302c95e19f7b084ed93cb3deff7d780b6d532"},t("ion-note",{key:"6df6d9c3d90d21721fe3ba98bd273622077e35b1"},"Id: ",this.media.id),t("app-form-item",{key:"0985b88d2c1ec306eb3af64c9af81f2900f2f83c","label-tag":"title","label-text":"Title",value:this.media.title,name:"title","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:3,max:20}}]}),t("app-form-item",{key:"db667aeb0063603e739f3a1d15fe1af22df5d585","label-tag":"subtitle","label-text":"Subtitle",value:this.media.subtitle,name:"subtitle","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"length",options:{min:0,max:30}}]}),t("app-form-item",{key:"81943aa543b89e7df9a97bd9e9e6b0f432013da4","label-tag":"description","label-text":"Description",value:this.media.description,name:"description","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:5,max:100}}]}),t("ion-item",{key:"466ae94d5ea7993d0b192dcd6f68e0cab5b8002e"},t("ion-label",{key:"a6dbed4a84b174c4932472bebf32d9c8b5fc5412"},t("my-transl",{key:"fc48d69633b1a91f939ab3b4833783f1d92e7621",tag:"public",text:"Public"})),t("ion-toggle",{key:"122a35ece00a12509717c86ac3e38695a050c730",slot:"end",onIonChange:e=>this.updatePublic(e),checked:this.media.public}))),t("div",{key:"a9bf0a18a73fd3832702d7b39e18e5b02912ff0e",class:"drop-area"},t("app-dragdrop-file",{key:"166f13cf161557bc209345bceed6f8af4a2222b4",fileTypes:this.media.getTypes(),file:this.file,onFileSelected:e=>this.updateMedia(e)}))),t("app-modal-footer",{key:"a08b09d32c1fbe24e59c0d65aa836394c204c8e0",color:o.getAppColor(),onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save(),disableSave:!this.validMedia})]}};n.style=p;export{n as popover_media_loading};