import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s,a as o}from"./p-5d4a8e1f.js";import{m as n,ag as l,p as d}from"./p-f3984daf.js";import{E as r}from"./p-a9f4af61.js";import{T as c}from"./p-f3670b4c.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";class m{getUserRoles(){return["registered","translator","superAdmin"]}}const f=new m;const h="modal-edit-user-roles ion-list{width:100%}";const p=h;const b=class{constructor(t){e(this,t);this.uid=undefined;this.userRoles=undefined;this.updateView=false}async componentWillLoad(){const e=await n.getDocument(l,this.uid);this.userRoles=new d(e)}async save(){await n.updateDocument(l,this.uid,this.userRoles);s.dismiss()}async cancel(){s.dismiss()}async presentActionSheet(){let e=[];let t=[];if(r.isTrasteel()){t=c.getUserRoles()}else if(r.isDecoplanner()||r.isUdive()){t=f.getUserRoles()}t.forEach((t=>{if(!this.userRoles.roles.includes(t)){e.push({text:t,handler:()=>{this.userRoles.roles.push(t);this.updateView=!this.updateView}})}}));e.push({text:"Close",icon:"close",role:"cancel",handler:()=>{}});const i=await o.create({header:"Add",buttons:e});await i.present()}updateLicense(e,t){this.userRoles.licences[e]=t.detail.checked;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="fromDate"){this.userRoles.licences.trial.fromDate=new Date(e.detail.value)}else{this.userRoles.licences.trial[e.detail.name]=e.detail.value}this.updateView=!this.updateView}deleteRole(e){const t=this.itemSliding.getElementsByClassName("item-sliding-"+e)[0];t.closeOpened();this.userRoles.roles.splice(e,1);this.updateView=!this.updateView}render(){return t(i,{key:"0ea54a3531c997f8d62412f2a2fe92456794a316"},t("ion-header",{key:"9ad67a145aea1d592943baca98991c6cd4120df6"},t("ion-toolbar",{key:"7290c1b99481b81e85a09d3d06cb44d60b15e72d",color:r.getAppColor()},t("ion-title",{key:"a191af6fdf16fd7074fc0dd45c31b3698937a513"},"User Roles Manager"))),t("ion-content",{key:"6d23c0e5df067d05428e223c6f3b48143e8a03d2"},t("ion-list",{key:"e48abea7d33eadead13cda3e4f503563ce5df88b"},t("ion-item",{key:"97816ffc3408692549947b7ca6c64415c781d50d"},"uid: ",this.userRoles.uid),t("ion-item",{key:"daee167c7e45b33fce39ce7fdcc67699dea3c222"},"email: ",this.userRoles.email),!r.isTrasteel&&Object.keys(this.userRoles.licences).length>0?[t("ion-item-divider",null,"User Licences"),Object.keys(this.userRoles.licences).map((e=>e=="trial"?[t("ion-item-divider",null,t("ion-label",null,"Trial")),t("app-form-item",{"label-tag":"duration","label-text":"Duration",value:this.userRoles.licences.trial.duration,name:"duration","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("app-form-item",{"label-tag":"fromDate","label-text":"From Date",value:this.userRoles.licences.trial.fromDate!==null?this.userRoles.licences.trial.fromDate.toISOString():(new Date).toISOString(),name:"fromDate","input-type":"date",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("app-form-item",{"label-tag":"level","label-text":"Level",value:this.userRoles.licences.trial.level,name:"level","input-type":"string",onFormItemChanged:e=>this.handleChange(e),validator:[]}),t("ion-item",null,t("ion-label",null,t("p",null,"Trial Days:"," ",this.userRoles.licences.trialDays())))]:[t("ion-item",null,t("ion-label",null,e),t("ion-toggle",{slot:"end",onIonChange:t=>this.updateLicense(e,t),checked:this.userRoles.licences[e]}))]))]:null),t("ion-list",{key:"aa597fc9b9347e9653629e95c23d389b79a46c47"},t("ion-item-divider",{key:"bca845247d9276d23e748f9d07945de46dd1be73"},"User Roles"),this.userRoles.roles.map(((e,i)=>t("ion-item-sliding",{class:"item-sliding-"+i},t("ion-item",null,t("ion-label",null,e)),t("ion-item-options",null,t("ion-item-option",{color:"danger",onClick:()=>this.deleteRole(i)},"Delete"))))),t("ion-item",{key:"d77423bf32a6bb3360d9ef3b83920bea77543019",button:true,onClick:()=>this.presentActionSheet()},t("ion-icon",{key:"51e24369742912e8bf29bf39c537b047a3c3ade8",name:"add"}),t("ion-label",{key:"b9b170d8b6c9698f3c520ec877705193db88b48a"},"Add")))),t("app-modal-footer",{key:"77a3ba94286289b5ac7c25841451ea065a7ec3ec",color:r.getAppColor(),onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get itemSliding(){return a(this)}};b.style=p;export{b as modal_edit_user_roles};