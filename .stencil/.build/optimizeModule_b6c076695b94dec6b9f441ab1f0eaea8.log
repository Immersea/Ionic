import{r as e,h as a,H as t,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as c}from"./p-1af05547.js";import{a6 as o,a9 as l,S as d,E as n}from"./p-f42b650b.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const h="modal-datasheet-majorfamily ion-list{width:100%}";const r=h;const f=class{constructor(a){e(this,a);this.index=0;this.datasheetMajorFamilies=undefined;this.datasheetMajorFamily=undefined;this.updateView=true;this.validDatasheetMajorFamily=false}async componentWillLoad(){await this.loadDatasheetMajorFamilies()}async loadDatasheetMajorFamilies(){await o.downloadDatasheetSettings();this.datasheetMajorFamilies=c.exports.cloneDeep(o.getDatasheetMajorFamilies());if(this.datasheetMajorFamilies&&this.datasheetMajorFamilies.length>0){this.datasheetMajorFamily=this.datasheetMajorFamilies[0]}else{this.addDatasheetMajorFamily()}this.validateDatasheet()}selectType(e){this.datasheetMajorFamily=this.datasheetMajorFamilies.find((a=>a.majorFamilyId==e.detail.value));this.validateDatasheet()}handleChange(e){const a=e.detail.name;let t=e.detail.value;if(a=="majorFamilyId"){t=t.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetMajorFamily[a]=t;this.validateDatasheet()}validateDatasheet(){this.validDatasheetMajorFamily=c.exports.isString(this.datasheetMajorFamily.majorFamilyId)&&c.exports.isString(this.datasheetMajorFamily.majorFamilyName);this.updateView=!this.updateView}addDatasheetMajorFamily(){this.datasheetMajorFamily=new l;this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}duplicateDatasheetMajorFamily(){this.datasheetMajorFamily=c.exports.cloneDeep(this.datasheetMajorFamily);this.datasheetMajorFamily.majorFamilyId=this.datasheetMajorFamily.majorFamilyId+"_rev.";this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}async deleteDatasheetMajorFamily(){try{this.datasheetMajorFamilies.splice(this.index,1);this.index=0;this.datasheetMajorFamily=this.datasheetMajorFamilies[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await o.uploadDatasheetSettings("majorfamily",this.datasheetMajorFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return a(t,{key:"61ca81454dc0121ee1c951a21990037e59b17c0d"},a("ion-content",{key:"b2eba4a349bfab3c03bb6ff0430d465dabc64c37"},a("ion-grid",{key:"41c4b5ab2249595852e1ad2e05b9ed4f1d4b38a1"},a("ion-row",{key:"0db78acc4ad7e5b09c66ed307f5ab0efd4059a4d"},a("ion-col",{key:"f61ba96b0ee36de711aafa75a6887e85a786418d"},a("app-select-search",{key:"f63763a763b1a0ea66d72802b9d64cee2db8effc",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetMajorFamilies[this.index].majorFamilyId:this.datasheetMajorFamilies[0].majorFamilyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetMajorFamilies,selectValueId:"majorFamilyId",selectValueText:["majorFamilyName"],disabled:!this.validDatasheetMajorFamily})),a("ion-col",{key:"f5e4373d8bcaf800050a90138f5324cfcfa67aff",size:"1",class:"ion-text-center"},a("ion-button",{key:"573534de2a1f2d6b75b50833dc73b840db5a5516",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.addDatasheetMajorFamily()},a("ion-icon",{key:"fbcbe6f3ceabf9966b7c0c5638c624706f8d8b28",name:"add",slot:"start"}))),a("ion-col",{key:"ed63ca62aa2bc4eeacc32180f74aedfc5f1af4d7",size:"1",class:"ion-text-center"},a("ion-button",{key:"a85ff01c9a648cef4def3a46967066bc2ee62935",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.duplicateDatasheetMajorFamily()},a("ion-icon",{key:"4eab7a04453198c24ecfcaa6b97dec8a2da5cb61",slot:"start",name:"duplicate"}))),a("ion-col",{key:"219f0d10d603c3a4279b034199dc99c01425c1c5",size:"1",class:"ion-text-center"},a("ion-button",{key:"941b6f1a9cd0d49e91177cd12d5e9392b74bb1a8",fill:"clear",color:"danger",disabled:this.datasheetMajorFamilies.length==0,onClick:()=>this.deleteDatasheetMajorFamily()},a("ion-icon",{key:"00fea19a620a6ff865a2c836d6546f65f8af6685",slot:"start",name:"trash"}))))),a("app-form-item",{key:"9d6be02d45a707c81be727ed6dfc26fc2e885e66","label-text":"ID",value:this.datasheetMajorFamily.majorFamilyId,name:"majorFamilyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"majorFamilyId",list:o.getDatasheetMajorFamilies()}}]}),a("app-form-item",{key:"8b681269411e3a77df3a8b591b79be7294400671","label-text":"Name",value:this.datasheetMajorFamily.majorFamilyName,name:"majorFamilyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),a("app-modal-footer",{key:"346a90807d02aee0f76fa7f46695e42c74b84f2c",color:n.getAppColor(),disableSave:!this.validDatasheetMajorFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=r;export{f as modal_datasheet_majorfamily};