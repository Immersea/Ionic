import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as c}from"./p-1af05547.js";import{E as o}from"./p-46038295.js";import{Q as l,X as d,S as n}from"./p-736235c6.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const r="modal-datasheet-majorfamily ion-list{width:100%}";const h=r;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetMajorFamilies=undefined;this.datasheetMajorFamily=undefined;this.updateView=true;this.validDatasheetMajorFamily=false}async componentWillLoad(){await this.loadDatasheetMajorFamilies()}async loadDatasheetMajorFamilies(){await l.downloadDatasheetSettings();this.datasheetMajorFamilies=c.exports.cloneDeep(l.getDatasheetMajorFamilies());if(this.datasheetMajorFamilies&&this.datasheetMajorFamilies.length>0){this.datasheetMajorFamily=this.datasheetMajorFamilies[0]}else{this.addDatasheetMajorFamily()}this.validateDatasheet()}selectType(e){this.datasheetMajorFamily=this.datasheetMajorFamilies.find((t=>t.majorFamilyId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="majorFamilyId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetMajorFamily[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetMajorFamily=c.exports.isString(this.datasheetMajorFamily.majorFamilyId)&&c.exports.isString(this.datasheetMajorFamily.majorFamilyName);this.updateView=!this.updateView}addDatasheetMajorFamily(){this.datasheetMajorFamily=new d;this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}duplicateDatasheetMajorFamily(){this.datasheetMajorFamily=c.exports.cloneDeep(this.datasheetMajorFamily);this.datasheetMajorFamily.majorFamilyId=this.datasheetMajorFamily.majorFamilyId+"_rev.";this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}async deleteDatasheetMajorFamily(){try{this.datasheetMajorFamilies.splice(this.index,1);this.index=0;this.datasheetMajorFamily=this.datasheetMajorFamilies[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await l.uploadDatasheetSettings("majorfamily",this.datasheetMajorFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"167063851eb12b1461f3f3256238050ddcb3adf1"},t("ion-content",{key:"1e63da05883cf4dae2da810ac3ec07f7d0cd6ace"},t("ion-grid",{key:"a5bba91767c70561247c70b4f266c7f0f5b84b65"},t("ion-row",{key:"7e63df630fb50046b569b223ea5a39c5eb68a769"},t("ion-col",{key:"ed38430d49dc54dfc058af5b70746c721bb60d15"},t("app-select-search",{key:"0d1b6a03046ce93adfcfc3bcf425b52c96fcc0bc",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetMajorFamilies[this.index].majorFamilyId:this.datasheetMajorFamilies[0].majorFamilyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetMajorFamilies,selectValueId:"majorFamilyId",selectValueText:["majorFamilyName"],disabled:!this.validDatasheetMajorFamily})),t("ion-col",{key:"d0001aec6dd512ae15115012689866c982778f7b",size:"1",class:"ion-text-center"},t("ion-button",{key:"7229a147315300bc3a7ee434b4edc29af892f9c7",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.addDatasheetMajorFamily()},t("ion-icon",{key:"4d4a71f561ca737b04219419c885b81c5fa83e99",name:"add",slot:"start"}))),t("ion-col",{key:"11348ccd3eb1010c57e5228a0169d4d19e4c7702",size:"1",class:"ion-text-center"},t("ion-button",{key:"cdbd7a5946acc4d66f579e27f42be25dce90a4fc",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.duplicateDatasheetMajorFamily()},t("ion-icon",{key:"74800907c1336c71115f982acfce81ec36caa879",slot:"start",name:"duplicate"}))),t("ion-col",{key:"70730e9a2284480bf71915edc60b35f62cba618c",size:"1",class:"ion-text-center"},t("ion-button",{key:"ec5f47b621ad7aa8876f2f3fddd7681ab139f750",fill:"clear",color:"danger",disabled:this.datasheetMajorFamilies.length==0,onClick:()=>this.deleteDatasheetMajorFamily()},t("ion-icon",{key:"373b1dbebf2f55891c4e60f118c0868be2fcb0b2",slot:"start",name:"trash"}))))),t("app-form-item",{key:"8f8cfeb7b70b9397c91792940950b97161312441","label-text":"ID",value:this.datasheetMajorFamily.majorFamilyId,name:"majorFamilyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"majorFamilyId",list:l.getDatasheetMajorFamilies()}}]}),t("app-form-item",{key:"915bd67e860402c8e898c314c02942a2de41a17a","label-text":"Name",value:this.datasheetMajorFamily.majorFamilyName,name:"majorFamilyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"2d6077b35e7d5972c591638167d14f4e4eb6106d",color:o.getAppColor(),disableSave:!this.validDatasheetMajorFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=h;export{f as modal_datasheet_majorfamily};