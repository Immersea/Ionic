import{r as e,h as a,H as t,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as c}from"./p-1af05547.js";import{a6 as o,a9 as l,S as d,E as n}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const h="modal-datasheet-majorfamily ion-list{width:100%}";const r=h;const f=class{constructor(a){e(this,a);this.index=0;this.datasheetMajorFamilies=undefined;this.datasheetMajorFamily=undefined;this.updateView=true;this.validDatasheetMajorFamily=false}async componentWillLoad(){await this.loadDatasheetMajorFamilies()}async loadDatasheetMajorFamilies(){await o.downloadDatasheetSettings();this.datasheetMajorFamilies=c.exports.cloneDeep(o.getDatasheetMajorFamilies());if(this.datasheetMajorFamilies&&this.datasheetMajorFamilies.length>0){this.datasheetMajorFamily=this.datasheetMajorFamilies[0]}else{this.addDatasheetMajorFamily()}this.validateDatasheet()}selectType(e){this.datasheetMajorFamily=this.datasheetMajorFamilies.find((a=>a.majorFamilyId==e.detail.value));this.validateDatasheet()}handleChange(e){const a=e.detail.name;let t=e.detail.value;if(a=="majorFamilyId"){t=t.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetMajorFamily[a]=t;this.validateDatasheet()}validateDatasheet(){this.validDatasheetMajorFamily=c.exports.isString(this.datasheetMajorFamily.majorFamilyId)&&c.exports.isString(this.datasheetMajorFamily.majorFamilyName);this.updateView=!this.updateView}addDatasheetMajorFamily(){this.datasheetMajorFamily=new l;this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}duplicateDatasheetMajorFamily(){this.datasheetMajorFamily=c.exports.cloneDeep(this.datasheetMajorFamily);this.datasheetMajorFamily.majorFamilyId=this.datasheetMajorFamily.majorFamilyId+"_rev.";this.datasheetMajorFamilies.push(this.datasheetMajorFamily);this.index=this.datasheetMajorFamilies.length-1}async deleteDatasheetMajorFamily(){try{this.datasheetMajorFamilies.splice(this.index,1);this.index=0;this.datasheetMajorFamily=this.datasheetMajorFamilies[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await o.uploadDatasheetSettings("majorfamily",this.datasheetMajorFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return a(t,{key:"08de0b44d4c47ede0530034c5d56965bc5762540"},a("ion-content",{key:"a5d4f651be8a8fa02532e1d756700ed067e2d239"},a("ion-grid",{key:"91301f27213cf5eaaf69b88eb27c4159304383ed"},a("ion-row",{key:"fadc64f9fce3df79adba84a8e1b827249d17c8a0"},a("ion-col",{key:"6312bacc7c07a1eda4ba0abe2de0573d6b5c0339"},a("app-select-search",{key:"dc8e7a051d73a2ee07a7c2685dbe5b9db1ac4cb9",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetMajorFamilies[this.index].majorFamilyId:this.datasheetMajorFamilies[0].majorFamilyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetMajorFamilies,selectValueId:"majorFamilyId",selectValueText:["majorFamilyName"],disabled:!this.validDatasheetMajorFamily})),a("ion-col",{key:"aaf37af69059450ec98d8767779a949348de642a",size:"1",class:"ion-text-center"},a("ion-button",{key:"436e63936e575e45500863219c4ef7a61c480a64",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.addDatasheetMajorFamily()},a("ion-icon",{key:"804e9747e9fb51d88026012092c614525cbb5048",name:"add",slot:"start"}))),a("ion-col",{key:"1c8d99e4f8e4df3d94736b21ba43b2c7cf6cf9d4",size:"1",class:"ion-text-center"},a("ion-button",{key:"0857be8639e23372b59d878320eef6e1c814c01e",fill:"clear",disabled:!this.validDatasheetMajorFamily,onClick:()=>this.duplicateDatasheetMajorFamily()},a("ion-icon",{key:"e5acd2e380dc674def6ee55a32b3fe8477c84857",slot:"start",name:"duplicate"}))),a("ion-col",{key:"9a1cdb9c7f6b71f1e6637958f98a6a4fafb0169a",size:"1",class:"ion-text-center"},a("ion-button",{key:"550aee82272e37084878b1989ea7f9d67073f80e",fill:"clear",color:"danger",disabled:this.datasheetMajorFamilies.length==0,onClick:()=>this.deleteDatasheetMajorFamily()},a("ion-icon",{key:"aabeef4e86427ac1cd5d30ec91812d56ba1edc8f",slot:"start",name:"trash"}))))),a("app-form-item",{key:"abcbd8e8ee07fb8249c3eccb0f9125bfb3276e32","label-text":"ID",value:this.datasheetMajorFamily.majorFamilyId,name:"majorFamilyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"majorFamilyId",list:o.getDatasheetMajorFamilies()}}]}),a("app-form-item",{key:"e40ab8f69fde5e5970572b60bc4e0fb7c09cec60","label-text":"Name",value:this.datasheetMajorFamily.majorFamilyName,name:"majorFamilyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),a("app-modal-footer",{key:"7e05d92fe1c84e7a7367da7aec64c6ff7bdcadf0",color:n.getAppColor(),disableSave:!this.validDatasheetMajorFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=r;export{f as modal_datasheet_majorfamily};