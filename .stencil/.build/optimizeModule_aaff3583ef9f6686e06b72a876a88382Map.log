{"version":3,"names":["popoverSearchUserCss","PopoverSearchUserStyle0","PopoverSearchUser","componentWillLoad","this","popover","el","closest","searchUsers","ev","noResult","showList","searching","query","target","value","toLowerCase","res","DatabaseService","queryCollection","USERPUBLICPROFILECOLLECTION","forEach","doc","push","data","length","addUser","user","dismiss","uid","render","h","Host","key","translucent","tag","text","onIonBlur","inputmode","type","placeholder","map","button","onClick","photoURL","slot","src","undefined","displayName","skeleton"],"sources":["src/components/common/popovers/popover-search-user/popover-search-user.scss?tag=popover-search-user","src/components/common/popovers/popover-search-user/popover-search-user.tsx"],"sourcesContent":["popover-search-user {\n  /* Component styles go here */\n  ion-list {\n    min-height: 300px;\n  }\n}\n","import {Component, h, Host, State, Element} from \"@stencil/core\";\nimport {DatabaseService} from \"../../../../services/common/database\";\nimport {USERPUBLICPROFILECOLLECTION} from \"../../../../services/common/user\";\n//import { UserService } from \"../../../../services/common/user\";\n\n@Component({\n  tag: \"popover-search-user\",\n  styleUrl: \"popover-search-user.scss\",\n})\nexport class PopoverSearchUser {\n  @Element() el: HTMLElement;\n  @State() showList: any[] = [];\n  @State() searching = false;\n  @State() noResult = false;\n  popover: HTMLIonPopoverElement;\n\n  componentWillLoad() {\n    this.popover = this.el.closest(\"ion-popover\");\n  }\n\n  async searchUsers(ev) {\n    this.noResult = false;\n    this.showList = [];\n    this.searching = true;\n    const query = ev.target.value.toLowerCase();\n    const res = await DatabaseService.queryCollection(\n      USERPUBLICPROFILECOLLECTION,\n      [\"email\"],\n      [\"=\"],\n      [query]\n    );\n    res.forEach((doc) => {\n      this.showList.push(doc.data());\n    });\n    if (this.showList.length == 0) {\n      this.noResult = true;\n    } else {\n      this.noResult = false;\n    }\n    this.searching = false;\n  }\n\n  addUser(user) {\n    this.popover.dismiss(user.uid);\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header translucent>\n          <ion-toolbar>\n            <ion-title>\n              <my-transl tag=\"search\" text=\"Search\" />\n            </ion-title>\n          </ion-toolbar>\n          <ion-toolbar>\n            <ion-searchbar\n              onIonBlur={(ev) => this.searchUsers(ev)}\n              inputmode=\"email\"\n              type=\"email\"\n              placeholder=\"email\"\n            ></ion-searchbar>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            {this.showList.map((user) => (\n              <ion-item button onClick={() => this.addUser(user)}>\n                {user.photoURL ? (\n                  <ion-avatar slot=\"start\">\n                    <ion-img src={user.photoURL} />\n                  </ion-avatar>\n                ) : undefined}\n                <ion-label>{user.displayName}</ion-label>\n              </ion-item>\n            ))}\n            {this.searching ? (\n              <app-skeletons skeleton=\"chat\"></app-skeletons>\n            ) : undefined}\n\n            {this.noResult ? (\n              <ion-item>\n                <ion-label>No Users found!</ion-label>\n              </ion-item>\n            ) : undefined}\n          </ion-list>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"mappings":"4WAAA,MAAMA,EAAuB,sEAC7B,MAAAC,EAAeD,E,MCQFE,EAAiB,M,uCAED,G,eACN,M,cACD,K,CAGpB,iBAAAC,GACEC,KAAKC,QAAUD,KAAKE,GAAGC,QAAQ,c,CAGjC,iBAAMC,CAAYC,GAChBL,KAAKM,SAAW,MAChBN,KAAKO,SAAW,GAChBP,KAAKQ,UAAY,KACjB,MAAMC,EAAQJ,EAAGK,OAAOC,MAAMC,cAC9B,MAAMC,QAAYC,EAAgBC,gBAChCC,EACA,CAAC,SACD,CAAC,KACD,CAACP,IAEHI,EAAII,SAASC,IACXlB,KAAKO,SAASY,KAAKD,EAAIE,OAAO,IAEhC,GAAIpB,KAAKO,SAASc,QAAU,EAAG,CAC7BrB,KAAKM,SAAW,I,KACX,CACLN,KAAKM,SAAW,K,CAElBN,KAAKQ,UAAY,K,CAGnB,OAAAc,CAAQC,GACNvB,KAAKC,QAAQuB,QAAQD,EAAKE,I,CAG5B,MAAAC,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,cAAAE,IAAA,2CAAYC,YAAW,MACrBH,EAAA,eAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,2CAAWE,IAAI,SAASC,KAAK,aAGjCL,EAAA,eAAAE,IAAA,4CACEF,EAAA,iBAAAE,IAAA,2CACEI,UAAY5B,GAAOL,KAAKI,YAAYC,GACpC6B,UAAU,QACVC,KAAK,QACLC,YAAY,YAIlBT,EAAA,eAAAE,IAAA,4CACEF,EAAA,YAAAE,IAAA,4CACG7B,KAAKO,SAAS8B,KAAKd,GAClBI,EAAA,YAAUW,OAAM,KAACC,QAAS,IAAMvC,KAAKsB,QAAQC,IAC1CA,EAAKiB,SACJb,EAAA,cAAYc,KAAK,SACfd,EAAA,WAASe,IAAKnB,EAAKiB,YAEnBG,UACJhB,EAAA,iBAAYJ,EAAKqB,gBAGpB5C,KAAKQ,UACJmB,EAAA,iBAAekB,SAAS,SACtBF,UAEH3C,KAAKM,SACJqB,EAAA,gBACEA,EAAA,qCAEAgB,Y","ignoreList":[]}