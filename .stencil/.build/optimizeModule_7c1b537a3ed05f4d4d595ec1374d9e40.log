import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as c}from"./p-1af05547.js";import{ay as o,aA as n,S as l,E as r,T as d}from"./p-944b5726.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const b="modal-project-bricksallocationarea ion-list{width:100%}";const f=b;const h=class{constructor(t){e(this,t);this.index=0;this.bricksAllocationAreas=undefined;this.bricksAllocationArea=undefined;this.updateView=true;this.validBricksAllocationArea=false}async componentWillLoad(){await this.loadBricksAllocationAreas()}async loadBricksAllocationAreas(){await o.downloadProjectSettings();this.bricksAllocationAreas=c.exports.cloneDeep(o.getBricksAllocationAreas());if(this.bricksAllocationAreas&&this.bricksAllocationAreas.length>0){this.bricksAllocationArea=this.bricksAllocationAreas[0]}else{this.addBricksAllocationArea()}this.validateProject()}selectType(e){this.bricksAllocationArea=this.bricksAllocationAreas[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="familyId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.bricksAllocationArea[t]=a;this.validateProject()}validateProject(){this.validBricksAllocationArea=c.exports.isString(this.bricksAllocationArea.bricksAllocationAreaId)&&c.exports.isString(this.bricksAllocationArea.bricksAllocationAreaId);this.updateView=!this.updateView}addBricksAllocationArea(){this.bricksAllocationArea=new n;this.bricksAllocationAreas.push(this.bricksAllocationArea);this.index=this.bricksAllocationAreas.length-1}duplicateBricksAllocationArea(){this.bricksAllocationArea=c.exports.cloneDeep(this.bricksAllocationArea);this.bricksAllocationArea.bricksAllocationAreaId=this.bricksAllocationArea.bricksAllocationAreaId+"_rev.";this.bricksAllocationAreas.push(this.bricksAllocationArea);this.index=this.bricksAllocationAreas.length-1}async deleteBricksAllocationArea(){try{this.bricksAllocationAreas.splice(this.index,1);this.index=0;this.bricksAllocationArea=this.bricksAllocationAreas[0];this.validateProject()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await o.uploadProjectSettings("bricksAllocationArea",this.bricksAllocationAreas);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"d523e2a51eb294096103262d63b43b635c2c8ead"},t("ion-content",{key:"57c24dbc66fda95495e193f59a9a094cb02fb98e"},t("ion-grid",{key:"5749f2e8b821d6d28ace4b1b6c85064c1b7c8ade"},t("ion-row",{key:"caa2b4b1b76b07b25b5eef8a64a5af5d595860dd"},t("ion-col",{key:"33ad29d97279cd5ec8876c8d186a03955e4509e8"},t("ion-item",{key:"e1b7783307f73bcb8dc24f6f75525a8907fb72c0",lines:"none"},t("ion-select",{key:"cf7b45194cfa79f94322ae1fa8bb523c6acf8903",color:"trasteel",id:"selectType",interface:"action-sheet",label:d.getTransl("project_bricksallocationarea","Project Bricks Allocation Area"),disabled:!this.validBricksAllocationArea,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.bricksAllocationAreas.map(((e,a)=>t("ion-select-option",{value:a},e.bricksAllocationAreaId+" | "+e.bricksAllocationAreaName.en)))))),t("ion-col",{key:"5d65e75ca30fad47092e9f19ca404d4f775a1cb3",size:"1",class:"ion-text-center"},t("ion-button",{key:"1b1897074225f321b5f52d09f9ebb2c75693c6f8",fill:"clear",disabled:!this.validBricksAllocationArea,onClick:()=>this.addBricksAllocationArea()},t("ion-icon",{key:"48d97c30f9f297db530b6f70e1bfc7f2416c38a2",name:"add",slot:"start"}))),t("ion-col",{key:"a99aa8237b45b4bd60dab5aa4816285d7d12fbe8",size:"1",class:"ion-text-center"},t("ion-button",{key:"a8040182a12b2781d90b7bae9baa9dde936320bd",fill:"clear",disabled:!this.validBricksAllocationArea,onClick:()=>this.duplicateBricksAllocationArea()},t("ion-icon",{key:"3780e530e44886e01cdf9f13777dd23b62f91559",slot:"start",name:"duplicate"}))),t("ion-col",{key:"25cc475563919e5d832142eff808eeb987644fdf",size:"1",class:"ion-text-center"},t("ion-button",{key:"03696aef8f2c1a707e1aa4922506143198ba83c6",fill:"clear",color:"danger",disabled:this.bricksAllocationAreas.length==0,onClick:()=>this.deleteBricksAllocationArea()},t("ion-icon",{key:"9bd1d62efdc54cca358e4c43189a0a50c6dc9963",slot:"start",name:"trash"}))))),t("app-form-item",{key:"80c347e361f2af5398b26249aabf0e643e9035da","label-text":"ID",value:this.bricksAllocationArea.bricksAllocationAreaId,name:"bricksAllocationAreaId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"bricksAllocationAreaId",list:o.getBricksAllocationAreas()}}]}),t("app-form-item",{key:"798489a3b257097609ea6d80d74d50218d06095a","label-text":"Name",value:this.bricksAllocationArea.bricksAllocationAreaName,name:"bricksAllocationAreaName","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"a7a53b4ea0b1ccfad9a67c290300b38fdd37b9c9",color:r.getAppColor(),disableSave:!this.validBricksAllocationArea,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};h.style=f;export{h as modal_project_bricksallocationarea};