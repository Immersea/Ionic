import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{ah as n,ai as c,S as d,T as l}from"./p-736235c6.js";import{E as f}from"./p-46038295.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const p="modal-project-applicationunit ion-list{width:100%}";const r=p;const h=class{constructor(t){e(this,t);this.index=0;this.applicationUnits=undefined;this.applicationUnit=undefined;this.updateView=true;this.validApplicationUnit=false}async componentWillLoad(){await this.loadApplicationUnits()}async loadApplicationUnits(){await n.downloadProjectSettings();this.applicationUnits=o.exports.cloneDeep(n.getApplicationUnits());if(this.applicationUnits&&this.applicationUnits.length>0){this.applicationUnit=this.applicationUnits[0]}else{this.addApplicationUnit()}this.validateProject()}selectType(e){this.applicationUnit=this.applicationUnits[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="familyId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.applicationUnit[t]=i;this.validateProject()}validateProject(){this.validApplicationUnit=o.exports.isString(this.applicationUnit.applicationId)&&o.exports.isString(this.applicationUnit.applicationId);this.updateView=!this.updateView}addApplicationUnit(){this.applicationUnit=new c;this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}duplicateApplicationUnit(){this.applicationUnit=o.exports.cloneDeep(this.applicationUnit);this.applicationUnit.applicationId=this.applicationUnit.applicationId+"_rev.";this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}async deleteApplicationUnit(){try{this.applicationUnits.splice(this.index,1);this.index=0;this.applicationUnit=this.applicationUnits[0];this.validateProject()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await n.uploadProjectSettings("applicationUnit",this.applicationUnits);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"ddafe2db501f6f248e439eb2c1b15abee0074bcf"},t("ion-content",{key:"1edadd99e3262a696368123055952cf7995cb405"},t("ion-grid",{key:"02c520bbbde1975fa95396f36bf69db488352763"},t("ion-row",{key:"f3b5471a8288327a07cd84bf37568781532acf97"},t("ion-col",{key:"3e3fe9af90c591a64abd473bf2d6274fad51a866"},t("ion-item",{key:"16fba5eb195f60e27c6378f5b7394df61064bb51",lines:"none"},t("ion-select",{key:"602fb0b54796974b61627e0c00b86f235ffb4a29",color:"trasteel",id:"selectType",interface:"action-sheet",label:l.getTransl("project_applicationunit","Project Application Unit"),disabled:!this.validApplicationUnit,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.applicationUnits.map(((e,i)=>t("ion-select-option",{value:i},e.applicationId)))))),t("ion-col",{key:"8fac5192b8185c9323fd6ab296a510838c37da9f",size:"1",class:"ion-text-center"},t("ion-button",{key:"1aaa2de66d82d1e7ac9dd40d601746bc5d018d2c",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.addApplicationUnit()},t("ion-icon",{key:"95e398009b6605b23dce4e08aeee975588f81a42",name:"add",slot:"start"}))),t("ion-col",{key:"7d91e3c2ddf5d35f32fcde19ff3eb5462f2faece",size:"1",class:"ion-text-center"},t("ion-button",{key:"06e943f7e993bbbd0bdbec9da65d278148fc05d1",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.duplicateApplicationUnit()},t("ion-icon",{key:"4201abe61186bad2d5ea3a7fdc875e06f5a5fab2",slot:"start",name:"duplicate"}))),t("ion-col",{key:"a3ed9efb2a504d2b567563d92b5098e3f56e8ebb",size:"1",class:"ion-text-center"},t("ion-button",{key:"457231d6c2ff810dcf99846a880b4ee508f54936",fill:"clear",color:"danger",disabled:this.applicationUnits.length==0,onClick:()=>this.deleteApplicationUnit()},t("ion-icon",{key:"d9a8115f30d932e5d3ee86470cfc02ce4788a12e",slot:"start",name:"trash"}))))),t("app-form-item",{key:"86588480854c562e6eb5e623f0a398836a2bbd8f","label-text":"ID",value:this.applicationUnit.applicationId,name:"applicationId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"applicationId",list:n.getApplicationUnits()}}]}),t("app-form-item",{key:"4948767fba8a921ef677c4af0152a49c59e968d6","label-text":"Name",value:this.applicationUnit.applicationName,name:"applicationName","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"4ad756d5439c5b1d38668193c7e2cefa4ee1246d","label-text":"Associated Goods Description",value:this.applicationUnit.applicationAssociatedGoodsDesc,name:"applicationAssociatedGoodsDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"}),t("app-form-item",{key:"c519a5a62f857534f5b96c594caa4fb101881450","label-text":"Packing Description",value:this.applicationUnit.applicationPackingDesc,name:"applicationPackingDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"})),t("app-modal-footer",{key:"2628c0ee601c149e22389fce7453b05fe4448413",color:f.getAppColor(),disableSave:!this.validApplicationUnit,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};h.style=r;export{h as modal_project_applicationunit};