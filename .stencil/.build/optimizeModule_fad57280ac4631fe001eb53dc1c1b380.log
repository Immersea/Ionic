import{r as t,e as i,h as e}from"./p-cbe60c68.js";import{S as s,E as o}from"./p-773bd3de.js";import"./p-c7ee7cfe.js";import{n}from"./p-c2915cc5.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const a="modal-quill-editor{}modal-quill-editor .ql-container{height:calc(100% - 50px) !important}";const r=a;const c=class{constructor(e){t(this,e);this.edit=i(this,"edit",7);this.languageSelected="en";this.updateView=false;this.immerseaLocation=undefined;this.readOnly=false;this.article=undefined;this.selectedArticle=undefined}refresh(){this.selectedArticle=this.article[this.languageSelected]}componentWillLoad(){this.article=this.immerseaLocation.article;this.languages=s.getLanguages();if(!this.article)this.article={};this.languages.map((t=>{if(!this.article[t.value]){this.article[t.value]={ops:[{insert:""}]}}}));this.selectLanguage()}initEditor(t){this.editor=t.detail}selectLanguage(t){if(t&&t.detail.value){this.languageSelected=t.detail.value}this.refresh()}getContents(t){if(t.detail.event=="text-change"&&t.detail.content){this.article[this.languageSelected]=t.detail.content;this.refresh()}}async save(){return n.dismiss(this.article)}async cancel(){return n.dismiss()}render(){return[!this.readOnly?e("ion-header",null,e("ion-toolbar",{color:o.getAppColor()},e("ion-title",null,"Editor"))):undefined,e("ion-header",{key:"0c4e890ae30978f29c5673cafbf92d25416fa570"},e("ion-toolbar",{key:"379a0f4ceeb41ddd4ac406643bb16562d38ae47d",color:o.getAppColor()},e("ion-segment",{key:"a4fd1e512a51c18ace36a62584835bce66ac5c7c",mode:"md",scrollable:true,onIonChange:t=>this.selectLanguage(t),value:this.languageSelected},this.languages.map((t=>e("ion-segment-button",{value:t.value,layout:"icon-start"},e("ion-icon",{class:"flag-icon flag-icon-"+(t.countryCode=="en"?"gb":t.countryCode)}),e("ion-label",null,t.label))))),this.readOnly?e("ion-button",{slot:"end",onClick:()=>this.edit.emit(true)},e("ion-label",null,"EDIT")):undefined)),e("ion-content",{key:"4cb0e94a5df54105de2f6b6197bee82280d2d0e3"},!this.readOnly?e("quill-editor",{immerseaLocation:this.immerseaLocation,content:JSON.stringify(this.selectedArticle),format:"json",theme:"snow",onEditorInit:t=>this.initEditor(t),onEditorChange:t=>this.getContents(t)}):e("quill-view",{content:JSON.stringify(this.selectedArticle),format:"json",theme:"snow"})),!this.readOnly?e("app-modal-footer",{onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}):undefined]}static get watchers(){return{updateView:["refresh"]}}};c.style=r;export{c as modal_quill_editor};