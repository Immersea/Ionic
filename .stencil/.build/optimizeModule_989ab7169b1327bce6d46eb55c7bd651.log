import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as o}from"./p-1af05547.js";import{a6 as n,aa as c,S as l,E as r,T as d}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const h="modal-datasheet-propertyname ion-list{width:100%}";const f=h;const m=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyNames=undefined;this.datasheetPropertyName=undefined;this.updateView=true;this.validDatasheetPropertyName=false}async componentWillLoad(){await this.loadDatasheetPropertyNames()}async loadDatasheetPropertyNames(){await n.downloadDatasheetSettings();this.datasheetPropertyNames=o.exports.cloneDeep(n.getDatasheetPropertyNames());if(this.datasheetPropertyNames&&this.datasheetPropertyNames.length>0){this.datasheetPropertyName=this.datasheetPropertyNames[0]}else{this.addDatasheetPropertyName()}this.validateDatasheet()}selectType(e){const t=e.detail.value;this.datasheetPropertyName=this.datasheetPropertyNames.find((e=>e.nameId==t));this.validateDatasheet()}selectPropertyType(e){this.datasheetPropertyName.nameType=e.detail.value;this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="nameId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyName[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyName=o.exports.isString(this.datasheetPropertyName.nameId)&&o.exports.isString(this.datasheetPropertyName.nameName)&&o.exports.isNumber(this.datasheetPropertyName.position)&&o.exports.isNumber(this.datasheetPropertyName.decimals);this.updateView=!this.updateView}addDatasheetPropertyName(){this.datasheetPropertyName=new c;this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}duplicateDatasheetPropertyName(){this.datasheetPropertyName=o.exports.cloneDeep(this.datasheetPropertyName);this.datasheetPropertyName.nameId=this.datasheetPropertyName.nameId+"_rev.";this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}async deleteDatasheetPropertyName(){try{this.datasheetPropertyNames.splice(this.index,1);this.index=0;this.datasheetPropertyName=this.datasheetPropertyNames[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyName",this.datasheetPropertyNames);return e?s.dismiss():true}async cancel(){return s.dismiss()}checkComments(){this.datasheetPropertyNames.map((e=>{const t=o.exports.split(e.nameName,"(");if(t.length<2){return null}const a=t[1];const i=o.exports.split(a,"Â°C");if(i.length<2){return null}}))}render(){return t(a,{key:"f7a53c28afa10555fb3e72531d2c24374d5c5812"},t("ion-content",{key:"00983fe119ad7c28e8eaa8cb81414834941951d7"},t("ion-grid",{key:"d722a2823379b86f0045543c1569358ef28b287c"},t("ion-row",{key:"e83bf9359832f9435af1d03db04b686ce2d40bb3"},t("ion-col",{key:"be6f741c7a5850e2e100e9bd67526c747ce2cb30"},t("app-select-search",{key:"9af61047bd87cfae35b962c307e3f1d779fa1727",color:"trasteel",label:{tag:"datasheet_propertyName",text:"Datasheet Property Name"},value:this.index?this.datasheetPropertyNames[this.index].nameId:this.datasheetPropertyNames[0].nameId,lines:"none",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyNames,selectValueId:"nameId",selectValueText:["nameName"],disabled:!this.validDatasheetPropertyName})),t("ion-col",{key:"205eb9d6a24657d4337431f64598e93ecee39e34",size:"1",class:"ion-text-center"},t("ion-button",{key:"94bffd2567827a7baa1bf63d48446e4188a907a8",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.addDatasheetPropertyName()},t("ion-icon",{key:"08738eb4a046fe152e57c3b071b37d5ae33f9109",name:"add",slot:"start"}))),t("ion-col",{key:"6deeedda4bfc4a3ed312b0eaeb2448aed8b49684",size:"1",class:"ion-text-center"},t("ion-button",{key:"3a1c7133347f7e5e52d037331b7e891002a781b2",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.duplicateDatasheetPropertyName()},t("ion-icon",{key:"1da2bf6b1d3e18f02c4575dc78f7d7bef7955bae",slot:"start",name:"duplicate"}))),t("ion-col",{key:"9f6f2a79aab6b94858676fc14e64b06d150cf548",size:"1",class:"ion-text-center"},t("ion-button",{key:"516ffde2a27c45804afdecd07d55161c1caa9d21",fill:"clear",color:"danger",disabled:this.datasheetPropertyNames.length==0,onClick:()=>this.deleteDatasheetPropertyName()},t("ion-icon",{key:"2101fd307dce652863266c6dbf73fb905be1583a",slot:"start",name:"trash"}))))),t("ion-item",{key:"4a742643ff4ad39dacf0c78461ca5725605e97c3",lines:"none"},t("ion-select",{key:"453bc7e3235a636b6b58457aa39daff52212f981",color:"trasteel",id:"selectType",interface:"action-sheet",label:d.getTransl("datasheet_propertyType","Datasheet Property Type"),"label-placement":"floating",onIonChange:e=>this.selectPropertyType(e)},n.datasheetPropertyTypes.map((e=>t("ion-select-option",{value:e.typeId},e.typeName))))),t("app-form-item",{key:"26a2ea4629b0b02a6a23f2914b93a82650eef221","label-text":"Position",value:this.datasheetPropertyName.position,name:"position","input-type":"number",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"9f73ffa06b749db4284f4fae28e596e284c0c214","label-text":"ID",value:this.datasheetPropertyName.nameId,name:"nameId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"nameId",list:n.getDatasheetPropertyNames()}}]}),t("app-form-item",{key:"c2e9eb0b63a99077f65c51c34cc3db76e5d402bb","label-text":"Name",value:this.datasheetPropertyName.nameName,name:"nameName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"79da1ec3be9bdf8782ba79803185b1eb2b3287f9","label-text":"Decimals",value:this.datasheetPropertyName.decimals,name:"decimals","input-type":"number",inputStep:"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"b4a54b8938b66e752e975f197a21cd0abba2af59","label-text":"Description Left",value:this.datasheetPropertyName.nameDescLeft,name:"nameDescLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"d98a7e07400ec2ec90d10cab376a68b67c91aeaa","label-text":"Description Right",value:this.datasheetPropertyName.nameDescRight,name:"nameDescRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"434ac89d3c42e5119c192abbdfeb93ba797c938c","label-text":"Comments",value:this.datasheetPropertyName.comments,name:"comments","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"78b0676f0926760aaaf1612f4a3946d32d216e7c","label-text":"Dimension",value:this.datasheetPropertyName.dimension,name:"dimension","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"})),t("app-modal-footer",{key:"c18d1f73a5dc10cd19cb5241c7423c56d594ef33",color:r.getAppColor(),disableSave:!this.validDatasheetPropertyName,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};m.style=f;export{m as modal_datasheet_propertyname};