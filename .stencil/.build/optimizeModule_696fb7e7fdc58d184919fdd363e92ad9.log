import{r as e,h as t}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as i}from"./p-c2915cc5.js";import{aN as a,E as d}from"./p-773bd3de.js";import{l as o}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const s="popover-media-loading ion-note{padding-left:20px}popover-media-loading .drop-area{width:100%}popover-media-loading app-dragdrop-file p{color:black !important}popover-media-loading app-dragdrop-file #drop-area{border:2px dashed black !important;height:100px !important}";const p=s;const c=class{constructor(t){e(this,t);this.media=undefined;this.file=undefined;this.validMedia=false;this.updateView=false}componentWillLoad(){if(!this.media){this.media=new a}if(this.file){this.updateMedia({detail:this.file})}else{this.validateMedia()}}async close(){i.dismiss()}async save(){i.dismiss({media:this.media,file:this.file})}validateMedia(){this.validMedia=this.media.title&&this.media.title.length>=3&&this.media.size>0&&this.media.type&&this.media.description&&this.media.description.length>5;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="order"){this.media[e.detail.name]=o.exports.toNumber(e.detail.value)}else{this.media[e.detail.name]=e.detail.value}this.validateMedia()}updatePublic(e){this.media.public=e.detail.checked;this.validateMedia()}updateMedia(e){this.file=e.detail;if(!this.media.title){this.media.title=this.file.name}this.media.name=this.file.name;this.media.lastModified=this.file.lastModified;this.media.size=this.file.size;this.media.type=this.file.type;this.validateMedia()}render(){return[t("ion-header",{key:"8878c99c01c26b33a6fed13cc3c42700de310320"},t("ion-toolbar",{key:"a11401f5578d0d11336575f3e41eaa05d494775b",color:d.getAppColor()},t("ion-title",{key:"aae5faa094edb1dbd2d22c76c02707922b3bf8fb"},"Media Loader"))),t("ion-content",{key:"5d48ab6dc391bda310cac8d6d2da965bf0e4babc"},t("ion-list",{key:"85d73712833f5ae83f8114b186eb3bd1cb15c744"},t("ion-note",{key:"07cfd3f7ca5617add25b2badcf7abbe4f06ed3b9"},"Id: ",this.media.id),t("app-form-item",{key:"51f7b17d11c3cf97b4111df71ae622c0ffa440e1","label-tag":"title","label-text":"Title",value:this.media.title,name:"title","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:3,max:20}}]}),t("app-form-item",{key:"5ce90d034074e4ff1ba1ce05a7ab800bef7a0196","label-tag":"subtitle","label-text":"Subtitle",value:this.media.subtitle,name:"subtitle","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"length",options:{min:0,max:30}}]}),t("app-form-item",{key:"5252148175934913d0a6691a5010926ba6676408","label-tag":"description","label-text":"Description",value:this.media.description,name:"description","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:5,max:100}}]}),t("ion-item",{key:"43b0d4dc7059c932a235ef164d13343c6152962c"},t("ion-label",{key:"d55209d1f0808c01b0b3ab79aaa8353f1e39ffe5"},t("my-transl",{key:"e12e330e0cbc94e11e195564d172cd5b566c3f22",tag:"public",text:"Public"})),t("ion-toggle",{key:"b66ac6a4a245e7f275e1649d51a2ffe205dc2663",slot:"end",onIonChange:e=>this.updatePublic(e),checked:this.media.public}))),t("div",{key:"caf1b7fd53559ae3917db8092ef0532b3dab4bde",class:"drop-area"},t("app-dragdrop-file",{key:"4be02419ed92e9f27217aa1660c9cda8f10530a5",fileTypes:this.media.getTypes(),file:this.file,onFileSelected:e=>this.updateMedia(e)}))),t("app-modal-footer",{key:"d288175a6db95a9c747440075ac23cdac7c1c1d3",color:d.getAppColor(),onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save(),disableSave:!this.validMedia})]}};c.style=p;export{c as popover_media_loading};