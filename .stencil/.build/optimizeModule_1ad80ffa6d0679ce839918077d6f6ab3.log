import{r as e,h as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-5d4a8e1f.js";import{E as t}from"./p-a9f4af61.js";import{v as o,T as c}from"./p-30358c9d.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const d="";const a=d;const l=class{constructor(i){e(this,i);this.inProgress={};this.urls={};this.files=undefined;this.collectionId=undefined;this.itemId=undefined;this.updateView=false}uploadProgressHandler(e){const i=e.detail;if(i.state==="completed"){this.urls[this.uploadingId]=i.url;let e=true;Object.keys(this.inProgress).forEach((i=>{e=e&&this.inProgress[i].uploadProgress===100}));this.updateView=!this.updateView;if(e){s.dismiss(this.urls)}else{this.uploadMedia()}}else if(i.state==="error"){s.dismiss(false)}else{this.inProgress[this.uploadingId].uploadProgress=i.progress;this.updateView=!this.updateView}}componentDidLoad(){this.inProgress={};Object.keys(this.files).forEach((e=>{this.inProgress[e]={size:this.files[e].file.size,uploadProgress:0}}));this.uploadMedia()}async cancel(){s.dismiss(false)}uploadMedia(){let e=null;Object.keys(this.inProgress).forEach((i=>{if(this.inProgress[i].uploadProgress==0){e=i;return}}));this.uploadingId=e;const i=this.files[e].file;const s=this.files[e].media;o.uploadFile(this.collectionId,this.itemId,s,i)}render(){return[i("ion-header",{key:"37517df6c46133051827d66e8c67764405a64dcc"},i("ion-toolbar",{key:"ecc4e265d7d59610e5883ed27826b1006d894adf",color:t.getAppColor()},i("ion-title",{key:"b1c1ff597d946253749eccb113ab8430f87ec133"},c.getTransl("media-uploader","Media Uploader")))),i("ion-content",{key:"8c8c5b31b97d7610b78d2c10ec266071d1bd8759"},i("ion-list",{key:"0279967ac818c4218d019b72bc0ac3153789c90a"},Object.keys(this.files).map((e=>[i("ion-item",null,i("ion-label",null,i("h4",null,this.files[e].media.title),this.inProgress&&this.inProgress[e]?[i("h5",null,c.getTransl("file-size","File Size"),": ",this.inProgress[e].size),i("p",null,c.getTransl("uploaded","Uploaded"),":"," ",this.inProgress[e].uploadProgress,"%")]:undefined)),this.inProgress&&this.inProgress[e]?i("ion-progress-bar",{value:this.inProgress[e].uploadProgress}):undefined]))),i("ion-button",{key:"7fba16600df6cb558ceac31c529de927f5b1728a",expand:"block",fill:"outline",onClick:()=>this.cancel()},i("ion-label",{key:"9a16c2f631e2fe12eea4bbd13663deaa86714d47"},c.getTransl("cancel","Cancel"))))]}};l.style=a;export{l as popover_media_uploader};