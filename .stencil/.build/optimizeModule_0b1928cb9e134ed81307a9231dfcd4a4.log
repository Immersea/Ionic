import{r as e,h as t,H as n,f as i,e as l}from"./p-cbe60c68.js";import{T as a,ap as o,bc as s,aK as h,E as r}from"./p-c24c8a77.js";import"./p-c7ee7cfe.js";import{b as p}from"./p-c2915cc5.js";import{l as u}from"./p-1af05547.js";import"./p-694b8ade.js";import"./p-e9c4f463.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const d="app-customer-plant-production{}";const m=d;const c=class{constructor(t){e(this,t);this.startYear=2019;this.endYear=(new Date).getFullYear();this.customer=undefined;this.editable=false;this.productionData=[];this.capacityData=[]}componentWillLoad(){if(this.editable){this.startYear=this.endYear-1}const e=[{tag:"DRI_production",text:"DRI/HBI Production"},{tag:"BF_production",text:"Blast Furnace Production"},{tag:"iron_production",text:"Iron Production"},{tag:"BOF_production",text:"BOF/Converter Production"},{tag:"crude_steel_production",text:"Crude Steel Production"},{tag:"EAF_steel_production",text:"EAF Steel Production"},{tag:"OHF_steel_production",text:"OHF Steel Production"}];const t=[{tag:"coking_plant_capacity",text:"Coking Plant Capacity"},{tag:"ferronickel_capacity",text:"Ferronickel Capacity"},{tag:"pelletizing_plant_capacity",text:"Pelletizing Plant Capacity"},{tag:"sinter_plant_capacity",text:"Sinter Plant Capacity"}];e.forEach((e=>{if(this.customer.productionData[e.tag]&&this.customer.productionData[e.tag].nominal!="N/A"&&this.customer.productionData[e.tag].nominal!="unknown"){const t=[];if(Object.keys(this.customer.productionData[e.tag].byYear).length>0){for(let n=this.startYear;n<=this.endYear;n++){if(this.customer.productionData[e.tag].byYear[n]&&this.customer.productionData[e.tag].byYear[n]!="N/A"&&this.customer.productionData[e.tag].byYear[n]!="unknown"){t.push({year:n,value:this.customer.productionData[e.tag].byYear[n]})}else if(this.editable){t.push({year:n,value:null})}}}else if(this.editable){for(let e=this.startYear;e<=this.endYear;e++){t.push({year:e,value:null})}}this.productionData.push({item:e,value:this.customer.productionData[e.tag].nominal,byYear:t})}else if(this.editable){const t=[];for(let e=this.startYear;e<=this.endYear;e++){t.push({year:e,value:null})}this.productionData.push({item:e,value:null,byYear:t})}}));t.forEach((e=>{if(this.customer.productionData[e.tag]&&this.customer.productionData[e.tag]!="N/A"&&this.customer.productionData[e.tag]!="unknown"){this.capacityData.push({item:e,value:this.customer.productionData[e.tag]})}else if(this.editable){this.capacityData.push({item:e,value:null})}}))}handleChange(e){const t=e.detail.name.split("^^");if(t[0]=="production"){if(!this.customer.productionData[t[1]]||!this.customer.productionData[t[1]].nominal)this.customer.productionData[t[1]]={nominal:null,byYear:{}};if(t.length<3){this.customer.productionData[t[1]].nominal=e.detail.value}else{this.customer.productionData[t[1]].byYear[t[2]]=e.detail.value}}else{this.customer.productionData[t[1]]=e.detail.value}}render(){return t(n,{key:"ac73e058f78416e7ee8bfe02b4660ef9c4c15650"},this.productionData.length>0?[t("ion-item-divider",null,t("my-transl",{tag:"production_data",text:"Production Data",appendText:" (kTon/year)"})),this.productionData.map((e=>[t("app-form-item",{showItem:true,labelTag:e.item.tag,labelText:e.item.text,value:e.value,name:"production^^"+e.item.tag,"input-type":"number",onFormItemChanged:e=>this.handleChange(e),readonly:!this.editable}),this.editable?e.byYear.map((n=>t("app-form-item",{showItem:true,labelText:n.year,value:n.value,name:"production^^"+e.item.tag+"^^"+n.year,"input-type":"number",onFormItemChanged:e=>this.handleChange(e)}))):e.byYear&&e.byYear.length>0?t("ion-item",null,t("ion-label",null,e.byYear.map(((t,n)=>t.year+": "+t.value+(n<e.byYear.length-1?", ":""))))):undefined]))]:undefined,this.capacityData.length>0?[t("ion-item-divider",null,t("my-transl",{tag:"capacity_data",text:"Capacity Data",appendText:" (kTon/year)"})),this.capacityData.map((e=>[t("app-form-item",{showItem:true,lines:"none",labelTag:e.item.tag,labelText:e.item.text,value:e.value,name:"capacity^^"+e.item.tag,"input-type":"number",onFormItemChanged:e=>this.handleChange(e),readonly:!this.editable})]))]:undefined)}get el(){return i(this)}};c.style=m;const g="app-location{}";const b=g;const f=class{constructor(t){e(this,t);this.locationSelected=l(this,"locationSelected",7);this.locationDeleted=l(this,"locationDeleted",7);this.editable=true;this.location=undefined;this.locations=undefined;this.slider=undefined;this.updateView=false;this.addressText=undefined;this.locationType=undefined;this.segment=undefined;this.electrodeSegment=0}componentWillLoad(){this.segmentTitles={address:a.getTransl("address","Address"),plantConfiguration:a.getTransl("plantConfiguration","Plant Configuration"),electrodesData:a.getTransl("electrodesData","Electrodes Data")};this.segment=this.editable?"plantConfiguration":"address"}componentDidLoad(){if(this.editable)this.setLocationsSelect()}segmentChanged(e){if(e.detail.value){this.segment=e.detail.value;this.updateSlider()}}setLocationsSelect(){const e=this.el.querySelector("#selectLocation");const t={header:a.getTransl("location","Locations")};e.interfaceOptions=t;const n=Array.from(e.getElementsByTagName("ion-select-option"));n.map((t=>{e.removeChild(t)}));e.placeholder=a.getTransl("select","Select");this.locations.map((t=>{const n=document.createElement("ion-select-option");n.value=t.locationId;n.textContent=a.getTransl(t.locationId,t.locationName);e.appendChild(n)}))}selectLocationType(e){this.locationType=e.detail.value;this.location.type=e.detail.value}selectLocation(e){this.location.location=e;if(u.exports.isNumber(u.exports.toNumber(e.lat))&&u.exports.isNumber(u.exports.toNumber(e.lon))){this.location.position=o.getPosition(u.exports.toNumber(e.lat),u.exports.toNumber(e.lon))}this.locationSelected.emit(this.location)}addElectrode(){this.location.electrodesData.push(new s);this.electrodeSegment=this.location.electrodesData.length-1;this.handleElectrodeChange()}electrodeSegmentChanged(e){if(e.detail.value!=="add"){this.electrodeSegment=e.detail.value;this.handleElectrodeChange()}}handleElectrodeChange(){this.updateView=!this.updateView;this.updateSlider()}handleElectrodeItemChange(e){const t=e.detail.name;const n=e.detail.value;const i=.0393701;if(t=="pin_nominal_dia_in_mm"){this.location.electrodesData[this.electrodeSegment].pin_nominal_dia_in_inches=h(n*i,1)}else if(t=="pin_nominal_dia_in_inches"){this.location.electrodesData[this.electrodeSegment].pin_nominal_dia_in_mm=h(n/i,1)}else if(t=="dia_in_mm"){this.location.electrodesData[this.electrodeSegment].dia_in_inches=h(n*i,0)}else if(t=="dia_in_inches"){this.location.electrodesData[this.electrodeSegment].dia_in_mm=h(n/i,0)}else if(t=="length_in_mm"){this.location.electrodesData[this.electrodeSegment].length_in_inches=h(n*i,0)}else if(t=="length_in_inches"){this.location.electrodesData[this.electrodeSegment].length_in_mm=h(n/i,0)}this.location.electrodesData[this.electrodeSegment][e.detail.name]=e.detail.value;this.updateSlider()}async deleteItem(){const e=await p.create({header:a.getTransl("delete-location","Delete Location"),message:a.getTransl("delete-location-confirm","Are you sure you want to delete this location?"),buttons:[{text:a.getTransl("ok","OK"),handler:async()=>{this.locationDeleted.emit(true)}},{text:a.getTransl("cancel","Cancel"),handler:async()=>{}}]});e.present()}handleLocationChange(e){this.location[e.detail.name]=e.detail.value}updateSlider(){this.updateView=!this.updateView;setTimeout((()=>{this.slider?this.slider.update():undefined}),100)}render(){return t(n,{key:"c8b5b464a36a0a755636f46776c37dc0bf443249"},this.editable?[t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",id:"selectLocation",interface:"action-sheet",label:a.getTransl("loc_type","Location Type"),"label-placement":"floating",onIonChange:e=>{this.selectLocationType(e)},value:this.location&&this.location.type?this.location.type:null}),t("ion-button",{"icon-only":true,fill:"clear",slot:"end",onClick:()=>this.deleteItem()},t("ion-icon",{slot:"icon-only",name:"trash",color:"danger"}))),t("app-form-item",{"label-tag":"address","label-text":"Address",value:this.location&&this.location.location&&this.location.location.display_name?this.location.location.display_name:null,name:"address","input-type":"text",lines:"full",onFormLocationSelected:e=>this.selectLocation(e.detail),onFormLocationsFound:()=>this.updateSlider(),validator:["address"]})]:undefined,t("ion-toolbar",{key:"124e083152fa5a22122801b32c021da88cbbd9e3"},t("ion-segment",{key:"a871a57e9313437d89dad689f0c8d2e3822c8b7f",mode:"ios",color:r.getAppColor(),scrollable:true,onIonChange:e=>this.segmentChanged(e),value:this.segment},!this.editable?t("ion-segment-button",{value:"address",layout:"icon-start"},t("ion-label",null,a.getTransl("address","Address"))):undefined,t("ion-segment-button",{key:"12720a3c7ff0504f08260ce743971aa2dc870ce1",value:"plantConfiguration",layout:"icon-start"},t("ion-label",{key:"321ff6046ce9c00109d3c048d06bd95d6db61c7f"},this.segmentTitles.plantConfiguration)),t("ion-segment-button",{key:"c299430ac0b998c74599ac384d316116c1dd7960",value:"electrodesData",layout:"icon-start"},t("ion-label",{key:"503f61c7d4a40793604d8d9e4cd3d63fc3fd32eb"},this.segmentTitles.electrodesData)))),this.segment=="address"?t("div",null,t("app-item-detail",{lines:"none",labelTag:"country",labelText:"Country",detailText:this.location.location.address.country?this.location.location.address.country:null}),t("app-item-detail",{lines:"none",labelTag:"state",labelText:"State",detailText:this.location.location.address.state?this.location.location.address.state:null}),t("app-item-detail",{lines:"none",labelTag:"county",labelText:"County",detailText:this.location.location.address.county?this.location.location.address.county:null}),t("app-item-detail",{lines:"none",labelTag:"city",labelText:"City",detailText:this.location.location.address.city?this.location.location.address.city:null}),t("app-item-detail",{lines:"none",labelTag:"suburb",labelText:"Suburb",detailText:this.location.location.address.suburb?this.location.location.address.suburb:null}),t("app-item-detail",{lines:"none",labelTag:"postcode",labelText:"Postcode",detailText:this.location.location.address.postcode?this.location.location.address.postcode:null}),t("app-item-detail",{lines:"none",labelTag:"road",labelText:"Road",detailText:this.location.location.address.road?this.location.location.address.road:null})):undefined,this.segment=="plantConfiguration"?t("div",null,!this.editable?[t("app-item-detail",{lines:"none",labelTag:"gem-wiki-page",labelText:"Gem Wiki Page",detailText:this.location.gem_wiki_page_en?this.location.gem_wiki_page_en:null}),t("app-item-detail",{lines:"none",labelTag:"gem-wiki-page-other",labelText:"Gem Wiki Page Other",detailText:this.location.gem_wiki_page_other?this.location.gem_wiki_page_other:null})]:undefined,t("app-form-item",{lines:"none",labelTag:"status",labelText:"Status",value:this.location.status?this.location.status:null,name:"status","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"category-steel-product",labelText:"Category Steel Product",value:this.location.category_steel_product?this.location.category_steel_product:null,name:"category_steel_product","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"steel-product",labelText:"Steel Products",value:this.location.steel_products?this.location.steel_products:null,name:"steel_products","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"steel_sector_end_users",labelText:"Steel Sector End Users",value:this.location.steel_sector_end_users?this.location.steel_sector_end_users:null,name:"steel_sector_end_users","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"main-production-equipment",labelText:"Main Production Equipment",value:this.location.main_production_equipment?this.location.main_production_equipment:null,name:"main_production_equipment","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"main-production-process",labelText:"Main Production Process",value:this.location.main_production_process?this.location.main_production_process:null,name:"main_production_process","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"detailed-production-equipment",labelText:"Detailed Production Equipment",value:this.location.detailed_production_equipment?this.location.detailed_production_equipment:null,name:"detailed_production_equipment","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"workforce-size",labelText:"Workforce Size",value:this.location.workforce_size?this.location.workforce_size:null,name:"workforce_size","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"proposed-date",labelText:"Proposed Date",value:this.location.proposed_date&&this.location.proposed_date!="unknown"?this.location.proposed_date:null,name:"proposed_date","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"construction-date",labelText:"Construction Date",value:this.location.construction_date&&this.location.construction_date!="unknown"?this.location.construction_date:null,name:"construction_date","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"plant-age",labelText:"Plant Age",value:this.location.plant_age?this.location.plant_age:null,name:"plant_age","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"start-date",labelText:"Start Date",value:this.location.start_date&&this.location.start_date!=="N/A"?this.location.start_date:null,name:"start_date","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"closed-date",labelText:"Closed Date",value:this.location.closed_date&&this.location.closed_date!=="N/A"?this.location.closed_date:null,name:"closed_date","input-type":"number",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"power-source",labelText:"Power Source",value:this.location.power_source?this.location.power_source:null,name:"power_source","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"met-coal-source",labelText:"Met Coal Source",value:this.location.met_coal_source?this.location.met_coal_source:null,name:"met_coal_source","input-type":"text",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"responsible_steel_certification",labelText:"Responsible Steel Certification",value:this.location.responsible_steel_certification&&this.location.responsible_steel_certification!=="N/A"?this.location.responsible_steel_certification:null,name:"responsible_steel_certification","input-type":"boolean",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"ISO_14001",labelText:"ISO 14001",value:this.location.ISO_14001&&this.location.ISO_14001!=="N/A"?this.location.ISO_14001:null,name:"ISO_14001","input-type":"boolean",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)}),t("app-form-item",{lines:"none",labelTag:"ISO_50001",labelText:"ISO 50001",value:this.location.ISO_50001&&this.location.ISO_50001!=="N/A"?this.location.ISO_50001:null,name:"ISO_50001","input-type":"boolean",readonly:!this.editable,onFormItemChanged:e=>this.handleLocationChange(e)})):undefined,this.segment=="electrodesData"?t("div",null,t("ion-toolbar",null,t("ion-segment",{mode:"ios",scrollable:true,onIonChange:e=>this.electrodeSegmentChanged(e),value:this.electrodeSegment},this.location.electrodesData.map(((e,n)=>t("ion-segment-button",{value:n,layout:"icon-start"},t("ion-label",null,e.application)))),this.editable?t("ion-segment-button",{value:"add",onClick:()=>this.addElectrode(),layout:"icon-start"},t("ion-label",null,"+")):undefined)),this.location.electrodesData.map(((e,n)=>t("div",null,this.electrodeSegment==n?t("div",null,this.editable?[t("ion-item",null,t("ion-select",{color:"trasteel",id:"application",interface:"action-sheet",label:a.getTransl("application","Application"),"label-placement":"floating",onIonChange:t=>{e.application=t.detail.value;this.handleElectrodeChange()},value:e&&e.application?e.application:null},t("ion-select-option",{value:"EAF"},"EAF"),t("ion-select-option",{value:"LF"},"LF"))),t("app-form-item",{value:e&&e.application?e.application:null,name:"application","input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)})]:undefined,t("app-form-item",{"label-tag":"diameter","label-text":"Diameter",appendText:" (mm)",value:e&&e.dia_in_mm?e.dia_in_mm:null,name:"dia_in_mm",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"diameter","label-text":"Diameter",appendText:" (inches)",value:e&&e.dia_in_inches?e.dia_in_inches:null,name:"dia_in_inches",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"length","label-text":"Length",appendText:" (mm)",value:e&&e.length_in_mm?e.length_in_mm:null,name:"length_in_mm",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"length","label-text":"Length",appendText:" (inches)",value:e&&e.length_in_inches?e.length_in_inches:null,name:"length_in_inches",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"grade","label-text":"Grade",value:e&&e.grade?e.grade:null,name:"grade",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-nom-dia","label-text":"Pin Nominal Diameter",appendText:" (mm)",value:e&&e.pin_nominal_dia_in_mm?e.pin_nominal_dia_in_mm:null,name:"pin_nominal_dia_in_mm",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-nom-dia","label-text":"Pin Nominal Diameter",appendText:" (inches)",value:e&&e.pin_nominal_dia_in_inches?e.pin_nominal_dia_in_inches:null,name:"pin_nominal_dia_in_inches",readonly:!this.editable,"input-type":"number",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-size","label-text":"Pin Size",appendText:" (mm)",value:e&&e.pin_size_in_mm?e.pin_size_in_mm:null,name:"pin_size_in_mm",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-size","label-text":"Pin Size",appendText:" (inches)",value:e&&e.pin_size_in_inches?e.pin_size_in_inches:null,name:"pin_size_in_inches",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"tpi","label-text":"TPI",value:e&&e.TPI?e.TPI:null,name:"TPI",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-length-code","label-text":"Pin Length Code",value:e&&e.pin_length_type_code?e.pin_length_type_code:null,name:"pin_length_type_code",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pin-length","label-text":"Pin Length",value:e&&e.pin_length?e.pin_length:null,name:"pin_length",readonly:!this.editable,"input-type":"text",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"dust-groove","label-text":"Dust Groove",value:e&&e.dust_groove?e.dust_groove:null,name:"dust_groove",readonly:!this.editable,"input-type":"boolean",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"pitch-plug","label-text":"Pitch Plug",value:e&&e.pitch_plug?e.pitch_plug:null,name:"pitch_plug",readonly:!this.editable,"input-type":"boolean",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)}),t("app-form-item",{"label-tag":"preset","label-text":"Preset",value:e&&e.preset?e.preset:null,name:"preset",readonly:!this.editable,"input-type":"boolean",lines:"full",onFormItemChanged:e=>this.handleElectrodeItemChange(e)})):undefined)))):undefined)}get el(){return i(this)}};f.style=b;export{c as app_customer_plant_production,f as app_location};