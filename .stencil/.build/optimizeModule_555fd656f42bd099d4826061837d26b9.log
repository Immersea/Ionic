import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as n,Y as c,S as l,T as d}from"./p-736235c6.js";import{E as r}from"./p-46038295.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const f="modal-datasheet-propertyname ion-list{width:100%}";const h=f;const m=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyNames=undefined;this.datasheetPropertyName=undefined;this.updateView=true;this.validDatasheetPropertyName=false}async componentWillLoad(){await this.loadDatasheetPropertyNames()}async loadDatasheetPropertyNames(){await n.downloadDatasheetSettings();this.datasheetPropertyNames=o.exports.cloneDeep(n.getDatasheetPropertyNames());if(this.datasheetPropertyNames&&this.datasheetPropertyNames.length>0){this.datasheetPropertyName=this.datasheetPropertyNames[0]}else{this.addDatasheetPropertyName()}this.validateDatasheet()}selectType(e){const t=e.detail.value;this.datasheetPropertyName=this.datasheetPropertyNames.find((e=>e.nameId==t));this.validateDatasheet()}selectPropertyType(e){this.datasheetPropertyName.nameType=e.detail.value;this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="nameId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyName[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyName=o.exports.isString(this.datasheetPropertyName.nameId)&&o.exports.isString(this.datasheetPropertyName.nameName)&&o.exports.isNumber(this.datasheetPropertyName.position)&&o.exports.isNumber(this.datasheetPropertyName.decimals);this.updateView=!this.updateView}addDatasheetPropertyName(){this.datasheetPropertyName=new c;this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}duplicateDatasheetPropertyName(){this.datasheetPropertyName=o.exports.cloneDeep(this.datasheetPropertyName);this.datasheetPropertyName.nameId=this.datasheetPropertyName.nameId+"_rev.";this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}async deleteDatasheetPropertyName(){try{this.datasheetPropertyNames.splice(this.index,1);this.index=0;this.datasheetPropertyName=this.datasheetPropertyNames[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyName",this.datasheetPropertyNames);return e?s.dismiss():true}async cancel(){return s.dismiss()}checkComments(){this.datasheetPropertyNames.map((e=>{const t=o.exports.split(e.nameName,"(");if(t.length<2){return null}const a=t[1];const i=o.exports.split(a,"Â°C");if(i.length<2){return null}}))}render(){return t(a,{key:"a6f2e151204ab5cc2031e2e88658cb4f0b5d5649"},t("ion-content",{key:"8748bfc0beb41660c522cd35a20671f34af6c3b8"},t("ion-grid",{key:"9ddd4dfcc53ab69c26a49ed68227b05c271f666f"},t("ion-row",{key:"2280f4caf46640c0186886b7892a66677a49a335"},t("ion-col",{key:"13346499a2f11a1371c75c04f904b710c0e25151"},t("app-select-search",{key:"56c4e543a6726fef096459b503e43de75afda5d2",color:"trasteel",label:{tag:"datasheet_propertyName",text:"Datasheet Property Name"},value:this.index?this.datasheetPropertyNames[this.index].nameId:this.datasheetPropertyNames[0].nameId,lines:"none",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyNames,selectValueId:"nameId",selectValueText:["nameName"],disabled:!this.validDatasheetPropertyName})),t("ion-col",{key:"11c3ae7bafa9e84ada352392a5d1294dd73562de",size:"1",class:"ion-text-center"},t("ion-button",{key:"97bba09f59dac0819b6ebcdf8a396d0ab03ed571",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.addDatasheetPropertyName()},t("ion-icon",{key:"f763189625dfe0f156c68f30190c95cecf0662c5",name:"add",slot:"start"}))),t("ion-col",{key:"0c234f4847d17b8a4e302c8e79fa58783c2bfc10",size:"1",class:"ion-text-center"},t("ion-button",{key:"4f7bf63d630978c49edd910ffb67831c8e770460",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.duplicateDatasheetPropertyName()},t("ion-icon",{key:"d9a3a5765354294463374cecdbe74d1fb5b4f351",slot:"start",name:"duplicate"}))),t("ion-col",{key:"61efbab20c87dde773dc982d3fe5d28e016ef0ca",size:"1",class:"ion-text-center"},t("ion-button",{key:"9584980521024184c0b319f17fdcacd28fab6d14",fill:"clear",color:"danger",disabled:this.datasheetPropertyNames.length==0,onClick:()=>this.deleteDatasheetPropertyName()},t("ion-icon",{key:"48ff5fbdfd801b49bd45df0b4fc92f4976075185",slot:"start",name:"trash"}))))),t("ion-item",{key:"acca00053c145f716b63e099c67dd35a3930ce60",lines:"none"},t("ion-select",{key:"0ea8e49ecf681bfda1f28efb4a6c94588a994649",color:"trasteel",id:"selectType",interface:"action-sheet",label:d.getTransl("datasheet_propertyType","Datasheet Property Type"),"label-placement":"floating",onIonChange:e=>this.selectPropertyType(e)},n.datasheetPropertyTypes.map((e=>t("ion-select-option",{value:e.typeId},e.typeName))))),t("app-form-item",{key:"af89a3b8ab145f7bd859db2daeb2392e2b94d170","label-text":"Position",value:this.datasheetPropertyName.position,name:"position","input-type":"number",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"0ce415a466a8edb7443223de8cfd452c7e840eea","label-text":"ID",value:this.datasheetPropertyName.nameId,name:"nameId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"nameId",list:n.getDatasheetPropertyNames()}}]}),t("app-form-item",{key:"b9edc82788a762c0e66c8e67134a6bd518acfb98","label-text":"Name",value:this.datasheetPropertyName.nameName,name:"nameName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"9808133f4a82d9f37ea7d37553f1915bf6ff003b","label-text":"Decimals",value:this.datasheetPropertyName.decimals,name:"decimals","input-type":"number",inputStep:"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"ceead51a6339c96f262fa7a1c1539cfbb7d351cd","label-text":"Description Left",value:this.datasheetPropertyName.nameDescLeft,name:"nameDescLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"072979e79bbf38df4ae4a309705a2b3905779095","label-text":"Description Right",value:this.datasheetPropertyName.nameDescRight,name:"nameDescRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"0fd5ccc9fe9e9c74a790f32c51f4e7e502d58648","label-text":"Comments",value:this.datasheetPropertyName.comments,name:"comments","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"536b942818b724826868959fa53a1f6878429c7e","label-text":"Dimension",value:this.datasheetPropertyName.dimension,name:"dimension","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"})),t("app-modal-footer",{key:"cb536b5430922bd255aa6d3407d6a0d537a18bc0",color:r.getAppColor(),disableSave:!this.validDatasheetPropertyName,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};m.style=h;export{m as modal_datasheet_propertyname};