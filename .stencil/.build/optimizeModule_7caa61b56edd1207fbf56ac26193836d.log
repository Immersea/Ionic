import{r as t,h as e,f as s}from"./p-cbe60c68.js";import{a7 as i,a4 as a}from"./p-7ea622ea.js";import{l as o}from"./p-1af05547.js";import{E as h}from"./p-5d8b2afa.js";import"./p-6c93b3f7.js";import"./p-e9c4f463.js";import"./p-c7ee7cfe.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const p="modal-dive-template{}";const r=p;const n=class{constructor(e){t(this,e);this.updateView=true;this.stdConfigurations=[];this.index=0;this.userRoles=undefined;this.selectedConfiguration=undefined;this.showPositionTab=false;this.divePlanModel=undefined;this.addDive=false}componentWillLoad(){this.divePlan=new i;let t=this.divePlanModel;if(!t){let t=this.selectedConfiguration;this.divePlan.setConfiguration(t);let e=this.divePlan.addDive();this.divePlan.resetDiveWithConfiguration(e,t)}else{this.divePlan.setConfiguration(t.configuration);this.divePlan.setWithDivePlanModel(t);if(this.addDive){let e=this.divePlan.addDive();this.divePlan.resetDiveWithConfiguration(e,t.configuration);this.index=this.divePlan.dives.length-1}}this.stdGases=[];this.stdDecoGases=[];let e=[];a.getStdGases().forEach((t=>{e.push(t)}));this.stdGases=o.exports.filter(e,{deco:false});this.stdGases=o.exports.orderBy(this.stdGases,"fromDepth","asc");this.stdDecoGases=o.exports.filter(e,{deco:true});this.stdDecoGases=o.exports.orderBy(this.stdDecoGases,"fromDepth","desc");this.diveDataToShare={divePlan:this.divePlan,dive_less_time:null,dive_more_time:null,dive_less_depth:null,dive_more_depth:null,index:this.index,stdGases:this.stdGases,stdDecoGases:this.stdDecoGases,stdConfigurations:this.stdConfigurations,user:this.userRoles,showDiveSite:this.showPositionTab,showPositionTab:this.showPositionTab}}updateParams(t){this.divePlan.configuration.parameters=t.detail;this.updateView=!this.updateView}save(){this.el.closest("ion-modal").dismiss(this.divePlan.getDivePlanModel())}close(){this.el.closest("ion-modal").dismiss()}render(){return[e("app-navbar",{key:"1261f57110aa3360ba5c2c15c9df326e82588198",tag:"deco-planner",text:"Deco Planner","extra-title":this.divePlan.configuration.stdName,color:h.isDecoplanner()?"gue-blue":"planner",modal:true}),e("ion-content",{key:"3fafe0070cf7215d3b42d662f634a0752bacae76"},e("app-decoplanner-plan",{key:"f1cba7483a8256fa9c4530539e59c0055e677431",diveDataToShare:this.diveDataToShare,onUpdateParamsEvent:t=>this.updateParams(t)})),e("app-modal-footer",{key:"8b19f8b515f94cd6d0e6249667b53ee894068b57",onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})]}get el(){return s(this)}};n.style=r;export{n as modal_dive_template};