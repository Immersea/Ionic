import{r as e,h as t,f as i}from"./p-cbe60c68.js";import{a,aa as s,D as n,U as o,h as d,a3 as c,ay as l}from"./p-30358c9d.js";import{S as r}from"./p-a75993af.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const b="page-dive-community-details ion-segment-button{--color-checked:var(--ion-color-divecommunity-contrast)}";const f=b;const p=class{constructor(t){e(this,t);this.admin=false;this.markers=[];this.dcid=undefined;this.diveCommunity=undefined;this.diveTrips=undefined;this.titles=[{tag:"information"},{tag:"map"},{tag:"next-trips",text:"Next Dive Trips"},{tag:"team"}];this.slider=undefined}async componentWillLoad(){if(a.selectedDiveCommunity){this.admin=true;this.dcSubscription=a.selectedDiveCommunity$.subscribe((e=>{if(e&&e.displayName){this.diveCommunity=e;this.dcid=a.selectedDiveCommunityId}}))}else{this.admin=false;this.diveCommunity=await a.getDiveCommunity(this.dcid);this.diveTrips=await s.getTripsSummary(n,this.dcid);delete this.titles[3];delete this.titles[2]}this.userRoles=o.userRoles;let e=d.getMapDocs()[n].icon;e.size="large";this.markers.push({icon:e,latitude:this.diveCommunity.position.geopoint.latitude,longitude:this.diveCommunity.position.geopoint.longitude})}async componentDidLoad(){this.slider=new r(".slider-dive-community",{speed:400,spaceBetween:100,allowTouchMove:false,autoHeight:true});await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("#map");const e=this.el.querySelector("#map-container");e.setAttribute("style","height: "+c(this.diveCommunity)+"px")}disconnectedCallback(){if(this.dcSubscription)this.dcSubscription.unsubscribe()}render(){return[t("ion-header",{key:"efbef6337722ba8ec8b5d2f61bd4bd9d3bbae4e6"},t("app-item-cover",{key:"1a0b7fecdb075c5d0f83606ae619d26c9c8c2dae",item:this.diveCommunity})),t("ion-header",{key:"733de585c84bca813de1cd6eb1653abfafc133f4"},t("ion-toolbar",{key:"099cb7db94249e780ee6cf89f7a6b9e5a7be52d3",color:"divecommunity",class:"no-safe-padding"},t("ion-title",{key:"ba5d010c3b794aaae5b60a375b4daf2ae22c2f18"},this.diveCommunity.displayName)),t("app-header-segment-toolbar",{key:"cdbd6f4cc0eb3597ac99ad8b915032c65c260faa",color:"divecommunity",swiper:this.slider,titles:this.titles,noHeader:true})),t("ion-content",{key:"6b48eb08226d25f76bd1b0dc7bb313bd4620dd9a",class:"slides"},this.admin?t("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed",style:{marginTop:l(2)}},t("ion-fab-button",{onClick:()=>a.presentDiveCommunityUpdate(this.dcid),class:"fab-icon"},t("ion-icon",{name:"create"}))):undefined,t("swiper-container",{key:"84b1c82e8c940a5d40d83076156b588ed6d905fc",class:"slider-dive-community swiper"},t("swiper-wrapper",{key:"808a12e039b724b2ace8ba3a4420dea638335695",class:"swiper-wrapper"},t("swiper-slide",{key:"a773024028f6ff72da05845ba8847e62b7a0b119",class:"swiper-slide"},t("ion-list",{key:"da663bff420a052c3dd7aaecd959b0b768a433c4",class:"ion-no-padding"},t("ion-list-header",{key:"209dd59fb03bb59cd924fd0b30bbb5083807a49e"},t("ion-label",{key:"115a6dcf751d0bc1c533b923c83112ac324e763b",color:"divingcenter"},t("my-transl",{key:"b8b92f190c1a716788d96a700116300cc8d40461",tag:"general-information",text:"General Information"}))),t("ion-item",{key:"74eebcfbf53352980b8fed30d1d53c382c21db9a"},t("ion-label",{key:"99c49b9662430157decc8cefbb7d268021605301",class:"ion-text-wrap"},t("ion-text",{key:"297a402335095c8ce411b9e45f22a896a6b5620a",color:"dark"},t("p",{key:"0a7f2e6bfa8b5ed8ef3931c5dd1db3838f3f2ae0"},this.diveCommunity.description)))),this.diveCommunity.email?t("ion-item",{button:true,href:"mailto:"+this.diveCommunity.email},t("ion-icon",{slot:"start",name:"at-outline"}),t("ion-label",null,this.diveCommunity.email)):undefined,this.diveCommunity.phoneNumber?t("ion-item",{button:true,href:"tel:"+this.diveCommunity.phoneNumber},t("ion-icon",{slot:"start",name:"call-outline"}),t("ion-label",null,this.diveCommunity.phoneNumber)):undefined,this.diveCommunity.website?t("ion-item",{button:true,href:"http://"+this.diveCommunity.website,target:"_blank"},t("ion-icon",{slot:"start",name:"link-outline"}),t("ion-label",null,this.diveCommunity.website)):undefined,this.diveCommunity.facebook?t("ion-item",{button:true,href:"https://www.facebook.com/"+this.diveCommunity.facebook,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-facebook"}),t("ion-label",null,this.diveCommunity.facebook)):undefined,this.diveCommunity.instagram?t("ion-item",{button:true,href:"https://www.instagram.com/"+this.diveCommunity.instagram,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-instagram"}),t("ion-label",null,this.diveCommunity.instagram)):undefined,this.diveCommunity.twitter?t("ion-item",{button:true,href:"https://www.twitter.com/"+this.diveCommunity.twitter,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-twitter"}),t("ion-label",null,"@",this.diveCommunity.twitter)):undefined)),t("swiper-slide",{key:"8dec51030cb627643bef771abfa9039471156268",class:"swiper-slide"},t("div",{key:"2c87f833e7873d69663770df0bdf1ad0d2d12624",id:"map-container"},t("app-map",{key:"2decf9560d471bcf06a635788ff1e41e670eeb9d",id:"map",pageId:"dive-community-details",center:this.diveCommunity,markers:this.markers}))),t("swiper-slide",{key:"2b122f1a93faa84b27eadcaa70bc39c6f4b0131c",class:"swiper-slide"},t("app-calendar",{key:"51cd3b81fe5bbf52ae49f14f4de36e522dbe2b37",calendarId:"community-calendar",addEvents:{trips:this.diveTrips}})),this.admin?t("swiper-slide",{class:"swiper-slide"},t("app-users-list",{item:this.diveCommunity,show:["owner","editor"]})):undefined))),this.admin?t("ion-footer",{class:"ion-no-border"},t("ion-toolbar",null,t("ion-button",{expand:"block",fill:"solid",color:"danger",onClick:()=>a.deleteDiveCommunity(this.dcid)},t("ion-icon",{slot:"start",name:"trash"}),t("my-transl",{tag:"delete",text:"Delete",isLabel:true})))):undefined]}get el(){return i(this)}};p.style=f;export{p as page_dive_community_details};