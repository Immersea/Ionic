import{r as e,e as i,h as t,f as r}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{b as a}from"./p-5d4a8e1f.js";import{T as o}from"./p-30358c9d.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-7ee16e8d.js";const l="app-dragdrop-file #drop-area{border:2px dashed white;border-radius:20px;width:90%;height:var(--coverHeight);margin:0 auto 0 auto;padding:20px;text-align:center;visibility:visible}app-dragdrop-file #drop-area.highlight{border-color:var(--ion-color-primary) !important;border-style:solid !important;border-width:5px !important}app-dragdrop-file p{margin-top:0;color:white}app-dragdrop-file ion-note{padding:0}app-dragdrop-file .my-form{text-align:center}app-dragdrop-file .button{display:inline-block;margin:20px 0 20px 0;padding:20px;background-color:var(--ion-color-primary);color:var(--ion-color-primary-contrast);cursor:pointer;border-radius:5px}app-dragdrop-file .button:hover{background:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}app-dragdrop-file #fileElem{display:none}";const d=l;const p=class{constructor(t){e(this,t);this.fileSelected=i(this,"fileSelected",7);this.fileType=undefined;this.fileTypes=undefined;this.autoOpen=false;this.file=undefined;this.selectedFile=undefined}componentWillLoad(){if(this.file){this.handleFiles([this.file])}}componentDidLoad(){this.dropArea=this.el.querySelector("#drop-area");this.inputElement=this.el.querySelector("#fileElem");this.autoOpen?this.inputElement.click():undefined;["dragenter","dragover","dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,this.preventDefaults,false);document.body.addEventListener(e,this.preventDefaults,false)}));["dragenter","dragover"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.add("highlight")}),false)}));["dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.remove("highlight")}),false)}));this.dropArea.addEventListener("drop",(e=>{const i=e.dataTransfer;this.handleFiles(i.files)}),false)}preventDefaults(e){e.preventDefault();e.stopPropagation()}async handleFiles(e){this.selectedFile=null;if(e.target){this.selectedFile=e.target.files[0]}else{this.selectedFile=e[0]}let i=false;if(this.fileType){const e=new RegExp("^"+this.fileType+"\\/\\w+");i=e.test(this.selectedFile.type)}else{i=this.fileTypes.includes(this.selectedFile.type)}if(i){this.fileSelected.emit(this.selectedFile)}else{this.selectedFile=null;const e=await a.create({header:o.getTransl("select-file","Select a File"),message:o.getTransl("select-file-message","Please select a file of type: ")+(this.fileType?this.fileType:this.fileTypes.join(", ")),buttons:[{text:o.getTransl("ok","OK"),handler:async()=>{this.inputElement.click()}}]});e.present()}}render(){return[t("div",{key:"55f2154e823ae9f4c1a3515f6e455983818f76db",id:"drop-area"},t("p",{key:"5ed1695ac4827e03e707ba63fe67b13b370fa48d"},this.selectedFile?[t("ion-note",null,this.selectedFile.name),t("br",null),t("ion-note",null,s.exports.round(this.selectedFile.size/1024/1024,1),"MB")]:t("my-transl",{tag:"dragdrop-file",text:"Upload a file with the file dialog or by dragging and\n            dropping the file onto the dashed region"}))),t("form",{key:"8e7714c31492e2dca25c9d1d22eef1fe3bf67edc",class:"my-form"},t("input",{key:"d7f007ac31e476ff8187042b7398f3df12a48639",type:"file",id:"fileElem",accept:this.fileType?this.fileType+"/*":this.fileTypes&&this.fileTypes.length>0?this.fileTypes.join(","):"*/*",onClick:()=>false,onChange:e=>this.handleFiles(e)}),t("label",{key:"96c6f725903ab4a43575ce9b7861a546110bc72a",id:"labelElem",class:"button",htmlFor:"fileElem"},t("my-transl",{key:"5e141991869df2d15510ff7da8ec8bc26e6d45b6",tag:"select-file",text:"Select a File"})))]}get el(){return r(this)}};p.style=d;export{p as app_dragdrop_file};