import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as c}from"./p-1af05547.js";import{ax as o,ay as n,S as d,E as l,T as p}from"./p-9424d4f6.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="modal-project-applicationunit ion-list{width:100%}";const f=r;const h=class{constructor(t){e(this,t);this.index=0;this.applicationUnits=undefined;this.applicationUnit=undefined;this.updateView=true;this.validApplicationUnit=false}async componentWillLoad(){await this.loadApplicationUnits()}async loadApplicationUnits(){await o.downloadProjectSettings();this.applicationUnits=c.exports.cloneDeep(o.getApplicationUnits());if(this.applicationUnits&&this.applicationUnits.length>0){this.applicationUnit=this.applicationUnits[0]}else{this.addApplicationUnit()}this.validateProject()}selectType(e){this.applicationUnit=this.applicationUnits[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="familyId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.applicationUnit[t]=i;this.validateProject()}validateProject(){this.validApplicationUnit=c.exports.isString(this.applicationUnit.applicationId)&&c.exports.isString(this.applicationUnit.applicationId);this.updateView=!this.updateView}addApplicationUnit(){this.applicationUnit=new n;this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}duplicateApplicationUnit(){this.applicationUnit=c.exports.cloneDeep(this.applicationUnit);this.applicationUnit.applicationId=this.applicationUnit.applicationId+"_rev.";this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}async deleteApplicationUnit(){try{this.applicationUnits.splice(this.index,1);this.index=0;this.applicationUnit=this.applicationUnits[0];this.validateProject()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await o.uploadProjectSettings("applicationUnit",this.applicationUnits);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"d9e39e32c72367c539fee6dc3f42d6f33bc2e635"},t("ion-content",{key:"d5ccce8e41c43e61d7504c26992899b900e94d14"},t("ion-grid",{key:"7d87eb18024c1265d7075c26c1b508c9ca103592"},t("ion-row",{key:"7be23179ba8c2096353969e282d88f9d6921997e"},t("ion-col",{key:"85386a7b45024c96be1e6ffa5c9601cfd3022f9d"},t("ion-item",{key:"02dc9345d0cbecdd59f3b5972df25a0b3e20594a",lines:"none"},t("ion-select",{key:"beaf30c6733f62fd6f1942a98a18436ea3d047bc",color:"trasteel",id:"selectType",interface:"action-sheet",label:p.getTransl("project_applicationunit","Project Application Unit"),disabled:!this.validApplicationUnit,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.applicationUnits.map(((e,i)=>t("ion-select-option",{value:i},e.applicationId)))))),t("ion-col",{key:"9f88497962721597588a5ee97837ac4880a6b515",size:"1",class:"ion-text-center"},t("ion-button",{key:"4f9c7565f24e595cfc3bab53cc67748fe40870b7",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.addApplicationUnit()},t("ion-icon",{key:"20b0396216da337fc856cc9fae8a81512890ca30",name:"add",slot:"start"}))),t("ion-col",{key:"d4636caf272d76b6a567b4fd7e59c011fcfe9621",size:"1",class:"ion-text-center"},t("ion-button",{key:"d64ca6f6201105874d910657675f92c05aba6bd3",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.duplicateApplicationUnit()},t("ion-icon",{key:"6d1ae57a5bacc854696edc223e98e6155b755861",slot:"start",name:"duplicate"}))),t("ion-col",{key:"8ea767cf72f8c8969e9a8cbc98694d5cc8b2e283",size:"1",class:"ion-text-center"},t("ion-button",{key:"884b36102c030ca2825f90ea419540b105fc8d55",fill:"clear",color:"danger",disabled:this.applicationUnits.length==0,onClick:()=>this.deleteApplicationUnit()},t("ion-icon",{key:"d855deb79a4f9b1023b982ab42a1981dbc512253",slot:"start",name:"trash"}))))),t("app-form-item",{key:"10c0a2a2d0264c23d6ab7989f445154ddb718441","label-text":"ID",value:this.applicationUnit.applicationId,name:"applicationId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"applicationId",list:o.getApplicationUnits()}}]}),t("app-form-item",{key:"759cf1f8a696028260022a01133d731257b68628","label-text":"Name",value:this.applicationUnit.applicationName,name:"applicationName","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"0e70d12bb03888cbd4a5cc062cfd0614e52b6bcf","label-text":"Associated Goods Description",value:this.applicationUnit.applicationAssociatedGoodsDesc,name:"applicationAssociatedGoodsDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"}),t("app-form-item",{key:"0a2dfa9fbbebf70807e0e1dd8d785cbda9d94fd2","label-text":"Packing Description",value:this.applicationUnit.applicationPackingDesc,name:"applicationPackingDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"})),t("app-modal-footer",{key:"d3cd22d70d70a8a3a44f86d1bf2c83b2e5cc6b92",color:l.getAppColor(),disableSave:!this.validApplicationUnit,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};h.style=f;export{h as modal_project_applicationunit};