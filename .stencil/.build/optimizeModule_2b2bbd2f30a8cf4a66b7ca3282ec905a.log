import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as c,_ as l,S as d,T as n}from"./p-b9378908.js";import{E as r}from"./p-a9f4af61.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const h="modal-datasheet-qualitycolorcode ion-list{width:100%}";const f=h;const b=class{constructor(t){e(this,t);this.index=0;this.datasheetQualityColorCodes=undefined;this.datasheetQualityColorCode=undefined;this.updateView=true;this.validDatasheetQualityColorCode=false}async componentWillLoad(){await this.loadDatasheetQualityColorCodes()}async loadDatasheetQualityColorCodes(){await c.downloadDatasheetSettings();this.datasheetQualityColorCodes=o.exports.cloneDeep(c.getDatasheetQualityColorCodes());if(this.datasheetQualityColorCodes&&this.datasheetQualityColorCodes.length>0){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0]}else{this.addDatasheetQualityColorCode()}this.validateDatasheet()}selectType(e){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[e.detail.value];this.validateDatasheet()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="qualityColorCodeId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetQualityColorCode[t]=i;this.validateDatasheet()}validateDatasheet(){this.validDatasheetQualityColorCode=o.exports.isString(this.datasheetQualityColorCode.qualityColorCodeId)&&o.exports.isString(this.datasheetQualityColorCode.qualityColorCodePicture);this.updateView=!this.updateView}addDatasheetQualityColorCode(){this.datasheetQualityColorCode=new l;this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}duplicateDatasheetQualityColorCode(){this.datasheetQualityColorCode=o.exports.cloneDeep(this.datasheetQualityColorCode);this.datasheetQualityColorCode.qualityColorCodeId=this.datasheetQualityColorCode.qualityColorCodeId+"_rev.";this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}async deleteDatasheetQualityColorCode(){try{this.datasheetQualityColorCodes.splice(this.index,1);this.index=0;this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("qualityColorCode",this.datasheetQualityColorCodes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"e1b356ba2aa35f979fab09591bd126c99d8bf535"},t("ion-content",{key:"7c06a89ebda806b10e5a521d99c5fd17a4cb9ea2"},t("ion-grid",{key:"6d60c64b17d0b9ec986515bcd2016f5aa3f7f28a"},t("ion-row",{key:"79f40cef17e78b7682e980f2c9e43c732317c0d4"},t("ion-col",{key:"c0c1b6eaca7579dc7e0e97c12e9c8486a6af4290"},t("ion-item",{key:"f3b52841fcc2987e4b40b9601bef617ef096e85d",lines:"none"},t("ion-select",{key:"d8392ba302f4d2091ce631847c6f42e7dd537a0d",color:"trasteel",id:"selectType",interface:"action-sheet",label:n.getTransl("datasheet_qualityColorCode","Datasheet QualityColorCode"),disabled:!this.validDatasheetQualityColorCode,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.datasheetQualityColorCodes.map(((e,i)=>t("ion-select-option",{value:i},e.qualityColorCodeId+" | "+e.qualityColorCodePicture)))))),t("ion-col",{key:"71ee7411a0b01e36a8c5031ba8a84892c05aa92e",size:"1",class:"ion-text-center"},t("ion-button",{key:"1c0f9ffe7e1735a1319194aea629ebbf58837e27",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.addDatasheetQualityColorCode()},t("ion-icon",{key:"618db25c2034674a3bb3876f779919077f6f3177",name:"add",slot:"start"}))),t("ion-col",{key:"5d0995c5c10a6bc93b42f00b5fc093b44f1d4112",size:"1",class:"ion-text-center"},t("ion-button",{key:"970bc5d4c75cfb4c47c927818c1f15eaadbb11ec",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.duplicateDatasheetQualityColorCode()},t("ion-icon",{key:"d6173c070108372022aad9f4df9ffc7c231635e5",slot:"start",name:"duplicate"}))),t("ion-col",{key:"7d33d747c55bca9925be0cfe3b925c00f1caa8b0",size:"1",class:"ion-text-center"},t("ion-button",{key:"1fe6ef7c47cc16799cc086ed10778c4262d3bb16",fill:"clear",color:"danger",disabled:this.datasheetQualityColorCodes.length==0,onClick:()=>this.deleteDatasheetQualityColorCode()},t("ion-icon",{key:"fcb0183b42aa33cbe2d6064351d828b6851619e9",slot:"start",name:"trash"}))))),t("app-form-item",{key:"3e40ce76471c857921a57fe9ba93c0ccf10d035c","label-text":"ID",value:this.datasheetQualityColorCode.qualityColorCodeId,name:"qualityColorCodeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"qualityColorCodeId",list:c.getDatasheetQualityColorCodes()}}]}),t("app-form-item",{key:"498d81809a8c066fa79e607e6812846c5f7b758f","label-text":"Name",value:this.datasheetQualityColorCode.qualityColorCodePicture,name:"qualityColorCodePicture","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"099027fe6e1739ae17fc50131adf0bb019743203",color:r.getAppColor(),disableSave:!this.validDatasheetQualityColorCode,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};b.style=f;export{b as modal_datasheet_qualitycolorcode};