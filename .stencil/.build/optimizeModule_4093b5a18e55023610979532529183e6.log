import{r as s,h as t,H as e,f as i}from"./p-cbe60c68.js";import{U as a,b as c,M as o,z as n,B as r,E as h,c as p,C as d,F as l,f as b,g as f,d as m,e as u,D as k,a as g,G as y}from"./p-f3984daf.js";import{E as x}from"./p-a9f4af61.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-c7ee7cfe.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const v="app-map-popup .margin{margin-bottom:10px}app-map-popup .center{text-align:center}app-map-popup h2{padding-left:5px;padding-right:5px}app-map-popup ion-thumbnail{position:relative;margin-top:-50px;margin-bottom:0;margin-right:auto;margin-left:auto;width:50px;height:50px}app-map-popup ion-thumbnail img{border-radius:50%;padding:0.08em;border:solid 0.25em lightsteelblue;background-color:white}app-map-popup .cover{position:relative;background-color:lightblue;background-size:cover;background-position:center;background-repeat:no-repeat;overflow:hidden;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2);width:100%;height:80px}";const j=v;const w=class{constructor(t){s(this,t);this.properties=undefined}componentWillLoad(){this.propObject=JSON.parse(this.properties);this.propObject.item=JSON.parse(this.propObject.item);this.mapElement=this.el.closest("app-map");this.userRoles=a.userRoles;this.setLinesForItem()}disconnectedCallback(){this.removeLinesForItem()}setLinesForItem(){if(this.propObject.collection==c&&this.propObject.item.diveSites&&this.propObject.item.diveSites.length>0){const s=this.propObject.item.diveSites;this.propObject.item=new o(this.propObject.item);const t=[this.propObject.item];s.forEach((async s=>{const e=n.getDiveSitesDetails(s);t.push(e);this.mapElement["createLine"](s,this.propObject.item,e)}));this.mapElement["fitToBounds"](t)}else if(this.propObject.collection==r&&this.propObject.item.divingCenters&&this.propObject.item.divingCenters.length>0){const s=this.propObject.item.divingCenters;this.propObject.item=new h(this.propObject.item);const t=[this.propObject.item];s.forEach((async s=>{const e=p.getDivingCenterDetails(s);t.push(e);this.mapElement["createLine"](s,this.propObject.item,e)}));this.mapElement["fitToBounds"](t)}}removeLinesForItem(){if(this.propObject.collection==c&&this.propObject.item.diveSites&&this.propObject.item.diveSites.length>0){const s=this.propObject.item.diveSites;s.forEach((async s=>{this.mapElement["removeLine"](s)}))}else if(this.propObject.collection==r&&this.propObject.item.divingCenters&&this.propObject.item.divingCenters.length>0){const s=this.propObject.item.divingCenters;s.forEach((async s=>{this.mapElement["removeLine"](s)}))}}async openModal(){switch(this.propObject.collection){case y:a.presentUserDetails(this.propObject.id);break;case r:n.presentDiveSiteDetails(this.propObject.id);break;case c:p.presentDivingCenterDetails(this.propObject.id);break;case k:g.presentDiveCommunityDetails(this.propObject.id);break;case m:u.presentDivingSchoolDetails(this.propObject.id);break;case b:f.presentServiceCenterDetails(this.propObject.id);break;case"markers-feature":if(this.propObject.item.collection==d)l.presentCustomerDetails(this.propObject.item.id);break}this.mapElement["closePopup"]()}async planDive(){n.presentDiveSiteDetails(this.propObject.id,true);this.mapElement["closePopup"]()}async editModal(){switch(this.propObject.collection){case y:a.presentUserDetails(this.propObject.id);break;case r:n.presentDiveSiteUpdate(this.propObject.id);break;case c:p.presentDivingCenterUpdate(this.propObject.id);break;case k:g.presentDiveCommunityUpdate(this.propObject.id);break;case m:u.presentDivingSchoolUpdate(this.propObject.id);break;case b:f.presentServiceCenterUpdate(this.propObject.id);break}this.mapElement["closePopup"]()}async delete(){switch(this.propObject.collection){case"userPublicProfiles":break;case r:n.deleteDiveSite(this.propObject.id);break;case c:p.deleteDivingCenter(this.propObject.id);break;case k:g.deleteDiveCommunity(this.propObject.id);break;case m:u.deleteDivingSchool(this.propObject.id);break;case b:f.deleteServiceCenter(this.propObject.id);break}this.mapElement["closePopup"]()}render(){return t(e,{key:"8f911fe83e53cd9b1b0a4669f41a9283a2ab30e0"},this.propObject.item.coverURL?t("div",{class:"cover",style:this.propObject.item.coverURL?{backgroundImage:"url("+this.propObject.item.coverURL+")"}:undefined}):undefined,this.propObject.item.photoURL?t("ion-thumbnail",null,t("img",{src:this.propObject.item.photoURL?this.propObject.item.photoURL:"assets/images/avatar.png"})):undefined,t("h2",{key:"e9df1efb8395c047653f95770700a722ced75da0",class:"center"},this.propObject.item.displayName),t("div",{key:"d58951ae82e553eb4c3ceefbd6349bebbe477e32",class:"center"},t("ion-button",{key:"d91ab70865cccd32b29f601991c074e83844dcee",expand:"full",fill:"outline",color:"dark",onClick:()=>this.openModal()},t("my-transl",{key:"d55a474a9ec2d3c5f900ed4d2ebe48c4cac59f1c",tag:"details",text:"Details"}))),this.propObject.collection==r?t("div",{class:"center"},t("ion-button",{expand:"full",fill:"outline",color:"secondary",onClick:()=>this.planDive()},t("my-transl",{tag:"plan-dive",text:"Plan a Dive"}))):undefined,!x.isTrasteel()&&this.userRoles&&this.userRoles.isSuperAdmin()?[t("div",{class:"center"},t("ion-button",{expand:"full",fill:"outline",color:"primary",onClick:()=>this.editModal()},t("my-transl",{tag:"edit",text:"Edit"}))),t("div",{class:"center"},t("ion-button",{expand:"full",fill:"outline",color:"danger",onClick:()=>this.delete()},t("my-transl",{tag:"delete",text:"Delete"})))]:undefined,t("div",{key:"5cffdd6ea1f898265e443b2e302b195f12af4c2a",class:"margin"}))}get el(){return i(this)}};w.style=j;export{w as app_map_popup};