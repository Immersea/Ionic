import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{a6 as c,a7 as o,S as n,E as d}from"./p-944b5726.js";import{l as h}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="modal-datasheet-category ion-list{width:100%}";const l=r;const f=class{constructor(t){e(this,t);this.index=0;this.datasheetCategories=undefined;this.datasheetCategory=undefined;this.updateView=true;this.validDatasheetCategory=false}async componentWillLoad(){await this.loadDatasheetCategories()}async loadDatasheetCategories(){await c.downloadDatasheetSettings();this.datasheetCategories=h.exports.cloneDeep(c.getDatasheetCategories());if(this.datasheetCategories&&this.datasheetCategories.length>0){this.datasheetCategory=this.datasheetCategories[0]}else{this.addDatasheetCategory()}this.validateDatasheet()}selectType(e){this.datasheetCategory=this.datasheetCategories.find((t=>t.categoriesId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="categoriesId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetCategory[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetCategory=h.exports.isString(this.datasheetCategory.categoriesId)&&h.exports.isString(this.datasheetCategory.categoriesName);this.updateView=!this.updateView}addDatasheetCategory(){this.datasheetCategory=new o;this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}duplicateDatasheetCategory(){this.datasheetCategory=h.exports.cloneDeep(this.datasheetCategory);this.datasheetCategory.categoriesId=this.datasheetCategory.categoriesId+"_rev.";this.datasheetCategories.push(this.datasheetCategory);this.index=this.datasheetCategories.length-1}async deleteDatasheetCategory(){try{this.datasheetCategories.splice(this.index,1);this.index=0;this.datasheetCategory=this.datasheetCategories[0];this.validateDatasheet()}catch(e){if(e)n.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("category",this.datasheetCategories);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"e8d06fcbca06bb4804821ebf8b83bbcf10ca440f"},t("ion-content",{key:"0b7bb91027a8b7e744208443701ce2b4946ea128"},t("ion-grid",{key:"0353ac64d99e16a806f7a1af9f355bd25df1ad62"},t("ion-row",{key:"57443139f6e31293d1006c8f709529764fcf6593"},t("ion-col",{key:"0989d47ff3c3f0605c84814e3d9f4b5115b5a43f"},t("app-select-search",{key:"0e9fbdff99524485a66cef44c55e3f7d40d8fec9",color:"trasteel",label:{tag:"datasheet_category",text:"Datasheet Category"},value:this.index?this.datasheetCategories[this.index].categoriesId:this.datasheetCategories[0].categoriesId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetCategories,selectValueId:"categoriesId",selectValueText:["categoriesName"],disabled:!this.validDatasheetCategory})),t("ion-col",{key:"c98a85bc4ce89c1d51b0c937f05f1635be034085",size:"1",class:"ion-text-center"},t("ion-button",{key:"69fdce6afdadf1411c4504a6114ab9ed780a14ab",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.addDatasheetCategory()},t("ion-icon",{key:"b7b2e59907f01ab6073b8c70970c0459615a8751",name:"add",slot:"start"}))),t("ion-col",{key:"2dcb853de34394fb3e2be2a69890915b5c7cba66",size:"1",class:"ion-text-center"},t("ion-button",{key:"7cbd5f842d815de5315ac4bf1a708844bb1e676b",fill:"clear",disabled:!this.validDatasheetCategory,onClick:()=>this.duplicateDatasheetCategory()},t("ion-icon",{key:"08def60ba7bd56ed9ac60ca4b21cf87abc7073b9",slot:"start",name:"duplicate"}))),t("ion-col",{key:"b0ee24260406e517eac353971e9720261c13ebb8",size:"1",class:"ion-text-center"},t("ion-button",{key:"141eaec5967972652be1376760af3c072472415d",fill:"clear",color:"danger",disabled:this.datasheetCategories.length==0,onClick:()=>this.deleteDatasheetCategory()},t("ion-icon",{key:"7c280e3ef81d3fba6e8561a62d7cc5221717a976",slot:"start",name:"trash"}))))),t("app-form-item",{key:"2f468158c2792dca977fbe051f41c016791867a1","label-text":"ID",value:this.datasheetCategory.categoriesId,name:"categoriesId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"categoriesId",list:c.getDatasheetCategories()}}]}),t("app-form-item",{key:"b0d2bdc320b53b013aea45398f4e0ee6d388c6f6","label-text":"Name",value:this.datasheetCategory.categoriesName,name:"categoriesName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"cd792f2bb3a3308eef5681fce6855b5b1ab0f2d5",color:d.getAppColor(),disableSave:!this.validDatasheetCategory,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};f.style=l;export{f as modal_datasheet_category};