{"version":3,"names":["appUserCardsCss","AppUserCardsStyle0","AppUserCards","componentWillLoad","this","userCardsSub$","UserService","userCards$","subscribe","userCards","UserCards","updateView","updateSlider","sysPref","SystemService","getSystemPreferences","componentDidLoad","initLocalUser","disconnectedCallback","unsubscribe","addCard","i","confModal","RouterService","openModal","card","cards","Card","onDidDismiss","then","updatedCard","data","push","save","removeCard","event","stopPropagation","confirm","alertController","create","header","TranslationService","getTransl","message","buttons","text","role","handler","splice","present","updateUserCards","render","h","key","class","length","map","onClick","imgFront","src","undefined","lines","slot","color","fill","ev","name","course","certificationId","agencyName","number","instructor","tag","certified","showDate","expiry","comments","style","fontSize","appUserConfigurationsCss","AppUserConfigurationsStyle0","AppUserConfigurations","stdConfigurations","userSub$","userSettings$","userSettings","UserSettings","loadData","DatabaseService","getLocalDocument","USERSETTINGSCOLLECTION","DiveStandardsService","getStdConfigurations","userConfigurations","localConfigurations","forEach","conf","model","DiveConfiguration","getDivePlansFromConfigurations","saveLocalDocument","viewConfiguration","checkLicence","configuration","cloneDeep","divePlan","DivePlan","setConfiguration","diveDataToShare","updatedConf","removeConfiguration","addConfiguration","inputs","type","label","stdName","value","checked","alert","async","cssClass","updateUserConfigurations","maxDepth","parameters","depthUnit","bottom","tank","gas","toString","deco","appUserLicencesCss","AppUserLicencesStyle0","AppUserLicences","allowPurchase","userRolesSub$","userRoles$","userRoles","uid","UserRoles","setProductPrices","prices","rec1","licence","price","productPrices","rec2","rec3","tech1","tech2","unlimited","showInfo","info","purchase","prompt","activateTrial","days","licences","trial","duration","xxx","CallableFunctionsUdiveService","startUserTrialPeriod","url","encodeURI","userProfile","email","Browser","open","Object","keys","upperFirst","hasLicence","isLabel","level","trialDays","trialExpiryDate","getUserLimitations","maxDecoTime","DiveToolsService","maxHe","minO2","maxO2","maxDecoGases","minDecoO2","maxDecoO2","appUserTanksCss","AppUserTanksStyle0","AppUserTanks","stdTanks","hasUserTanks","userTanks","getStdTanks","isEqual","viewTank","updatedTank","TankModel","removeTank","addTank","updateUserTanks","volume","settings","units","ltToCuFt","no_of_tanks","pressure","barToPsi","forDeco"],"sources":["src/components/udive/app/user/app-user-cards/app-user-cards.scss?tag=app-user-cards","src/components/udive/app/user/app-user-cards/app-user-cards.tsx","src/components/udive/app/user/app-user-configurations/app-user-configurations.scss?tag=app-user-configurations","src/components/udive/app/user/app-user-configurations/app-user-configurations.tsx","src/components/udive/app/user/app-user-licences/app-user-licences.scss?tag=app-user-licences","src/components/udive/app/user/app-user-licences/app-user-licences.tsx","src/components/udive/app/user/app-user-tanks/app-user-tanks.scss?tag=app-user-tanks","src/components/udive/app/user/app-user-tanks/app-user-tanks.tsx"],"sourcesContent":["app-user-cards {\n  width: 100%;\n  .card-margins {\n    margin: 10px 5px 5px 10px;\n  }\n}\n","import { Component, h, Prop, State } from \"@stencil/core\";\nimport { Subscription } from \"rxjs\";\nimport { UserService } from \"../../../../../services/common/user\";\nimport {\n  UserCards,\n  Card,\n} from \"../../../../../interfaces/udive/user/user-cards\";\nimport { alertController } from \"@ionic/core\";\nimport { TranslationService } from \"../../../../../services/common/translations\";\nimport { SystemService } from \"../../../../../services/common/system\";\nimport { SystemPreference } from \"../../../../../interfaces/common/system/system\";\nimport { RouterService } from \"../../../../../services/common/router\";\nimport { showDate } from \"../../../../../helpers/utils\";\n\n@Component({\n  tag: \"app-user-cards\",\n  styleUrl: \"app-user-cards.scss\",\n})\nexport class AppUserCards {\n  @Prop() updateSlider: any;\n  @State() userCards: UserCards;\n  @State() updateView = true;\n  @State() sysPref: SystemPreference;\n  userCardsSub$: Subscription;\n  async componentWillLoad() {\n    this.userCardsSub$ = UserService.userCards$.subscribe(\n      (userCards: UserCards) => {\n        this.userCards = new UserCards(userCards);\n        this.updateView = !this.updateView;\n        this.updateSlider();\n      }\n    );\n    this.sysPref = await SystemService.getSystemPreferences();\n  }\n\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userCards) {\n      UserService.initLocalUser();\n    }\n  }\n\n  disconnectedCallback() {\n    this.userCardsSub$.unsubscribe();\n  }\n\n  async addCard(i?) {\n    const confModal = await RouterService.openModal(\"modal-dive-card\", {\n      card: this.userCards.cards[i] ? this.userCards.cards[i] : new Card(),\n    });\n    confModal.onDidDismiss().then((updatedCard) => {\n      updatedCard = updatedCard.data;\n      if (updatedCard) {\n        if (this.userCards.cards[i]) {\n          this.userCards.cards[i] = new Card(updatedCard);\n        } else {\n          this.userCards.cards.push(new Card(updatedCard));\n        }\n        this.save();\n      }\n    });\n  }\n\n  async removeCard(event, i) {\n    event.stopPropagation();\n    const confirm = await alertController.create({\n      header: TranslationService.getTransl(\n        \"delete-card-header\",\n        \"Delete Dive Card?\"\n      ),\n      message: TranslationService.getTransl(\n        \"delete-card-message\",\n        \"This dive card will be deleted! Are you sure?\"\n      ),\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n          role: \"cancel\",\n          handler: () => {},\n        },\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n          handler: () => {\n            this.userCards.cards.splice(i, 1);\n            this.save();\n          },\n        },\n      ],\n    });\n    confirm.present();\n  }\n\n  save() {\n    UserService.updateUserCards(this.userCards);\n    this.updateSlider();\n  }\n\n  render() {\n    return (\n      <div class='slider-container'>\n        <div class='slider-scrollable-container'>\n          <ion-grid class='ion-no-padding'>\n            <ion-row class='ion-text-start ion-no-padding'>\n              {this.userCards && this.userCards.cards.length > 0\n                ? this.userCards.cards.map((card, i) => (\n                    <ion-col\n                      size-sm='12'\n                      size-md='6'\n                      size-lg='4'\n                      class='ion-no-padding'\n                    >\n                      <ion-card\n                        onClick={() => this.addCard(i)}\n                        class='card-margins'\n                      >\n                        {card.imgFront ? (\n                          <img src={card.imgFront} />\n                        ) : undefined}\n\n                        <ion-card-header>\n                          <ion-card-subtitle>\n                            <ion-item class='ion-no-padding' lines='none'>\n                              <ion-button\n                                icon-only\n                                slot='end'\n                                color='danger'\n                                fill='clear'\n                                onClick={(ev) => this.removeCard(ev, i)}\n                              >\n                                <ion-icon name='trash-bin-outline'></ion-icon>\n                              </ion-button>\n                              <ion-label>\n                                <h2>{card.course.certificationId}</h2>\n                              </ion-label>\n                            </ion-item>\n                            {card.course.agencyName}\n                          </ion-card-subtitle>\n                        </ion-card-header>\n                        <ion-card-content>\n                          {card.number ? <p>#{card.number}</p> : undefined}\n                          {card.instructor ? (\n                            <p>\n                              <my-transl tag='instructor' text='Instructor' />:{\" \"}\n                              {card.instructor}\n                            </p>\n                          ) : undefined}\n                          {card.certified ? (\n                            <p>\n                              <my-transl tag='certified' text='Certified' />:{\" \"}\n                              {showDate(card.certified, \"date\")}\n                            </p>\n                          ) : undefined}\n                          {card.expiry ? (\n                            <p>\n                              <my-transl tag='expiry' text='Expiry' />:{\" \"}\n                              {showDate(card.expiry, \"date\")}\n                            </p>\n                          ) : undefined}\n                          {card.comments ? (\n                            <p>\n                              <my-transl tag='comments' text='Comments' />:{\" \"}\n                              {card.comments}\n                            </p>\n                          ) : undefined}\n                        </ion-card-content>\n                      </ion-card>\n                    </ion-col>\n                  ))\n                : undefined}\n              <ion-col\n                size-sm='12'\n                size-md='6'\n                size-lg='4'\n                class='ion-no-padding'\n              >\n                <ion-card onClick={() => this.addCard()}>\n                  <ion-card-content class='ion-text-center'>\n                    <ion-icon\n                      name='add-circle-outline'\n                      style={{ fontSize: \"100px\" }}\n                    ></ion-icon>\n                  </ion-card-content>\n                </ion-card>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n      </div>\n    );\n  }\n}\n","app-user-configurations {\n  width: 100%;\n  .card-margins {\n    margin: 10px 5px 5px 10px;\n  }\n}\n","import {Component, h, State} from \"@stencil/core\";\nimport {\n  UserService,\n  USERSETTINGSCOLLECTION,\n} from \"../../../../../services/common/user\";\nimport {DiveConfiguration} from \"../../../../../interfaces/udive/planner/dive-configuration\";\nimport {Subscription} from \"rxjs\";\nimport {DatabaseService} from \"../../../../../services/common/database\";\nimport {DiveStandardsService} from \"../../../../../services/udive/planner/dive-standards\";\nimport {cloneDeep, forEach} from \"lodash\";\nimport {alertController} from \"@ionic/core\";\nimport {DivePlan} from \"../../../../../services/udive/planner/dive-plan\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {UserSettings} from \"../../../../../interfaces/udive/user/user-settings\";\nimport {RouterService} from \"../../../../../services/common/router\";\n\n@Component({\n  tag: \"app-user-configurations\",\n  styleUrl: \"app-user-configurations.scss\",\n})\nexport class AppUserConfigurations {\n  @State() userConfigurations: DiveConfiguration[] = [];\n  stdConfigurations: DiveConfiguration[] = [];\n  loading: any;\n  userSettings: UserSettings;\n  userSub$: Subscription;\n\n  componentWillLoad() {\n    this.userSub$ = UserService.userSettings$.subscribe(\n      (userSettings: UserSettings) => {\n        this.userSettings = new UserSettings(userSettings);\n        this.loadData();\n      }\n    );\n  }\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userSettings) {\n      UserService.initLocalUser();\n    }\n  }\n\n  async loadData() {\n    if (!this.userSettings) {\n      this.userSettings = new UserSettings(\n        await DatabaseService.getLocalDocument(USERSETTINGSCOLLECTION)\n      );\n    }\n    this.stdConfigurations = DiveStandardsService.getStdConfigurations();\n    if (this.userSettings) {\n      /*this.userConfigurations = orderBy(\n        this.user.userConfigurations,\n        \"stdName\"\n      );*/\n      this.userConfigurations = this.userSettings.userConfigurations;\n    } else {\n      const localConfigurations = await DatabaseService.getLocalDocument(\n        \"localconfigurations\"\n      );\n      if (localConfigurations) {\n        this.stdConfigurations = [];\n        localConfigurations.forEach((conf) => {\n          const model = new DiveConfiguration(conf);\n          this.userConfigurations.push(model);\n        });\n      } else {\n        this.userConfigurations =\n          DiveStandardsService.getDivePlansFromConfigurations(\n            this.stdConfigurations\n          );\n        DatabaseService.saveLocalDocument(\n          \"localconfigurations\",\n          this.userConfigurations\n        );\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    this.userSub$.unsubscribe();\n  }\n\n  async viewConfiguration(i) {\n    const openModal = await UserService.checkLicence(\"configs\", true);\n\n    if (openModal) {\n      const configuration = cloneDeep(this.userConfigurations[i]);\n      const divePlan = new DivePlan();\n      divePlan.setConfiguration(configuration);\n      const confModal = await RouterService.openModal(\n        \"modal-dive-configuration\",\n        {\n          diveDataToShare: {\n            divePlan: divePlan,\n          },\n        }\n      );\n      confModal.onDidDismiss().then((updatedConf) => {\n        updatedConf = updatedConf.data;\n        if (updatedConf) {\n          this.userConfigurations[i] = new DiveConfiguration(updatedConf);\n          this.save();\n        }\n      });\n    }\n  }\n\n  async removeConfiguration(event, i) {\n    event.stopPropagation();\n    const openModal = await UserService.checkLicence(\"configs\", true);\n    if (openModal) {\n      const confirm = await alertController.create({\n        header: TranslationService.getTransl(\n          \"delete-configuration-header\",\n          \"Delete configuration?\"\n        ),\n        message: TranslationService.getTransl(\n          \"delete-configuration-message\",\n          \"This configuration will be deleted! Are you sure?\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n            role: \"cancel\",\n            handler: () => {},\n          },\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n            handler: () => {\n              this.userConfigurations.splice(i, 1);\n              this.save();\n            },\n          },\n        ],\n      });\n      confirm.present();\n    }\n  }\n\n  async addConfiguration() {\n    const openModal = await UserService.checkLicence(\"configs\", true);\n    if (openModal) {\n      let inputs = [];\n      forEach(this.stdConfigurations, (conf, key) => {\n        inputs.push({\n          type: \"radio\",\n          label: conf.stdName + \" (standard)\",\n          value: conf,\n          checked: key == 0 ? true : false,\n        });\n      });\n      forEach(this.userConfigurations, (conf) => {\n        inputs.push({\n          type: \"radio\",\n          label: conf.stdName,\n          value: conf,\n          checked: false,\n        });\n      });\n      const alert = await alertController.create({\n        header: TranslationService.getTransl(\n          \"select-standard-configuration\",\n          \"Select standard configuration\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n            handler: async (data: any) => {\n              let openModal = await UserService.checkLicence(\"configs\", true);\n              if (openModal) {\n                const configuration = new DiveConfiguration(data);\n                const divePlan = new DivePlan();\n                divePlan.setConfiguration(configuration);\n                const confModal = await RouterService.openModal(\n                  \"modal-dive-configuration\",\n                  {\n                    diveDataToShare: {\n                      divePlan: divePlan,\n                    },\n                  }\n                );\n                confModal.onDidDismiss().then((updatedConf) => {\n                  updatedConf = updatedConf.data;\n                  if (updatedConf) {\n                    this.userConfigurations.push(\n                      new DiveConfiguration(updatedConf)\n                    );\n                    this.save();\n                  }\n                });\n              }\n            },\n          },\n          {\n            text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n            role: \"cancel\",\n            cssClass: \"secondary\",\n          },\n        ],\n        inputs: inputs,\n      });\n      alert.present();\n    }\n  }\n\n  save() {\n    UserService.updateUserConfigurations(this.userConfigurations);\n  }\n\n  render() {\n    return (\n      <div class=\"slider-container\">\n        <div class=\"slider-scrollable-container\">\n          <ion-grid class=\"ion-no-padding\">\n            <ion-row class=\"ion-text-start ion-no-padding\">\n              {this.userConfigurations.map((conf, i) => (\n                <ion-col\n                  size-sm=\"12\"\n                  size-md=\"6\"\n                  size-lg=\"4\"\n                  class=\"ion-no-padding\"\n                >\n                  <ion-card\n                    onClick={() => this.viewConfiguration(i)}\n                    class=\"card-margins\"\n                  >\n                    <ion-card-header>\n                      <ion-item class=\"ion-no-padding\" lines=\"none\">\n                        <ion-button\n                          icon-only\n                          slot=\"end\"\n                          color=\"danger\"\n                          fill=\"clear\"\n                          onClick={(ev) => this.removeConfiguration(ev, i)}\n                        >\n                          <ion-icon name=\"trash-bin-outline\"></ion-icon>\n                        </ion-button>\n\n                        <ion-card-title>{conf.stdName}</ion-card-title>\n                      </ion-item>\n\n                      <ion-card-subtitle>\n                        <my-transl tag=\"max-depth\" text=\"Max Depth\" />:\n                        {conf.maxDepth} {conf.parameters.depthUnit}\n                      </ion-card-subtitle>\n                    </ion-card-header>\n\n                    <ion-card-content>\n                      {conf.configuration.bottom.length > 0 ? (\n                        <p>\n                          <my-transl tag=\"bottom-tanks\" text=\"Bottom Tanks\" />:\n                        </p>\n                      ) : undefined}\n                      {conf.configuration.bottom.map((tank) => (\n                        <p>{tank.name + \"->\" + tank.gas.toString()}</p>\n                      ))}\n                      {conf.configuration.deco.length > 0 ? (\n                        <p>\n                          <my-transl tag=\"deco-tanks\" text=\"Deco Tanks\" />:\n                        </p>\n                      ) : undefined}\n                      {conf.configuration.deco.map((tank) => (\n                        <p>{tank.name + \"->\" + tank.gas.toString()}</p>\n                      ))}\n                    </ion-card-content>\n                  </ion-card>\n                </ion-col>\n              ))}\n              <ion-col\n                size-sm=\"12\"\n                size-md=\"6\"\n                size-lg=\"4\"\n                class=\"ion-no-padding\"\n              >\n                <ion-card onClick={() => this.addConfiguration()}>\n                  <ion-card-content class=\"ion-text-center\">\n                    <ion-icon\n                      name=\"add-circle-outline\"\n                      style={{fontSize: \"100px\"}}\n                    ></ion-icon>\n                  </ion-card-content>\n                </ion-card>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n      </div>\n    );\n  }\n}\n","app-user-licences {\n  width: 100%;\n}\n","import { Component, h, State } from \"@stencil/core\";\nimport { Subscription } from \"rxjs\";\nimport { UserService } from \"../../../../../services/common/user\";\nimport { UserRoles } from \"../../../../../interfaces/common/user/user-roles\";\nimport { TranslationService } from \"../../../../../services/common/translations\";\nimport { alertController } from \"@ionic/core\";\nimport { SystemService } from \"../../../../../services/common/system\";\nimport { SystemPreference } from \"../../../../../interfaces/common/system/system\";\nimport { Browser } from \"@capacitor/browser\";\nimport { upperFirst } from \"lodash\";\nimport { CallableFunctionsUdiveService } from \"../../../../../services/udive/callableFunctions\";\nimport { DiveToolsService } from \"../../../../../services/udive/planner/dive-tools\";\n\n@Component({\n  tag: \"app-user-licences\",\n  styleUrl: \"app-user-licences.scss\",\n})\nexport class AppUserLicences {\n  @State() userRoles: UserRoles;\n  userRolesSub$: Subscription;\n  @State() prices = {};\n  allowPurchase = true;\n  @State() sysPref: SystemPreference;\n\n  async componentWillLoad() {\n    this.userRolesSub$ = UserService.userRoles$.subscribe((userRoles) => {\n      if (userRoles && userRoles.uid) {\n        this.userRoles = new UserRoles(userRoles);\n      }\n    });\n    this.sysPref = await SystemService.getSystemPreferences();\n    this.setProductPrices();\n  }\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userRoles) {\n      UserService.initLocalUser();\n    }\n  }\n\n  disconnectedCallback() {\n    this.userRolesSub$.unsubscribe();\n  }\n\n  /*\n   * in app purchase\n   */\n\n  setProductPrices() {\n    this.prices = {\n      /*trimix: {\n        licence: \"trimix\",\n        price: this.sysPref.productPrices.trimix,\n      },\n      tables: {\n        licence: \"tables\",\n        price: this.sysPref.productPrices.tables,\n      },\n      rebreather: {\n        licence: \"reb\",\n        price: this.sysPref.productPrices.reb,\n      },\n      configurations: {\n        licence: \"configs\",\n        price: this.sysPref.productPrices.configs,\n      },\n      professional: {\n        licence: \"pro\",\n        price: this.sysPref.productPrices.pro,\n      },\n*/\n      rec1: {\n        licence: \"rec1\",\n        price: this.sysPref.productPrices.rec1,\n      },\n      rec2: {\n        licence: \"rec2\",\n        price: this.sysPref.productPrices.rec2,\n      },\n      rec3: {\n        licence: \"rec3\",\n        price: this.sysPref.productPrices.rec3,\n      },\n      tech1: {\n        licence: \"tech1\",\n        price: this.sysPref.productPrices.tech1,\n      },\n      tech2: {\n        licence: \"tech2\",\n        price: this.sysPref.productPrices.tech2,\n      },\n      unlimited: {\n        licence: \"unlimited\",\n        price: this.sysPref.productPrices.unlimited,\n      },\n    };\n    /*let productIds = new Array().concat(values(this.config.purchaseProducts))\n    this.iap\n    .getProducts(productIds)\n    .then((products) => {\n        //  [{ productId: 'com.yourapp.prod1', 'title': '...', description: '...', price: '...' }, ...]\n      this.products = products;\n      products.forEach(product=>{\n        switch (product.productId) {\n          case this.config.purchaseProducts.trimix:\n            this.prices.trimix = product.price;\n            break;\n          case this.config.purchaseProducts.tables:\n            this.prices.tables = product.price;\n            break;\n          case this.config.purchaseProducts.reb:\n            this.prices.reb = product.price;\n            break;\n          case this.config.purchaseProducts.configs:\n            this.prices.configs = product.price;\n            break;\n          case this.config.purchaseProducts.pro:\n            this.prices.pro = product.price;\n            break;\n        }\n      })\n    })\n    .catch((err) => {\n      console.log(\"products\",err);\n      this.allowPurchase = false;\n    });*/\n  }\n\n  async showInfo(licence: string) {\n    let info;\n    switch (licence) {\n      case \"trimix\":\n        info = TranslationService.getTransl(\n          \"licence-tmx-descr\",\n          \"This licence adds the possibility to select trimix gases in the dive plans.\"\n        );\n        break;\n      case \"tables\":\n        info = TranslationService.getTransl(\n          \"licence-tables-descr\",\n          \"This licence shows dive plan tables with the possibility to vary the bottom time and depth.\"\n        );\n        break;\n      case \"rebreather\":\n        info = TranslationService.getTransl(\n          \"licence-reb-descr\",\n          \"This licence adds the possibility to plan dives with CCR and pSCR rebreathers, including bailout options.\"\n        );\n        break;\n      case \"configurations\":\n        info = TranslationService.getTransl(\n          \"licence-confs-descr\",\n          \"This licence adds the possibility to edit, add and delete dive configurations.\"\n        );\n        break;\n      case \"professional\":\n        info = TranslationService.getTransl(\n          \"licence-pro-descr\",\n          \"This licence opens all the features of the app.\"\n        );\n        break;\n      case \"rec1\":\n        info = TranslationService.getTransl(\n          \"licence-rec1-descr\",\n          \"This licence allows dives in the Rec1 range.\"\n        );\n        break;\n      case \"rec2\":\n        info = TranslationService.getTransl(\n          \"licence-rec2-descr\",\n          \"This licence allows dives in the Rec2 range.\"\n        );\n        break;\n      case \"rec3\":\n        info = TranslationService.getTransl(\n          \"licence-rec3-descr\",\n          \"This licence allows dives in the Rec3 range.\"\n        );\n        break;\n      case \"tech1\":\n        info = TranslationService.getTransl(\n          \"licence-tech1-descr\",\n          \"This licence allows dives in the Tech1 range.\"\n        );\n        break;\n      case \"tech2\":\n        info = TranslationService.getTransl(\n          \"licence-tech2-descr\",\n          \"This licence allows dives in the Tech2 range.\"\n        );\n        break;\n      case \"unlimited\":\n        info = TranslationService.getTransl(\n          \"licence-unlimited-descr\",\n          \"This licence allows every kind of dive.\"\n        );\n        break;\n    }\n    let buttons = [];\n    buttons.push({\n      text: TranslationService.getTransl(\"purchase\", \"Purchase\"),\n      handler: () => {\n        this.purchase(licence);\n      },\n    });\n    buttons.push({\n      text: TranslationService.getTransl(\"ok\", \"OK\"),\n    });\n    let prompt = await alertController.create({\n      header: TranslationService.getTransl(\"licence-info\", \"Licence info\"),\n      message: info,\n      buttons: buttons,\n    });\n    prompt.present();\n  }\n\n  async activateTrial() {\n    const days =\n      this.userRoles.licences.trial.duration > 0\n        ? this.userRoles.licences.trial.duration\n        : 15;\n    let prompt = await alertController.create({\n      header: TranslationService.getTransl(\"activate-trial\", \"Start Trial\"),\n      message: TranslationService.getTransl(\n        \"activate-trail-message\",\n        \"Do you want to start the UNLIMITED trial period of xxx days?\",\n        {\n          xxx: days,\n        }\n      ),\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n          handler: async () => {\n            await CallableFunctionsUdiveService.startUserTrialPeriod();\n          },\n        },\n        {\n          role: \"cancel\",\n          text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n        },\n      ],\n    });\n    prompt.present();\n  }\n\n  async purchase(licence: string) {\n    let url = encodeURI(\n      \"https://www.gue.com/store/software/decoplanner-4?uid=\" +\n        UserService.userProfile.uid +\n        \"&email=\" +\n        UserService.userProfile.email +\n        \"&licence=\" +\n        licence\n    );\n    await Browser.open({\n      url: url,\n    });\n    /*let title =\n      startCase(licence) +\n      \" \" +\n      TranslationService.getTransl(\"licence-purchase\", \"licence purchase\");\n    if (this.allowPurchase) {\n      await SystemService.presentLoading(\"please-wait\");\n      let productId = this.config.purchaseProducts[licence];\n      this.iap\n      .buy(productId)\n      .then( (data) => {\n        this.receipt = data\n        this.userRoles.purchaselicence(licence);\n        this.dataBase.saveDoc(this.userRoles).then(res=>{\n          this.userHasConfigsLicence = this.userRoles.licences.configs || this.userRoles.licences.pro\n          loading.dismiss();\n          let prompt = this.alertCtrl.create({\n            title: title,\n            message: TranslationService.getTransl(\"Thank you for your purchase! Your licence is now active.\"),\n            buttons: [\n              {\n                text: TranslationService.getTransl(\"OK\")\n              }\n            ]\n          });\n          prompt.present();\n        })\n      })\n      .catch( (err) => {\n        loading.dismiss();\n        let prompt = this.alertCtrl.create({\n          title: title,\n          message: TranslationService.getTransl(\"There was a problem in the purchase:\")+\"<br>\"+JSON.stringify(err),\n          buttons: [\n            {\n              text: TranslationService.getTransl(\"OK\")\n            }\n          ]\n        });\n        prompt.present();\n      });\n      SystemService.dismissLoading();\n    } else {\n      let prompt = await alertController.create({\n        header: title,\n        message: TranslationService.getTransl(\n          \"purchase-unavailable\",\n          \"Purchase is not available at the moment. Please try again later!\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n          },\n        ],\n      });\n      prompt.present();\n    }*/\n  }\n\n  render() {\n    return this.userRoles && this.userRoles.uid ? (\n      <ion-list>\n        <ion-list-header onClick={() => this.purchase(\"unlimited\")}>\n          <my-transl\n            tag='purchase-dp4'\n            text='Purchase DecoPlanner 4'\n          ></my-transl>\n        </ion-list-header>\n        {Object.keys(this.prices).map((licence) => (\n          <ion-item>\n            <ion-label>\n              <my-transl tag={licence} text={upperFirst(licence)}></my-transl>\n            </ion-label>\n\n            {!this.userRoles.hasLicence(this.prices[licence].licence, false) ? (\n              [\n                <ion-button\n                  slot='end'\n                  fill='clear'\n                  onClick={() => this.showInfo(licence)}\n                >\n                  <ion-icon name='help-circle'></ion-icon>\n                </ion-button>,\n              ]\n            ) : (\n              <ion-button slot='end' fill='clear'>\n                <ion-icon color='secondary' name='checkmark'></ion-icon>\n              </ion-button>\n            )}\n          </ion-item>\n        ))}\n        <ion-item>\n          <my-transl tag='trial-period' text='Trial Period' isLabel />\n\n          {this.userRoles.licences.trial.level ? (\n            <ion-note slot='end'>\n              {\" \"}\n              {this.userRoles.licences.trialDays() > 0 ? (\n                <span>\n                  <my-transl\n                    tag={this.userRoles.licences.trial.level}\n                    text={upperFirst(this.userRoles.licences.trial.level)}\n                  ></my-transl>{\" \"}\n                  - {this.userRoles.licences.trialDays()}{\" \"}\n                  <my-transl tag='days-remaining' text='days remaining' />\n                </span>\n              ) : (\n                <span>\n                  <my-transl\n                    tag={this.userRoles.licences.trial.level}\n                    text={upperFirst(this.userRoles.licences.trial.level)}\n                  ></my-transl>\n                  {\" - \"}\n                  <my-transl tag='expired' text='Expired' />\n                  {\": \" + this.userRoles.licences.trialExpiryDate()}\n                </span>\n              )}\n            </ion-note>\n          ) : (\n            <ion-button\n              slot='end'\n              fill='outline'\n              onClick={() => this.activateTrial()}\n            >\n              <ion-label>\n                <my-transl tag='activate-trial' text='Start Trial'></my-transl>\n              </ion-label>\n            </ion-button>\n          )}\n        </ion-item>\n        <ion-item-divider>Actual limitations</ion-item-divider>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-deco-time' text='Max Deco Time'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxDecoTime +\n                \" min\"}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-depth' text='Max Depth'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxDepth +\n                \" \" +\n                DiveToolsService.depthUnit}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-he' text='Max He'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxHe + \"%\"}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='min-o2' text='Min O2'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().minO2 + \"%\"}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-o2' text='Max O2'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxO2 + \"%\"}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-deco-gases' text='Max Deco Gases'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxDecoGases}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='min-deco-o2' text='Min Deco O2'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().minDecoO2 +\n                \"%\"}\n            </span>\n          </ion-note>\n        </ion-item>\n        <ion-item>\n          <ion-label>\n            <my-transl tag='max-deco-o2' text='Max Deco O2'></my-transl>\n          </ion-label>\n          <ion-note slot='end'>\n            <span>\n              {UserService.userRoles.licences.getUserLimitations().maxDecoO2 +\n                \"%\"}\n            </span>\n          </ion-note>\n        </ion-item>\n      </ion-list>\n    ) : undefined;\n  }\n}\n","app-user-tanks {\n  width: 100%;\n  .card-margins {\n    margin: 10px 5px 5px 10px;\n  }\n}\n","import {Component, h, State} from \"@stencil/core\";\nimport {\n  UserService,\n  USERSETTINGSCOLLECTION,\n} from \"../../../../../services/common/user\";\nimport {Subscription} from \"rxjs\";\nimport {DatabaseService} from \"../../../../../services/common/database\";\nimport {DiveStandardsService} from \"../../../../../services/udive/planner/dive-standards\";\nimport {cloneDeep, forEach, isEqual} from \"lodash\";\nimport {alertController} from \"@ionic/core\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {UserSettings} from \"../../../../../interfaces/udive/user/user-settings\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {DiveToolsService} from \"../../../../../services/udive/planner/dive-tools\";\nimport {TankModel} from \"../../../../../interfaces/udive/planner/tank-model\";\n\n@Component({\n  tag: \"app-user-tanks\",\n  styleUrl: \"app-user-tanks.scss\",\n})\nexport class AppUserTanks {\n  @State() userTanks: TankModel[] = [];\n  stdTanks: TankModel[] = [];\n  loading: any;\n  userSettings: UserSettings;\n  userSub$: Subscription;\n  hasUserTanks = true;\n\n  componentWillLoad() {\n    this.userSub$ = UserService.userSettings$.subscribe(\n      (userSettings: UserSettings) => {\n        this.userSettings = new UserSettings(userSettings);\n        this.loadData();\n      }\n    );\n  }\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userSettings) {\n      UserService.initLocalUser();\n    }\n  }\n\n  async loadData() {\n    if (!this.userSettings) {\n      this.userSettings = new UserSettings(\n        await DatabaseService.getLocalDocument(USERSETTINGSCOLLECTION)\n      );\n    }\n    this.userTanks = this.userSettings.userTanks;\n    this.stdTanks = DiveStandardsService.getStdTanks();\n    if (isEqual(this.userTanks, this.stdTanks)) this.hasUserTanks = false;\n  }\n\n  disconnectedCallback() {\n    this.userSub$.unsubscribe();\n  }\n\n  async viewTank(i) {\n    const openModal = await UserService.checkLicence(\"configs\", true);\n\n    if (openModal) {\n      const tank = cloneDeep(this.userTanks[i]);\n      const confModal = await RouterService.openModal(\n        \"modal-tank-configuration\",\n        {\n          tank: tank,\n        }\n      );\n      confModal.onDidDismiss().then((updatedTank) => {\n        if (updatedTank && updatedTank.data) {\n          const tank = updatedTank.data;\n          this.userTanks[i] = new TankModel(tank);\n          this.save();\n        }\n      });\n    }\n  }\n\n  async removeTank(event, i) {\n    event.stopPropagation();\n    const openModal = await UserService.checkLicence(\"configs\", true);\n    if (openModal) {\n      const confirm = await alertController.create({\n        header: TranslationService.getTransl(\n          \"delete-tank-header\",\n          \"Delete tank?\"\n        ),\n        message: TranslationService.getTransl(\n          \"delete-tank-message\",\n          \"This tank will be deleted! Are you sure?\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n            role: \"cancel\",\n            handler: () => {},\n          },\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n            handler: () => {\n              this.userTanks.splice(i, 1);\n              this.save();\n            },\n          },\n        ],\n      });\n      confirm.present();\n    }\n  }\n\n  async addTank() {\n    const openModal = await UserService.checkLicence(\"configs\", true);\n    if (openModal) {\n      let inputs = [];\n      forEach(this.stdTanks, (conf, key) => {\n        inputs.push({\n          type: \"radio\",\n          label: conf.name + (this.hasUserTanks ? \" (standard)\" : \"\"),\n          value: conf,\n          checked: key == 0 ? true : false,\n        });\n      });\n      if (this.hasUserTanks)\n        forEach(this.userTanks, (conf) => {\n          inputs.push({\n            type: \"radio\",\n            label: conf.name,\n            value: conf,\n            checked: false,\n          });\n        });\n      const alert = await alertController.create({\n        header: TranslationService.getTransl(\n          \"select-standard-tank\",\n          \"Select standard tank\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n            handler: async (tank: any) => {\n              let openModal = await UserService.checkLicence(\"configs\", true);\n              if (openModal) {\n                const confModal = await RouterService.openModal(\n                  \"modal-tank-configuration\",\n                  {\n                    tank: tank,\n                  }\n                );\n                confModal.onDidDismiss().then((updatedTank) => {\n                  if (updatedTank && updatedTank.data) {\n                    const tank = updatedTank.data;\n                    this.userTanks.push(new TankModel(tank));\n                    this.save();\n                  }\n                });\n              }\n            },\n          },\n          {\n            text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n            role: \"cancel\",\n            cssClass: \"secondary\",\n          },\n        ],\n        inputs: inputs,\n      });\n      alert.present();\n    }\n  }\n\n  save() {\n    UserService.updateUserTanks(this.userTanks);\n  }\n\n  render() {\n    return (\n      <div class=\"slider-container\">\n        <div class=\"slider-scrollable-container\">\n          <ion-grid class=\"ion-no-padding\">\n            <ion-row class=\"ion-text-start ion-no-padding\">\n              {this.userTanks.map((tank, i) => (\n                <ion-col\n                  size-sm=\"12\"\n                  size-md=\"6\"\n                  size-lg=\"4\"\n                  class=\"ion-no-padding\"\n                >\n                  <ion-card\n                    onClick={() => this.viewTank(i)}\n                    class=\"card-margins\"\n                  >\n                    <ion-card-header>\n                      <ion-item class=\"ion-no-padding\" lines=\"none\">\n                        <ion-button\n                          icon-only\n                          slot=\"end\"\n                          color=\"danger\"\n                          fill=\"clear\"\n                          onClick={(ev) => this.removeTank(ev, i)}\n                        >\n                          <ion-icon name=\"trash-bin-outline\"></ion-icon>\n                        </ion-button>\n\n                        <ion-card-title>{tank.name}</ion-card-title>\n                      </ion-item>\n\n                      <ion-card-subtitle>\n                        {TranslationService.getTransl(\"volume\", \"Volume\") +\n                          \" : \" +\n                          tank.volume +\n                          \" lt\" +\n                          (this.userSettings.settings.units != \"Metric\"\n                            ? \" / \" +\n                              DiveToolsService.ltToCuFt(tank.volume) +\n                              \" cuft\"\n                            : \"\")}\n                      </ion-card-subtitle>\n                    </ion-card-header>\n\n                    <ion-card-content>\n                      <ion-grid>\n                        <ion-row>\n                          <ion-col>\n                            {TranslationService.getTransl(\n                              \"no_of_tanks\",\n                              \"Number Of Tanks\"\n                            ) +\n                              \" : \" +\n                              tank.no_of_tanks}\n                          </ion-col>\n                        </ion-row>\n                        <ion-row>\n                          <ion-col>\n                            {TranslationService.getTransl(\n                              \"pressure\",\n                              \"Pressure\"\n                            ) +\n                              \" : \" +\n                              tank.pressure +\n                              \" bar\" +\n                              (this.userSettings.settings.units != \"Metric\"\n                                ? \" / \" +\n                                  DiveToolsService.barToPsi(tank.pressure) +\n                                  \" psi\"\n                                : \"\")}\n                          </ion-col>\n                        </ion-row>\n                        {tank.forDeco ? (\n                          <ion-row>\n                            <ion-col>\n                              (\n                              {TranslationService.getTransl(\n                                \"for-deco\",\n                                \"For Decompression\"\n                              )}\n                              )\n                            </ion-col>\n                          </ion-row>\n                        ) : undefined}\n                      </ion-grid>\n                    </ion-card-content>\n                  </ion-card>\n                </ion-col>\n              ))}\n              <ion-col\n                size-sm=\"12\"\n                size-md=\"6\"\n                size-lg=\"4\"\n                class=\"ion-no-padding\"\n              >\n                <ion-card onClick={() => this.addTank()}>\n                  <ion-card-content class=\"ion-text-center\">\n                    <ion-icon\n                      name=\"add-circle-outline\"\n                      style={{fontSize: \"100px\"}}\n                    ></ion-icon>\n                  </ion-card-content>\n                </ion-card>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}