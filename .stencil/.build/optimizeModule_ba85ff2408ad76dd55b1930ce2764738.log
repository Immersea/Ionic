import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as o}from"./p-1af05547.js";import{ay as c,az as n,S as l,E as d,T as f}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const p="modal-project-applicationunit ion-list{width:100%}";const b=p;const r=class{constructor(t){e(this,t);this.index=0;this.applicationUnits=undefined;this.applicationUnit=undefined;this.updateView=true;this.validApplicationUnit=false}async componentWillLoad(){await this.loadApplicationUnits()}async loadApplicationUnits(){await c.downloadProjectSettings();this.applicationUnits=o.exports.cloneDeep(c.getApplicationUnits());if(this.applicationUnits&&this.applicationUnits.length>0){this.applicationUnit=this.applicationUnits[0]}else{this.addApplicationUnit()}this.validateProject()}selectType(e){this.applicationUnit=this.applicationUnits[e.detail.value];this.validateProject()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="familyId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.applicationUnit[t]=i;this.validateProject()}validateProject(){this.validApplicationUnit=o.exports.isString(this.applicationUnit.applicationId)&&o.exports.isString(this.applicationUnit.applicationId);this.updateView=!this.updateView}addApplicationUnit(){this.applicationUnit=new n;this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}duplicateApplicationUnit(){this.applicationUnit=o.exports.cloneDeep(this.applicationUnit);this.applicationUnit.applicationId=this.applicationUnit.applicationId+"_rev.";this.applicationUnits.push(this.applicationUnit);this.index=this.applicationUnits.length-1}async deleteApplicationUnit(){try{this.applicationUnits.splice(this.index,1);this.index=0;this.applicationUnit=this.applicationUnits[0];this.validateProject()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await c.uploadProjectSettings("applicationUnit",this.applicationUnits);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"8c5683d2db3d9a8dba69699c454b19609e66347a"},t("ion-content",{key:"83d4d59d0c3d182743ffe80b253d722f4c673fe8"},t("ion-grid",{key:"bd747dc23c81b2a787671214649e49a31325eb1a"},t("ion-row",{key:"ac2d1b26fbeac1e5a74be8b786a931d4a95a2292"},t("ion-col",{key:"56454a7b979867d67a594273d5341e0909cb7e84"},t("ion-item",{key:"bb551052e91830b4a5f2e2a813a78bb1094d3ff5",lines:"none"},t("ion-select",{key:"4ffba17b7d3a2710c748ffef84d147080ce50e40",color:"trasteel",id:"selectType",interface:"action-sheet",label:f.getTransl("project_applicationunit","Project Application Unit"),disabled:!this.validApplicationUnit,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.applicationUnits.map(((e,i)=>t("ion-select-option",{value:i},e.applicationId)))))),t("ion-col",{key:"70b292911b9a45494a94e4c496b2d5da2ec4f202",size:"1",class:"ion-text-center"},t("ion-button",{key:"571c3a6affc0aa0a453c37b1ff5b62b3e6ca07b4",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.addApplicationUnit()},t("ion-icon",{key:"1ffcb2551bf30431f4cb296886925a47fa0f456d",name:"add",slot:"start"}))),t("ion-col",{key:"79bbf910debead94f028cc661f25cb8fb76f185f",size:"1",class:"ion-text-center"},t("ion-button",{key:"c1fa709085d20c4f941ee3fa114d61e8098811cc",fill:"clear",disabled:!this.validApplicationUnit,onClick:()=>this.duplicateApplicationUnit()},t("ion-icon",{key:"e12c2f82182de6994dd65f52ae9007c31bba415b",slot:"start",name:"duplicate"}))),t("ion-col",{key:"5bf4098c59e0f50b7e4ec34024db17c6a4610848",size:"1",class:"ion-text-center"},t("ion-button",{key:"54e8400fbd6fb744a7f19e2167585283e25fd54f",fill:"clear",color:"danger",disabled:this.applicationUnits.length==0,onClick:()=>this.deleteApplicationUnit()},t("ion-icon",{key:"30284484a55ebf10fa46bb044b88740c57882431",slot:"start",name:"trash"}))))),t("app-form-item",{key:"42a458f26fdc001dae86fab0e17a4a6917992804","label-text":"ID",value:this.applicationUnit.applicationId,name:"applicationId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"applicationId",list:c.getApplicationUnits()}}]}),t("app-form-item",{key:"093daa1e1820ce2b0eece6b17cd3db14043daac1","label-text":"Name",value:this.applicationUnit.applicationName,name:"applicationName","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"29f87e20f5da1d4b61724bce0143ad0bc421829e","label-text":"Associated Goods Description",value:this.applicationUnit.applicationAssociatedGoodsDesc,name:"applicationAssociatedGoodsDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"}),t("app-form-item",{key:"a15fe4b08eecf7b6ec21c99ef58646a55f162051","label-text":"Packing Description",value:this.applicationUnit.applicationPackingDesc,name:"applicationPackingDesc","input-type":"text",multiLanguage:true,onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed"})),t("app-modal-footer",{key:"85ede1bfe06fd482ffbcc39b2ff2514a8e4c54c5",color:d.getAppColor(),disableSave:!this.validApplicationUnit,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};r.style=b;export{r as modal_project_applicationunit};