import{r as e,h as t,H as s,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as a}from"./p-5d4a8e1f.js";import{O as o,F as n,T as r,aP as c}from"./p-30358c9d.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-7ee16e8d.js";const h="popover-edit-customer-owner{}popover-edit-customer-owner ion-list{min-height:300px}";const d=h;const p=class{constructor(t){e(this,t);this.owner=undefined;this.group=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.selectedOwner=new o;this.sharePerc=this.owner.groupOwnershipPerc;this.custGroups=n.getCustomerGroups();if(this.owner&&this.owner.groupId){this.selectedOwner=this.custGroups.find((e=>e.groupId==this.owner.groupId));if(!this.selectedOwner){this.newOwnerName=this.owner.groupName}}}componentDidLoad(){this.setOwnersSelect();this.updateView=!this.updateView}setOwnersSelect(){const e=this.el.querySelector("#selectOwner");const t={header:r.getTransl(this.group?"customer_group":"customer_owner",this.group?"Customer Group":"Customer Owner")};e.interfaceOptions=t;const s=Array.from(e.getElementsByTagName("ion-select-option"));s.map((t=>{e.removeChild(t)}));e.placeholder=r.getTransl("select","Select");this.custGroups.map((t=>{const s=document.createElement("ion-select-option");s.value=t;s.textContent=t.groupName;e.appendChild(s)}))}handleSelect(e){this.selectedOwner=e.detail.value}handleChange(e){this[e.detail.name]=e.detail.value;this.updateView=!this.updateView}close(){a.dismiss()}save(){if(this.newOwnerName){this.owner.groupId=c(this.newOwnerName);this.owner.groupName=this.newOwnerName}else{this.owner.groupId=this.selectedOwner.groupId;this.owner.groupName=this.selectedOwner.groupName}this.owner.groupOwnershipPerc=this.sharePerc;a.dismiss({owner:this.owner,new:this.newOwnerName&&this.newOwnerName.length>0})}render(){return t(s,{key:"8b4af758c4f5494591239ce2c785a7d7225dd674"},t("ion-header",{key:"467079e5df35765bcbffb29cdf101db9d6540afc",translucent:true},t("ion-toolbar",{key:"aab685c8d01d620cb18950270df9cdac59162477"},t("ion-title",{key:"1711a44136d63f52ed6ead5eeaf6695f5fa02a2d"},"Select Owner/Group"))),t("ion-content",{key:"a41eb63e03bfd0598a7c29677845e55dd81501c0"},t("ion-item",{key:"55942292016a65951afe4c18744fdc4c8182d215",lines:"none"},t("ion-select",{key:"1ea3b8e688885c4ad195a7f1e4099d3f7a529ff6",color:"trasteel",id:"selectOwner",interface:"action-sheet",label:"Customer","label-placement":"floating",disabled:this.newOwnerName&&this.newOwnerName.length>0,onIonChange:e=>this.handleSelect(e),value:this.selectedOwner})),t("ion-item-divider",{key:"d9ed58cc6969f3d617b6794b42dacbf4a4be4f13"}," - or insert new - "),t("app-form-item",{key:"09a091c200937e89a360287c12b84a7dc66fa701",lines:"none","label-tag":"name","label-text":"Name",value:this.newOwnerName,name:"newOwnerName","input-type":"string",onFormItemChanged:e=>this.handleChange(e)}),this.group?t("app-form-item",{lines:"full","label-tag":"share_perc","label-text":"Share Percentage",value:this.sharePerc,name:"sharePerc","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"minmaxvalue",options:{min:0,max:100}}]}):undefined),t("ion-footer",{key:"eaa93d8219cb7d2be8dd1cec57fab1443f507b3e"},t("app-modal-footer",{key:"9f721ef9759fad4b28a3fba6895b68b81a6617f9",saveTag:{tag:"ok",text:"ok"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return i(this)}};p.style=d;export{p as popover_edit_customer_owner};