import{r as e,h as t}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as i}from"./p-5d4a8e1f.js";import{aw as a}from"./p-736235c6.js";import{E as o}from"./p-46038295.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1819cfda.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const d="popover-media-loading ion-note{padding-left:20px}popover-media-loading .drop-area{width:100%}popover-media-loading app-dragdrop-file p{color:black !important}popover-media-loading app-dragdrop-file #drop-area{border:2px dashed black !important;height:100px !important}";const c=d;const p=class{constructor(t){e(this,t);this.media=undefined;this.file=undefined;this.validMedia=false;this.updateView=false}componentWillLoad(){if(!this.media){this.media=new a}if(this.file){this.updateMedia({detail:this.file})}else{this.validateMedia()}}async close(){i.dismiss()}async save(){i.dismiss({media:this.media,file:this.file})}validateMedia(){this.validMedia=this.media.title&&this.media.title.length>=3&&this.media.size>0&&this.media.type&&this.media.description&&this.media.description.length>5;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="order"){this.media[e.detail.name]=s.exports.toNumber(e.detail.value)}else{this.media[e.detail.name]=e.detail.value}this.validateMedia()}updatePublic(e){this.media.public=e.detail.checked;this.validateMedia()}updateMedia(e){this.file=e.detail;if(!this.media.title){this.media.title=this.file.name}this.media.name=this.file.name;this.media.lastModified=this.file.lastModified;this.media.size=this.file.size;this.media.type=this.file.type;this.validateMedia()}render(){return[t("ion-header",{key:"05cc5f1c529c7b407e1f8c18d0ba3cf0e49eedd3"},t("ion-toolbar",{key:"66821f857563a7a3b875a0999d3da403a4b59ce2",color:o.getAppColor()},t("ion-title",{key:"18b43ebc7f0f2934c8938070aacabc944efbd5ce"},"Media Loader"))),t("ion-content",{key:"750b0145b9d6fc386d2beee127ca4fcabe5c1593"},t("ion-list",{key:"5bc2457969851b51b24469915bb44395f8e62127"},t("ion-note",{key:"996573648ee51a07cf42ffb7ef92dbead5c22c06"},"Id: ",this.media.id),t("app-form-item",{key:"a32b4b8f593ed667d8c79f5c0ecc7a76f054b791","label-tag":"title","label-text":"Title",value:this.media.title,name:"title","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:3,max:20}}]}),t("app-form-item",{key:"178d1f6d587158a6f2f2f4f52060e60011943cc1","label-tag":"subtitle","label-text":"Subtitle",value:this.media.subtitle,name:"subtitle","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"length",options:{min:0,max:30}}]}),t("app-form-item",{key:"ebdb05d2a732ea8d75875d9ccb050b0fe6617e32","label-tag":"description","label-text":"Description",value:this.media.description,name:"description","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:5,max:100}}]}),t("ion-item",{key:"f1d98ea3e392ac8de588528d5572d8d068356ac3"},t("ion-label",{key:"15ca21f19fe6218bbecc715ce9827e7b9e634ff0"},t("my-transl",{key:"56c0ce6d33cc9d66910999d1fa5a607685251245",tag:"public",text:"Public"})),t("ion-toggle",{key:"6446ac8bc89354eda939029376d2aedeb05d7eb6",slot:"end",onIonChange:e=>this.updatePublic(e),checked:this.media.public}))),t("div",{key:"a6b4690874c61a847622b012e74bf6ddee494606",class:"drop-area"},t("app-dragdrop-file",{key:"543282ac62c97271f09ad2c55a19c39968e6ce5b",fileTypes:this.media.getTypes(),file:this.file,onFileSelected:e=>this.updateMedia(e)}))),t("app-modal-footer",{key:"ba95dfccb93572b34fedc0917bc74b0e7cb04d88",color:o.getAppColor(),onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save(),disableSave:!this.validMedia})]}};p.style=c;export{p as popover_media_loading};