import{r as e,h as t,H as i,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{Q as d,_ as c,S as l,T as n}from"./p-736235c6.js";import{E as r}from"./p-46038295.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-1819cfda.js";import"./p-7ee16e8d.js";const h="modal-datasheet-qualitycolorcode ion-list{width:100%}";const f=h;const b=class{constructor(t){e(this,t);this.index=0;this.datasheetQualityColorCodes=undefined;this.datasheetQualityColorCode=undefined;this.updateView=true;this.validDatasheetQualityColorCode=false}async componentWillLoad(){await this.loadDatasheetQualityColorCodes()}async loadDatasheetQualityColorCodes(){await d.downloadDatasheetSettings();this.datasheetQualityColorCodes=o.exports.cloneDeep(d.getDatasheetQualityColorCodes());if(this.datasheetQualityColorCodes&&this.datasheetQualityColorCodes.length>0){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0]}else{this.addDatasheetQualityColorCode()}this.validateDatasheet()}selectType(e){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[e.detail.value];this.validateDatasheet()}handleChange(e){const t=e.detail.name;let i=e.detail.value;if(t=="qualityColorCodeId"){i=i.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetQualityColorCode[t]=i;this.validateDatasheet()}validateDatasheet(){this.validDatasheetQualityColorCode=o.exports.isString(this.datasheetQualityColorCode.qualityColorCodeId)&&o.exports.isString(this.datasheetQualityColorCode.qualityColorCodePicture);this.updateView=!this.updateView}addDatasheetQualityColorCode(){this.datasheetQualityColorCode=new c;this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}duplicateDatasheetQualityColorCode(){this.datasheetQualityColorCode=o.exports.cloneDeep(this.datasheetQualityColorCode);this.datasheetQualityColorCode.qualityColorCodeId=this.datasheetQualityColorCode.qualityColorCodeId+"_rev.";this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}async deleteDatasheetQualityColorCode(){try{this.datasheetQualityColorCodes.splice(this.index,1);this.index=0;this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await d.uploadDatasheetSettings("qualityColorCode",this.datasheetQualityColorCodes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(i,{key:"df7c7ddcbaef726f021533e0a77ff29db280f518"},t("ion-content",{key:"f9583072417ce6a64e2000dfc8da4bd1a251dc48"},t("ion-grid",{key:"7a4f460c8b39ca756be52c2dc0eec71d02561c13"},t("ion-row",{key:"a2f7118d8472bb9f72bee4c24a7d9440039870c3"},t("ion-col",{key:"2c066572e62d85eda42cdff8c4de005ea4b0df80"},t("ion-item",{key:"446ef3d72cb2964ee946f6995a0ce87957c26f89",lines:"none"},t("ion-select",{key:"ae328cd51b0907623d0459f9010de8e4ede19032",color:"trasteel",id:"selectType",interface:"action-sheet",label:n.getTransl("datasheet_qualityColorCode","Datasheet QualityColorCode"),disabled:!this.validDatasheetQualityColorCode,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.datasheetQualityColorCodes.map(((e,i)=>t("ion-select-option",{value:i},e.qualityColorCodeId+" | "+e.qualityColorCodePicture)))))),t("ion-col",{key:"041e4e005fcab9d35a42dc01ada3171deada7691",size:"1",class:"ion-text-center"},t("ion-button",{key:"216c33ebba86be7795e4c4b1564d1139177261c2",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.addDatasheetQualityColorCode()},t("ion-icon",{key:"e68573cf3fcc1223cc4badc98584ccbaf197012f",name:"add",slot:"start"}))),t("ion-col",{key:"89319e97721fdb7b6883ce70ad2e2ec51cce5944",size:"1",class:"ion-text-center"},t("ion-button",{key:"65cd7894ecfec026e478fddb5949d48e9d7696e0",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.duplicateDatasheetQualityColorCode()},t("ion-icon",{key:"4ef1a635ed26520e9bc809e7e5d5adc06585d056",slot:"start",name:"duplicate"}))),t("ion-col",{key:"57dee9bcf21958dbba6bff37268625446c4eef1a",size:"1",class:"ion-text-center"},t("ion-button",{key:"c8261268f33184d3337724468c485930b2b6f37d",fill:"clear",color:"danger",disabled:this.datasheetQualityColorCodes.length==0,onClick:()=>this.deleteDatasheetQualityColorCode()},t("ion-icon",{key:"70277c6d9e6a355aaeedd1f585041bc35f663537",slot:"start",name:"trash"}))))),t("app-form-item",{key:"d2f7817f554be831f8dd16d599b438f364f5262b","label-text":"ID",value:this.datasheetQualityColorCode.qualityColorCodeId,name:"qualityColorCodeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"qualityColorCodeId",list:d.getDatasheetQualityColorCodes()}}]}),t("app-form-item",{key:"c8a40424f524f616b3fd7f42e4bd2f4d2eaa8c3d","label-text":"Name",value:this.datasheetQualityColorCode.qualityColorCodePicture,name:"qualityColorCodePicture","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"acf6bab0d312c503a3621708523af2598d07a249",color:r.getAppColor(),disableSave:!this.validDatasheetQualityColorCode,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return a(this)}};b.style=f;export{b as modal_datasheet_qualitycolorcode};