import{r as e,h as t,H as i,f as o}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as a}from"./p-5d4a8e1f.js";import{Q as l,aO as n,T as s}from"./p-30358c9d.js";import{l as c}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-2578d979.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-7ee16e8d.js";const r="popover-datasheets-filter{}popover-datasheets-filter ion-list{min-height:300px}";const h=r;const d=class{constructor(t){e(this,t);this.filter=undefined;this.showBaseFilter=true;this.propertyNames=[];this.newFilterCondition=undefined;this.showAddNewProperty=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.datasheetMajorFamilies=l.getDatasheetMajorFamilies();this.datasheetFamilies=l.getDatasheetFamilies();this.propertyNames=l.getDatasheetPropertyNames();this.resetNewFilterCondition()}resetNewFilterCondition(){this.newFilterCondition=new n({field:"properties",fieldName:"name",valueName:"mgo",comparisonField:"lower"});this.validateProperty()}deleteCondition(e){this.filter.properties.splice(e,1);this.updateView=!this.updateView}handleFilter(e){this.filter[e.detail.name]=e.detail.value}handleMajorFamilySelect(e){this.filter.majorFamilyId=e.detail.value}handleFamilySelect(e){this.filter.familyId=e.detail.value}segmentChanged(e){if(e.detail.value=="base"){this.showBaseFilter=true}else{this.showBaseFilter=false}}selectPropertyName(e){this.newFilterCondition.valueName=e.detail.value;this.validateProperty()}selectOperator(e){this.newFilterCondition.operator=e.detail.value;this.validateProperty()}selectValue(e){this.newFilterCondition.value=e.detail.value;this.validateProperty()}addNewProperty(){this.filter.properties.push(c.exports.cloneDeep(this.newFilterCondition));this.resetNewFilterCondition()}validateProperty(){this.showAddNewProperty=c.exports.isString(this.newFilterCondition.field)&&c.exports.isString(this.newFilterCondition.fieldName)&&c.exports.isString(this.newFilterCondition.operator)&&c.exports.isString(this.newFilterCondition.valueName)&&!c.exports.isNull(this.newFilterCondition.value)}close(){a.dismiss()}save(){a.dismiss(this.filter)}render(){return t(i,{key:"1a586c7b3678e5618bb095fe36f857161c71e148"},t("ion-header",{key:"26a82fedbd95243c153f57b8b66b380377357133",translucent:true},t("ion-toolbar",{key:"6e41c75d80391598f91396bcc91daaf0621bc97d"},t("ion-title",{key:"2a279a1bc34c4d9793798973e9447d3ae48edb93"},"Filter Datasheets"))),t("ion-content",{key:"9685d58f8dc03b636a528e3a04ced6fd4a871a3a"},t("ion-segment",{key:"0a076fbff3f1c0b9a7c59a0e4a4b96f2f725f536",mode:"ios",color:"trasteel",onIonChange:e=>this.segmentChanged(e),value:"base"},t("ion-segment-button",{key:"4a86b2d55a283d2e5aa6d3a33e8a304970be2372",value:"base"},t("ion-label",{key:"f77f75c92424ed7145cdb83aa1e0128cc0cd1a03"},"Base")),t("ion-segment-button",{key:"75e2043721d0363d660e384e2b4502076cb0d69e",value:"advanced"},t("ion-label",{key:"5eee8aa16233e787ae8c9870468b208e7909fbf1"},"Advanced"))),t("ion-list",{key:"260d3e661478cd7de2a30bb5095e225ec7417cf5"},this.showBaseFilter?[t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("majorFamily","Major Family"),"label-placement":"floating",onIonChange:e=>this.handleMajorFamilySelect(e),value:this.filter.majorFamilyId},this.datasheetMajorFamilies.map((e=>t("ion-select-option",{value:e.majorFamilyId},e.majorFamilyName))))),t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("family","Family"),"label-placement":"floating",onIonChange:e=>this.handleFamilySelect(e),value:this.filter.familyId},this.datasheetFamilies.map((e=>t("ion-select-option",{value:e.familyId},e.familyName))))),t("app-form-item",{"label-text":"Show Old Products",value:this.filter.oldProduct,name:"oldProduct","input-type":"boolean",onFormItemChanged:e=>this.handleFilter(e)})]:[t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("app-select-search",{color:"trasteel",value:this.newFilterCondition.valueName,lines:"none",disabled:this.propertyNames.length==0,selectFn:e=>this.selectPropertyName(e),selectOptions:this.propertyNames,selectValueId:"nameId",selectValueText:["nameName"]})),t("ion-col",{size:"3"},t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",interface:"action-sheet",onIonChange:e=>this.selectOperator(e),value:this.newFilterCondition.operator},t("ion-select-option",{value:">="},t("ion-label",null,">=")),t("ion-select-option",{value:">"},t("ion-label",null,">")),t("ion-select-option",{value:"="},t("ion-label",null,"=")),t("ion-select-option",{value:"<"},t("ion-label",null,"<")),t("ion-select-option",{value:"<="},t("ion-label",null,"<=")))))),t("ion-row",null,t("ion-col",null,t("app-form-item",{value:this.newFilterCondition.value,name:"typical","input-type":"number",onFormItemChanged:e=>this.selectValue(e)})),t("ion-col",{size:"3"},t("ion-button",{"icon-only":true,fill:"outline",onClick:()=>this.addNewProperty(),disabled:!this.showAddNewProperty},t("ion-icon",{name:"add",color:"primary"}))))),t("ion-item-divider",null,t("ion-label",null,"Conditions")),this.filter.properties.map(((e,i)=>t("ion-item",null,t("ion-label",null,l.getDatasheetPropertyNames("id",e.valueName)[0].nameName+" "+e.operator+" "+e.value),t("ion-button",{"icon-only":true,fill:"clear",onClick:()=>this.deleteCondition(i)},t("ion-icon",{name:"trash",color:"danger"})))))])),t("ion-footer",{key:"8715336e007c21cf7ea4a71a541965e59306dfc6"},t("app-modal-footer",{key:"96aa4f16641ec7b3b0d0590317f322b5dd75eaba",saveTag:{tag:"filter",text:"Filter"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return o(this)}};d.style=h;export{d as popover_datasheets_filter};