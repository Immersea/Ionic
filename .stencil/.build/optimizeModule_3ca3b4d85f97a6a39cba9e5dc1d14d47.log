import{r as e,h as i,f as t}from"./p-cbe60c68.js";import{e as a,aq as s,aT as o,U as n,h as c,d,ai as l,R as r,aO as f}from"./p-9424d4f6.js";import{S as h}from"./p-a75993af.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const b="page-diving-school-details ion-segment-button{--color-checked:var(--ion-color-school-contrast)}";const p=b;const u=class{constructor(i){e(this,i);this.admin=false;this.markers=[];this.dsid=undefined;this.divingSchool=undefined;this.diveTrips=undefined;this.divingCourses=undefined;this.titles=[{tag:"map"},{tag:"information"},{tag:"diving-courses"},{tag:"team"},{tag:"next-trips",text:"Next Dive Trips"}];this.slider=undefined}async componentWillLoad(){if(a.selectedDivingSchool){this.admin=true;this.dsSubscription=a.selectedDivingSchool$.subscribe((e=>{if(e&&e.displayName){this.divingSchool=e;this.dsid=a.selectedDivingSchoolId}}))}else{this.admin=false;delete this.titles[4];delete this.titles[3];this.divingSchool=await a.getDivingSchool(this.dsid);this.diveTrips=await s.getTripsSummary(o,this.dsid)}this.userRoles=n.userRoles;this.divingCourses=await a.loadDivingSchoolCourses(this.divingSchool);let e=c.getMapDocs()[d].icon;e.size="large";this.markers.push({icon:e,latitude:this.divingSchool.position.geopoint.latitude,longitude:this.divingSchool.position.geopoint.longitude})}async componentDidLoad(){this.slider=new h(".slider-diving-school",{speed:400,spaceBetween:100,allowTouchMove:false,autoHeight:true});await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("#map");const e=this.el.querySelector("#map-container");e.setAttribute("style","height: "+l(this.divingSchool)+"px");this.mapElement["mapLoaded"]().then((()=>{this.mapElement.triggerMapResize()}));this.mapElement.triggerMapResize()}disconnectedCallback(){if(this.dsSubscription)this.dsSubscription.unsubscribe()}render(){return[i("ion-header",{key:"e533f45530bd2a8fc54e3c3e2ee0cc15fa6d3ce9"},i("app-item-cover",{key:"ded3e7edc8b23ab1ca2a2d99bdee7ac0c7380137",item:this.divingSchool})),i("ion-header",{key:"46e54dea9f31ad198bc880e405fdb5db772f01db"},i("ion-toolbar",{key:"0b220254e982f5b5eee7b64676a81f963b06d2df",color:"school",class:"no-safe-padding"},this.divingSchool&&!this.divingSchool.coverURL?[i("ion-buttons",{slot:"start"},this.admin?i("ion-menu-button",null):i("ion-button",{onClick:()=>r.goBack(),"icon-only":true},i("ion-icon",{name:"arrow-back"}))),i("ion-buttons",{slot:"end"},this.admin?i("ion-button",{onClick:()=>a.presentDivingSchoolUpdate(this.dsid),"icon-only":true},i("ion-icon",{name:"create"})):undefined)]:undefined,i("ion-title",{key:"ee93a14e4acd810a263c44b42b563a0a57e19a50"},this.divingSchool.displayName))),i("app-header-segment-toolbar",{key:"72056bcbc35a9bb73684d1fbc321f96563243da7",color:"school",swiper:this.slider,titles:this.titles}),i("ion-content",{key:"58a958513f8e95519ede8439c79a6f6d7efbcb69",class:"slides"},this.divingSchool&&this.divingSchool.coverURL?i("ion-fab",{vertical:"top",horizontal:"start",slot:"fixed",style:{marginTop:f(2)}},this.admin?i("ion-fab-button",{class:"fab-icon"},i("ion-menu-button",null)):i("ion-fab-button",{onClick:()=>r.goBack(),class:"fab-icon"},i("ion-icon",{name:"arrow-back-circle-outline"}))):undefined,this.admin?i("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed",style:{marginTop:f(2)}},i("ion-fab-button",{onClick:()=>a.presentDivingSchoolUpdate(this.dsid),class:"fab-icon"},i("ion-icon",{name:"create"}))):undefined,i("swiper-container",{key:"bf68a791d27ab6dd614d17d70a2fd6c672b8e7cd",class:"slider-diving-school swiper"},i("swiper-wrapper",{key:"1a794b3a0b265a1a2a550c6a0308c3fa3d511147",class:"swiper-wrapper"},i("swiper-slide",{key:"7d6c43ffe85faaa70d422087c6c870aea3cd4b16",class:"swiper-slide"},i("ion-list",{key:"fc726a7bacc15b22266742cf518098140dffb427",class:"ion-no-padding"},i("ion-list-header",{key:"704d2fdf7575a43eee6ecc7eb43364cf4f4f1d5c"},i("ion-label",{key:"571236c917e5315a6a5905ec987b01d09503d23a",color:"school"},i("my-transl",{key:"5294fa7d3c614873a606c7ec40ba9412fc56ebe9",tag:"general-information",text:"General Information"}))),i("ion-item",{key:"4d7237c48bf8dc2b3f2a85e3bc40ce57a7c180b3"},i("ion-label",{key:"eec656979871c226321adf01fdfb2192f0f7e77d",class:"ion-text-wrap"},i("ion-text",{key:"7c607ff48bb1d352eaee88a50100dd51022ec1bf",color:"dark"},i("p",{key:"cbc2c37b226e1248594c9b6127e4a9f84012baa2"},this.divingSchool.description)))),this.divingSchool.email?i("ion-item",{button:true,href:"mailto:"+this.divingSchool.email},i("ion-icon",{slot:"start",name:"at-outline"}),i("ion-label",null,this.divingSchool.email)):undefined,this.divingSchool.phoneNumber?i("ion-item",{button:true,href:"tel:"+this.divingSchool.phoneNumber},i("ion-icon",{slot:"start",name:"call-outline"}),i("ion-label",null,this.divingSchool.phoneNumber)):undefined,this.divingSchool.website?i("ion-item",{button:true,href:"http://"+this.divingSchool.website,target:"_blank"},i("ion-icon",{slot:"start",name:"link-outline"}),i("ion-label",null,this.divingSchool.website)):undefined,this.divingSchool.facebook?i("ion-item",{button:true,href:"https://www.facebook.com/"+this.divingSchool.facebook,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-facebook"}),i("ion-label",null,this.divingSchool.facebook)):undefined,this.divingSchool.instagram?i("ion-item",{button:true,href:"https://www.instagram.com/"+this.divingSchool.instagram,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-instagram"}),i("ion-label",null,this.divingSchool.instagram)):undefined,this.divingSchool.twitter?i("ion-item",{button:true,href:"https://www.twitter.com/"+this.divingSchool.twitter,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-twitter"}),i("ion-label",null,"@",this.divingSchool.twitter)):undefined)),i("swiper-slide",{key:"0fa38e233e067aaf17a5d0d02e3b9bf503d48eca",class:"swiper-slide"},i("div",{key:"7eed80d59beaf8dad8d544dc3e9f8a75869c0464",id:"map-container"},i("app-map",{key:"e49503c70f12ae651e09c28613d38d25867199ae",id:"map",pageId:"dive-site-details",center:this.divingSchool,markers:this.markers}))),i("swiper-slide",{key:"d4c446abd250ac82bc7621fb176bc89d35f48ad6",class:"swiper-slide"},i("ion-grid",{key:"a97975b35230368b8fd26f4058e77659a296de8e"},i("ion-row",{key:"075759073e0512e73a8d20d8238cf9feacb8b71b",class:"ion-text-start"},this.divingCourses.divingSchoolCourses.map((e=>i("ion-col",{"size-sm":"12","size-md":"6","size-lg":"4"},i("app-dive-course-card",{divingCourse:e,edit:false}))))))),this.admin?i("swiper-slide",{class:"swiper-slide"},i("app-users-list",{item:this.divingSchool,show:["owner","editor","instructor"]})):i("swiper-slide",{class:"swiper-slide"},i("app-calendar",{calendarId:"diving-school-calendar",addEvents:{trips:this.diveTrips}}))))),this.admin?i("ion-footer",{class:"ion-no-border"},i("ion-toolbar",null,i("ion-button",{expand:"block",fill:"solid",color:"danger",onClick:()=>a.deleteDivingSchool(this.dsid)},i("ion-icon",{slot:"start",name:"trash"}),i("my-transl",{tag:"delete",text:"Delete",isLabel:true})))):undefined]}get el(){return t(this)}};u.style=p;export{u as page_diving_school_details};