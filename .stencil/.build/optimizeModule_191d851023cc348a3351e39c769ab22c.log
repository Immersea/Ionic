import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as o}from"./p-1af05547.js";import{a6 as c,ac as d,S as l,E as n,T as h}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="modal-datasheet-qualitycolorcode ion-list{width:100%}";const f=r;const b=class{constructor(t){e(this,t);this.index=0;this.datasheetQualityColorCodes=undefined;this.datasheetQualityColorCode=undefined;this.updateView=true;this.validDatasheetQualityColorCode=false}async componentWillLoad(){await this.loadDatasheetQualityColorCodes()}async loadDatasheetQualityColorCodes(){await c.downloadDatasheetSettings();this.datasheetQualityColorCodes=o.exports.cloneDeep(c.getDatasheetQualityColorCodes());if(this.datasheetQualityColorCodes&&this.datasheetQualityColorCodes.length>0){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0]}else{this.addDatasheetQualityColorCode()}this.validateDatasheet()}selectType(e){this.datasheetQualityColorCode=this.datasheetQualityColorCodes[e.detail.value];this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="qualityColorCodeId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetQualityColorCode[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetQualityColorCode=o.exports.isString(this.datasheetQualityColorCode.qualityColorCodeId)&&o.exports.isString(this.datasheetQualityColorCode.qualityColorCodePicture);this.updateView=!this.updateView}addDatasheetQualityColorCode(){this.datasheetQualityColorCode=new d;this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}duplicateDatasheetQualityColorCode(){this.datasheetQualityColorCode=o.exports.cloneDeep(this.datasheetQualityColorCode);this.datasheetQualityColorCode.qualityColorCodeId=this.datasheetQualityColorCode.qualityColorCodeId+"_rev.";this.datasheetQualityColorCodes.push(this.datasheetQualityColorCode);this.index=this.datasheetQualityColorCodes.length-1}async deleteDatasheetQualityColorCode(){try{this.datasheetQualityColorCodes.splice(this.index,1);this.index=0;this.datasheetQualityColorCode=this.datasheetQualityColorCodes[0];this.validateDatasheet()}catch(e){if(e)l.presentAlertError(e)}}async save(e=true){await c.uploadDatasheetSettings("qualityColorCode",this.datasheetQualityColorCodes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"0d4469cee7559c5301ab3b8e892c77ab269e45d1"},t("ion-content",{key:"68bf9e38a0e1efde0c9e6d29a4768a090d6c8d4e"},t("ion-grid",{key:"adf41872cc446ed925dce75e3e326c3f4b8195d5"},t("ion-row",{key:"1e77d236ba1a899ec8f4addf133344f6c25a5c19"},t("ion-col",{key:"635eb5d983b470ec172dfeaf0eaf0da60d0c15dd"},t("ion-item",{key:"c0c53d35c5ba96b31c85b425bfa00221a9e7e14c",lines:"none"},t("ion-select",{key:"298a273fee21a2146454f3e7eff807b875c8b0e3",color:"trasteel",id:"selectType",interface:"action-sheet",label:h.getTransl("datasheet_qualityColorCode","Datasheet QualityColorCode"),disabled:!this.validDatasheetQualityColorCode,"label-placement":"floating",onIonChange:e=>this.selectType(e),value:this.index?this.index:0},this.datasheetQualityColorCodes.map(((e,a)=>t("ion-select-option",{value:a},e.qualityColorCodeId+" | "+e.qualityColorCodePicture)))))),t("ion-col",{key:"c884cca531c7774cd432f35291208dd634833486",size:"1",class:"ion-text-center"},t("ion-button",{key:"f5e016a167b9166bc17cd9c0c59a2b4dafce07e3",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.addDatasheetQualityColorCode()},t("ion-icon",{key:"e26ee3f2c15dc5b3bba22dd93a7ff523a019101c",name:"add",slot:"start"}))),t("ion-col",{key:"4453ea55cfcbf0f5cf1de355938aabfadd26e670",size:"1",class:"ion-text-center"},t("ion-button",{key:"823a0a5fa9281efceb5c25b9d9693deaf19f1a4f",fill:"clear",disabled:!this.validDatasheetQualityColorCode,onClick:()=>this.duplicateDatasheetQualityColorCode()},t("ion-icon",{key:"cc94f87f5e673571f94c96a7af1aaea43201c085",slot:"start",name:"duplicate"}))),t("ion-col",{key:"8fa82eb485c427c4c510e340c005d33e96647077",size:"1",class:"ion-text-center"},t("ion-button",{key:"de9b07b8fc758ecea7c292d7a9089ea7198700df",fill:"clear",color:"danger",disabled:this.datasheetQualityColorCodes.length==0,onClick:()=>this.deleteDatasheetQualityColorCode()},t("ion-icon",{key:"c2aca7498969cbf68b7edaa76239045e8cf68282",slot:"start",name:"trash"}))))),t("app-form-item",{key:"b52b667d0ccfa9b2e572b3bc64af69071c89c374","label-text":"ID",value:this.datasheetQualityColorCode.qualityColorCodeId,name:"qualityColorCodeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"qualityColorCodeId",list:c.getDatasheetQualityColorCodes()}}]}),t("app-form-item",{key:"e8caba920149d0093c8cfd7a708106ca27496579","label-text":"Name",value:this.datasheetQualityColorCode.qualityColorCodePicture,name:"qualityColorCodePicture","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"4a1e8b85ec1d91004dbb3bcbb2c2bba109b87e31",color:n.getAppColor(),disableSave:!this.validDatasheetQualityColorCode,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};b.style=f;export{b as modal_datasheet_qualitycolorcode};