{"version":3,"names":["pageClientDetailsCss","PageClientDetailsStyle0","PageClientDetails","classes","trips","invoices","tag","componentWillLoad","this","userProfile","UserService","getPublicProfileUserDetails","clientId","url","RouterService","pageTo","includes","DIVECENTERSSCOLLECTION","toLowerCase","clientData","DivingCentersService","selectedDivingCenterClients","organiserId","selectedDivingCenterId","DIVESCHOOLSSCOLLECTION","DivingSchoolsService","selectedDivingSchoolClients","selectedDivingSchoolId","SERVICECENTERSCOLLECTION","ServiceCentersService","selectedServiceCenterClients","selectedServiceCenterId","counters","Object","keys","length","titles","componentDidLoad","setSliderHeight","slider","Swiper","speed","spaceBetween","allowTouchMove","autoHeight","slideContainers","Array","from","el","getElementsByClassName","map","container","setAttribute","slideHeight","render","h","Host","key","class","item","color","coverURL","slot","onClick","goBack","name","undefined","displayName","Environment","getAppColor","swiper","vertical","horizontal","style","marginTop","fabButtonTopMarginString","filterByOrganisierId","filterByTrips","text","filterByClasses"],"sources":["src/components/udive/pages/clients/page-client-details/page-client-details.scss?tag=page-client-details","src/components/udive/pages/clients/page-client-details/page-client-details.tsx"],"sourcesContent":["page-client-details {\n  .cover {\n    height: var(--coverHeight);\n  }\n  ion-segment-button {\n    --color-checked: var(--ion-color-clients-contrast);\n  }\n  ion-badge {\n    margin-top: -15px;\n    margin-left: 10px;\n    font-size: 10px;\n  }\n  app-admin-dive-trips,\n  app-admin-diving-classes {\n    width: 100%;\n  }\n\n  .card-message {\n    width: 90%;\n    min-height: 150px;\n    ion-title {\n      padding-top: 60px;\n    }\n  }\n}\n","import {Component, h, State, Element, Host, Prop} from \"@stencil/core\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  fabButtonTopMarginString,\n  slideHeight,\n} from \"../../../../../helpers/utils\";\nimport {UserPubicProfile} from \"../../../../../interfaces/common/user/user-public-profile\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {\n  DIVESCHOOLSSCOLLECTION,\n  DivingSchoolsService,\n} from \"../../../../../services/udive/divingSchools\";\nimport {\n  DIVECENTERSSCOLLECTION,\n  DivingCentersService,\n} from \"../../../../../services/udive/divingCenters\";\nimport {\n  SERVICECENTERSCOLLECTION,\n  ServiceCentersService,\n} from \"../../../../../services/udive/serviceCenters\";\nimport {ClientData} from \"../../../../../interfaces/udive/clients/clients\";\nimport Swiper from \"swiper\";\nimport {Environment} from \"../../../../../global/env\";\n\n@Component({\n  tag: \"page-client-details\",\n  styleUrl: \"page-client-details.scss\",\n})\nexport class PageClientDetails {\n  @Element() el: HTMLElement;\n  @Prop() clientId: string;\n  @State() clientData: ClientData;\n  @State() userProfile: UserPubicProfile;\n  @State() counters = {\n    classes: 0,\n    trips: 0,\n    invoices: 0,\n  };\n  organiserId: string;\n  @State() titles = [\n    {tag: \"details\"},\n    {tag: \"dive-trips\"},\n    {tag: \"diving-classes\"},\n    {tag: \"invoices\"},\n  ];\n  @State() slider: Swiper;\n\n  async componentWillLoad() {\n    this.userProfile = await UserService.getPublicProfileUserDetails(\n      this.clientId\n    );\n\n    const url = RouterService.pageTo;\n    if (url.includes(DIVECENTERSSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        DivingCentersService.selectedDivingCenterClients[this.clientId];\n      this.organiserId = DivingCentersService.selectedDivingCenterId;\n    } else if (url.includes(DIVESCHOOLSSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        DivingSchoolsService.selectedDivingSchoolClients[this.clientId];\n      this.organiserId = DivingSchoolsService.selectedDivingSchoolId;\n    } else if (url.includes(SERVICECENTERSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        ServiceCentersService.selectedServiceCenterClients[this.clientId];\n      this.organiserId = ServiceCentersService.selectedServiceCenterId;\n    }\n    this.counters = {\n      classes: this.clientData.classes\n        ? Object.keys(this.clientData.classes).length\n        : 0,\n      trips: this.clientData.trips\n        ? Object.keys(this.clientData.trips).length\n        : 0,\n      invoices: this.clientData.invoices\n        ? Object.keys(this.clientData.invoices).length\n        : 0,\n    };\n    this.titles[1][\"badge\"] = this.counters.trips;\n    this.titles[2][\"badge\"] = this.counters.classes;\n    this.titles[3][\"badge\"] = this.counters.invoices;\n  }\n  async componentDidLoad() {\n    this.setSliderHeight();\n  }\n\n  setSliderHeight() {\n    this.slider = new Swiper(\".slider-client\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: true,\n      autoHeight: true,\n    });\n    //reset sliders height inside slider\n    const slideContainers = Array.from(\n      this.el.getElementsByClassName(\"slide-container\")\n    );\n    slideContainers.map((container) => {\n      container.setAttribute(\n        \"style\",\n        \"height: \" + slideHeight(this.userProfile) + \"px\"\n      );\n    });\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header class=\"cover\">\n          <app-item-cover item={this.userProfile}></app-item-cover>\n        </ion-header>\n        <ion-header>\n          <ion-toolbar color=\"clients\">\n            {this.userProfile && !this.userProfile.coverURL\n              ? [\n                  <ion-buttons slot=\"start\">\n                    <ion-button\n                      onClick={() => RouterService.goBack()}\n                      icon-only\n                    >\n                      <ion-icon name=\"arrow-back\"></ion-icon>\n                    </ion-button>\n                  </ion-buttons>,\n                ]\n              : undefined}\n            <ion-title>{this.userProfile.displayName}</ion-title>\n          </ion-toolbar>\n        </ion-header>\n        <app-header-segment-toolbar\n          color={Environment.getAppColor()}\n          swiper={this.slider}\n          titles={this.titles}\n        ></app-header-segment-toolbar>\n        <ion-content class=\"slides\">\n          {this.userProfile && this.userProfile.coverURL ? (\n            <ion-fab\n              vertical=\"top\"\n              horizontal=\"start\"\n              slot=\"fixed\"\n              style={{marginTop: fabButtonTopMarginString(2)}}\n            >\n              <ion-fab-button\n                onClick={() => RouterService.goBack()}\n                class=\"fab-icon\"\n              >\n                <ion-icon name=\"arrow-back-circle-outline\"></ion-icon>\n              </ion-fab-button>\n            </ion-fab>\n          ) : undefined}\n          <swiper-container class=\"slider-client swiper\">\n            <swiper-wrapper class=\"swiper-wrapper\">\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  <app-public-user userProfile={this.userProfile} />\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.trips &&\n                  Object.keys(this.clientData.trips).length > 0 ? (\n                    <app-admin-dive-trips\n                      filterByOrganisierId={this.organiserId}\n                      filterByTrips={this.clientData.trips}\n                    />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-trips\" text=\"No Diving Trips\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.classes &&\n                  Object.keys(this.clientData.classes).length > 0 ? (\n                    <app-admin-diving-classes\n                      filterByOrganisierId={this.organiserId}\n                      filterByClasses={this.clientData.classes}\n                    />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-classes\" text=\"No Diving Classes\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.invoices &&\n                  Object.keys(this.clientData.invoices).length > 0 ? (\n                    <app-admin-client-invoices />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-invoices\" text=\"No Invoices\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n            </swiper-wrapper>\n          </swiper-container>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}