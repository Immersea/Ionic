import{r as t,e as i,h as e}from"./p-cbe60c68.js";import{S as s,E as o}from"./p-6934ed3c.js";import"./p-c7ee7cfe.js";import{n}from"./p-c2915cc5.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const a="modal-quill-editor{}modal-quill-editor .ql-container{height:calc(100% - 50px) !important}";const r=a;const h=class{constructor(e){t(this,e);this.edit=i(this,"edit",7);this.languageSelected="en";this.updateView=false;this.immerseaLocation=undefined;this.readOnly=false;this.article=undefined;this.selectedArticle=undefined}refresh(){this.selectedArticle=this.article[this.languageSelected]}componentWillLoad(){this.article=this.immerseaLocation.article;this.languages=s.getLanguages();if(!this.article)this.article={};this.languages.map((t=>{if(!this.article[t.value]){this.article[t.value]={ops:[{insert:""}]}}}));this.selectLanguage()}initEditor(t){this.editor=t.detail}selectLanguage(t){if(t&&t.detail.value){this.languageSelected=t.detail.value}this.refresh()}getContents(t){if(t.detail.event=="text-change"&&t.detail.content){this.article[this.languageSelected]=t.detail.content;this.refresh()}}async save(){return n.dismiss(this.article)}async cancel(){return n.dismiss()}render(){return[!this.readOnly?e("ion-header",null,e("ion-toolbar",{color:o.getAppColor()},e("ion-title",null,"Editor"))):undefined,e("ion-header",{key:"2dc6d5bba18e0760b91fb33d095e7891b5805cbc"},e("ion-toolbar",{key:"7e8938a54786f5a001738aed7c0eb2b0a37c350b",color:o.getAppColor()},e("ion-segment",{key:"5b50eb2866f59293108377a7bc68a4019d04e5a4",mode:"md",scrollable:true,onIonChange:t=>this.selectLanguage(t),value:this.languageSelected},this.languages.map((t=>e("ion-segment-button",{value:t.value,layout:"icon-start"},e("ion-icon",{class:"flag-icon flag-icon-"+(t.countryCode=="en"?"gb":t.countryCode)}),e("ion-label",null,t.label))))),this.readOnly?e("ion-button",{slot:"end",onClick:()=>this.edit.emit(true)},e("ion-label",null,"EDIT")):undefined)),e("ion-content",{key:"99ed7fa831dce4b19ee542e1bf80e1f7f25334ea"},!this.readOnly?e("quill-editor",{immerseaLocation:this.immerseaLocation,content:JSON.stringify(this.selectedArticle),format:"json",theme:"snow",onEditorInit:t=>this.initEditor(t),onEditorChange:t=>this.getContents(t)}):e("quill-view",{content:JSON.stringify(this.selectedArticle),format:"json",theme:"snow"})),!this.readOnly?e("app-modal-footer",{onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}):undefined]}static get watchers(){return{updateView:["refresh"]}}};h.style=r;export{h as modal_quill_editor};