import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as c}from"./p-1af05547.js";import{a6 as l,a8 as o,S as d,E as n}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const h="modal-datasheet-family ion-list{width:100%}";const f=h;const r=class{constructor(t){e(this,t);this.index=0;this.datasheetFamilies=undefined;this.datasheetFamily=undefined;this.updateView=true;this.validDatasheetFamily=false}async componentWillLoad(){await this.loadDatasheetFamilies()}async loadDatasheetFamilies(){await l.downloadDatasheetSettings();this.datasheetFamilies=c.exports.cloneDeep(l.getDatasheetFamilies());if(this.datasheetFamilies&&this.datasheetFamilies.length>0){this.datasheetFamily=this.datasheetFamilies[0]}else{this.addDatasheetFamily()}this.validateDatasheet()}selectType(e){this.datasheetFamily=this.datasheetFamilies.find((t=>t.familyId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="familyId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetFamily[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetFamily=c.exports.isString(this.datasheetFamily.familyId)&&c.exports.isString(this.datasheetFamily.familyName);this.updateView=!this.updateView}addDatasheetFamily(){this.datasheetFamily=new o;this.datasheetFamilies.push(this.datasheetFamily);this.index=this.datasheetFamilies.length-1}duplicateDatasheetFamily(){this.datasheetFamily=c.exports.cloneDeep(this.datasheetFamily);this.datasheetFamily.familyId=this.datasheetFamily.familyId+"_rev.";this.datasheetFamilies.push(this.datasheetFamily);this.index=this.datasheetFamilies.length-1}async deleteDatasheetFamily(){try{this.datasheetFamilies.splice(this.index,1);this.index=0;this.datasheetFamily=this.datasheetFamilies[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await l.uploadDatasheetSettings("family",this.datasheetFamilies);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"095d10512b315e08e133b0458fc1cf83f2c74960"},t("ion-content",{key:"05ee7110092caf5d6bafad46589837dc86478de8"},t("ion-grid",{key:"178ee294b77583ea434423367150589b899162a8"},t("ion-row",{key:"e8cd47682abb5981fc45a982e17499b4c8be2f69"},t("ion-col",{key:"c1ce54bb7cb0a055bc1b6c2a86f3ae009a9efec6"},t("app-select-search",{key:"24c4bbcef4577c5e35846cc4a441502d3f5e2be5",color:"trasteel",label:{tag:"datasheet_family",text:"Datasheet Family"},value:this.index?this.datasheetFamilies[this.index].familyId:this.datasheetFamilies[0].familyId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetFamilies,selectValueId:"familyId",selectValueText:["familyName"],disabled:!this.validDatasheetFamily})),t("ion-col",{key:"2419e00fa54ca0b22401af0ad539d105fdd9117a",size:"1",class:"ion-text-center"},t("ion-button",{key:"55119eea6b1456d7d324c035a69225ef725e0944",fill:"clear",disabled:!this.validDatasheetFamily,onClick:()=>this.addDatasheetFamily()},t("ion-icon",{key:"d8898bcd6ab8640b3b945a189c272da2c5eef5a6",name:"add",slot:"start"}))),t("ion-col",{key:"4983cee27c3c78b0dc1b6f9647f3ba3d380d8e87",size:"1",class:"ion-text-center"},t("ion-button",{key:"9385551ee84b629b67e084fefdfc2ba04097293b",fill:"clear",disabled:!this.validDatasheetFamily,onClick:()=>this.duplicateDatasheetFamily()},t("ion-icon",{key:"7fb40e017bd85996570482df7474a2f839460e89",slot:"start",name:"duplicate"}))),t("ion-col",{key:"cb7b372e4b8152fa629b16f59416e4702f31cd67",size:"1",class:"ion-text-center"},t("ion-button",{key:"3b3264cb8db8c07c6f8ce5be42a5a3d8d7740119",fill:"clear",color:"danger",disabled:this.datasheetFamilies.length==0,onClick:()=>this.deleteDatasheetFamily()},t("ion-icon",{key:"c73719c433aa1a5c38769acc0099a655f616e57d",slot:"start",name:"trash"}))))),t("app-form-item",{key:"a32333da755d351e3d1ad67f13c023d8988b4e72","label-text":"ID",value:this.datasheetFamily.familyId,name:"familyId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"familyId",list:l.getDatasheetFamilies()}}]}),t("app-form-item",{key:"11dc67c1d761dc9ef42e6efa19732e1abbef3d68","label-text":"Name",value:this.datasheetFamily.familyName,name:"familyName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]})),t("app-modal-footer",{key:"348514b52a25d0e9f52b0c7664241eaa119712c0",color:n.getAppColor(),disableSave:!this.validDatasheetFamily,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};r.style=f;export{r as modal_datasheet_family};