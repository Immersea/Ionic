import{r as e,h as t,H as s,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as o}from"./p-c2915cc5.js";import{a2 as a,W as n,T as r,b5 as c}from"./p-773bd3de.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1af05547.js";import"./p-e9c4f463.js";const h="popover-edit-customer-owner{}popover-edit-customer-owner ion-list{min-height:300px}";const f=h;const p=class{constructor(t){e(this,t);this.owner=undefined;this.group=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.selectedOwner=new a;this.sharePerc=this.owner.groupOwnershipPerc;this.custGroups=n.getCustomerGroups();if(this.owner&&this.owner.groupId){this.selectedOwner=this.custGroups.find((e=>e.groupId==this.owner.groupId));if(!this.selectedOwner){this.newOwnerName=this.owner.groupName}}}componentDidLoad(){this.setOwnersSelect();this.updateView=!this.updateView}setOwnersSelect(){const e=this.el.querySelector("#selectOwner");const t={header:r.getTransl(this.group?"customer_group":"customer_owner",this.group?"Customer Group":"Customer Owner")};e.interfaceOptions=t;const s=Array.from(e.getElementsByTagName("ion-select-option"));s.map((t=>{e.removeChild(t)}));e.placeholder=r.getTransl("select","Select");this.custGroups.map((t=>{const s=document.createElement("ion-select-option");s.value=t;s.textContent=t.groupName;e.appendChild(s)}))}handleSelect(e){this.selectedOwner=e.detail.value}handleChange(e){this[e.detail.name]=e.detail.value;this.updateView=!this.updateView}close(){o.dismiss()}save(){if(this.newOwnerName){this.owner.groupId=c(this.newOwnerName);this.owner.groupName=this.newOwnerName}else{this.owner.groupId=this.selectedOwner.groupId;this.owner.groupName=this.selectedOwner.groupName}this.owner.groupOwnershipPerc=this.sharePerc;o.dismiss({owner:this.owner,new:this.newOwnerName&&this.newOwnerName.length>0})}render(){return t(s,{key:"343903364b6981cfc971d995e4280ae79ebf5286"},t("ion-header",{key:"d68f7e7ad2c99f123876f5e2ef35bec49d298879",translucent:true},t("ion-toolbar",{key:"fceeb159724ec4f39de8777185eaa64bd16bc2f4"},t("ion-title",{key:"fb365a3dfcf4add85220ea84f55ca1b3d5091406"},"Select Owner/Group"))),t("ion-content",{key:"08e931bc198404385e3fa8286ff62eade2e2af63"},t("ion-item",{key:"891430d17c5e0be422e5f5d6702e329a7a80d798",lines:"none"},t("ion-select",{key:"00d22b629ada0ad2e9e1cf889f669f381d1132f0",color:"trasteel",id:"selectOwner",interface:"action-sheet",label:"Customer","label-placement":"floating",disabled:this.newOwnerName&&this.newOwnerName.length>0,onIonChange:e=>this.handleSelect(e),value:this.selectedOwner})),t("ion-item-divider",{key:"b845abe2b079e458e9c645be9754d1bf8b3db92c"}," - or insert new - "),t("app-form-item",{key:"27f0232050fffeaf9fca33415924f81c20149ad4",lines:"none","label-tag":"name","label-text":"Name",value:this.newOwnerName,name:"newOwnerName","input-type":"string",onFormItemChanged:e=>this.handleChange(e)}),this.group?t("app-form-item",{lines:"full","label-tag":"share_perc","label-text":"Share Percentage",value:this.sharePerc,name:"sharePerc","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"minmaxvalue",options:{min:0,max:100}}]}):undefined),t("ion-footer",{key:"97a9f7cf37f36d75f5888819d4769b7630aa3141"},t("app-modal-footer",{key:"735f10eec1f303bd63fb850439dfc814642ebc72",saveTag:{tag:"ok",text:"ok"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return i(this)}};p.style=f;export{p as popover_edit_customer_owner};