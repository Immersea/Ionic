import{r as e,e as i,h as t,f as a}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{b as r}from"./p-5d4a8e1f.js";import{T as o}from"./p-7ea622ea.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-6c93b3f7.js";import"./p-e9c4f463.js";import"./p-5d8b2afa.js";import"./p-7ee16e8d.js";const l="app-dragdrop-file #drop-area{border:2px dashed white;border-radius:20px;width:90%;height:var(--coverHeight);margin:0 auto 0 auto;padding:20px;text-align:center;visibility:visible}app-dragdrop-file #drop-area.highlight{border-color:var(--ion-color-primary) !important;border-style:solid !important;border-width:5px !important}app-dragdrop-file p{margin-top:0;color:white}app-dragdrop-file ion-note{padding:0}app-dragdrop-file .my-form{text-align:center}app-dragdrop-file .button{display:inline-block;margin:20px 0 20px 0;padding:20px;background-color:var(--ion-color-primary);color:var(--ion-color-primary-contrast);cursor:pointer;border-radius:5px}app-dragdrop-file .button:hover{background:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}app-dragdrop-file #fileElem{display:none}";const d=l;const p=class{constructor(t){e(this,t);this.fileSelected=i(this,"fileSelected",7);this.fileType=undefined;this.fileTypes=undefined;this.autoOpen=false;this.file=undefined;this.selectedFile=undefined}componentWillLoad(){if(this.file){this.handleFiles([this.file])}}componentDidLoad(){this.dropArea=this.el.querySelector("#drop-area");this.inputElement=this.el.querySelector("#fileElem");this.autoOpen?this.inputElement.click():undefined;["dragenter","dragover","dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,this.preventDefaults,false);document.body.addEventListener(e,this.preventDefaults,false)}));["dragenter","dragover"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.add("highlight")}),false)}));["dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.remove("highlight")}),false)}));this.dropArea.addEventListener("drop",(e=>{const i=e.dataTransfer;this.handleFiles(i.files)}),false)}preventDefaults(e){e.preventDefault();e.stopPropagation()}async handleFiles(e){this.selectedFile=null;if(e.target){this.selectedFile=e.target.files[0]}else{this.selectedFile=e[0]}let i=false;if(this.fileType){const e=new RegExp("^"+this.fileType+"\\/\\w+");i=e.test(this.selectedFile.type)}else{i=this.fileTypes.includes(this.selectedFile.type)}if(i){this.fileSelected.emit(this.selectedFile)}else{this.selectedFile=null;const e=await r.create({header:o.getTransl("select-file","Select a File"),message:o.getTransl("select-file-message","Please select a file of type: ")+(this.fileType?this.fileType:this.fileTypes.join(", ")),buttons:[{text:o.getTransl("ok","OK"),handler:async()=>{this.inputElement.click()}}]});e.present()}}render(){return[t("div",{key:"a700de1cae9d63d4d0a8499b0398246f83ee4193",id:"drop-area"},t("p",{key:"d76c77ef5c5247a413e7ff20cf12ba4f3c36d30c"},this.selectedFile?[t("ion-note",null,this.selectedFile.name),t("br",null),t("ion-note",null,s.exports.round(this.selectedFile.size/1024/1024,1),"MB")]:t("my-transl",{tag:"dragdrop-file",text:"Upload a file with the file dialog or by dragging and\n            dropping the file onto the dashed region"}))),t("form",{key:"fc0926893d67afd35a91125ce32f00440c9001d6",class:"my-form"},t("input",{key:"7213b8a87a219c02a3b75feec30a49065b7ac01e",type:"file",id:"fileElem",accept:this.fileType?this.fileType+"/*":this.fileTypes&&this.fileTypes.length>0?this.fileTypes.join(","):"*/*",onClick:()=>false,onChange:e=>this.handleFiles(e)}),t("label",{key:"77a19fe16a29ac4224a71a64319aa6a65780910d",id:"labelElem",class:"button",htmlFor:"fileElem"},t("my-transl",{key:"218d6f09129c69a4270a6089a2f76cd201f0380f",tag:"select-file",text:"Select a File"})))]}get el(){return a(this)}};p.style=d;export{p as app_dragdrop_file};