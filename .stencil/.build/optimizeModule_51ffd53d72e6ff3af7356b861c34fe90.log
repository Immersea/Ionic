import{r as e,e as i,h as t,f as r}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{b as a}from"./p-c2915cc5.js";import{T as o}from"./p-773bd3de.js";import{l as s}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const l="app-dragdrop-file #drop-area{border:2px dashed white;border-radius:20px;width:90%;height:var(--coverHeight);margin:0 auto 0 auto;padding:20px;text-align:center;visibility:visible}app-dragdrop-file #drop-area.highlight{border-color:var(--ion-color-primary) !important;border-style:solid !important;border-width:5px !important}app-dragdrop-file p{margin-top:0;color:white}app-dragdrop-file ion-note{padding:0}app-dragdrop-file .my-form{text-align:center}app-dragdrop-file .button{display:inline-block;margin:20px 0 20px 0;padding:20px;background-color:var(--ion-color-primary);color:var(--ion-color-primary-contrast);cursor:pointer;border-radius:5px}app-dragdrop-file .button:hover{background:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}app-dragdrop-file #fileElem{display:none}";const d=l;const p=class{constructor(t){e(this,t);this.fileSelected=i(this,"fileSelected",7);this.fileType=undefined;this.fileTypes=undefined;this.autoOpen=false;this.file=undefined;this.selectedFile=undefined}componentWillLoad(){if(this.file){this.handleFiles([this.file])}}componentDidLoad(){this.dropArea=this.el.querySelector("#drop-area");this.inputElement=this.el.querySelector("#fileElem");this.autoOpen?this.inputElement.click():undefined;["dragenter","dragover","dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,this.preventDefaults,false);document.body.addEventListener(e,this.preventDefaults,false)}));["dragenter","dragover"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.add("highlight")}),false)}));["dragleave","drop"].forEach((e=>{this.dropArea.addEventListener(e,(()=>{this.dropArea.classList.remove("highlight")}),false)}));this.dropArea.addEventListener("drop",(e=>{const i=e.dataTransfer;this.handleFiles(i.files)}),false)}preventDefaults(e){e.preventDefault();e.stopPropagation()}async handleFiles(e){this.selectedFile=null;if(e.target){this.selectedFile=e.target.files[0]}else{this.selectedFile=e[0]}let i=false;if(this.fileType){const e=new RegExp("^"+this.fileType+"\\/\\w+");i=e.test(this.selectedFile.type)}else{i=this.fileTypes.includes(this.selectedFile.type)}if(i){this.fileSelected.emit(this.selectedFile)}else{this.selectedFile=null;const e=await a.create({header:o.getTransl("select-file","Select a File"),message:o.getTransl("select-file-message","Please select a file of type: ")+(this.fileType?this.fileType:this.fileTypes.join(", ")),buttons:[{text:o.getTransl("ok","OK"),handler:async()=>{this.inputElement.click()}}]});e.present()}}render(){return[t("div",{key:"42daf183876a301b1dd4c31772cf82c625bbfe28",id:"drop-area"},t("p",{key:"0aab86cee4c1e9972d20b1b0c90303e4121faa82"},this.selectedFile?[t("ion-note",null,this.selectedFile.name),t("br",null),t("ion-note",null,s.exports.round(this.selectedFile.size/1024/1024,1),"MB")]:t("my-transl",{tag:"dragdrop-file",text:"Upload a file with the file dialog or by dragging and\n            dropping the file onto the dashed region"}))),t("form",{key:"fa96d265366ee0ebc435e4291a182712dbda5694",class:"my-form"},t("input",{key:"c14711b9af36a8aa35ba63465128d69c78b349ef",type:"file",id:"fileElem",accept:this.fileType?this.fileType+"/*":this.fileTypes&&this.fileTypes.length>0?this.fileTypes.join(","):"*/*",onClick:()=>false,onChange:e=>this.handleFiles(e)}),t("label",{key:"636d1ca22ac3021b402e7207d442bb677f147146",id:"labelElem",class:"button",htmlFor:"fileElem"},t("my-transl",{key:"1dba7d49b9d7cb835186b87522f4a8c04185262c",tag:"select-file",text:"Select a File"})))]}get el(){return r(this)}};p.style=d;export{p as app_dragdrop_file};