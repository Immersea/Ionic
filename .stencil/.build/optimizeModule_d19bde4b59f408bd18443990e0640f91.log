import{r as e,h as t}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as a}from"./p-5d4a8e1f.js";import{aw as i}from"./p-0287979e.js";import{E as d}from"./p-714ce41b.js";import{l as o}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-084d415b.js";import"./p-e9c4f463.js";import"./p-7ee16e8d.js";const s="popover-media-loading ion-note{padding-left:20px}popover-media-loading .drop-area{width:100%}popover-media-loading app-dragdrop-file p{color:black !important}popover-media-loading app-dragdrop-file #drop-area{border:2px dashed black !important;height:100px !important}";const p=s;const n=class{constructor(t){e(this,t);this.media=undefined;this.file=undefined;this.validMedia=false;this.updateView=false}componentWillLoad(){if(!this.media){this.media=new i}if(this.file){this.updateMedia({detail:this.file})}else{this.validateMedia()}}async close(){a.dismiss()}async save(){a.dismiss({media:this.media,file:this.file})}validateMedia(){this.validMedia=this.media.title&&this.media.title.length>=3&&this.media.size>0&&this.media.type&&this.media.description&&this.media.description.length>5;this.updateView=!this.updateView}handleChange(e){if(e.detail.name=="order"){this.media[e.detail.name]=o.exports.toNumber(e.detail.value)}else{this.media[e.detail.name]=e.detail.value}this.validateMedia()}updatePublic(e){this.media.public=e.detail.checked;this.validateMedia()}updateMedia(e){this.file=e.detail;if(!this.media.title){this.media.title=this.file.name}this.media.name=this.file.name;this.media.lastModified=this.file.lastModified;this.media.size=this.file.size;this.media.type=this.file.type;this.validateMedia()}render(){return[t("ion-header",{key:"4f94f9092a81d9443390759270f581785b4c1fdd"},t("ion-toolbar",{key:"698cb6456ffa5f0a454a68f96d8ffd9d617748ff",color:d.getAppColor()},t("ion-title",{key:"7555f897ada06cbc9074fa655832c77c28c98d74"},"Media Loader"))),t("ion-content",{key:"51e1d9c999dfa10dd425542242b39a48c87d4577"},t("ion-list",{key:"ba621d7695ea11775ba94309d37c456b432144ae"},t("ion-note",{key:"dc163db49a49f33ea700f9d607da66ad3f48335a"},"Id: ",this.media.id),t("app-form-item",{key:"5c12a083751408a399aa2adfc75baa6cfd8354a6","label-tag":"title","label-text":"Title",value:this.media.title,name:"title","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:3,max:20}}]}),t("app-form-item",{key:"926fddf15f5bad88b75f99bb9a11d7c9eb4156f3","label-tag":"subtitle","label-text":"Subtitle",value:this.media.subtitle,name:"subtitle","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"length",options:{min:0,max:30}}]}),t("app-form-item",{key:"e9b65d3c4dfee158e83912b92ba496673cab7515","label-tag":"description","label-text":"Description",value:this.media.description,name:"description","input-type":"text",onFormItemChanged:e=>this.handleChange(e),validator:["required",{name:"length",options:{min:5,max:100}}]}),t("ion-item",{key:"78b1373ce015bc74b47ab435cc2062be510d3f34"},t("ion-label",{key:"675daa5fad2a2eb73de9fe7c50511e9b874384e0"},t("my-transl",{key:"16cb7fb0ab4a4a56bd56c6839ad60f16373143fb",tag:"public",text:"Public"})),t("ion-toggle",{key:"7d2b245ada304f050b8a835b61c8325a4730474c",slot:"end",onIonChange:e=>this.updatePublic(e),checked:this.media.public}))),t("div",{key:"9877aa6fc1ed28a3ac4598c7eaab467d6da20861",class:"drop-area"},t("app-dragdrop-file",{key:"fdfc159a8d5b843f08f4b10146131bd55c9c6a6f",fileTypes:this.media.getTypes(),file:this.file,onFileSelected:e=>this.updateMedia(e)}))),t("app-modal-footer",{key:"4d5743bd018adb82300a548538421239998054dc",color:d.getAppColor(),onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save(),disableSave:!this.validMedia})]}};n.style=p;export{n as popover_media_loading};