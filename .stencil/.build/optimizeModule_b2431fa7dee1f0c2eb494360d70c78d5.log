import{r as e,h as t,H as s,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as o}from"./p-c2915cc5.js";import{a2 as a,W as n,T as c,b5 as r}from"./p-c24c8a77.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1af05547.js";import"./p-e9c4f463.js";const h="popover-edit-customer-owner{}popover-edit-customer-owner ion-list{min-height:300px}";const p=h;const f=class{constructor(t){e(this,t);this.owner=undefined;this.group=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.selectedOwner=new a;this.sharePerc=this.owner.groupOwnershipPerc;this.custGroups=n.getCustomerGroups();if(this.owner&&this.owner.groupId){this.selectedOwner=this.custGroups.find((e=>e.groupId==this.owner.groupId));if(!this.selectedOwner){this.newOwnerName=this.owner.groupName}}}componentDidLoad(){this.setOwnersSelect();this.updateView=!this.updateView}setOwnersSelect(){const e=this.el.querySelector("#selectOwner");const t={header:c.getTransl(this.group?"customer_group":"customer_owner",this.group?"Customer Group":"Customer Owner")};e.interfaceOptions=t;const s=Array.from(e.getElementsByTagName("ion-select-option"));s.map((t=>{e.removeChild(t)}));e.placeholder=c.getTransl("select","Select");this.custGroups.map((t=>{const s=document.createElement("ion-select-option");s.value=t;s.textContent=t.groupName;e.appendChild(s)}))}handleSelect(e){this.selectedOwner=e.detail.value}handleChange(e){this[e.detail.name]=e.detail.value;this.updateView=!this.updateView}close(){o.dismiss()}save(){if(this.newOwnerName){this.owner.groupId=r(this.newOwnerName);this.owner.groupName=this.newOwnerName}else{this.owner.groupId=this.selectedOwner.groupId;this.owner.groupName=this.selectedOwner.groupName}this.owner.groupOwnershipPerc=this.sharePerc;o.dismiss({owner:this.owner,new:this.newOwnerName&&this.newOwnerName.length>0})}render(){return t(s,{key:"1e3a225d8e580d709cdef9504448081431c011ab"},t("ion-header",{key:"e5a93df21548bfbb3188abfbbab86347c4c757ba",translucent:true},t("ion-toolbar",{key:"a82b3aa8339d2c8f3e17e804a8f69e4bc4515ef2"},t("ion-title",{key:"762b08b60420f75f135c9d0ba9a645232c8b4238"},"Select Owner/Group"))),t("ion-content",{key:"a06cf843a560af07b5297b72e667c66cd5f9c89e"},t("ion-item",{key:"e0b10fb6b567ff2d2b802cfbba58df1ed6dc370d",lines:"none"},t("ion-select",{key:"78d811cde6500502eea793ffad7f89aab6d76825",color:"trasteel",id:"selectOwner",interface:"action-sheet",label:"Customer","label-placement":"floating",disabled:this.newOwnerName&&this.newOwnerName.length>0,onIonChange:e=>this.handleSelect(e),value:this.selectedOwner})),t("ion-item-divider",{key:"147b5550bd88cc4cac3cf51946e43e1e0d304416"}," - or insert new - "),t("app-form-item",{key:"68819e40d040a8432e81915d6e2fcc47ea4ff5ea",lines:"none","label-tag":"name","label-text":"Name",value:this.newOwnerName,name:"newOwnerName","input-type":"string",onFormItemChanged:e=>this.handleChange(e)}),this.group?t("app-form-item",{lines:"full","label-tag":"share_perc","label-text":"Share Percentage",value:this.sharePerc,name:"sharePerc","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"minmaxvalue",options:{min:0,max:100}}]}):undefined),t("ion-footer",{key:"16c9e0dc58b6545caf68127b833e98b82f202fe4"},t("app-modal-footer",{key:"eb287c64847d2b3b168dd83aa05d51a2432ac50f",saveTag:{tag:"ok",text:"ok"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return i(this)}};f.style=p;export{f as popover_edit_customer_owner};