{"version":3,"names":["pageDiveCommunityDetailsCss","PageDiveCommunityDetailsStyle0","PageDiveCommunityDetails","this","admin","markers","tag","text","componentWillLoad","DiveCommunitiesService","selectedDiveCommunity","dcSubscription","selectedDiveCommunity$","subscribe","dc","displayName","diveCommunity","dcid","selectedDiveCommunityId","getDiveCommunity","diveTrips","DiveTripsService","getTripsSummary","DIVECOMMUNITIESCOLLECTION","titles","userRoles","UserService","dcIcon","UDiveFilterService","getMapDocs","icon","size","push","latitude","position","geopoint","longitude","componentDidLoad","slider","Swiper","speed","spaceBetween","allowTouchMove","autoHeight","customElements","whenDefined","mapElement","el","querySelector","mapContainer","setAttribute","mapHeight","disconnectedCallback","unsubscribe","render","h","key","item","color","class","swiper","noHeader","vertical","horizontal","slot","style","marginTop","fabButtonTopMarginString","onClick","presentDiveCommunityUpdate","name","undefined","description","email","button","href","phoneNumber","website","target","facebook","instagram","twitter","id","pageId","center","calendarId","addEvents","trips","show","expand","fill","deleteDiveCommunity","isLabel"],"sources":["src/components/udive/pages/dive-communities/page-dive-community-details/page-dive-community-details.scss?tag=page-dive-community-details","src/components/udive/pages/dive-communities/page-dive-community-details/page-dive-community-details.tsx"],"sourcesContent":["page-dive-community-details {\n  ion-segment-button {\n    --color-checked: var(--ion-color-divecommunity-contrast);\n  }\n}\n","import {Component, h, Prop, State, Element} from \"@stencil/core\";\nimport {UserRoles} from \"../../../../../interfaces/common/user/user-roles\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  DiveCommunitiesService,\n  DIVECOMMUNITIESCOLLECTION,\n} from \"../../../../../services/udive/diveCommunities\";\nimport {DiveCommunity} from \"../../../../../interfaces/udive/dive-community/diveCommunity\";\nimport {Marker} from \"../../../../../interfaces/interfaces\";\nimport {UDiveFilterService} from \"../../../../../services/udive/ud-db-filter\";\nimport {\n  mapHeight,\n  fabButtonTopMarginString,\n} from \"../../../../../helpers/utils\";\nimport {DiveTripsService} from \"../../../../../services/udive/diveTrips\";\nimport {Subscription} from \"rxjs\";\nimport Swiper from \"swiper\";\n\n@Component({\n  tag: \"page-dive-community-details\",\n  styleUrl: \"page-dive-community-details.scss\",\n})\nexport class PageDiveCommunityDetails {\n  @Element() el: HTMLElement;\n  @Prop() dcid: string;\n  admin = false;\n  @State() diveCommunity: DiveCommunity;\n  @State() diveTrips: any;\n  @State() titles = [\n    {tag: \"information\"},\n    {tag: \"map\"},\n    {tag: \"next-trips\", text: \"Next Dive Trips\"},\n    {tag: \"team\"},\n  ];\n  @State() slider: Swiper;\n  userRoles: UserRoles;\n  markers: Marker[] = [];\n  mapElement: HTMLAppMapElement;\n  dcSubscription: Subscription;\n\n  async componentWillLoad() {\n    //check if admin page or user details page\n    if (DiveCommunitiesService.selectedDiveCommunity) {\n      //admin page\n      this.admin = true;\n      this.dcSubscription =\n        DiveCommunitiesService.selectedDiveCommunity$.subscribe((dc) => {\n          if (dc && dc.displayName) {\n            this.diveCommunity = dc;\n            this.dcid = DiveCommunitiesService.selectedDiveCommunityId;\n          }\n        });\n    } else {\n      this.admin = false;\n      this.diveCommunity = await DiveCommunitiesService.getDiveCommunity(\n        this.dcid\n      );\n      this.diveTrips = await DiveTripsService.getTripsSummary(\n        DIVECOMMUNITIESCOLLECTION,\n        this.dcid\n      );\n      delete this.titles[3];\n      delete this.titles[2];\n    }\n    this.userRoles = UserService.userRoles;\n\n    let dcIcon = UDiveFilterService.getMapDocs()[DIVECOMMUNITIESCOLLECTION]\n      .icon as any;\n    dcIcon.size = \"large\";\n    this.markers.push({\n      icon: dcIcon,\n      latitude: this.diveCommunity.position.geopoint.latitude,\n      longitude: this.diveCommunity.position.geopoint.longitude,\n    });\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-dive-community\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: false,\n      autoHeight: true,\n    });\n    //reset map height inside slide\n    await customElements.whenDefined(\"app-map\");\n    this.mapElement = this.el.querySelector(\"#map\");\n    const mapContainer = this.el.querySelector(\"#map-container\");\n    mapContainer.setAttribute(\n      \"style\",\n      \"height: \" + mapHeight(this.diveCommunity) + \"px\"\n    ); //-cover photo -slider  - title\n  }\n\n  disconnectedCallback() {\n    if (this.dcSubscription) this.dcSubscription.unsubscribe();\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <app-item-cover item={this.diveCommunity}></app-item-cover>\n      </ion-header>,\n      <ion-header>\n        <ion-toolbar color=\"divecommunity\" class=\"no-safe-padding\">\n          <ion-title>{this.diveCommunity.displayName}</ion-title>\n        </ion-toolbar>\n        <app-header-segment-toolbar\n          color=\"divecommunity\"\n          swiper={this.slider}\n          titles={this.titles}\n          noHeader\n        ></app-header-segment-toolbar>\n      </ion-header>,\n      <ion-content class=\"slides\">\n        {this.admin ? (\n          <ion-fab\n            vertical=\"top\"\n            horizontal=\"end\"\n            slot=\"fixed\"\n            style={{marginTop: fabButtonTopMarginString(2)}}\n          >\n            <ion-fab-button\n              onClick={() =>\n                DiveCommunitiesService.presentDiveCommunityUpdate(this.dcid)\n              }\n              class=\"fab-icon\"\n            >\n              <ion-icon name=\"create\"></ion-icon>\n            </ion-fab-button>\n          </ion-fab>\n        ) : undefined}\n\n        <swiper-container class=\"slider-dive-community swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              <ion-list class=\"ion-no-padding\">\n                <ion-list-header>\n                  <ion-label color=\"divingcenter\">\n                    <my-transl\n                      tag=\"general-information\"\n                      text=\"General Information\"\n                    />\n                  </ion-label>\n                </ion-list-header>\n                <ion-item>\n                  <ion-label class=\"ion-text-wrap\">\n                    <ion-text color=\"dark\">\n                      <p>{this.diveCommunity.description}</p>\n                    </ion-text>\n                  </ion-label>\n                </ion-item>\n                {this.diveCommunity.email ? (\n                  <ion-item button href={\"mailto:\" + this.diveCommunity.email}>\n                    <ion-icon slot=\"start\" name=\"at-outline\"></ion-icon>\n                    <ion-label>{this.diveCommunity.email}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.diveCommunity.phoneNumber ? (\n                  <ion-item\n                    button\n                    href={\"tel:\" + this.diveCommunity.phoneNumber}\n                  >\n                    <ion-icon slot=\"start\" name=\"call-outline\"></ion-icon>\n                    <ion-label>{this.diveCommunity.phoneNumber}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.diveCommunity.website ? (\n                  <ion-item\n                    button\n                    href={\"http://\" + this.diveCommunity.website}\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"link-outline\"></ion-icon>\n                    <ion-label>{this.diveCommunity.website}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.diveCommunity.facebook ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.facebook.com/\" + this.diveCommunity.facebook\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-facebook\"></ion-icon>\n                    <ion-label>{this.diveCommunity.facebook}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.diveCommunity.instagram ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.instagram.com/\" +\n                      this.diveCommunity.instagram\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-instagram\"></ion-icon>\n                    <ion-label>{this.diveCommunity.instagram}</ion-label>\n                  </ion-item>\n                ) : undefined}\n                {this.diveCommunity.twitter ? (\n                  <ion-item\n                    button\n                    href={\n                      \"https://www.twitter.com/\" + this.diveCommunity.twitter\n                    }\n                    target=\"_blank\"\n                  >\n                    <ion-icon slot=\"start\" name=\"logo-twitter\"></ion-icon>\n                    <ion-label>@{this.diveCommunity.twitter}</ion-label>\n                  </ion-item>\n                ) : undefined}\n              </ion-list>\n            </swiper-slide>\n\n            <swiper-slide class=\"swiper-slide\">\n              <div id=\"map-container\">\n                <app-map\n                  id=\"map\"\n                  pageId=\"dive-community-details\"\n                  center={this.diveCommunity}\n                  markers={this.markers}\n                ></app-map>\n              </div>\n            </swiper-slide>\n            <swiper-slide class=\"swiper-slide\">\n              <app-calendar\n                calendarId=\"community-calendar\"\n                addEvents={{trips: this.diveTrips}}\n              ></app-calendar>\n            </swiper-slide>\n            {this.admin ? (\n              <swiper-slide class=\"swiper-slide\">\n                <app-users-list\n                  item={this.diveCommunity}\n                  show={[\"owner\", \"editor\"]}\n                />\n              </swiper-slide>\n            ) : undefined}\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n      this.admin ? (\n        <ion-footer class=\"ion-no-border\">\n          <ion-toolbar>\n            <ion-button\n              expand=\"block\"\n              fill=\"solid\"\n              color=\"danger\"\n              onClick={() =>\n                DiveCommunitiesService.deleteDiveCommunity(this.dcid)\n              }\n            >\n              <ion-icon slot=\"start\" name=\"trash\"></ion-icon>\n              <my-transl tag=\"delete\" text=\"Delete\" isLabel></my-transl>\n            </ion-button>\n          </ion-toolbar>\n        </ion-footer>\n      ) : undefined,\n    ];\n  }\n}\n"],"mappings":"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","ignoreList":[]}