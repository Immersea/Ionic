{"version":3,"names":["modalUserTeamsUpdateCss","ModalUserTeamsUpdateStyle0","ModalUserTeamsUpdate","componentWillLoad","this","usersTeams","TrasteelService","getUsersTeams","userIndex","length","findIndex","x","uid","user","userTeams","UserTeams","addTeam","buttons","teams","Object","keys","ProductLines","forEach","team","includes","push","text","handler","updateView","icon","role","actionSheet","actionSheetController","create","header","present","deleteTeam","index","splice","save","updateUsersTeams","modalController","dismiss","cancel","render","h","Host","key","color","email","tag","map","slot","fill","onClick","name","expand","Environment","getAppColor","onCancelEmit","onSaveEmit"],"sources":["src/components/trasteel/modals/modal-user-teams-update/modal-user-teams-update.scss?tag=modal-user-teams-update","src/components/trasteel/modals/modal-user-teams-update/modal-user-teams-update.tsx"],"sourcesContent":["modal-user-teams-update {\n  ion-list {\n    width: 100%;\n  }\n}\n","import {Component, h, Host, Prop, State, Element} from \"@stencil/core\";\nimport {actionSheetController, modalController} from \"@ionic/core\";\nimport {Environment} from \"../../../../global/env\";\nimport {\n  UserTeams,\n  UsersTeams,\n} from \"../../../../interfaces/trasteel/users/users-teams\";\nimport {TrasteelService} from \"../../../../services/trasteel/common/services\";\nimport {UserPubicProfile} from \"../../../../components\";\nimport {ProductLines} from \"../../../../interfaces/trasteel/users/user-plans\";\n\n@Component({\n  tag: \"modal-user-teams-update\",\n  styleUrl: \"modal-user-teams-update.scss\",\n})\nexport class ModalUserTeamsUpdate {\n  @Element() el: HTMLElement;\n  @Prop() user: UserPubicProfile;\n  @State() usersTeams: UsersTeams;\n  @State() userIndex: number;\n  @State() userTeams: UserTeams;\n  @State() updateView = false;\n\n  async componentWillLoad() {\n    this.usersTeams = await TrasteelService.getUsersTeams();\n    this.userIndex =\n      this.usersTeams.usersTeams.length > 0\n        ? this.usersTeams.usersTeams.findIndex((x) => x.uid === this.user.uid)\n        : -1;\n    if (this.userIndex < 0) {\n      this.userTeams = new UserTeams(this.user);\n    } else {\n      this.userTeams = this.usersTeams.usersTeams[this.userIndex];\n    }\n  }\n\n  async addTeam() {\n    let buttons = [];\n    let teams = Object.keys(ProductLines);\n    teams.forEach((team) => {\n      if (!this.userTeams.teams.includes(team)) {\n        buttons.push({\n          text: team,\n          handler: () => {\n            this.userTeams.teams.push(team);\n            this.updateView = !this.updateView;\n          },\n        });\n      }\n    });\n    buttons.push({\n      text: \"Close\",\n      icon: \"close\",\n      role: \"cancel\",\n      handler: () => {},\n    });\n    const actionSheet = await actionSheetController.create({\n      header: \"Add\",\n      buttons: buttons,\n    });\n    await actionSheet.present();\n  }\n\n  async deleteTeam(index) {\n    this.userTeams.teams.splice(index);\n    this.updateView = !this.updateView;\n  }\n\n  async save() {\n    if (this.userIndex >= 0) {\n      this.usersTeams.usersTeams[this.userIndex] = this.userTeams;\n    } else {\n      this.usersTeams.usersTeams.push(this.userTeams);\n    }\n    TrasteelService.updateUsersTeams(this.usersTeams);\n    modalController.dismiss();\n  }\n\n  async cancel() {\n    return modalController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header>\n          <ion-toolbar color=\"trasteel\">\n            <ion-title>USER TEAMS MANAGER</ion-title>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            <ion-item>{this.user.email}</ion-item>\n            <ion-item-divider>\n              <ion-label>\n                <my-transl tag=\"teams\" text=\"Teams\"></my-transl>\n              </ion-label>\n            </ion-item-divider>\n            {this.userTeams.teams.map((team, index) => (\n              <ion-item>\n                <ion-label>{team}</ion-label>\n                <ion-button\n                  slot=\"end\"\n                  fill=\"clear\"\n                  onClick={() => this.deleteTeam(index)}\n                >\n                  <ion-icon name=\"trash\" color=\"danger\"></ion-icon>\n                </ion-button>\n              </ion-item>\n            ))}\n            <ion-button\n              color=\"trasteel\"\n              fill=\"outline\"\n              expand=\"full\"\n              onClick={() => {\n                this.addTeam();\n              }}\n            >\n              <ion-icon name=\"add\" slot=\"start\"></ion-icon>\n              <ion-label>\n                <my-transl tag=\"add-team\" text=\"Add Team\"></my-transl>\n              </ion-label>\n            </ion-button>\n          </ion-list>\n        </ion-content>\n        <app-modal-footer\n          color={Environment.getAppColor()}\n          onCancelEmit={() => this.cancel()}\n          onSaveEmit={() => this.save()}\n        />\n      </Host>\n    );\n  }\n}\n"],"mappings":"kfAAA,MAAMA,EAA0B,+CAChC,MAAAC,EAAeD,E,MCcFE,EAAoB,M,yIAMT,K,CAEtB,uBAAMC,GACJC,KAAKC,iBAAmBC,EAAgBC,gBACxCH,KAAKI,UACHJ,KAAKC,WAAWA,WAAWI,OAAS,EAChCL,KAAKC,WAAWA,WAAWK,WAAWC,GAAMA,EAAEC,MAAQR,KAAKS,KAAKD,OAC/D,EACP,GAAIR,KAAKI,UAAY,EAAG,CACtBJ,KAAKU,UAAY,IAAIC,EAAUX,KAAKS,K,KAC/B,CACLT,KAAKU,UAAYV,KAAKC,WAAWA,WAAWD,KAAKI,U,EAIrD,aAAMQ,GACJ,IAAIC,EAAU,GACd,IAAIC,EAAQC,OAAOC,KAAKC,GACxBH,EAAMI,SAASC,IACb,IAAKnB,KAAKU,UAAUI,MAAMM,SAASD,GAAO,CACxCN,EAAQQ,KAAK,CACXC,KAAMH,EACNI,QAAS,KACPvB,KAAKU,UAAUI,MAAMO,KAAKF,GAC1BnB,KAAKwB,YAAcxB,KAAKwB,UAAU,G,KAK1CX,EAAQQ,KAAK,CACXC,KAAM,QACNG,KAAM,QACNC,KAAM,SACNH,QAAS,SAEX,MAAMI,QAAoBC,EAAsBC,OAAO,CACrDC,OAAQ,MACRjB,QAASA,UAELc,EAAYI,S,CAGpB,gBAAMC,CAAWC,GACfjC,KAAKU,UAAUI,MAAMoB,OAAOD,GAC5BjC,KAAKwB,YAAcxB,KAAKwB,U,CAG1B,UAAMW,GACJ,GAAInC,KAAKI,WAAa,EAAG,CACvBJ,KAAKC,WAAWA,WAAWD,KAAKI,WAAaJ,KAAKU,S,KAC7C,CACLV,KAAKC,WAAWA,WAAWoB,KAAKrB,KAAKU,U,CAEvCR,EAAgBkC,iBAAiBpC,KAAKC,YACtCoC,EAAgBC,S,CAGlB,YAAMC,GACJ,OAAOF,EAAgBC,S,CAGzB,MAAAE,GACE,OACEC,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAA,cAAAE,IAAA,4CACEF,EAAA,eAAAE,IAAA,2CAAaC,MAAM,YACjBH,EAAA,aAAAE,IAAA,oEAGJF,EAAA,eAAAE,IAAA,4CACEF,EAAA,YAAAE,IAAA,4CACEF,EAAA,YAAAE,IAAA,4CAAW3C,KAAKS,KAAKoC,OACrBJ,EAAA,oBAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,2CAAWG,IAAI,QAAQxB,KAAK,YAG/BtB,KAAKU,UAAUI,MAAMiC,KAAI,CAAC5B,EAAMc,IAC/BQ,EAAA,gBACEA,EAAA,iBAAYtB,GACZsB,EAAA,cACEO,KAAK,MACLC,KAAK,QACLC,QAAS,IAAMlD,KAAKgC,WAAWC,IAE/BQ,EAAA,YAAUU,KAAK,QAAQP,MAAM,eAInCH,EAAA,cAAAE,IAAA,2CACEC,MAAM,WACNK,KAAK,UACLG,OAAO,OACPF,QAAS,KACPlD,KAAKY,SAAS,GAGhB6B,EAAA,YAAAE,IAAA,2CAAUQ,KAAK,MAAMH,KAAK,UAC1BP,EAAA,aAAAE,IAAA,4CACEF,EAAA,aAAAE,IAAA,2CAAWG,IAAI,WAAWxB,KAAK,iBAKvCmB,EAAA,oBAAAE,IAAA,2CACEC,MAAOS,EAAYC,cACnBC,aAAc,IAAMvD,KAAKuC,SACzBiB,WAAY,IAAMxD,KAAKmC,S","ignoreList":[]}