import{r as i,e as t,h as s,H as o}from"./p-cbe60c68.js";import{U as n,h as e,E as a}from"./p-26083a07.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-c2915cc5.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const c="app-search-filter{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)}app-search-filter .search-tags{position:absolute;top:calc(env(safe-area-inset-top) + 88px);right:0px;z-index:2}";const r=c;const h=class{constructor(s){i(this,s);this.searchFilterEmit=t(this,"searchFilterEmit",7);this.tags=[];this.types={search:{color:"light",icon:"search-circle"},filter:{color:"primary",icon:"filter"}};this.updateView=true;this.hideSearch=false;this.hideToolbar=false;this.filterButtonTypes=undefined}componentWillLoad(){this.userSub=n.userRoles$.subscribe((()=>{this.filterButtonTypes=e.getMapDocs()}));this.filterButtonTypes=e.getMapDocs()}disconnectedCallback(){this.userSub.unsubscribe();this.tags=[];this.searchFilterEmit.emit(this.tags)}async addTag(i){this.tags.push(i);this.searchFilterEmit.emit(this.tags);if(i.type=="search")this.hideSearch=true;this.updateView=!this.updateView}async removeTag(i){if(this.tags[i].type=="search")this.hideSearch=false;this.tags.splice(i,1);this.searchFilterEmit.emit(this.tags);this.updateView=!this.updateView}searchInputChange(i){const t={name:i,type:"search"};this.addTag(t)}checkButtonEnabled(i){return this.tags.find((t=>t.name==i))!=null}async removeFilterTag(i){const t=this.tags.findIndex((t=>t.name==i&&t.type=="filter"));this.tags.splice(t,1);this.searchFilterEmit.emit(this.tags);this.updateView=!this.updateView}render(){return s(o,{key:"609a5091e1196e1692c4c107d26b48a7cf128e36"},!this.hideToolbar?s("ion-toolbar",{color:a.getAppColor()},s("ion-grid",null,s("ion-row",{class:"ion-text-center"},s("ion-col",{size:"1"},s("ion-menu-button",null)),s("ion-col",null,s("my-transl",{tag:"looking-for",text:"What are you looking for?"})),s("ion-col",{size:"1"})),s("ion-row",null,Object.keys(this.filterButtonTypes).map((i=>s("ion-col",{class:"ion-no-padding"},s("ion-tab-button",{color:a.getAppColor(),layout:"icon-bottom",onClick:()=>!this.checkButtonEnabled(i)?this.addTag({type:"filter",name:i}):this.removeFilterTag(i)},this.filterButtonTypes[i].icon.type=="ionicon"?s("ion-icon",{name:this.filterButtonTypes[i].icon.name,color:this.filterButtonTypes[i].icon.color}):s("ion-icon",{class:"map-icon "+this.filterButtonTypes[i].icon.name,color:this.filterButtonTypes[i].icon.color}),s("ion-label",{color:this.filterButtonTypes[i].icon.color},this.filterButtonTypes[i].name)))))))):[s("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed"},s("ion-fab-button",{class:"fab-icon"},s("ion-icon",{name:"filter"})),s("ion-fab-list",{side:"start"},Object.keys(this.filterButtonTypes).map((i=>s("ion-fab-button",{style:{"--background":this.filterButtonTypes[i].icon.color},onClick:()=>this.addTag({type:"filter",name:i}),disabled:this.tags.find((t=>t.name==i))!=null},this.filterButtonTypes[i].icon.type=="ionicon"?s("ion-icon",{name:this.filterButtonTypes[i].icon.name}):s("ion-icon",{class:"map-icon "+this.filterButtonTypes[i].icon.name}))))))],!this.hideSearch?s("app-searchbar",{floating:true,onInputChanged:i=>this.searchInputChange(i.detail)}):undefined,s("div",{key:"c2174f5dc6de4c137686af28fd3471541837db67",class:"search-tags"},s("ion-grid",{key:"78716ee98952bb5c8ec58bdf85a4513155600d76",class:"ion-no-padding ion-no-margin ion-text-end"},this.tags.map(((i,t)=>s("ion-row",null,s("ion-col",null,s("ion-chip",{outline:true,style:{background:i.type=="filter"?"rgba(var(--ion-color-"+this.filterButtonTypes[i.name].icon.color+"-contrast-rgb),0.3)":"#00000050"},color:i.type=="filter"?this.filterButtonTypes[i.name].icon.color:"light"},i.type=="search"?s("ion-icon",{name:this.types[i.type].icon}):this.filterButtonTypes[i.name].icon.type=="ionicon"?s("ion-icon",{color:this.filterButtonTypes[i.name].icon.color,name:this.filterButtonTypes[i.name].icon.name}):s("ion-icon",{color:this.filterButtonTypes[i.name].icon.color,class:"map-icon "+this.filterButtonTypes[i.name].icon.name}),s("ion-label",null,i.type=="search"?i.name:this.filterButtonTypes[i.name].name),s("ion-icon",{name:"close-circle",color:i.type=="filter"?this.filterButtonTypes[i.name].icon.color:"light",onClick:()=>this.removeTag(t)})))))))))}};h.style=r;export{h as app_search_filter};