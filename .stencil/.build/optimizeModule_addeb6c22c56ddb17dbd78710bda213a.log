import{r as e,h as i,f as s}from"./p-cbe60c68.js";import{aa as t,U as a,aG as d,a3 as c,R as o}from"./p-30358c9d.js";import{S as r}from"./p-a75993af.js";import{l as p}from"./p-1af05547.js";import"./p-2578d979.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const n="page-dive-trip-details ion-segment-button{--color-checked:var(--ion-color-divetrip-contrast)}page-dive-trip-details #chat-slide{width:100%;height:100%}";const h=n;const l=class{constructor(i){e(this,i);this.markers=[];this.tripid=undefined;this.diveTrip=undefined;this.titles=[{tag:"dives"},{tag:"bookings"},{tag:"chat",disabled:true}];this.slider=undefined;this.userId=undefined;this.columns={sm:12,md:6,lg:4};this.showChat=false;this.updateView=false}async componentWillLoad(){this.diveTrip=await t.getDiveTrip(this.tripid);this.userSub=a.userProfile$.subscribe((e=>{this.userId=e&&e.uid?e.uid:null;this.showChatSlide()}));this.userId=a.userProfile&&a.userProfile.uid?a.userProfile.uid:null;this.columns=d(this.diveTrip.tripDives.length)}showChatSlide(){this.showChat=false;if(this.diveTrip&&this.diveTrip.chatId){this.showChat=this.diveTrip.organiser.id===this.userId;this.showChat=this.showChat||p.exports.isArray(this.diveTrip.users[this.userId]);this.diveTrip.tripDives.map((e=>{e.bookings.map((e=>{this.showChat=this.showChat||e.uid===this.userId&&e.confirmedOrganiser}))}));this.titles[2].disabled=!this.showChat}}setChatHeigth(){const e=this.el.querySelector("#chat-slide");e.setAttribute("style","height: "+c(null)+"px")}async componentDidLoad(){this.slider=new r(".slider-dive-trip",{speed:400,spaceBetween:100,allowTouchMove:true,autoHeight:true})}disconnectedCallback(){this.userSub.unsubscribe()}render(){return[i("ion-header",{key:"26b6a6cb4fa08b142946125e52bcd6911b522b4d"},i("ion-toolbar",{key:"e8a031cc210425d1ed8046261472287279bb9732",color:"divetrip"},i("ion-buttons",{key:"616c86a8574d259cee3d237286b32a13944fb1b6",slot:"start"},i("ion-button",{key:"e21e85aefbb499aeee66565c77eb7962a937e908",onClick:()=>o.goBack(),"icon-only":true},i("ion-icon",{key:"3c12ffe7935f854af374e80b4e34da8626a5a394",name:"arrow-back"}))),i("ion-title",{key:"137135b6d9cc68659b5bd326c95eb5c2e353a34e"},this.diveTrip.displayName))),i("app-header-segment-toolbar",{key:"9da19ae0925203fdebe76f767257ef01e38e463a",color:"divetrip",swiper:this.slider,titles:this.titles}),i("ion-content",{key:"3131346bf4d6a0cb7adba0e7c8ab50b9a80de4a2",class:"slides"},i("swiper-container",{key:"65dbccf15d23b8fa03936352d3fbd7fcaafc2b29",class:"slider-dive-trip swiper"},i("swiper-wrapper",{key:"033035e21d77c6d8f3ab2dd0dcfac6dceac2fc21",class:"swiper-wrapper"},i("swiper-slide",{key:"7cb22c702e64bf51b157e0fed6c8e6f4941fc6ca",class:"swiper-slide"},i("ion-grid",{key:"8ffd5a7dfc420eb316ec68b76fd9cc6705960019"},i("ion-row",{key:"18c2cb0dfdbca2c0565cb78b238ea2aca3a96ee1",class:"ion-text-start"},this.diveTrip.tripDives.map((e=>i("ion-col",{"size-sm":this.columns.sm,"size-md":this.columns.md,"size-lg":this.columns.lg},i("app-dive-trip-card",{tripDive:e}))))))),i("swiper-slide",{key:"bf59f5e3daecb9c6e13989f962452ae7764ba434",class:"swiper-slide"},i("ion-grid",{key:"b6b0f72c0db373ac6388a726a8e461d120d2df31"},i("ion-row",{key:"d650a1fc4c62eed5642efc1c5ea62bd01defa98b",class:"ion-text-start"},!this.userId?i("div",{style:{marginTop:"10%",marginLeft:"auto",marginRight:"auto"}},i("ion-card",null,i("ion-card-header",null,i("ion-card-title",null,i("my-transl",{tag:"please-login",text:"Please login to view this page"}))))):Object.keys(this.diveTrip.tripDives).map((e=>i("ion-col",{"size-sm":this.columns.sm,"size-md":this.columns.md,"size-lg":this.columns.lg},i("app-dive-trip-bookings",{diveTrip:this.diveTrip,diveTripId:this.tripid,tripDiveIndex:p.exports.toNumber(e)}))))))),this.showChat?i("swiper-slide",{class:"swiper-slide"},i("app-chat",{id:"chat-slide",chatId:this.diveTrip.chatId})):undefined)))]}get el(){return s(this)}};l.style=h;export{l as page_dive_trip_details};