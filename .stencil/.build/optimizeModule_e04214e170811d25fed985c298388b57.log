import{r as e,h as i,f as t}from"./p-cbe60c68.js";import{e as s,aq as a,aU as o,U as n,h as c,d,ai as l,R as r,aP as f}from"./p-773bd3de.js";import{S as b}from"./p-a75993af.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-c2915cc5.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";const h="page-diving-school-details ion-segment-button{--color-checked:var(--ion-color-school-contrast)}";const p=h;const u=class{constructor(i){e(this,i);this.admin=false;this.markers=[];this.dsid=undefined;this.divingSchool=undefined;this.diveTrips=undefined;this.divingCourses=undefined;this.titles=[{tag:"map"},{tag:"information"},{tag:"diving-courses"},{tag:"team"},{tag:"next-trips",text:"Next Dive Trips"}];this.slider=undefined}async componentWillLoad(){if(s.selectedDivingSchool){this.admin=true;this.dsSubscription=s.selectedDivingSchool$.subscribe((e=>{if(e&&e.displayName){this.divingSchool=e;this.dsid=s.selectedDivingSchoolId}}))}else{this.admin=false;delete this.titles[4];delete this.titles[3];this.divingSchool=await s.getDivingSchool(this.dsid);this.diveTrips=await a.getTripsSummary(o,this.dsid)}this.userRoles=n.userRoles;this.divingCourses=await s.loadDivingSchoolCourses(this.divingSchool);let e=c.getMapDocs()[d].icon;e.size="large";this.markers.push({icon:e,latitude:this.divingSchool.position.geopoint.latitude,longitude:this.divingSchool.position.geopoint.longitude})}async componentDidLoad(){this.slider=new b(".slider-diving-school",{speed:400,spaceBetween:100,allowTouchMove:false,autoHeight:true});await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("#map");const e=this.el.querySelector("#map-container");e.setAttribute("style","height: "+l(this.divingSchool)+"px");this.mapElement["mapLoaded"]().then((()=>{this.mapElement.triggerMapResize()}));this.mapElement.triggerMapResize()}disconnectedCallback(){if(this.dsSubscription)this.dsSubscription.unsubscribe()}render(){return[i("ion-header",{key:"46b10b798d551242233bd084642a9863d9caa80f"},i("app-item-cover",{key:"c2727f5878945e87a01f59c5a6bdf73fbf3ad655",item:this.divingSchool})),i("ion-header",{key:"09f2c78b6cd17eafccd41b36a57ad6d4a045875b"},i("ion-toolbar",{key:"8c237c2477c151448b6dfaba890fbe3ca18a8489",color:"school",class:"no-safe-padding"},this.divingSchool&&!this.divingSchool.coverURL?[i("ion-buttons",{slot:"start"},this.admin?i("ion-menu-button",null):i("ion-button",{onClick:()=>r.goBack(),"icon-only":true},i("ion-icon",{name:"arrow-back"}))),i("ion-buttons",{slot:"end"},this.admin?i("ion-button",{onClick:()=>s.presentDivingSchoolUpdate(this.dsid),"icon-only":true},i("ion-icon",{name:"create"})):undefined)]:undefined,i("ion-title",{key:"f324743de386cb869ff1daa5e8ee71495d116feb"},this.divingSchool.displayName))),i("app-header-segment-toolbar",{key:"4e3aafbf62dc44fbe24490ba93f59f1f174f02cd",color:"school",swiper:this.slider,titles:this.titles}),i("ion-content",{key:"322e6e878b54ef1f34be99340fbb417a0a88dcd0",class:"slides"},this.divingSchool&&this.divingSchool.coverURL?i("ion-fab",{vertical:"top",horizontal:"start",slot:"fixed",style:{marginTop:f(2)}},this.admin?i("ion-fab-button",{class:"fab-icon"},i("ion-menu-button",null)):i("ion-fab-button",{onClick:()=>r.goBack(),class:"fab-icon"},i("ion-icon",{name:"arrow-back-circle-outline"}))):undefined,this.admin?i("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed",style:{marginTop:f(2)}},i("ion-fab-button",{onClick:()=>s.presentDivingSchoolUpdate(this.dsid),class:"fab-icon"},i("ion-icon",{name:"create"}))):undefined,i("swiper-container",{key:"9595ab086b98135e7d8d261cc4fe9e14e54214a4",class:"slider-diving-school swiper"},i("swiper-wrapper",{key:"97f9cc78575c56ef68c4026fb86bf7ae24f57592",class:"swiper-wrapper"},i("swiper-slide",{key:"626dcad270c0a98f4bb60ad5cce8eb2f4a40708b",class:"swiper-slide"},i("ion-list",{key:"93acad9b62e322c2377cc64ff5c7a2efedf7a258",class:"ion-no-padding"},i("ion-list-header",{key:"698d734666e9863d2812c57e218e0394271a67e6"},i("ion-label",{key:"cab6ef2bf9af890b05fc2ca5a41a38c27bde9d63",color:"school"},i("my-transl",{key:"e009c5217b691c0d0da5d9ad8fbdf20f398c566b",tag:"general-information",text:"General Information"}))),i("ion-item",{key:"e80a136c2c09978f6b993c526a6a8d73c2a2d0b6"},i("ion-label",{key:"3937c8f4b04dae75605d0a9c0f7bfed9c1144858",class:"ion-text-wrap"},i("ion-text",{key:"d1d369f0baef4cbb4c005865d8874ce9d67d8de5",color:"dark"},i("p",{key:"1547a8a91fe4a06b8c49053c718060361f4cfe06"},this.divingSchool.description)))),this.divingSchool.email?i("ion-item",{button:true,href:"mailto:"+this.divingSchool.email},i("ion-icon",{slot:"start",name:"at-outline"}),i("ion-label",null,this.divingSchool.email)):undefined,this.divingSchool.phoneNumber?i("ion-item",{button:true,href:"tel:"+this.divingSchool.phoneNumber},i("ion-icon",{slot:"start",name:"call-outline"}),i("ion-label",null,this.divingSchool.phoneNumber)):undefined,this.divingSchool.website?i("ion-item",{button:true,href:"http://"+this.divingSchool.website,target:"_blank"},i("ion-icon",{slot:"start",name:"link-outline"}),i("ion-label",null,this.divingSchool.website)):undefined,this.divingSchool.facebook?i("ion-item",{button:true,href:"https://www.facebook.com/"+this.divingSchool.facebook,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-facebook"}),i("ion-label",null,this.divingSchool.facebook)):undefined,this.divingSchool.instagram?i("ion-item",{button:true,href:"https://www.instagram.com/"+this.divingSchool.instagram,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-instagram"}),i("ion-label",null,this.divingSchool.instagram)):undefined,this.divingSchool.twitter?i("ion-item",{button:true,href:"https://www.twitter.com/"+this.divingSchool.twitter,target:"_blank"},i("ion-icon",{slot:"start",name:"logo-twitter"}),i("ion-label",null,"@",this.divingSchool.twitter)):undefined)),i("swiper-slide",{key:"96e5f649d76a9a286116fb66a298eb3eff81971f",class:"swiper-slide"},i("div",{key:"351e8571997feac3db8e71a600bcc8c05914d713",id:"map-container"},i("app-map",{key:"39e5d1e067ad2d123c82b8270ccedb066d67926c",id:"map",pageId:"dive-site-details",center:this.divingSchool,markers:this.markers}))),i("swiper-slide",{key:"77e8c7c70c9d16df8c53526b07d001cdec226ddb",class:"swiper-slide"},i("ion-grid",{key:"7bdeb22d8649d06531f9e401fcb2e19068b41abd"},i("ion-row",{key:"1b4eb1eacb2228009d06c150f6e8d505dd741a3c",class:"ion-text-start"},this.divingCourses.divingSchoolCourses.map((e=>i("ion-col",{"size-sm":"12","size-md":"6","size-lg":"4"},i("app-dive-course-card",{divingCourse:e,edit:false}))))))),this.admin?i("swiper-slide",{class:"swiper-slide"},i("app-users-list",{item:this.divingSchool,show:["owner","editor","instructor"]})):i("swiper-slide",{class:"swiper-slide"},i("app-calendar",{calendarId:"diving-school-calendar",addEvents:{trips:this.diveTrips}}))))),this.admin?i("ion-footer",{class:"ion-no-border"},i("ion-toolbar",null,i("ion-button",{expand:"block",fill:"solid",color:"danger",onClick:()=>s.deleteDivingSchool(this.dsid)},i("ion-icon",{slot:"start",name:"trash"}),i("my-transl",{tag:"delete",text:"Delete",isLabel:true})))):undefined]}get el(){return t(this)}};u.style=p;export{u as page_diving_school_details};