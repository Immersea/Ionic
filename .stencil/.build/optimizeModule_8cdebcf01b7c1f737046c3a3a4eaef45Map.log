{"version":3,"names":["pageSupportCss","PageSupportStyle0","PageSupport","name","valid","value","componentWillLoad","Network","getStatus","then","status","connected","this","network","email","UserService","userProfile","inputHandler","event","detail","checkFields","subject","body","send","emailSubject","encodeURI","emailBody","uid","messagesent","render","h","key","tag","text","color","Environment","getAppColor","scrollEvents","onIonScroll","ev","scrollTop","scrollTopValue","heightPx","link","lines","onFormItemChanged","onIsValid","validator","options","min","max","expand","href","onClick","disabled","slot"],"sources":["src/components/udive/pages/common/page-support/page-support.scss?tag=page-support","src/components/udive/pages/common/page-support/page-support.tsx"],"sourcesContent":["page-support {\n    /* Component styles go here */\n}\n","import { Network } from \"@capacitor/network\";\nimport { Component, h, State } from \"@stencil/core\";\nimport { Environment } from \"../../../../../global/env\";\nimport { InputValidator } from \"../../../../../interfaces/interfaces\";\nimport { UserService } from \"../../../../../services/common/user\";\n\n@Component({\n  tag: \"page-support\",\n  styleUrl: \"page-support.scss\",\n})\nexport class PageSupport {\n  @State() email: InputValidator = {\n    name: \"email\",\n    valid: false,\n    value: \"\",\n  };\n  @State() subject: InputValidator = {\n    name: \"subject\",\n    valid: false,\n    value: \"\",\n  };\n  @State() body: InputValidator = {\n    name: \"body\",\n    valid: false,\n    value: \"\",\n  };\n  @State() network = false;\n  @State() send = false;\n  @State() scrollTop = 0;\n\n  emailSubject: string;\n  emailBody: string;\n\n  componentWillLoad() {\n    Network.getStatus().then((status) => {\n      if (status.connected) {\n        this.network = true;\n      } else {\n        this.network = false;\n      }\n    });\n    this.email.value =\n      UserService && UserService.userProfile\n        ? UserService.userProfile.email\n        : \"\";\n    this.email.valid = true;\n  }\n\n  inputHandler(event) {\n    this[event.detail.name] = event.detail;\n  }\n\n  checkFields() {\n    if (this.email.valid && this.subject.valid && this.body.valid) {\n      this.send = true;\n    } else {\n      this.send = false;\n    }\n    this.emailSubject = encodeURI(\n      \"[Mobile Decoplanner support] \" + this.subject.value\n    );\n    this.emailBody = encodeURI(\n      \"User:\\n\" +\n        this.email.value +\n        (UserService.userProfile && UserService.userProfile.uid\n          ? \" (id: \" + UserService.userProfile.uid + \")\"\n          : \"\") +\n        \"\\n\\n\\nProblem:\\n\" +\n        this.body.value\n    );\n  }\n\n  messagesent() {\n    this.subject.value = \"\";\n    this.subject.valid = false;\n    this.body.value = \"\";\n    this.body.valid = false;\n    this.checkFields();\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <app-navbar\n          tag='support'\n          text='Support'\n          color={Environment.getAppColor()}\n        ></app-navbar>\n      </ion-header>,\n\n      <ion-content\n        scrollEvents\n        onIonScroll={(ev) => (this.scrollTop = ev.detail.scrollTop)}\n      >\n        <app-banner\n          scrollTopValue={this.scrollTop}\n          heightPx={250}\n          link='assets/images/Jarrod-Stargate.jpg'\n        ></app-banner>\n        <app-form-item\n          label-tag='email'\n          label-text='Email'\n          name='email'\n          lines='full'\n          value={this.email.value}\n          input-type='email'\n          onFormItemChanged={(ev) => this.inputHandler(ev)}\n          onIsValid={() => this.checkFields()}\n          validator={[\"required\", \"email\"]}\n        ></app-form-item>\n        <app-form-item\n          label-tag='subject'\n          label-text='Subject'\n          name='subject'\n          lines='full'\n          value={this.subject.value}\n          input-type='text'\n          onFormItemChanged={(ev) => this.inputHandler(ev)}\n          onIsValid={() => this.checkFields()}\n          validator={[\n            \"required\",\n            {\n              name: \"length\",\n              options: { min: 5, max: null },\n            },\n          ]}\n        ></app-form-item>\n        <app-form-item\n          label-tag='text'\n          label-text='Text'\n          name='body'\n          lines='full'\n          value={this.body.value}\n          input-type='text'\n          text-rows='10'\n          onFormItemChanged={(ev) => this.inputHandler(ev)}\n          onIsValid={() => this.checkFields()}\n          validator={[\n            \"required\",\n            {\n              name: \"length\",\n              options: { min: 10, max: null },\n            },\n          ]}\n        ></app-form-item>\n        <ion-button\n          expand='block'\n          href={\n            \"mailto:decoplan@gue.com?subject=\" +\n            this.emailSubject +\n            \"&body=\" +\n            this.emailBody\n          }\n          onClick={() => this.messagesent()}\n          disabled={!this.network || !this.send}\n        >\n          <ion-icon name='send' slot='start'></ion-icon>\n          <my-transl tag='send' text='Send'></my-transl>\n        </ion-button>\n      </ion-content>,\n    ];\n  }\n}\n"],"mappings":"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","ignoreList":[]}