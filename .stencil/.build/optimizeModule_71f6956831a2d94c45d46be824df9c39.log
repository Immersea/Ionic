import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as s}from"./p-c2915cc5.js";import{l as o}from"./p-1af05547.js";import{a6 as n,aa as c,S as d,E as l,T as r}from"./p-944b5726.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const f="modal-datasheet-propertyname ion-list{width:100%}";const h=f;const m=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyNames=undefined;this.datasheetPropertyName=undefined;this.updateView=true;this.validDatasheetPropertyName=false}async componentWillLoad(){await this.loadDatasheetPropertyNames()}async loadDatasheetPropertyNames(){await n.downloadDatasheetSettings();this.datasheetPropertyNames=o.exports.cloneDeep(n.getDatasheetPropertyNames());if(this.datasheetPropertyNames&&this.datasheetPropertyNames.length>0){this.datasheetPropertyName=this.datasheetPropertyNames[0]}else{this.addDatasheetPropertyName()}this.validateDatasheet()}selectType(e){const t=e.detail.value;this.datasheetPropertyName=this.datasheetPropertyNames.find((e=>e.nameId==t));this.validateDatasheet()}selectPropertyType(e){this.datasheetPropertyName.nameType=e.detail.value;this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="nameId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyName[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyName=o.exports.isString(this.datasheetPropertyName.nameId)&&o.exports.isString(this.datasheetPropertyName.nameName)&&o.exports.isNumber(this.datasheetPropertyName.position)&&o.exports.isNumber(this.datasheetPropertyName.decimals);this.updateView=!this.updateView}addDatasheetPropertyName(){this.datasheetPropertyName=new c;this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}duplicateDatasheetPropertyName(){this.datasheetPropertyName=o.exports.cloneDeep(this.datasheetPropertyName);this.datasheetPropertyName.nameId=this.datasheetPropertyName.nameId+"_rev.";this.datasheetPropertyNames.push(this.datasheetPropertyName);this.index=this.datasheetPropertyNames.length-1}async deleteDatasheetPropertyName(){try{this.datasheetPropertyNames.splice(this.index,1);this.index=0;this.datasheetPropertyName=this.datasheetPropertyNames[0];this.validateDatasheet()}catch(e){if(e)d.presentAlertError(e)}}async save(e=true){await n.uploadDatasheetSettings("propertyName",this.datasheetPropertyNames);return e?s.dismiss():true}async cancel(){return s.dismiss()}checkComments(){this.datasheetPropertyNames.map((e=>{const t=o.exports.split(e.nameName,"(");if(t.length<2){return null}const a=t[1];const i=o.exports.split(a,"Â°C");if(i.length<2){return null}}))}render(){return t(a,{key:"e3d10efb896e9ce3612575f5e61fdc19864e29f8"},t("ion-content",{key:"009f31812b218e72f0073face91caf1154d7d943"},t("ion-grid",{key:"06cc78b2bea88d9458f86791a09467f89b016b79"},t("ion-row",{key:"aadf7e88bf3be9d18615ec9988def8a10b7ad0cf"},t("ion-col",{key:"c68d95589a21ce4adda0871d1601155a73f1b41f"},t("app-select-search",{key:"444083137ef073ccd810c632931226ff09183340",color:"trasteel",label:{tag:"datasheet_propertyName",text:"Datasheet Property Name"},value:this.index?this.datasheetPropertyNames[this.index].nameId:this.datasheetPropertyNames[0].nameId,lines:"none",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyNames,selectValueId:"nameId",selectValueText:["nameName"],disabled:!this.validDatasheetPropertyName})),t("ion-col",{key:"1f5dfd4eee6b2d10c6eec45adc5ded39ab1f710e",size:"1",class:"ion-text-center"},t("ion-button",{key:"3da5b16701962261e933b31723c307709f4807ab",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.addDatasheetPropertyName()},t("ion-icon",{key:"e582387ab15578d496db63e6e99f38b3b0a6aeca",name:"add",slot:"start"}))),t("ion-col",{key:"9648327dddb79ecd2892d111ffda093ff107d09f",size:"1",class:"ion-text-center"},t("ion-button",{key:"2aa6ab692351c44cfc5b243c5049b6d43f0ca9cc",fill:"clear",disabled:!this.validDatasheetPropertyName,onClick:()=>this.duplicateDatasheetPropertyName()},t("ion-icon",{key:"afe4f375a22961cda2138ca64c55c4f354b7db47",slot:"start",name:"duplicate"}))),t("ion-col",{key:"f8b6f5f21903f2243d81b014070cb29d02fedf5f",size:"1",class:"ion-text-center"},t("ion-button",{key:"0d0dd9c6d970112bd6bccbe537219b3ec91727af",fill:"clear",color:"danger",disabled:this.datasheetPropertyNames.length==0,onClick:()=>this.deleteDatasheetPropertyName()},t("ion-icon",{key:"4bcbf1dcbaa620cd6476c0b6ce81ad42c619b07a",slot:"start",name:"trash"}))))),t("ion-item",{key:"3e6f4c0de25b8d2208b5e01c6dd9e314f7ba7a0e",lines:"none"},t("ion-select",{key:"10e7de858823d71f5023555876fd187c32197082",color:"trasteel",id:"selectType",interface:"action-sheet",label:r.getTransl("datasheet_propertyType","Datasheet Property Type"),"label-placement":"floating",onIonChange:e=>this.selectPropertyType(e)},n.datasheetPropertyTypes.map((e=>t("ion-select-option",{value:e.typeId},e.typeName))))),t("app-form-item",{key:"df589ce1a6f117b0bc69af6626b6105dcdc4c17d","label-text":"Position",value:this.datasheetPropertyName.position,name:"position","input-type":"number",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"55cd5d4309cfad01e86b1a859880455261d3fae9","label-text":"ID",value:this.datasheetPropertyName.nameId,name:"nameId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"nameId",list:n.getDatasheetPropertyNames()}}]}),t("app-form-item",{key:"894b0c0e40f0099d3eb63a9fd25d66f64d53cd7a","label-text":"Name",value:this.datasheetPropertyName.nameName,name:"nameName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"abe4bc36bb6ccbf6d07723774456d0beaf8ab42a","label-text":"Decimals",value:this.datasheetPropertyName.decimals,name:"decimals","input-type":"number",inputStep:"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"a9f2169efc18e900373a8c5150a90cf871f97f30","label-text":"Description Left",value:this.datasheetPropertyName.nameDescLeft,name:"nameDescLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"8737d94ae5d2fc99822b04ab33ca305b5a3fae9f","label-text":"Description Right",value:this.datasheetPropertyName.nameDescRight,name:"nameDescRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"6a397596585baa09d6e59ff41c01c3974b746327","label-text":"Comments",value:this.datasheetPropertyName.comments,name:"comments","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"}),t("app-form-item",{key:"ffdec7429f7e9fa4608fb196294a460c73cae9ba","label-text":"Dimension",value:this.datasheetPropertyName.dimension,name:"dimension","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e),labelPosition:"floating"})),t("app-modal-footer",{key:"137699c6caec46fec681dfaa9ef127632269b720",color:l.getAppColor(),disableSave:!this.validDatasheetPropertyName,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};m.style=h;export{m as modal_datasheet_propertyname};