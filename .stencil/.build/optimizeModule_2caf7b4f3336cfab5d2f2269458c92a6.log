import{r as e,h as t,H as a,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{o as s}from"./p-5d4a8e1f.js";import{l as o}from"./p-1af05547.js";import{E as c}from"./p-a9f4af61.js";import{Q as d,Z as n,S as r}from"./p-4a2e1f71.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";import"./p-2578d979.js";import"./p-7ee16e8d.js";const l="modal-datasheet-propertytype ion-list{width:100%}";const f=l;const p=class{constructor(t){e(this,t);this.index=0;this.datasheetPropertyTypes=undefined;this.datasheetPropertyType=undefined;this.updateView=true;this.validDatasheetPropertyType=false}async componentWillLoad(){await this.loadDatasheetPropertyTypes()}async loadDatasheetPropertyTypes(){await d.downloadDatasheetSettings();this.datasheetPropertyTypes=o.exports.cloneDeep(d.getDatasheetPropertyTypes());if(this.datasheetPropertyTypes&&this.datasheetPropertyTypes.length>0){this.datasheetPropertyType=this.datasheetPropertyTypes[0]}else{this.addDatasheetPropertyType()}this.validateDatasheet()}selectType(e){this.datasheetPropertyType=this.datasheetPropertyTypes.find((t=>t.typeId==e.detail.value));this.validateDatasheet()}handleChange(e){const t=e.detail.name;let a=e.detail.value;if(t=="typeId"){a=a.replace(/\s+/g,"-").trim().toLowerCase()}this.datasheetPropertyType[t]=a;this.validateDatasheet()}validateDatasheet(){this.validDatasheetPropertyType=o.exports.isString(this.datasheetPropertyType.typeId)&&o.exports.isString(this.datasheetPropertyType.typeName);this.updateView=!this.updateView}addDatasheetPropertyType(){this.datasheetPropertyType=new n;this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}duplicateDatasheetPropertyType(){this.datasheetPropertyType=o.exports.cloneDeep(this.datasheetPropertyType);this.datasheetPropertyType.typeId=this.datasheetPropertyType.typeId+"_rev.";this.datasheetPropertyTypes.push(this.datasheetPropertyType);this.index=this.datasheetPropertyTypes.length-1}async deleteDatasheetPropertyType(){try{this.datasheetPropertyTypes.splice(this.index,1);this.index=0;this.datasheetPropertyType=this.datasheetPropertyTypes[0];this.validateDatasheet()}catch(e){if(e)r.presentAlertError(e)}}async save(e=true){await d.uploadDatasheetSettings("propertyType",this.datasheetPropertyTypes);return e?s.dismiss():true}async cancel(){return s.dismiss()}render(){return t(a,{key:"e7175fe17231d656aeb711fdb84523a3cb39fed4"},t("ion-content",{key:"022fd50d8047f4769f35a1526837606e16530fbf"},t("ion-grid",{key:"9dd8677e994fa2a71d99d5fa303f0f98502c4254"},t("ion-row",{key:"36d85871505e03505d3a5cecb86f292ad43f8463"},t("ion-col",{key:"ed024f6c6495812763857b5b6c40f1d8fc1cc949"},t("app-select-search",{key:"5461cbb54a3334b23eb343605ba3e17c2e235ebe",color:"trasteel",label:{tag:"datasheet_major_family",text:"Datasheet Major Family"},value:this.index?this.datasheetPropertyTypes[this.index].typeId:this.datasheetPropertyTypes[0].typeId,lines:"none","label-placement":"floating",selectFn:e=>this.selectType(e),selectOptions:this.datasheetPropertyTypes,selectValueId:"typeId",selectValueText:["typeName"],disabled:!this.validDatasheetPropertyType})),t("ion-col",{key:"bd5cba8153a7e5eacc2995c9b2ed1923fac7d7cb",size:"1",class:"ion-text-center"},t("ion-button",{key:"f48fe1674122a7324754e955f1236cf3d6057d46",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.addDatasheetPropertyType()},t("ion-icon",{key:"c2cc3c2ddb159b9327e5a21428b68123f865023d",name:"add",slot:"start"}))),t("ion-col",{key:"50780ca9e42fa35c4693794b909ed7208cda27a5",size:"1",class:"ion-text-center"},t("ion-button",{key:"f386c7a064948eefea1f7f996ca3a952cd569406",fill:"clear",disabled:!this.validDatasheetPropertyType,onClick:()=>this.duplicateDatasheetPropertyType()},t("ion-icon",{key:"36719c180cd3439509429796f2ab6553458a05dc",slot:"start",name:"duplicate"}))),t("ion-col",{key:"e059dfa65e5d0f561f7a65907680ecdff81dc62f",size:"1",class:"ion-text-center"},t("ion-button",{key:"a5057f00e2afd2ae01b1dc824b1b5a0120ff07e8",fill:"clear",color:"danger",disabled:this.datasheetPropertyTypes.length==0,onClick:()=>this.deleteDatasheetPropertyType()},t("ion-icon",{key:"d9373167c43489931e065e0bdc4576e42eb6e932",slot:"start",name:"trash"}))))),t("app-form-item",{key:"8b192ff33f08b0dc7634d25347abef551a16b1e7","label-text":"ID",value:this.datasheetPropertyType.typeId,name:"typeId","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required",{name:"uniqueid",options:{type:"list",index:"propertyTypeId",list:d.getDatasheetPropertyTypes()}}]}),t("app-form-item",{key:"d8f71b5c7ace04f5cfbdd9672d121d81ca637b65","label-text":"Name",value:this.datasheetPropertyType.typeName,name:"typeName","input-type":"string",onFormItemChanged:e=>this.handleChange(e),labelPosition:"fixed",validator:["required"]}),t("app-form-item",{key:"7487c161cf295889d125f6a9e0de8a9c234fe43c","label-text":"Value Left Description",value:this.datasheetPropertyType.typeLeft,name:"typeLeft","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"5df9a355238c1f629c77134fb125e2521bc19530","label-text":"Value Right Description",value:this.datasheetPropertyType.typeRight,name:"typeRight","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)}),t("app-form-item",{key:"c3421f2e261aa671c5f5fe0fd19f9f77d78582d1","label-text":"Value Limit Description",value:this.datasheetPropertyType.typeLimit,name:"typeLimit","input-type":"text",multiLanguage:true,"text-rows":"1",onFormItemChanged:e=>this.handleChange(e)})),t("app-modal-footer",{key:"3592dc066a0c8bebadd44ceb832a30487afa6b78",color:c.getAppColor(),disableSave:!this.validDatasheetPropertyType,onCancelEmit:()=>this.cancel(),onSaveEmit:()=>this.save()}))}get el(){return i(this)}};p.style=f;export{p as modal_datasheet_propertytype};