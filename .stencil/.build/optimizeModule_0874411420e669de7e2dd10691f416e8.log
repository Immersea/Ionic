import{r as e,h as t,H as i,f as o}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{m as a}from"./p-c2915cc5.js";import{a6 as l,b4 as n,T as s}from"./p-773bd3de.js";import{l as c}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-c11a967f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="popover-datasheets-filter{}popover-datasheets-filter ion-list{min-height:300px}";const d=r;const h=class{constructor(t){e(this,t);this.filter=undefined;this.showBaseFilter=true;this.propertyNames=[];this.newFilterCondition=undefined;this.showAddNewProperty=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.datasheetMajorFamilies=l.getDatasheetMajorFamilies();this.datasheetFamilies=l.getDatasheetFamilies();this.propertyNames=l.getDatasheetPropertyNames();this.resetNewFilterCondition()}resetNewFilterCondition(){this.newFilterCondition=new n({field:"properties",fieldName:"name",valueName:"mgo",comparisonField:"lower"});this.validateProperty()}deleteCondition(e){this.filter.properties.splice(e,1);this.updateView=!this.updateView}handleFilter(e){this.filter[e.detail.name]=e.detail.value}handleMajorFamilySelect(e){this.filter.majorFamilyId=e.detail.value}handleFamilySelect(e){this.filter.familyId=e.detail.value}segmentChanged(e){if(e.detail.value=="base"){this.showBaseFilter=true}else{this.showBaseFilter=false}}selectPropertyName(e){this.newFilterCondition.valueName=e.detail.value;this.validateProperty()}selectOperator(e){this.newFilterCondition.operator=e.detail.value;this.validateProperty()}selectValue(e){this.newFilterCondition.value=e.detail.value;this.validateProperty()}addNewProperty(){this.filter.properties.push(c.exports.cloneDeep(this.newFilterCondition));this.resetNewFilterCondition()}validateProperty(){this.showAddNewProperty=c.exports.isString(this.newFilterCondition.field)&&c.exports.isString(this.newFilterCondition.fieldName)&&c.exports.isString(this.newFilterCondition.operator)&&c.exports.isString(this.newFilterCondition.valueName)&&!c.exports.isNull(this.newFilterCondition.value)}close(){a.dismiss()}save(){a.dismiss(this.filter)}render(){return t(i,{key:"adf7993028fdf095f6127d37cfb00b39bbf50330"},t("ion-header",{key:"9adf9016d891b5ea3de56c4c447d93f66e1310fa",translucent:true},t("ion-toolbar",{key:"5b0dc86eb336f1d494076c52dcfa7300ea702f09"},t("ion-title",{key:"00a3aafccb9ba9bb06620c5d5881716ad964b336"},"Filter Datasheets"))),t("ion-content",{key:"b4fe1813504d830c0a5e5dc655bad2900bdf8088"},t("ion-segment",{key:"a7abebe6279f8a13b14d39a41909ae94d71c8ec5",mode:"ios",color:"trasteel",onIonChange:e=>this.segmentChanged(e),value:"base"},t("ion-segment-button",{key:"35db8ae0bcc0fcabef8c2bd7aeaf93e180981afb",value:"base"},t("ion-label",{key:"cabd60f73c0ef497134353082952b6ae1f284836"},"Base")),t("ion-segment-button",{key:"d51af2add259dfcab7c7f6406bc7919434aa7190",value:"advanced"},t("ion-label",{key:"f3e14a6e62e56b9567b3e825dd269c186c0b9d8a"},"Advanced"))),t("ion-list",{key:"27dd9ef4eb81d8fd2c75134be45973e09c8e13ba"},this.showBaseFilter?[t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("majorFamily","Major Family"),"label-placement":"floating",onIonChange:e=>this.handleMajorFamilySelect(e),value:this.filter.majorFamilyId},this.datasheetMajorFamilies.map((e=>t("ion-select-option",{value:e.majorFamilyId},e.majorFamilyName))))),t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("family","Family"),"label-placement":"floating",onIonChange:e=>this.handleFamilySelect(e),value:this.filter.familyId},this.datasheetFamilies.map((e=>t("ion-select-option",{value:e.familyId},e.familyName))))),t("app-form-item",{"label-text":"Show Old Products",value:this.filter.oldProduct,name:"oldProduct","input-type":"boolean",onFormItemChanged:e=>this.handleFilter(e)})]:[t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("app-select-search",{color:"trasteel",value:this.newFilterCondition.valueName,lines:"none",disabled:this.propertyNames.length==0,selectFn:e=>this.selectPropertyName(e),selectOptions:this.propertyNames,selectValueId:"nameId",selectValueText:["nameName"]})),t("ion-col",{size:"3"},t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",interface:"action-sheet",onIonChange:e=>this.selectOperator(e),value:this.newFilterCondition.operator},t("ion-select-option",{value:">="},t("ion-label",null,">=")),t("ion-select-option",{value:">"},t("ion-label",null,">")),t("ion-select-option",{value:"="},t("ion-label",null,"=")),t("ion-select-option",{value:"<"},t("ion-label",null,"<")),t("ion-select-option",{value:"<="},t("ion-label",null,"<=")))))),t("ion-row",null,t("ion-col",null,t("app-form-item",{value:this.newFilterCondition.value,name:"typical","input-type":"number",onFormItemChanged:e=>this.selectValue(e)})),t("ion-col",{size:"3"},t("ion-button",{"icon-only":true,fill:"outline",onClick:()=>this.addNewProperty(),disabled:!this.showAddNewProperty},t("ion-icon",{name:"add",color:"primary"}))))),t("ion-item-divider",null,t("ion-label",null,"Conditions")),this.filter.properties.map(((e,i)=>t("ion-item",null,t("ion-label",null,l.getDatasheetPropertyNames("id",e.valueName)[0].nameName+" "+e.operator+" "+e.value),t("ion-button",{"icon-only":true,fill:"clear",onClick:()=>this.deleteCondition(i)},t("ion-icon",{name:"trash",color:"danger"})))))])),t("ion-footer",{key:"61136a8fa7b889d8be02f2f0f81321cd7e534981"},t("app-modal-footer",{key:"4bd6e7674d4d7ae1ee87fa6fb327739f345ccf17",saveTag:{tag:"filter",text:"Filter"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return o(this)}};h.style=d;export{h as popover_datasheets_filter};