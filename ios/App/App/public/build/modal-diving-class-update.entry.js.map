{"file":"modal-diving-class-update.entry.esm.js","mappings":"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","names":["each","cloneDeep","toNumber","isString"],"sources":["src/components/udive/modals/diving-school/modal-diving-class-update/modal-diving-class-update.scss?tag=modal-diving-class-update","src/components/udive/modals/diving-school/modal-diving-class-update/modal-diving-class-update.tsx"],"sourcesContent":["modal-diving-class-update {\n  ion-list {\n    width: 100%;\n  }\n  app-diving-class-schedule {\n    width: 100%;\n  }\n  ion-segment-button {\n    --color-checked: var(--ion-color-divingclass-contrast);\n  }\n}\n","import {Component, h, Host, Prop, State, Element} from \"@stencil/core\";\nimport {DivingClass} from \"../../../../../interfaces/udive/diving-class/divingClass\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {modalController, alertController} from \"@ionic/core\";\nimport {cloneDeep, each, isString, toNumber} from \"lodash\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {DivingClassesService} from \"../../../../../services/udive/divingClasses\";\nimport {\n  DivingSchoolsService,\n  DIVESCHOOLSSCOLLECTION,\n} from \"../../../../../services/udive/divingSchools\";\nimport {DivingSchool} from \"../../../../../interfaces/udive/diving-school/divingSchool\";\nimport {Agency} from \"../../../../../interfaces/udive/diving-class/divingClass\";\nimport {SystemService} from \"../../../../../services/common/system\";\nimport Swiper from \"swiper\";\n\n@Component({\n  tag: \"modal-diving-class-update\",\n  styleUrl: \"modal-diving-class-update.scss\",\n})\nexport class ModalDivingClassUpdate {\n  @Element() el: HTMLElement;\n  @Prop() divingClassId: string = undefined;\n  @Prop() collectionId: string;\n  @Prop() organiserId: string;\n  @State() divingClass: DivingClass;\n  @State() updateView = true;\n  @State() validClass = false;\n  divingSchool: DivingSchool;\n  divingCourses: any[];\n  @State() selectedCourse: any;\n  divingAgencies: {[agencyId: string]: Agency};\n  placeholder: string;\n  @State() addressText: string;\n  @State() titles = [\n    {tag: \"details\"},\n    {tag: \"schedule\"},\n    {tag: \"team\"},\n    {tag: \"students\"},\n  ];\n  @State() slider: Swiper;\n  appBookings: HTMLAppDiveClassBookingsElement;\n  appSchedule: HTMLAppDivingClassScheduleElement;\n  selectCourseElement: HTMLIonSelectElement;\n  statusTitles: {\n    active: string;\n    closed: string;\n    cancelled: string;\n  };\n  @State() selectGotFocus: boolean = false;\n\n  async componentWillLoad() {\n    await this.loadDivingClass();\n    this.statusTitles = {\n      active: TranslationService.getTransl(\"active\", \"Active\"),\n      closed: TranslationService.getTransl(\"closed\", \"Closed\"),\n      cancelled: TranslationService.getTransl(\"cancelled\", \"Cancelled\"),\n    };\n    this.placeholder = TranslationService.getTransl(\n      \"insert-title\",\n      \"Insert title\"\n    );\n    //load diving school details\n    //check if organiser is the loaded diving school\n    if (this.organiserId == DivingSchoolsService.selectedDivingSchoolId) {\n      this.divingSchool = DivingSchoolsService.selectedDivingSchool;\n    } else if (this.collectionId == DIVESCHOOLSSCOLLECTION) {\n      //load diving school\n      this.divingSchool = await DivingSchoolsService.getDivingSchool(\n        this.organiserId\n      );\n    }\n    this.divingAgencies = SystemService.systemPreferences.divingAgencies;\n    this.divingCourses = await SystemService.getDivingCoursesForSchool(\n      this.divingSchool\n    );\n\n    //select diving class course\n    if (this.divingClass && this.divingClass.course) {\n      this.selectedCourse = this.divingCourses.find(\n        (course) =>\n          course.agencyId === this.divingClass.course.agencyId &&\n          course.id === this.divingClass.course.certificationId\n      );\n    }\n  }\n\n  async loadDivingClass() {\n    if (this.divingClassId) {\n      this.divingClass = await DivingClassesService.getDivingClass(\n        this.divingClassId\n      );\n      this.collectionId = this.divingClass.organiser.collectionId;\n      this.organiserId = this.divingClass.organiser.id;\n    } else {\n      this.divingClass = new DivingClass();\n      this.divingClass.organiser = {\n        collectionId: this.collectionId,\n        id: this.organiserId,\n      };\n      this.divingClass.users = {\n        [UserService.userRoles.uid]: [\"owner\", \"instructor\"],\n      };\n    }\n    this.addressText =\n      this.divingClass.location && this.divingClass.location.display_name\n        ? this.divingClass.location.display_name\n        : null;\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-dive-class\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: false,\n      autoHeight: true,\n      on: {\n        slideChange: () => {\n          this.slider ? this.slider.updateAutoHeight() : null;\n        },\n      },\n    });\n    this.appBookings = this.el.getElementsByTagName(\n      \"app-dive-class-bookings\"\n    )[0];\n    this.appSchedule = this.el.getElementsByTagName(\n      \"app-diving-class-schedule\"\n    )[0];\n    this.createCourseSelectOptions();\n    this.validateClass();\n  }\n\n  createCourseSelectOptions() {\n    //create select options\n    this.selectCourseElement = this.el.querySelector(\"#dive-course-select\");\n    const customSiteTypePopoverOptions = {\n      header: TranslationService.getTransl(\"diving-course\", \"Diving Course\"),\n    };\n    //remove previously defined options\n    const selectOptions = Array.from(\n      this.selectCourseElement.getElementsByTagName(\"ion-select-option\")\n    );\n    selectOptions.map((option) => {\n      this.selectCourseElement.removeChild(option);\n    });\n    this.selectCourseElement.interfaceOptions = customSiteTypePopoverOptions;\n    each(this.divingCourses, (course) => {\n      const selectOption = document.createElement(\"ion-select-option\");\n      selectOption.value = course;\n      selectOption.textContent =\n        this.divingAgencies[course.agencyId].name + \" - \" + course.name;\n      this.selectCourseElement.appendChild(selectOption);\n    });\n  }\n\n  async changeCourse(course) {\n    if (\n      this.selectGotFocus &&\n      this.divingClass &&\n      this.divingClass.activities &&\n      this.divingClass.activities.length > 0\n    ) {\n      const alert = await alertController.create({\n        header: TranslationService.getTransl(\"diving-course\", \"Diving Course\"),\n        message: TranslationService.getTransl(\n          \"update-class-activities\",\n          \"This will update all class activities! Are you sure?\"\n        ),\n        buttons: [\n          {\n            text: TranslationService.getTransl(\"ok\", \"OK\"),\n            handler: () => {\n              this.selectGotFocus = false;\n              this.updateCourseDetails(course);\n            },\n          },\n          {\n            text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n            handler: () => {\n              this.selectGotFocus = false;\n              this.createCourseSelectOptions();\n              this.selectedCourse = {...this.selectedCourse};\n            },\n            role: \"cancel\",\n            cssClass: \"secondary\",\n          },\n        ],\n      });\n      alert.present();\n    } else {\n      this.updateCourseDetails(course);\n    }\n  }\n\n  updateCourseDetails(course) {\n    this.selectedCourse = course;\n    this.divingClass.name =\n      this.divingAgencies[this.selectedCourse.agencyId].name +\n      \" - \" +\n      this.selectedCourse.name;\n    this.divingClass.activities = cloneDeep(course.activities);\n    this.divingClass.numberOfStudents = course.numberOfStudents;\n    this.divingClass.course = {\n      certificationId: course.id,\n      agencyId: course.agencyId,\n    };\n    this.appBookings.updateStudentsList();\n    this.appSchedule.updateClassSchedule();\n    this.validateClass();\n  }\n\n  selectLocation(location) {\n    this.divingClass.location = location;\n    this.addressText = location.display_name;\n    this.validateClass();\n  }\n\n  updateStudents(students) {\n    this.divingClass.numberOfStudents = toNumber(students);\n    this.appBookings.updateStudentsList();\n    this.validateClass();\n  }\n\n  updateStatus(status) {\n    this.divingClass.status = status;\n    this.validateClass();\n  }\n\n  handleChange(ev) {\n    this.divingClass[ev.detail.name] = ev.detail.value;\n    this.validateClass();\n  }\n\n  validateClass() {\n    this.validClass =\n      isString(this.divingClass.name) &&\n      this.divingClass.numberOfStudents > 0 &&\n      this.divingClass.location &&\n      isString(this.divingClass.location.display_name) &&\n      isString(this.divingClass.status) &&\n      Object.keys(this.divingClass.schedule).length > 0;\n    this.updateView = !this.updateView;\n  }\n\n  async save() {\n    await DivingClassesService.updateDivingClass(\n      this.divingClassId,\n      this.divingClass\n    );\n    return modalController.dismiss(false);\n  }\n\n  async cancel() {\n    return modalController.dismiss(true);\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.selectedCourse && this.selectedCourse.photoURL ? (\n          <ion-header>\n            <app-item-cover item={this.selectedCourse} />\n          </ion-header>\n        ) : undefined}\n\n        {this.selectedCourse ? (\n          <ion-header>\n            <ion-toolbar color=\"divingclass\">\n              <ion-title>{this.divingClass.name}</ion-title>\n            </ion-toolbar>\n          </ion-header>\n        ) : undefined}\n\n        <app-header-segment-toolbar\n          color=\"divingclass\"\n          swiper={this.slider}\n          titles={this.titles}\n        ></app-header-segment-toolbar>\n        <ion-content class=\"slides\">\n          <swiper-container class=\"slider-dive-class swiper\">\n            <swiper-wrapper class=\"swiper-wrapper\">\n              <swiper-slide class=\"swiper-slide\">\n                <ion-list>\n                  <ion-item>\n                    <ion-label>\n                      <my-transl tag=\"diving-course\" text=\"Diving Course\" />\n                    </ion-label>\n                    <ion-select\n                      id=\"dive-course-select\"\n                      interface=\"action-sheet\"\n                      onIonChange={(ev) => this.changeCourse(ev.detail.value)}\n                      onIonFocus={() => (this.selectGotFocus = true)}\n                      placeholder={TranslationService.getTransl(\n                        \"select\",\n                        \"Select\"\n                      )}\n                      value={this.selectedCourse}\n                    ></ion-select>\n                  </ion-item>\n                  <app-form-item\n                    label-tag=\"name\"\n                    label-text=\"Name\"\n                    value={this.divingClass.name}\n                    name=\"name\"\n                    input-type=\"text\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[\"required\"]}\n                  ></app-form-item>\n                  <ion-item>\n                    <ion-label>\n                      <my-transl\n                        tag=\"number-of-students\"\n                        text=\"Number of Students\"\n                      ></my-transl>\n                    </ion-label>\n                    <ion-select\n                      value={this.divingClass.numberOfStudents}\n                      onIonChange={(ev) => this.updateStudents(ev.detail.value)}\n                      interface=\"popover\"\n                    >\n                      <ion-select-option value={1}>1</ion-select-option>\n                      <ion-select-option value={2}>2</ion-select-option>\n                      <ion-select-option value={3}>3</ion-select-option>\n                      <ion-select-option value={4}>4</ion-select-option>\n                      <ion-select-option value={5}>5</ion-select-option>\n                      <ion-select-option value={6}>6</ion-select-option>\n                      <ion-select-option value={7}>7</ion-select-option>\n                      <ion-select-option value={8}>8</ion-select-option>\n                      <ion-select-option value={9}>9</ion-select-option>\n                      <ion-select-option value={10}>10</ion-select-option>\n                      <ion-select-option value={11}>11</ion-select-option>\n                      <ion-select-option value={12}>12</ion-select-option>\n                      <ion-select-option value={13}>13</ion-select-option>\n                      <ion-select-option value={14}>14</ion-select-option>\n                      <ion-select-option value={15}>15</ion-select-option>\n                    </ion-select>\n                  </ion-item>\n                  <app-form-item\n                    label-tag=\"location\"\n                    label-text=\"Location\"\n                    value={this.addressText}\n                    name=\"location\"\n                    input-type=\"text\"\n                    onFormItemChanged={(ev) =>\n                      (this.addressText = ev.detail.value)\n                    }\n                    onFormLocationSelected={(ev) =>\n                      this.selectLocation(ev.detail)\n                    }\n                    validator={[\"address\"]}\n                  ></app-form-item>\n                  <ion-item>\n                    <ion-label>\n                      <my-transl tag=\"status\" text=\"Status\"></my-transl>\n                    </ion-label>\n                    <ion-select\n                      value={this.divingClass.status}\n                      onIonChange={(ev) => this.updateStatus(ev.detail.value)}\n                      interface=\"popover\"\n                    >\n                      <ion-select-option value=\"active\">\n                        {this.statusTitles.active}\n                      </ion-select-option>\n                      <ion-select-option value=\"closed\">\n                        {this.statusTitles.closed}\n                      </ion-select-option>\n                      <ion-select-option value=\"cancelled\">\n                        {this.statusTitles.cancelled}\n                      </ion-select-option>\n                    </ion-select>\n                  </ion-item>\n                  <app-form-item\n                    label-tag=\"comments\"\n                    label-text=\"Comments\"\n                    value={this.divingClass.comments}\n                    name=\"comments\"\n                    input-type=\"text\"\n                    textRows={4}\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                </ion-list>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <app-diving-class-schedule\n                  divingClass={this.divingClass}\n                  editable={true}\n                  onScheduleEmit={() => this.validateClass()}\n                />\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <app-users-list\n                  item={this.divingClass}\n                  editable\n                  show={[\"owner\", \"divemaster\", \"instructor\"]}\n                />\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <app-dive-class-bookings\n                  divingClass={this.divingClass}\n                  divingClassId={this.divingClassId}\n                  editable={true}\n                />\n              </swiper-slide>\n            </swiper-wrapper>\n          </swiper-container>\n        </ion-content>\n        <app-modal-footer\n          disableSave={!this.validClass}\n          onCancelEmit={() => this.cancel()}\n          onSaveEmit={() => this.save()}\n        />\n      </Host>\n    );\n  }\n}\n"],"version":3}