{"version":3,"names":["modalDiveCardCss","ModalDiveCardStyle0","ModalDiveCard","componentWillLoad","this","updateViewParams","componentDidLoad","validateCard","updateCard","Card","card","save","el","closest","dismiss","close","inputHandler","event","detail","name","value","updateCourse","ev","course","validCard","isString","agencyName","certificationId","isDate","Date","certified","number","render","h","key","tag","text","color","Environment","getAppColor","modal","item","onCertSelected","lines","onFormItemChanged","validator","expiry","instructor","comments","textRows","disableSave","onCancelEmit","onSaveEmit"],"sources":["src/components/udive/modals/user/modal-dive-card/modal-dive-card.scss?tag=modal-dive-card","src/components/udive/modals/user/modal-dive-card/modal-dive-card.tsx"],"sourcesContent":["modal-dive-card {\n  input {\n    text-align: right;\n  }\n  .fixedLabel {\n    min-width: 80% !important;\n    max-width: 80% !important;\n  }\n  ion-item .item-inner {\n    box-shadow: none !important;\n    border-bottom: 1px solid #dedede !important;\n  }\n\n  .item-input .label-md,\n  .item-select .label-md,\n  .item-datetime .label-md {\n    color: rgb(0, 0, 0);\n  }\n}\n","import { Component, h, Prop, Element, State } from \"@stencil/core\";\nimport { isDate, isString } from \"lodash\";\nimport { Card } from \"../../../../../interfaces/udive/user/user-cards\";\nimport { Environment } from \"../../../../../global/env\";\n\n@Component({\n  tag: \"modal-dive-card\",\n  styleUrl: \"modal-dive-card.scss\",\n})\nexport class ModalDiveCard {\n  @Element() el: HTMLElement;\n  @Prop() card: Card;\n  @State() updateCard: Card;\n  @State() agencies: any;\n  @State() validCard = false;\n\n  componentWillLoad() {\n    this.updateViewParams();\n  }\n\n  componentDidLoad() {\n    this.validateCard();\n  }\n\n  async updateViewParams() {\n    this.updateCard = new Card(this.card);\n    this.validateCard();\n  }\n\n  save() {\n    this.el.closest(\"ion-modal\").dismiss(this.updateCard);\n  }\n\n  close() {\n    this.el.closest(\"ion-modal\").dismiss();\n  }\n\n  inputHandler(event: any) {\n    this.updateCard[event.detail.name] = event.detail.value;\n    this.validateCard();\n  }\n\n  updateCourse(ev) {\n    this.updateCard.course = ev.detail;\n    this.validateCard();\n  }\n\n  validateCard() {\n    this.validCard =\n      isString(this.updateCard.course.agencyName) &&\n      isString(this.updateCard.course.certificationId) &&\n      isDate(new Date(this.updateCard.certified)) &&\n      isString(this.updateCard.number);\n  }\n\n  render() {\n    return [\n      <app-navbar\n        tag='dive-card'\n        text='Dive Card'\n        color={Environment.getAppColor()}\n        modal={true}\n      ></app-navbar>,\n\n      <ion-content>\n        <ion-list>\n          <popover-search-diving-course\n            item={this.updateCard.course}\n            onCertSelected={(ev) => this.updateCourse(ev)}\n          />\n          <app-form-item\n            label-tag='number'\n            label-text='Number'\n            lines='inset'\n            value={this.updateCard.number}\n            name='number'\n            input-type='text'\n            onFormItemChanged={(ev) => this.inputHandler(ev)}\n            validator={[\"required\"]}\n          ></app-form-item>\n          <app-form-item\n            label-tag='certified'\n            label-text='Certified'\n            lines='inset'\n            value={this.updateCard.certified}\n            name='certified'\n            input-type='date'\n            onFormItemChanged={(ev) => this.inputHandler(ev)}\n            validator={[\"required\"]}\n          ></app-form-item>\n          <app-form-item\n            label-tag='expiry'\n            label-text='Expiry'\n            lines='inset'\n            value={this.updateCard.expiry}\n            name='expiry'\n            input-type='date'\n            onFormItemChanged={(ev) => this.inputHandler(ev)}\n            validator={[]}\n          ></app-form-item>\n          <app-form-item\n            label-tag='instructor'\n            label-text='Instructor'\n            lines='inset'\n            value={this.updateCard.instructor}\n            name='instructor'\n            input-type='text'\n            onFormItemChanged={(ev) => this.inputHandler(ev)}\n            validator={[]}\n          ></app-form-item>\n          <app-form-item\n            label-tag='comments'\n            label-text='Comments'\n            lines='inset'\n            value={this.updateCard.comments}\n            name='comments'\n            textRows={4}\n            input-type='text'\n            onFormItemChanged={(ev) => this.inputHandler(ev)}\n            validator={[]}\n          ></app-form-item>\n        </ion-list>\n      </ion-content>,\n      <app-modal-footer\n        disableSave={!this.validCard}\n        onCancelEmit={() => this.close()}\n        onSaveEmit={() => this.save()}\n      />,\n    ];\n  }\n}\n"],"mappings":"sOAAA,MAAMA,EAAmB,4WACzB,MAAAC,EAAeD,E,MCQFE,EAAa,M,8GAKH,K,CAErB,iBAAAC,GACEC,KAAKC,kB,CAGP,gBAAAC,GACEF,KAAKG,c,CAGP,sBAAMF,GACJD,KAAKI,WAAa,IAAIC,EAAKL,KAAKM,MAChCN,KAAKG,c,CAGP,IAAAI,GACEP,KAAKQ,GAAGC,QAAQ,aAAaC,QAAQV,KAAKI,W,CAG5C,KAAAO,GACEX,KAAKQ,GAAGC,QAAQ,aAAaC,S,CAG/B,YAAAE,CAAaC,GACXb,KAAKI,WAAWS,EAAMC,OAAOC,MAAQF,EAAMC,OAAOE,MAClDhB,KAAKG,c,CAGP,YAAAc,CAAaC,GACXlB,KAAKI,WAAWe,OAASD,EAAGJ,OAC5Bd,KAAKG,c,CAGP,YAAAA,GACEH,KAAKoB,UACHC,mBAASrB,KAAKI,WAAWe,OAAOG,aAChCD,mBAASrB,KAAKI,WAAWe,OAAOI,kBAChCC,iBAAO,IAAIC,KAAKzB,KAAKI,WAAWsB,aAChCL,mBAASrB,KAAKI,WAAWuB,O,CAG7B,MAAAC,GACE,MAAO,CACLC,EAAA,cAAAC,IAAA,2CACEC,IAAI,YACJC,KAAK,YACLC,MAAOC,EAAYC,cACnBC,MAAO,OAGTP,EAAA,eAAAC,IAAA,4CACED,EAAA,YAAAC,IAAA,4CACED,EAAA,gCAAAC,IAAA,2CACEO,KAAMrC,KAAKI,WAAWe,OACtBmB,eAAiBpB,GAAOlB,KAAKiB,aAAaC,KAE5CW,EAAA,iBAAAC,IAAA,uDACY,SAAQ,aACP,SACXS,MAAM,QACNvB,MAAOhB,KAAKI,WAAWuB,OACvBZ,KAAK,SAAQ,aACF,OACXyB,kBAAoBtB,GAAOlB,KAAKY,aAAaM,GAC7CuB,UAAW,CAAC,cAEdZ,EAAA,iBAAAC,IAAA,uDACY,YAAW,aACV,YACXS,MAAM,QACNvB,MAAOhB,KAAKI,WAAWsB,UACvBX,KAAK,YAAW,aACL,OACXyB,kBAAoBtB,GAAOlB,KAAKY,aAAaM,GAC7CuB,UAAW,CAAC,cAEdZ,EAAA,iBAAAC,IAAA,uDACY,SAAQ,aACP,SACXS,MAAM,QACNvB,MAAOhB,KAAKI,WAAWsC,OACvB3B,KAAK,SAAQ,aACF,OACXyB,kBAAoBtB,GAAOlB,KAAKY,aAAaM,GAC7CuB,UAAW,KAEbZ,EAAA,iBAAAC,IAAA,uDACY,aAAY,aACX,aACXS,MAAM,QACNvB,MAAOhB,KAAKI,WAAWuC,WACvB5B,KAAK,aAAY,aACN,OACXyB,kBAAoBtB,GAAOlB,KAAKY,aAAaM,GAC7CuB,UAAW,KAEbZ,EAAA,iBAAAC,IAAA,uDACY,WAAU,aACT,WACXS,MAAM,QACNvB,MAAOhB,KAAKI,WAAWwC,SACvB7B,KAAK,WACL8B,SAAU,EAAC,aACA,OACXL,kBAAoBtB,GAAOlB,KAAKY,aAAaM,GAC7CuB,UAAW,OAIjBZ,EAAA,oBAAAC,IAAA,2CACEgB,aAAc9C,KAAKoB,UACnB2B,aAAc,IAAM/C,KAAKW,QACzBqC,WAAY,IAAMhD,KAAKO,S","ignoreList":[]}