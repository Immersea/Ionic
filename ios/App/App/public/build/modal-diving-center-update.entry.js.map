{"file":"modal-diving-center-update.entry.esm.js","mappings":"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","names":["cloneDeep","toNumber","toLower","isNumber","isString"],"sources":["src/components/udive/modals/diving-center/modal-diving-center-update/modal-diving-center-update.scss?tag=modal-diving-center-update","src/components/udive/modals/diving-center/modal-diving-center-update/modal-diving-center-update.tsx"],"sourcesContent":["modal-diving-center-update {\n  ion-list {\n    width: 100%;\n  }\n}\n","import {Component, h, Host, Prop, State, Element} from \"@stencil/core\";\nimport {DivingCenter} from \"../../../../../interfaces/udive/diving-center/divingCenter\";\nimport {modalController, popoverController} from \"@ionic/core\";\nimport {cloneDeep, isNumber, isString, toLower, toNumber} from \"lodash\";\nimport {DiveConfiguration} from \"../../../../../interfaces/udive/planner/dive-configuration\";\nimport {Subscription} from \"rxjs\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  DivingCentersService,\n  DIVECENTERSSCOLLECTION,\n} from \"../../../../../services/udive/divingCenters\";\nimport {UserProfile} from \"../../../../../interfaces/common/user/user-profile\";\nimport {UserSettings} from \"../../../../../interfaces/udive/user/user-settings\";\nimport {mapHeight} from \"../../../../../helpers/utils\";\nimport Swiper from \"swiper\";\n\n@Component({\n  tag: \"modal-diving-center-update\",\n  styleUrl: \"modal-diving-center-update.scss\",\n})\nexport class ModalDivingCenterUpdate {\n  @Element() el: HTMLElement;\n  @Prop() divingCenterId: string = undefined;\n  @State() divingCenter: DivingCenter;\n  @State() segment = \"map\";\n  @State() updateView = true;\n  @State() validDiveCenter = false;\n  @State() diveSites: {\n    divingCenterSites: any[];\n    divingCenterSelect: any[];\n  };\n  @State() titles = [\n    {tag: \"map\"},\n    {tag: \"position\"},\n    {tag: \"information\"},\n    {tag: \"dive-sites\", text: \"Dive Sites\"},\n    {tag: \"team\"},\n  ];\n\n  @State() tmpDivingCenterId: string;\n  mapElement: HTMLAppMapElement;\n  @State() slider: Swiper;\n  draggableMarkerPosition: any;\n  stdConfigurations: DiveConfiguration[] = [];\n  userProfile: UserProfile;\n  userProfileSub$: Subscription;\n  userSettings: UserSettings;\n  userSettingsSub$: Subscription;\n  @State() showDCId = false;\n\n  async componentWillLoad() {\n    this.userProfileSub$ = UserService.userProfile$.subscribe(\n      (userProfile: UserProfile) => {\n        this.userProfile = new UserProfile(userProfile);\n      }\n    );\n    this.userSettingsSub$ = UserService.userSettings$.subscribe(\n      (userSettings: UserSettings) => {\n        this.userSettings = new UserSettings(userSettings);\n        this.stdConfigurations = cloneDeep(\n          this.userSettings.userConfigurations\n        );\n      }\n    );\n    await this.loadDivingCenter();\n  }\n\n  async loadDivingCenter() {\n    if (this.divingCenterId) {\n      this.showDCId = false;\n      this.tmpDivingCenterId = this.divingCenterId;\n      this.divingCenter = await DivingCentersService.getDivingCenter(\n        this.divingCenterId\n      );\n      this.draggableMarkerPosition = {\n        lat: this.divingCenter.position.geopoint.latitude,\n        lon: this.divingCenter.position.geopoint.longitude,\n      };\n    } else {\n      this.showDCId = true;\n      this.divingCenter = new DivingCenter();\n      this.divingCenter.users = {\n        [UserService.userRoles.uid]: [\"owner\"],\n      };\n      this.draggableMarkerPosition = {};\n    }\n    this.loadDivingCenterSites();\n  }\n\n  loadDivingCenterSites() {\n    this.diveSites = DivingCentersService.loadDivingCenterSites(\n      this.divingCenter\n    );\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-diving-center\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: false,\n      autoHeight: true,\n    });\n\n    //reset map height inside slide\n    await customElements.whenDefined(\"app-map\");\n    this.mapElement = this.el.querySelector(\"#map\") as any;\n    const mapContainer = this.el.querySelector(\"#map-container\");\n    mapContainer.setAttribute(\n      \"style\",\n      \"height: \" + mapHeight(this.divingCenter.coverURL, true) + \"px\"\n    ); //-cover photo -slider  - footer\n\n    this.mapElement[\"mapLoaded\"]().then(() => {\n      this.mapElement.triggerMapResize();\n    });\n    this.mapElement.triggerMapResize();\n    this.validateDiveCenter();\n  }\n\n  disconnectedCallback() {\n    this.userProfileSub$.unsubscribe();\n    this.userSettingsSub$.unsubscribe();\n  }\n\n  updateLocation(ev) {\n    this.draggableMarkerPosition = {\n      lat: toNumber(ev.detail.lat),\n      lon: toNumber(ev.detail.lon),\n    };\n    this.divingCenter.setPosition(ev.detail.lat, ev.detail.lon);\n    this.validateDiveCenter();\n  }\n\n  updateAddress(ev) {\n    this.divingCenter.setAddress(ev.detail);\n  }\n\n  handleChange(ev) {\n    if (\n      ev.detail.name == \"facebook\" ||\n      ev.detail.name == \"instagram\" ||\n      ev.detail.name == \"twitter\" ||\n      ev.detail.name == \"website\" ||\n      ev.detail.name == \"email\"\n    ) {\n      const val = toLower(ev.detail.value).split(\" \").join(\"-\");\n      this.divingCenter[ev.detail.name] = val;\n    } else if (ev.detail.name == \"id\") {\n      this.setTmpId(ev.detail.value);\n    } else {\n      this.divingCenter[ev.detail.name] = ev.detail.value;\n    }\n    this.updateView = !this.updateView;\n    this.validateDiveCenter();\n  }\n\n  setTmpId(value) {\n    this.tmpDivingCenterId = toLower(value)\n      .trim()\n      .split(\" \")\n      .join(\"-\")\n      .substring(0, 16);\n  }\n\n  updateImageUrls(ev) {\n    const imageType = ev.detail.type;\n    const url = ev.detail.url;\n    if (imageType == \"photo\") {\n      this.divingCenter.photoURL = url;\n    } else {\n      this.divingCenter.coverURL = url;\n    }\n  }\n\n  uniqueIdValid(ev) {\n    if (ev.detail) {\n      this.divingCenterId = this.tmpDivingCenterId;\n    } else {\n      this.divingCenterId = null;\n    }\n  }\n\n  validateDiveCenter() {\n    this.validDiveCenter =\n      isNumber(this.divingCenter.position.geopoint.latitude) &&\n      isNumber(this.divingCenter.position.geopoint.longitude) &&\n      isString(this.divingCenterId) &&\n      isString(this.divingCenter.displayName) &&\n      isString(this.divingCenter.description);\n  }\n\n  async openAddDiveSite() {\n    const popover = await popoverController.create({\n      component: \"popover-search-dive-site\",\n      translucent: true,\n    });\n    popover.onDidDismiss().then((ev) => {\n      const siteId = ev.data;\n      this.divingCenter.diveSites.push(siteId);\n      this.loadDivingCenterSites();\n    });\n    popover.present();\n  }\n\n  removeDiveSite(siteId) {\n    const index = this.divingCenter.diveSites.findIndex((id) => id == siteId);\n    this.divingCenter.diveSites.splice(index, 1);\n    this.loadDivingCenterSites();\n  }\n\n  async save() {\n    await DivingCentersService.updateDivingCenter(\n      this.divingCenterId,\n      this.divingCenter,\n      this.userProfile.uid\n    );\n    return modalController.dismiss();\n  }\n\n  async cancel() {\n    return modalController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header>\n          <app-upload-cover\n            item={{\n              collection: DIVECENTERSSCOLLECTION,\n              id: this.divingCenterId,\n              photoURL: this.divingCenter.photoURL,\n              coverURL: this.divingCenter.coverURL,\n            }}\n            onCoverUploaded={(ev) => this.updateImageUrls(ev)}\n          ></app-upload-cover>\n        </ion-header>\n\n        <app-header-segment-toolbar\n          color=\"divingcenter\"\n          swiper={this.slider}\n          titles={this.titles}\n        ></app-header-segment-toolbar>\n        <ion-content class=\"slides\">\n          <swiper-container class=\"slider-diving-center swiper\">\n            <swiper-wrapper class=\"swiper-wrapper\">\n              <swiper-slide class=\"swiper-slide\">\n                <div id=\"map-container\">\n                  <app-map\n                    id=\"map\"\n                    pageId=\"diving-center\"\n                    draggableMarkerPosition={this.draggableMarkerPosition}\n                    onDragMarkerEnd={(ev) => this.updateLocation(ev)}\n                  ></app-map>\n                </div>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <app-coordinates\n                  coordinates={this.draggableMarkerPosition}\n                  onCoordinatesEmit={(ev) => this.updateLocation(ev)}\n                  onAddressEmit={(ev) => this.updateAddress(ev)}\n                ></app-coordinates>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-list class=\"ion-no-padding\">\n                  <ion-list-header>\n                    <my-transl\n                      tag=\"general-information\"\n                      text=\"General Information\"\n                      isLabel\n                    />\n                  </ion-list-header>\n                  <app-form-item\n                    label-tag=\"name\"\n                    label-text=\"Name\"\n                    value={this.divingCenter.displayName}\n                    name=\"displayName\"\n                    input-type=\"text\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    onFormItemBlur={() =>\n                      this.setTmpId(this.divingCenter.displayName)\n                    }\n                    validator={[\"required\"]}\n                  ></app-form-item>\n                  {this.showDCId ? (\n                    <app-form-item\n                      label-tag=\"unique-id\"\n                      label-text=\"Unique ID\"\n                      value={this.tmpDivingCenterId}\n                      name=\"id\"\n                      input-type=\"text\"\n                      onFormItemChanged={(ev) => this.handleChange(ev)}\n                      onIsValid={(ev) => this.uniqueIdValid(ev)}\n                      validator={[\n                        \"required\",\n                        {\n                          name: \"uniqueid\",\n                          options: {type: DIVECENTERSSCOLLECTION},\n                        },\n                      ]}\n                    ></app-form-item>\n                  ) : undefined}\n                  <app-form-item\n                    label-tag=\"description\"\n                    label-text=\"Description\"\n                    value={this.divingCenter.description}\n                    name=\"description\"\n                    textRows={10}\n                    input-type=\"text\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[\"required\"]}\n                  ></app-form-item>\n                  <app-form-item\n                    label-tag=\"phone\"\n                    label-text=\"Phone\"\n                    value={this.divingCenter.phoneNumber}\n                    name=\"phoneNumber\"\n                    input-type=\"tel\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                  <app-form-item\n                    label-tag=\"email\"\n                    label-text=\"Email\"\n                    value={this.divingCenter.email}\n                    name=\"email\"\n                    input-type=\"email\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[\"email\"]}\n                  ></app-form-item>\n                  <app-form-item\n                    label-tag=\"website\"\n                    label-text=\"Website\"\n                    value={this.divingCenter.website}\n                    name=\"website\"\n                    input-type=\"url\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                  {this.divingCenter.website ? (\n                    <a\n                      class=\"ion-padding-start\"\n                      href={\"http://\" + this.divingCenter.website}\n                      target=\"_blank\"\n                    >\n                      {\"http://\" + this.divingCenter.website}\n                    </a>\n                  ) : undefined}\n                  <app-form-item\n                    label-tag=\"facebook-id\"\n                    label-text=\"Facebook ID\"\n                    value={this.divingCenter.facebook}\n                    name=\"facebook\"\n                    input-type=\"url\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                  {this.divingCenter.facebook ? (\n                    <a\n                      class=\"ion-padding-start\"\n                      href={\n                        \"https://www.facebook.com/\" + this.divingCenter.facebook\n                      }\n                      target=\"_blank\"\n                    >\n                      {\"https://www.facebook.com/\" + this.divingCenter.facebook}\n                    </a>\n                  ) : undefined}\n                  <app-form-item\n                    label-tag=\"instagram-id\"\n                    label-text=\"Instagram ID\"\n                    value={this.divingCenter.instagram}\n                    name=\"instagram\"\n                    input-type=\"url\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                  {this.divingCenter.instagram ? (\n                    <a\n                      class=\"ion-padding-start\"\n                      href={\n                        \"https://www.instagram.com/\" +\n                        this.divingCenter.instagram\n                      }\n                      target=\"_blank\"\n                    >\n                      {\"https://www.instagram.com/\" +\n                        this.divingCenter.instagram}\n                    </a>\n                  ) : undefined}\n                  <app-form-item\n                    label-tag=\"twitter id\"\n                    label-text=\"Twitter ID\"\n                    value={this.divingCenter.twitter}\n                    name=\"twitter\"\n                    input-type=\"url\"\n                    onFormItemChanged={(ev) => this.handleChange(ev)}\n                    validator={[]}\n                  ></app-form-item>\n                  {this.divingCenter.twitter ? (\n                    <a\n                      class=\"ion-padding-start\"\n                      href={\n                        \"https://www.twitter.com/\" + this.divingCenter.twitter\n                      }\n                      target=\"_blank\"\n                    >\n                      {\"https://www.twitter.com/\" + this.divingCenter.twitter}\n                    </a>\n                  ) : undefined}\n                </ion-list>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-grid>\n                  <ion-row class=\"ion-text-start\">\n                    {this.diveSites.divingCenterSites.map((site) => (\n                      <ion-col size-sm=\"12\" size-md=\"6\" size-lg=\"4\">\n                        <app-dive-site-card\n                          diveSite={site}\n                          startlocation={this.divingCenter}\n                          edit={true}\n                          onRemoveEmit={(ev) =>\n                            this.removeDiveSite(ev.detail.value)\n                          }\n                        />\n                      </ion-col>\n                    ))}\n                    <ion-col size-sm=\"12\" size-md=\"6\" size-lg=\"4\">\n                      <ion-card onClick={() => this.openAddDiveSite()}>\n                        <ion-card-content class=\"ion-text-center\">\n                          <ion-icon\n                            name=\"add-circle-outline\"\n                            style={{fontSize: \"130px\"}}\n                          ></ion-icon>\n                        </ion-card-content>\n                      </ion-card>\n                    </ion-col>\n                  </ion-row>\n                </ion-grid>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <app-users-list\n                  item={this.divingCenter}\n                  editable\n                  show={[\"owner\", \"editor\"]}\n                />\n              </swiper-slide>\n            </swiper-wrapper>\n          </swiper-container>\n        </ion-content>\n        <app-modal-footer\n          disableSave={!this.validDiveCenter}\n          onCancelEmit={() => this.cancel()}\n          onSaveEmit={() => this.save()}\n        />\n      </Host>\n    );\n  }\n}\n"],"version":3}