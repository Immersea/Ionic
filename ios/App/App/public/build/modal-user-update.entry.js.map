{"file":"modal-user-update.entry.esm.js","mappings":"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","names":["toLower"],"sources":["src/components/common/modals/modal-user-update/modal-user-update.scss?tag=modal-user-update","src/components/common/modals/modal-user-update/modal-user-update.tsx"],"sourcesContent":["modal-user-update {\n  .cover-container {\n    height: var(--coverHeight);\n  }\n  ion-thumbnail {\n    position: relative;\n    margin: -50px auto 0 auto;\n\n    width: 100px;\n    height: 100px;\n    img {\n      border-radius: 50%;\n      padding: 0.08em;\n      border: solid 0.25em lightsteelblue;\n      background-color: white;\n    }\n    ion-button {\n      top: 50%;\n      left: 50%;\n      margin-right: -50%;\n      transform: translate(-50%, -50%);\n      position: absolute;\n      color: #141414; // add a theme for better looks\n      font-size: 24px;\n    }\n  }\n  .cover {\n    position: relative;\n    background-color: lightblue;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n    width: 100%;\n    height: var(--coverHeight);\n    ion-button {\n      bottom: 5%;\n      left: 10%;\n      margin-right: -50%;\n      transform: translate(-50%, -50%);\n      position: absolute;\n      color: #141414; // add a theme for better looks\n      font-size: 24px;\n    }\n  }\n}\n","import { Component, State, h } from \"@stencil/core\";\nimport {\n  UserService,\n  USERPROFILECOLLECTION,\n} from \"../../../../services/common/user\";\nimport { alertController, modalController } from \"@ionic/core\";\nimport { TranslationService } from \"../../../../services/common/translations\";\nimport { UserProfile } from \"../../../../interfaces/common/user/user-profile\";\nimport { UserSettings } from \"../../../../interfaces/udive/user/user-settings\";\nimport { Subscription } from \"rxjs\";\nimport { Environment } from \"../../../../global/env\";\nimport { AuthService } from \"../../../../services/common/auth\";\nimport { SystemService } from \"../../../../services/common/system\";\nimport { toLower } from \"lodash\";\n\n@Component({\n  tag: \"modal-user-update\",\n  styleUrl: \"modal-user-update.scss\",\n})\nexport class ModalUserUpdate {\n  @State() uploading = false;\n  @State() userProfile: UserProfile;\n  @State() userSettings: UserSettings;\n  @State() updateView = true;\n  @State() addressText: string;\n  @State() checkEmailPsw = false;\n  userSub: Subscription;\n  settingsSub: Subscription;\n\n  componentWillLoad() {\n    this.settingsSub = UserService.userSettings$.subscribe((settings) => {\n      if (settings) {\n        this.userSettings = settings;\n        this.userSub = UserService.userProfile$.subscribe((profile) => {\n          if (profile) {\n            this.userProfile = profile;\n            this.addressText = this.userProfile.address\n              ? this.userProfile.address.display_name\n              : \"\";\n          }\n        });\n      }\n    });\n  }\n\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userProfile) {\n      UserService.initLocalUser();\n    }\n    this.checkEmailPswRegistration();\n  }\n\n  disconnectedCallback() {\n    this.settingsSub.unsubscribe();\n    this.userSub.unsubscribe();\n  }\n\n  async update() {\n    this.userProfile.setDisplayName();\n    await UserService.updateUserProfile(this.userProfile);\n    await UserService.updateUserSettings(this.userSettings);\n    return modalController.dismiss();\n  }\n\n  async cancel() {\n    return modalController.dismiss();\n  }\n\n  changeLanguage(langCode: any) {\n    this.userSettings.setLanguage(langCode.detail);\n    TranslationService.setLanguage(langCode.detail);\n  }\n\n  async changeUnits(ev) {\n    this.userSettings.settings.units = ev.detail.value;\n    this.userSettings.userConfigurations =\n      this.userSettings.userConfigurations.map((conf) => {\n        const params = conf.parameters;\n        params.setUnits(this.userSettings.settings.units);\n        conf.convertUnits(params);\n        return conf;\n      });\n    this.userSettings.localPlans = this.userSettings.localPlans.map((plan) => {\n      plan.convertUnits(this.userSettings.settings.units);\n      return plan;\n    });\n  }\n\n  inputHandler(event: any) {\n    if (\n      event.detail.name == \"facebook\" ||\n      event.detail.name == \"instagram\" ||\n      event.detail.name == \"twitter\" ||\n      event.detail.name == \"website\" ||\n      event.detail.name == \"email\"\n    ) {\n      const val = toLower(event.detail.value).split(\" \").join(\"-\");\n      this.userProfile[event.detail.name] = val;\n    } else {\n      this.userProfile[event.detail.name] = event.detail.value;\n    }\n    this.updateView = !this.updateView;\n  }\n\n  selectLocation(location) {\n    this.userProfile.address = location;\n    this.addressText = location.display_name;\n  }\n\n  updateImageUrls(ev) {\n    const imageType = ev.detail.type;\n    const url = ev.detail.url;\n    if (imageType == \"photo\") {\n      this.userProfile.photoURL = url;\n    } else {\n      this.userProfile.coverURL = url;\n    }\n    this.updateView = !this.updateView;\n  }\n\n  async checkEmailPswRegistration() {\n    const methods = await AuthService.fetchSignInMethodsForEmail(\n      this.userProfile.email\n    );\n    if (methods.includes(\"password\")) {\n      this.checkEmailPsw = true;\n    } else {\n      this.checkEmailPsw = false;\n    }\n  }\n\n  sendResetPsw() {\n    SystemService.presentLoading(\"please-wait\");\n    AuthService.passwordReset(this.userProfile.email)\n      .then(() => {\n        SystemService.dismissLoading();\n        this.showAlert(\"pswreset\");\n      })\n      .catch(() => {\n        SystemService.dismissLoading();\n        this.showAlert(\"pswreseterror\");\n      });\n  }\n\n  async showAlert(message) {\n    let header = TranslationService.getTransl(\"login\", \"Login\");\n    let pswreset = TranslationService.getTransl(\n      \"pswreset\",\n      \"You will receive shortly an email to reset your password. Please follow the instructions and then come back to the login page.\"\n    );\n    let pswreseterror = TranslationService.getTransl(\n      \"pswreseterror\",\n      \"There was an error in the reset process. Please try again later.\"\n    );\n    let show_message = \"\";\n    switch (message) {\n      case \"pswreset\":\n        show_message = pswreset;\n        break;\n      case \"pswreseterror\":\n        show_message = pswreseterror;\n        break;\n    }\n\n    const alert = await alertController.create({\n      header: header,\n      message: show_message,\n      buttons: [\n        {\n          text: TranslationService.getTransl(\"ok\", \"OK\"),\n          handler: async () => {},\n        },\n      ],\n    });\n    AuthService.dismissLoading();\n    alert.present();\n  }\n\n  render() {\n    return [\n      this.uploading ? <ion-progress-bar type='indeterminate' /> : undefined,\n      this.userProfile && this.userProfile.uid\n        ? [\n            <ion-header>\n              <div class='cover-container'>\n                <app-upload-cover\n                  item={{\n                    collection: USERPROFILECOLLECTION,\n                    id: this.userProfile.uid,\n                    photoURL: this.userProfile.photoURL,\n                    coverURL: this.userProfile.coverURL,\n                  }}\n                  onCoverUploaded={(ev) => this.updateImageUrls(ev)}\n                ></app-upload-cover>\n              </div>\n            </ion-header>,\n            <ion-content>\n              <ion-list>\n                <app-form-item\n                  label-tag='name'\n                  label-text='Name'\n                  value={this.userProfile.name}\n                  name='name'\n                  lines='inset'\n                  input-type='text'\n                  onFormItemChanged={(ev) => this.inputHandler(ev)}\n                  validator={[\"required\"]}\n                ></app-form-item>\n                <app-form-item\n                  label-tag='surname'\n                  label-text='Surname'\n                  lines='inset'\n                  value={this.userProfile.surname}\n                  name='surname'\n                  input-type='text'\n                  onFormItemChanged={(ev) => this.inputHandler(ev)}\n                  validator={[\"required\"]}\n                ></app-form-item>\n                {!Environment.isTrasteel()\n                  ? [\n                      <app-form-item\n                        label-tag='address'\n                        label-text='Address'\n                        value={this.addressText}\n                        name='address'\n                        lines='inset'\n                        input-type='text'\n                        onFormItemChanged={(ev) =>\n                          (this.addressText = ev.detail.value)\n                        }\n                        onFormLocationSelected={(ev) =>\n                          this.selectLocation(ev.detail)\n                        }\n                        validator={[\"address\"]}\n                      ></app-form-item>,\n                      <app-form-item\n                        label-tag='biography'\n                        label-text='Biography'\n                        value={this.userProfile.bio}\n                        text-rows={4}\n                        name='bio'\n                        lines='inset'\n                        input-type='text'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      <app-form-item\n                        label-tag='phone'\n                        label-text='Phone'\n                        value={this.userProfile.phoneNumber}\n                        name='phoneNumber'\n                        input-type='tel'\n                        lines='inset'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      <app-form-item\n                        label-tag='email'\n                        label-text='Email'\n                        value={this.userProfile.email}\n                        name='email'\n                        lines='inset'\n                        input-type='email'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[\"email\"]}\n                      ></app-form-item>,\n                      <app-form-item\n                        label-tag='website'\n                        label-text='Website'\n                        value={this.userProfile.website}\n                        name='website'\n                        lines='inset'\n                        input-type='url'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      this.userProfile.website ? (\n                        <a\n                          class='ion-padding-start'\n                          href={\"http://\" + this.userProfile.website}\n                          target='_blank'\n                        >\n                          {\"http://\" + this.userProfile.website}\n                        </a>\n                      ) : undefined,\n                      <app-form-item\n                        label-tag='facebook-id'\n                        label-text='Facebook ID'\n                        value={this.userProfile.facebook}\n                        name='facebook'\n                        lines='inset'\n                        input-type='url'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      this.userProfile.facebook ? (\n                        <a\n                          class='ion-padding-start'\n                          href={\n                            \"https://www.facebook.com/\" +\n                            this.userProfile.facebook\n                          }\n                          target='_blank'\n                        >\n                          {\"https://www.facebook.com/\" +\n                            this.userProfile.facebook}\n                        </a>\n                      ) : undefined,\n                      <app-form-item\n                        label-tag='instagram-id'\n                        label-text='Instagram ID'\n                        value={this.userProfile.instagram}\n                        name='instagram'\n                        lines='inset'\n                        input-type='url'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      this.userProfile.instagram ? (\n                        <a\n                          class='ion-padding-start'\n                          href={\n                            \"https://www.instagram.com/\" +\n                            this.userProfile.instagram\n                          }\n                          target='_blank'\n                        >\n                          {\"https://www.instagram.com/\" +\n                            this.userProfile.instagram}\n                        </a>\n                      ) : undefined,\n                      <app-form-item\n                        label-tag='twitter id'\n                        label-text='Twitter ID'\n                        value={this.userProfile.twitter}\n                        name='twitter'\n                        lines='inset'\n                        input-type='url'\n                        onFormItemChanged={(ev) => this.inputHandler(ev)}\n                        validator={[]}\n                      ></app-form-item>,\n                      this.userProfile.twitter ? (\n                        <a\n                          class='ion-padding-start'\n                          href={\n                            \"https://www.twitter.com/\" +\n                            this.userProfile.twitter\n                          }\n                          target='_blank'\n                        >\n                          {\"https://www.twitter.com/\" +\n                            this.userProfile.twitter}\n                        </a>\n                      ) : undefined,\n                      <ion-item lines='inset'>\n                        <ion-select\n                          label={TranslationService.getTransl(\"units\", \"Units\")}\n                          onIonChange={(ev) => this.changeUnits(ev)}\n                          value={this.userSettings.settings.units}\n                          interfaceOptions={{\n                            header: TranslationService.getTransl(\n                              \"units\",\n                              \"Units\"\n                            ),\n                            message: TranslationService.getTransl(\n                              \"units-chnage-message\",\n                              \"This will change the units for the whole app! Are you sure?\"\n                            ),\n                            buttons: [\n                              TranslationService.getTransl(\"OK\", \"OK\"),\n                              TranslationService.getTransl(\"cancel\", \"Cancel\"),\n                            ],\n                          }}\n                        >\n                          <ion-select-option value='Metric'>\n                            Metric\n                          </ion-select-option>\n                          <ion-select-option value='Imperial'>\n                            Imperial\n                          </ion-select-option>\n                        </ion-select>\n                      </ion-item>,\n                    ]\n                  : undefined}\n\n                <app-language-picker\n                  picker\n                  selectedLangCode={\n                    this.userSettings.getLanguage()\n                      ? this.userSettings.getLanguage()\n                      : undefined\n                  }\n                  onLanguageChanged={(lang) => this.changeLanguage(lang)}\n                />\n\n                {this.checkEmailPsw ? (\n                  <ion-button\n                    color={Environment.getAppColor()}\n                    expand='block'\n                    onClick={() => {\n                      this.sendResetPsw();\n                    }}\n                  >\n                    <my-transl tag='reset-psw' text='Reset Password' />\n                  </ion-button>\n                ) : undefined}\n              </ion-list>\n            </ion-content>,\n          ]\n        : undefined,\n      <app-modal-footer\n        onCancelEmit={() => this.cancel()}\n        onSaveEmit={() => this.update()}\n      />,\n    ];\n  }\n}\n"],"version":3}