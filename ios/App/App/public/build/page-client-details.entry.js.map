{"file":"page-client-details.entry.esm.js","mappings":"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","names":[],"sources":["src/components/udive/pages/clients/page-client-details/page-client-details.scss?tag=page-client-details","src/components/udive/pages/clients/page-client-details/page-client-details.tsx"],"sourcesContent":["page-client-details {\n  .cover {\n    height: var(--coverHeight);\n  }\n  ion-segment-button {\n    --color-checked: var(--ion-color-clients-contrast);\n  }\n  ion-badge {\n    margin-top: -15px;\n    margin-left: 10px;\n    font-size: 10px;\n  }\n  app-admin-dive-trips,\n  app-admin-diving-classes {\n    width: 100%;\n  }\n\n  .card-message {\n    width: 90%;\n    min-height: 150px;\n    ion-title {\n      padding-top: 60px;\n    }\n  }\n}\n","import {Component, h, State, Element, Host, Prop} from \"@stencil/core\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  fabButtonTopMarginString,\n  slideHeight,\n} from \"../../../../../helpers/utils\";\nimport {UserPubicProfile} from \"../../../../../interfaces/common/user/user-public-profile\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {\n  DIVESCHOOLSSCOLLECTION,\n  DivingSchoolsService,\n} from \"../../../../../services/udive/divingSchools\";\nimport {\n  DIVECENTERSSCOLLECTION,\n  DivingCentersService,\n} from \"../../../../../services/udive/divingCenters\";\nimport {\n  SERVICECENTERSCOLLECTION,\n  ServiceCentersService,\n} from \"../../../../../services/udive/serviceCenters\";\nimport {ClientData} from \"../../../../../interfaces/udive/clients/clients\";\nimport Swiper from \"swiper\";\nimport {Environment} from \"../../../../../global/env\";\n\n@Component({\n  tag: \"page-client-details\",\n  styleUrl: \"page-client-details.scss\",\n})\nexport class PageClientDetails {\n  @Element() el: HTMLElement;\n  @Prop() clientId: string;\n  @State() clientData: ClientData;\n  @State() userProfile: UserPubicProfile;\n  @State() counters = {\n    classes: 0,\n    trips: 0,\n    invoices: 0,\n  };\n  organiserId: string;\n  @State() titles = [\n    {tag: \"details\"},\n    {tag: \"dive-trips\"},\n    {tag: \"diving-classes\"},\n    {tag: \"invoices\"},\n  ];\n  @State() slider: Swiper;\n\n  async componentWillLoad() {\n    this.userProfile = await UserService.getPublicProfileUserDetails(\n      this.clientId\n    );\n\n    const url = RouterService.pageTo;\n    if (url.includes(DIVECENTERSSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        DivingCentersService.selectedDivingCenterClients[this.clientId];\n      this.organiserId = DivingCentersService.selectedDivingCenterId;\n    } else if (url.includes(DIVESCHOOLSSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        DivingSchoolsService.selectedDivingSchoolClients[this.clientId];\n      this.organiserId = DivingSchoolsService.selectedDivingSchoolId;\n    } else if (url.includes(SERVICECENTERSCOLLECTION.toLowerCase())) {\n      this.clientData =\n        ServiceCentersService.selectedServiceCenterClients[this.clientId];\n      this.organiserId = ServiceCentersService.selectedServiceCenterId;\n    }\n    this.counters = {\n      classes: this.clientData.classes\n        ? Object.keys(this.clientData.classes).length\n        : 0,\n      trips: this.clientData.trips\n        ? Object.keys(this.clientData.trips).length\n        : 0,\n      invoices: this.clientData.invoices\n        ? Object.keys(this.clientData.invoices).length\n        : 0,\n    };\n    this.titles[1][\"badge\"] = this.counters.trips;\n    this.titles[2][\"badge\"] = this.counters.classes;\n    this.titles[3][\"badge\"] = this.counters.invoices;\n  }\n  async componentDidLoad() {\n    this.setSliderHeight();\n  }\n\n  setSliderHeight() {\n    this.slider = new Swiper(\".slider-client\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: true,\n      autoHeight: true,\n    });\n    //reset sliders height inside slider\n    const slideContainers = Array.from(\n      this.el.getElementsByClassName(\"slide-container\")\n    );\n    slideContainers.map((container) => {\n      container.setAttribute(\n        \"style\",\n        \"height: \" + slideHeight(this.userProfile) + \"px\"\n      );\n    });\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header class=\"cover\">\n          <app-item-cover item={this.userProfile}></app-item-cover>\n        </ion-header>\n        <ion-header>\n          <ion-toolbar color=\"clients\">\n            {this.userProfile && !this.userProfile.coverURL\n              ? [\n                  <ion-buttons slot=\"start\">\n                    <ion-button\n                      onClick={() => RouterService.goBack()}\n                      icon-only\n                    >\n                      <ion-icon name=\"arrow-back\"></ion-icon>\n                    </ion-button>\n                  </ion-buttons>,\n                ]\n              : undefined}\n            <ion-title>{this.userProfile.displayName}</ion-title>\n          </ion-toolbar>\n        </ion-header>\n        <app-header-segment-toolbar\n          color={Environment.getAppColor()}\n          swiper={this.slider}\n          titles={this.titles}\n        ></app-header-segment-toolbar>\n        <ion-content class=\"slides\">\n          {this.userProfile && this.userProfile.coverURL ? (\n            <ion-fab\n              vertical=\"top\"\n              horizontal=\"start\"\n              slot=\"fixed\"\n              style={{marginTop: fabButtonTopMarginString(2)}}\n            >\n              <ion-fab-button\n                onClick={() => RouterService.goBack()}\n                class=\"fab-icon\"\n              >\n                <ion-icon name=\"arrow-back-circle-outline\"></ion-icon>\n              </ion-fab-button>\n            </ion-fab>\n          ) : undefined}\n          <swiper-container class=\"slider-client swiper\">\n            <swiper-wrapper class=\"swiper-wrapper\">\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  <app-public-user userProfile={this.userProfile} />\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.trips &&\n                  Object.keys(this.clientData.trips).length > 0 ? (\n                    <app-admin-dive-trips\n                      filterByOrganisierId={this.organiserId}\n                      filterByTrips={this.clientData.trips}\n                    />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-trips\" text=\"No Diving Trips\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.classes &&\n                  Object.keys(this.clientData.classes).length > 0 ? (\n                    <app-admin-diving-classes\n                      filterByOrganisierId={this.organiserId}\n                      filterByClasses={this.clientData.classes}\n                    />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-classes\" text=\"No Diving Classes\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n              <swiper-slide class=\"swiper-slide\">\n                <ion-content class=\"slide-container\">\n                  {this.clientData &&\n                  this.clientData.invoices &&\n                  Object.keys(this.clientData.invoices).length > 0 ? (\n                    <app-admin-client-invoices />\n                  ) : (\n                    <ion-card class=\"card-message\">\n                      <ion-title>\n                        <my-transl tag=\"no-invoices\" text=\"No Invoices\" />\n                      </ion-title>\n                    </ion-card>\n                  )}\n                </ion-content>\n              </swiper-slide>\n            </swiper-wrapper>\n          </swiper-container>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"version":3}