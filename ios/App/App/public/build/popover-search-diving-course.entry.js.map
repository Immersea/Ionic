{"file":"popover-search-diving-course.entry.esm.js","mappings":"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","names":["each","findIndex"],"sources":["src/components/udive/popovers/popover-search-diving-course/popover-search-diving-course.scss?tag=popover-search-diving-course","src/components/udive/popovers/popover-search-diving-course/popover-search-diving-course.tsx"],"sourcesContent":["popover-search-diving-course {\n  /* Component styles go here */\n  ion-list {\n    min-height: 300px;\n  }\n}\n","import {\n  Component,\n  h,\n  Host,\n  Prop,\n  State,\n  Element,\n  Event,\n  EventEmitter,\n} from \"@stencil/core\";\nimport { TranslationService } from \"../../../../services/common/translations\";\nimport { DivingCourse } from \"../../../../interfaces/udive/diving-school/divingSchool\";\nimport { SystemService } from \"../../../../services/common/system\";\nimport { each, findIndex } from \"lodash\";\nimport { DiveStandardsService } from \"../../../../services/udive/planner/dive-standards\";\n\n@Component({\n  tag: \"popover-search-diving-course\",\n  styleUrl: \"popover-search-diving-course.scss\",\n})\nexport class PopoverSearchDivingCourse {\n  @Element() el: HTMLElement;\n  @Prop() item: DivingCourse;\n  @State() popover: HTMLIonPopoverElement;\n  agencies: any;\n  localAgencies: any;\n  @Event() certSelected: EventEmitter<DivingCourse>;\n  @State() updateView = false;\n\n  async componentWillLoad() {\n    this.agencies = await SystemService.getDivingAgencies();\n    this.localAgencies = DiveStandardsService.agencies;\n    !this.item\n      ? (this.item = {\n          agencyId: null,\n          agencyName: null,\n          certificationId: null,\n        })\n      : undefined;\n  }\n\n  componentDidLoad() {\n    this.popover = this.el.closest(\"ion-popover\");\n    this.setSelectAgency();\n    //if (this.item.agencyId) this.setSelectCertification();\n  }\n\n  setSelectAgency() {\n    const selectElement: HTMLIonSelectElement =\n      this.el.querySelector(\"#selectAgency\");\n    const customPopoverOptions = {\n      header: TranslationService.getTransl(\"diving-agency\", \"Diving Agency\"),\n    };\n    selectElement.interfaceOptions = customPopoverOptions;\n    selectElement.placeholder = TranslationService.getTransl(\n      \"select\",\n      \"Select\"\n    );\n    each(this.localAgencies, (val) => {\n      let selectOption = document.createElement(\"ion-select-option\");\n      selectOption.value = val.ag_name;\n      selectOption.textContent = val.ag_name;\n      selectElement.appendChild(selectOption);\n    });\n    this.updateView = !this.updateView;\n  }\n\n  /*setSelectCertification() {\n    if (this.agencies[this.item.agencyId]) {\n      const selectElement: HTMLIonSelectElement = this.el.querySelector(\n        \"#selectCertification\"\n      );\n      const customPopoverOptions = {\n        header: TranslationService.getTransl(\n          \"diving-certification\",\n          \"Diving Certification\"\n        ),\n      };\n\n      selectElement.interfaceOptions = customPopoverOptions;\n      selectElement.placeholder = TranslationService.getTransl(\n        \"select\",\n        \"Select\"\n      );\n      each(this.agencies[this.item.agencyId].certifications, (val, i) => {\n        let selectOption = document.createElement(\"ion-select-option\");\n        selectOption.value = i;\n        selectOption.textContent = val.name;\n        selectElement.appendChild(selectOption);\n      });\n      selectElement.disabled = false;\n      this.enableCertificationsField = false;\n    } else {\n      this.enableCertificationsField = true;\n    }\n    this.updateView = !this.updateView;\n  }*/\n\n  updateAgency(ev) {\n    this.item.agencyName = ev.detail.value;\n    const agencyId = findIndex(\n      this.agencies,\n      (x) => x[\"id\"] == this.item.agencyName\n    );\n    this.item.agencyId = agencyId > 0 ? ev.detail.value : \"\";\n    //this.setSelectCertification();\n  }\n\n  updateCertification(ev) {\n    this.item.certificationId = ev.detail.value;\n    if (this.popover) {\n      this.popover.dismiss(this.item);\n    }\n    this.certSelected.emit(this.item);\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.popover ? (\n          <ion-toolbar>\n            <ion-title>\n              <my-transl tag='diving-course' text='Diving Course' />\n            </ion-title>\n          </ion-toolbar>\n        ) : undefined}\n        <ion-item>\n          <ion-select\n            label={TranslationService.getTransl(\n              \"diving-agency\",\n              \"Diving Agency\"\n            )}\n            id='selectAgency'\n            onIonChange={(ev) => this.updateAgency(ev)}\n            value={this.item.agencyName}\n          ></ion-select>\n        </ion-item>\n        <app-form-item\n          label-tag='certification'\n          label-text='Certification'\n          lines='inset'\n          value={this.item.certificationId}\n          name='certification'\n          input-type='text'\n          onFormItemChanged={(ev) => this.updateCertification(ev)}\n          validator={[\"required\"]}\n        ></app-form-item>\n        {/***\n           * <ion-item>\n          <ion-select\n            label={TranslationService.getTransl(\n              \"diving-certification\",\n              \"Diving Certification\"\n            )}\n            id=\"selectCertification\"\n            onIonChange={(ev) => this.updateCertification(ev)}\n            disabled={true}\n            value={this.item.certificationId}\n          ></ion-select>\n        </ion-item>\n           */}\n      </Host>\n    );\n  }\n}\n"],"version":3}