{"file":"popover-search-user.entry.esm.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,oBAAoB,GAAG,qEAAqE;;MCSrF,iBAAiB;;;wBAED,EAAE;yBACR,KAAK;wBACN,KAAK;;IAGzB,iBAAiB;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;KAC/C;IAED,MAAM,WAAW,CAAC,EAAE;QAClB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,MAAM,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;QAC5C,MAAM,GAAG,GAAG,MAAM,eAAe,CAAC,eAAe,CAC/C,2BAA2B,EAC3B,CAAC,OAAO,CAAC,EACT,CAAC,GAAG,CAAC,EACL,CAAC,KAAK,CAAC,CACR,CAAC;QACF,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG;YACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;SAChC,CAAC,CAAC;QACH,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;YAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACtB;aAAM;YACL,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KACxB;IAED,OAAO,CAAC,IAAI;QACV,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAChC;IAED,MAAM;QACJ,QACE,EAAC,IAAI,uDACH,mEAAY,WAAW,UACrB,sEACE,oEACE,kEAAW,GAAG,EAAC,QAAQ,EAAC,IAAI,EAAC,QAAQ,GAAG,CAC9B,CACA,EACd,sEACE,sEACE,SAAS,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,EACvC,SAAS,EAAC,OAAO,EACjB,IAAI,EAAC,OAAO,EACZ,WAAW,EAAC,OAAO,GACJ,CACL,CACH,EACb,sEACE,mEACG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,MACtB,gBAAU,MAAM,QAAC,OAAO,EAAE,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAC/C,IAAI,CAAC,QAAQ,IACZ,kBAAY,IAAI,EAAC,OAAO,IACtB,eAAS,GAAG,EAAE,IAAI,CAAC,QAAQ,GAAI,CACpB,IACX,SAAS,EACb,qBAAY,IAAI,CAAC,WAAW,CAAa,CAChC,CACZ,CAAC,EACD,IAAI,CAAC,SAAS,IACb,qBAAe,QAAQ,EAAC,MAAM,GAAiB,IAC7C,SAAS,EAEZ,IAAI,CAAC,QAAQ,IACZ,oBACE,uCAAsC,CAC7B,IACT,SAAS,CACJ,CACC,CACT,EACP;KACH;;;;;;;","names":[],"sources":["src/components/common/popovers/popover-search-user/popover-search-user.scss?tag=popover-search-user","src/components/common/popovers/popover-search-user/popover-search-user.tsx"],"sourcesContent":["popover-search-user {\n  /* Component styles go here */\n  ion-list {\n    min-height: 300px;\n  }\n}\n","import {Component, h, Host, State, Element} from \"@stencil/core\";\nimport {DatabaseService} from \"../../../../services/common/database\";\nimport {USERPUBLICPROFILECOLLECTION} from \"../../../../services/common/user\";\n//import { UserService } from \"../../../../services/common/user\";\n\n@Component({\n  tag: \"popover-search-user\",\n  styleUrl: \"popover-search-user.scss\",\n})\nexport class PopoverSearchUser {\n  @Element() el: HTMLElement;\n  @State() showList: any[] = [];\n  @State() searching = false;\n  @State() noResult = false;\n  popover: HTMLIonPopoverElement;\n\n  componentWillLoad() {\n    this.popover = this.el.closest(\"ion-popover\");\n  }\n\n  async searchUsers(ev) {\n    this.noResult = false;\n    this.showList = [];\n    this.searching = true;\n    const query = ev.target.value.toLowerCase();\n    const res = await DatabaseService.queryCollection(\n      USERPUBLICPROFILECOLLECTION,\n      [\"email\"],\n      [\"=\"],\n      [query]\n    );\n    res.forEach((doc) => {\n      this.showList.push(doc.data());\n    });\n    if (this.showList.length == 0) {\n      this.noResult = true;\n    } else {\n      this.noResult = false;\n    }\n    this.searching = false;\n  }\n\n  addUser(user) {\n    this.popover.dismiss(user.uid);\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header translucent>\n          <ion-toolbar>\n            <ion-title>\n              <my-transl tag=\"search\" text=\"Search\" />\n            </ion-title>\n          </ion-toolbar>\n          <ion-toolbar>\n            <ion-searchbar\n              onIonBlur={(ev) => this.searchUsers(ev)}\n              inputmode=\"email\"\n              type=\"email\"\n              placeholder=\"email\"\n            ></ion-searchbar>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            {this.showList.map((user) => (\n              <ion-item button onClick={() => this.addUser(user)}>\n                {user.photoURL ? (\n                  <ion-avatar slot=\"start\">\n                    <ion-img src={user.photoURL} />\n                  </ion-avatar>\n                ) : undefined}\n                <ion-label>{user.displayName}</ion-label>\n              </ion-item>\n            ))}\n            {this.searching ? (\n              <app-skeletons skeleton=\"chat\"></app-skeletons>\n            ) : undefined}\n\n            {this.noResult ? (\n              <ion-item>\n                <ion-label>No Users found!</ion-label>\n              </ion-item>\n            ) : undefined}\n          </ion-list>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"version":3}