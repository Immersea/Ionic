{"version":3,"names":["pageShapeDetailsCss","PageShapeDetailsStyle0","PageShapeDetails","this","titles","tag","text","disabled","componentWillLoad","itemId","loadShape","SystemService","dismissLoading","presentAlertError","RouterService","goBack","componentDidLoad","slider","Swiper","speed","spaceBetween","allowTouchMove","autoHeight","slidesPerView","breakpoints","shape","ShapesService","getShape","shapeTypes","getShapeTypes","checkDwg","error","dwg","shapeType","find","x","typeId","shapeTypeId","updateView","updateSlider","setTimeout","update","undefined","editShape","modal","presentShapeUpdate","onDidDismiss","then","deleteShape","duplicateShape","render","h","key","shapeName","color","backButton","rightButtonText","TrasteelService","isRefraDBAdmin","icon","fill","rightButtonFc","Environment","getAppColor","swiper","noToolbar","class","lines","labelTag","labelText","detailText","getShapeTypeName","shapeShortName","H","H1","H2","L","L1","La","Lb","A","A1","B","B1","ANG","ANG1","D","D1","D2","D3","D4","De","Di","N","appendText","radius_max","radius","volume","expand","onClick","name","slot","TranslationService","getTransl","heightPx","backgroundCoverFill","link","url"],"sources":["src/components/trasteel/pages/refractories/page-shape-details/page-shape-details.scss?tag=page-shape-details","src/components/trasteel/pages/refractories/page-shape-details/page-shape-details.tsx"],"sourcesContent":["page-shape-details {\n  /* Component styles go here */\n}\n","import {Component, Prop, State, h} from \"@stencil/core\";\nimport {\n  Shape,\n  ShapeType,\n} from \"../../../../../interfaces/trasteel/refractories/shapes\";\nimport {ShapesService} from \"../../../../../services/trasteel/refractories/shapes\";\nimport {SystemService} from \"../../../../../services/common/system\";\nimport {TrasteelService} from \"../../../../../services/trasteel/common/services\";\nimport Swiper from \"swiper\";\nimport {Environment} from \"../../../../../global/env\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {RouterService} from \"../../../../../services/common/router\";\n\n@Component({\n  tag: \"page-shape-details\",\n  styleUrl: \"page-shape-details.scss\",\n})\nexport class PageShapeDetails {\n  @Prop() itemId: string;\n  @State() shape: Shape;\n  @State() shapeTypes: ShapeType[];\n  @State() updateView = true;\n\n  titles = [\n    {tag: \"information\", text: \"Information\"},\n    {tag: \"drawing\", text: \"Drawing\", disabled: false},\n  ];\n  @State() slider: Swiper;\n\n  async componentWillLoad() {\n    if (this.itemId) {\n      await this.loadShape();\n    } else {\n      SystemService.dismissLoading();\n      SystemService.presentAlertError(\"No Item Id\");\n      RouterService.goBack();\n    }\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-detail-shapes\", {\n      speed: 400,\n      spaceBetween: 0,\n      allowTouchMove: false,\n      autoHeight: true,\n      slidesPerView: 1,\n      breakpoints: {\n        // When window width is >= 768px\n        768: {\n          slidesPerView: 1,\n        },\n        // When window width is >= 992px\n        992: {\n          slidesPerView: 2,\n        },\n      },\n    });\n  }\n\n  async loadShape() {\n    try {\n      this.shape = await ShapesService.getShape(this.itemId);\n      this.shapeTypes = await ShapesService.getShapeTypes();\n      this.checkDwg();\n    } catch (error) {\n      SystemService.dismissLoading();\n      SystemService.presentAlertError(error);\n      RouterService.goBack();\n    }\n    SystemService.dismissLoading();\n  }\n\n  async checkDwg() {\n    if (!this.shape.dwg) {\n      //find dwg\n      const shapeType = this.shapeTypes.find(\n        (x) => x.typeId == this.shape.shapeTypeId\n      );\n      if (shapeType) {\n        this.shape.dwg = shapeType.dwg;\n      }\n      if (!this.shape.dwg) {\n        this.titles[1].disabled = true;\n        this.updateView = !this.updateView;\n      }\n    }\n  }\n\n  updateSlider() {\n    this.updateView = !this.updateView;\n    //wait for view to update and then reset slider height\n    setTimeout(() => {\n      this.slider ? this.slider.update() : undefined;\n    }, 100);\n  }\n\n  async editShape() {\n    const modal = await ShapesService.presentShapeUpdate(this.itemId);\n    //update customer data after modal dismiss\n    modal.onDidDismiss().then(() => this.loadShape());\n  }\n\n  deleteShape() {\n    ShapesService.deleteShape(this.itemId);\n    RouterService.goBack();\n  }\n\n  duplicateShape() {\n    ShapesService.duplicateShape(this.itemId);\n    RouterService.goBack();\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <app-navbar\n          text={this.shape.shapeName}\n          color=\"trasteel\"\n          backButton={true}\n          rightButtonText={\n            TrasteelService.isRefraDBAdmin()\n              ? {\n                  icon: \"create\",\n                  fill: \"outline\",\n                  tag: \"edit\",\n                  text: \"Edit\",\n                }\n              : null\n          }\n          rightButtonFc={() => this.editShape()}\n        ></app-navbar>\n      </ion-header>,\n      <app-header-segment-toolbar\n        color={Environment.getAppColor()}\n        swiper={this.slider}\n        titles={this.titles}\n        noToolbar\n      ></app-header-segment-toolbar>,\n      <ion-content class=\"slides\">\n        <swiper-container class=\"slider-detail-shapes swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              <ion-list class=\"ion-no-padding\">\n                <app-item-detail\n                  lines=\"none\"\n                  labelTag=\"shape_type\"\n                  labelText=\"Shape Type\"\n                  detailText={\n                    ShapesService.getShapeTypeName(this.shape.shapeTypeId)[\"en\"]\n                  }\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelTag=\"name\"\n                  labelText=\"Name\"\n                  detailText={this.shape.shapeName}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelTag=\"shortName\"\n                  labelText=\"Short Name\"\n                  detailText={this.shape.shapeShortName}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"H\"\n                  detailText={this.shape.H}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"H1\"\n                  detailText={this.shape.H1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"H2\"\n                  detailText={this.shape.H2}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"L\"\n                  detailText={this.shape.L}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"L1\"\n                  detailText={this.shape.L1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"La\"\n                  detailText={this.shape.La}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"Lb\"\n                  detailText={this.shape.Lb}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"A\"\n                  detailText={this.shape.A}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"A1\"\n                  detailText={this.shape.A1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"B\"\n                  detailText={this.shape.B}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"B1\"\n                  detailText={this.shape.B1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"ANG\"\n                  detailText={this.shape.ANG}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"ANG1\"\n                  detailText={this.shape.ANG1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"D\"\n                  detailText={this.shape.D}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"D1\"\n                  detailText={this.shape.D1}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"D2\"\n                  detailText={this.shape.D2}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"D3\"\n                  detailText={this.shape.D3}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"D4\"\n                  detailText={this.shape.D4}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"De\"\n                  detailText={this.shape.De}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"Di\"\n                  detailText={this.shape.Di}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"N\"\n                  detailText={this.shape.N}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"Radius\"\n                  appendText={this.shape.radius_max > 0 ? \" MIN\" : null}\n                  detailText={this.shape.radius}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"Radius\"\n                  appendText=\" MAX\"\n                  detailText={this.shape.radius_max}\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelText=\"Volume\"\n                  detailText={this.shape.volume}\n                ></app-item-detail>\n              </ion-list>\n              {TrasteelService.isRefraDBAdmin() ? (\n                <ion-grid>\n                  <ion-row>\n                    <ion-col>\n                      <ion-button\n                        color=\"danger\"\n                        fill=\"outline\"\n                        expand=\"block\"\n                        onClick={() => this.deleteShape()}\n                      >\n                        <ion-icon name=\"trash\" slot=\"start\"></ion-icon>\n                        <ion-label>\n                          {TranslationService.getTransl(\"delete\", \"Delete\")}\n                        </ion-label>\n                      </ion-button>\n                    </ion-col>\n                    <ion-col>\n                      <ion-button\n                        color=\"tertiary\"\n                        fill=\"outline\"\n                        expand=\"block\"\n                        onClick={() => this.duplicateShape()}\n                      >\n                        <ion-icon name=\"duplicate\" slot=\"start\"></ion-icon>\n                        <ion-label>\n                          {TranslationService.getTransl(\"copy\", \"Copy\")}\n                        </ion-label>\n                      </ion-button>\n                    </ion-col>\n                  </ion-row>\n                </ion-grid>\n              ) : undefined}\n            </swiper-slide>\n            {this.shape.dwg ? (\n              <swiper-slide class=\"swiper-slide\">\n                <app-banner\n                  heightPx={500}\n                  backgroundCoverFill={false}\n                  link={this.shape.dwg ? this.shape.dwg.url : null}\n                ></app-banner>\n              </swiper-slide>\n            ) : undefined}\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n    ];\n  }\n}\n"],"mappings":"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","ignoreList":[]}