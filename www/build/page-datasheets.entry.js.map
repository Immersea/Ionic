{"file":"page-datasheets.entry.esm.js","mappings":"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","names":["cloneDeep","includes","isArray"],"sources":["src/components/trasteel/pages/refractories/page-datasheets/page-datasheets.scss?tag=page-datasheets","src/components/trasteel/pages/refractories/page-datasheets/page-datasheets.tsx"],"sourcesContent":["page-datasheets {\n  /* Component styles go here */\n}\n","import {Component, Element, State, h} from \"@stencil/core\";\nimport {\n  DatasheetFilter,\n  MapDataDatasheet,\n} from \"../../../../../interfaces/trasteel/refractories/datasheets\";\nimport {\n  DATASHEETSCOLLECTION,\n  DatasheetsService,\n} from \"../../../../../services/trasteel/refractories/datasheets\";\nimport {TrasteelFilterService} from \"../../../../../services/trasteel/common/trs-db-filter\";\nimport {TrasteelService} from \"../../../../../services/trasteel/common/services\";\nimport {cloneDeep, includes, isArray} from \"lodash\";\nimport {DatabaseService} from \"../../../../../services/common/database\";\nimport {SystemService} from \"../../../../../services/common/system\";\nimport Swiper from \"swiper\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\n\n@Component({\n  tag: \"page-datasheets\",\n  styleUrl: \"page-datasheets.scss\",\n})\nexport class PageDatasheets {\n  @Element() el: HTMLElement;\n  datasheetsList: MapDataDatasheet[] = [];\n  @State() filteredDatasheetsList: MapDataDatasheet[] = [];\n  nonFilteredDatasheetsList: MapDataDatasheet[] = [];\n  @State() loading = true;\n  @State() filter: DatasheetFilter = new DatasheetFilter();\n  searchToolbar: any;\n  @State() slider: Swiper;\n  @State() updateView = true;\n  @State() showDownload = true;\n  @State() basket: MapDataDatasheet[] = [];\n  localDocName = \"datasheetBasket\";\n\n  async componentWillLoad() {\n    const filter = await DatabaseService.getLocalDocument(\"datasheetsFilter\");\n    this.filter = new DatasheetFilter(filter);\n    DatasheetsService.datasheetsList$.subscribe(\n      async (list: MapDataDatasheet[]) => {\n        this.updateList(list);\n        this.nonFilteredDatasheetsList = list;\n        this.loading = false;\n        this.filterLists();\n      }\n    );\n    const basket = await DatabaseService.getLocalDocument(this.localDocName);\n    if (basket) this.basket = basket;\n  }\n\n  componentDidLoad() {\n    this.searchToolbar = this.el.querySelector(\n      \"#searchToolbar\"\n    ) as HTMLAppSearchToolbarElement;\n    this.slider = new Swiper(\".slider-show-datasheet\", {\n      speed: 400,\n      spaceBetween: 0,\n      allowTouchMove: false,\n      autoHeight: true,\n      slidesPerView: 1,\n      on: {\n        slideChange: () => {\n          this.slider ? this.slider.updateAutoHeight() : null;\n        },\n      },\n    });\n    this.downloadDatasheets();\n  }\n\n  updateList(list) {\n    this.datasheetsList = list;\n    this.searchToolbar ? this.searchToolbar.forceFilter(list) : undefined;\n    this.updateView = !this.updateView;\n  }\n\n  updateSlider() {\n    this.updateView = !this.updateView;\n    //wait for view to update and then reset slider height\n    setTimeout(() => {\n      this.slider ? this.slider.update() : undefined;\n    }, 100);\n  }\n\n  filterDatasheets(list) {\n    if (this.filter.oldProduct === true) {\n      this.filteredDatasheetsList = cloneDeep(list);\n    } else {\n      this.filteredDatasheetsList = list.filter((x) => x.oldProduct == false);\n    }\n  }\n\n  addDatasheet() {\n    DatasheetsService.presentDatasheetUpdate();\n  }\n\n  getOptions() {\n    if (TrasteelService.isRefraDBAdmin()) {\n      return [\n        {\n          tag: \"delete\",\n          text: \"Delete\",\n          icon: \"trash\",\n          color: \"danger\",\n          func: (returnField) =>\n            DatasheetsService.deleteDatasheet(returnField, false),\n        },\n        {\n          tag: \"revision\",\n          text: \"Revision\",\n          icon: \"duplicate\",\n          color: \"secondary\",\n          func: (returnField) =>\n            DatasheetsService.duplicateDatasheet(returnField, true),\n        },\n        {\n          tag: \"copy\",\n          text: \"Copy\",\n          icon: \"copy\",\n          color: \"tertiary\",\n          func: (returnField) =>\n            DatasheetsService.duplicateDatasheet(returnField, false),\n        },\n        {\n          tag: \"edit\",\n          text: \"Edit\",\n          icon: \"create\",\n          color: \"primary\",\n          func: (returnField) =>\n            DatasheetsService.presentDatasheetUpdate(returnField),\n        },\n      ];\n    } else return null;\n  }\n\n  async openDatasheetFilter() {\n    DatabaseService.deleteLocalDocument(\"filteredDatasheetList\");\n    this.filter = await DatasheetsService.openDatasheetFilter(this.filter);\n    this.filterLists();\n  }\n\n  clearDatasheetFilter() {\n    this.filter = new DatasheetFilter();\n    this.datasheetsList = cloneDeep(this.nonFilteredDatasheetsList);\n    DatabaseService.deleteLocalDocument(\"filteredDatasheetList\");\n    this.filterLists();\n  }\n\n  async filterLists() {\n    DatabaseService.saveLocalDocument(\"datasheetsFilter\", this.filter);\n    if (this.filter.isActive()) {\n      const previousList = await DatabaseService.getLocalDocument(\n        \"filteredDatasheetList\"\n      );\n      if (!previousList) {\n        await SystemService.presentLoading(\"searching\");\n        const datasheetsList = await DatasheetsService.filterDatasheets(\n          this.filter\n        );\n        SystemService.dismissLoading();\n        if (datasheetsList) {\n          this.datasheetsList = datasheetsList;\n          DatabaseService.saveLocalDocument(\n            \"filteredDatasheetList\",\n            this.datasheetsList\n          );\n        } else {\n          //case when only olDproduct is selected\n          this.filterDatasheets(this.nonFilteredDatasheetsList);\n        }\n      } else {\n        this.datasheetsList = previousList;\n      }\n      this.filterDatasheets(this.datasheetsList);\n    } else {\n      this.filterDatasheets(this.nonFilteredDatasheetsList);\n    }\n    this.searchToolbar\n      ? this.searchToolbar.forceFilter(this.datasheetsList)\n      : undefined;\n    this.slider ? this.updateSlider() : undefined;\n  }\n\n  makeBreadCrumb(key) {\n    if (key == \"familyId\") {\n      const families = DatasheetsService.getDatasheetFamilies(\n        this.filter.familyId\n      );\n      if (families && families.length > 0) return families[0].familyName;\n      else return this.filter.familyId;\n    } else if (key == \"majorFamilyId\") {\n      const majorFamilies = DatasheetsService.getDatasheetMajorFamilies(\n        this.filter.majorFamilyId\n      );\n      if (majorFamilies && majorFamilies.length > 0)\n        return majorFamilies[0].majorFamilyName;\n      else return this.filter.majorFamilyId;\n    } else if (key == \"oldProduct\") {\n      return this.filter.oldProduct ? \"All revs.\" : \"Last Rev.\";\n    } else if (key == \"properties\") {\n      if (this.filter.properties.length > 0) {\n        let bread = \"( \";\n        this.filter.properties.forEach((property, index) => {\n          const name = DatasheetsService.getDatasheetPropertyNames(\n            \"id\",\n            property.valueName\n          );\n          bread +=\n            (name && name.length > 0 ? name[0].nameName : property.valueName) +\n            property.operator +\n            property.value +\n            (index < this.filter.properties.length - 1 ? \" / \" : \" )\");\n        });\n        return bread;\n      } else return \"\";\n    }\n    return null;\n  }\n\n  downloadDatasheets() {\n    this.showDownload = !this.showDownload;\n    this.slider.params.slidesPerView = this.showDownload ? 2 : 1;\n    this.updateSlider();\n  }\n\n  openDatasheet(datasheetId) {\n    if (this.showDownload) {\n      const ds = DatasheetsService.getDatasheetsById(datasheetId);\n      if (!includes(this.basket, ds)) this.basket.push(ds);\n      this.saveBasket();\n      this.updateSlider();\n    } else {\n      DatasheetsService.presentDatasheetDetails(datasheetId);\n    }\n  }\n\n  async downloadDatasheetsList() {\n    const datasheets = [];\n    for (const mapDS of this.basket) {\n      mapDS[\"datasheetId\"] = mapDS.id;\n      datasheets.push(mapDS);\n    }\n    DatasheetsService.exportDatasheets(datasheets);\n    this.downloadDatasheets();\n  }\n\n  emptyBasket() {\n    this.basket = [];\n    this.saveBasket();\n  }\n\n  removeItemFromBasket(index) {\n    this.basket.splice(index, 1);\n    this.saveBasket();\n  }\n\n  saveBasket() {\n    this.updateView = !this.updateView;\n    DatabaseService.saveLocalDocument(this.localDocName, this.basket);\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <app-navbar\n          tag=\"datasheets\"\n          text=\"Data Sheets\"\n          color=\"trasteel\"\n        ></app-navbar>\n        <ion-grid class=\"ion-no-padding\">\n          <ion-row class=\"ion-no-padding\">\n            <ion-col size=\"1\" class=\"ion-no-padding\">\n              <ion-toolbar color=\"trasteel\">\n                <ion-button\n                  fill=\"clear\"\n                  expand=\"full\"\n                  icon-only\n                  onClick={() => this.openDatasheetFilter()}\n                >\n                  <ion-icon name=\"filter\" color=\"light\"></ion-icon>\n                </ion-button>\n              </ion-toolbar>\n            </ion-col>\n            <ion-col size=\"11\" class=\"ion-no-padding\">\n              <app-search-toolbar\n                id=\"searchToolbar\"\n                searchTitle=\"datasheets\"\n                list={this.datasheetsList}\n                orderFields={[\"productName\"]}\n                color=\"trasteel\"\n                placeholder=\"Search by product, family or tech#\"\n                filterBy={[\"productName\", \"familyId\", \"techNo\"]}\n                onFilteredList={(ev) => this.filterDatasheets(ev.detail)}\n              ></app-search-toolbar>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n      </ion-header>,\n      <ion-content class=\"slides\">\n        {TrasteelService.isRefraDBAdmin() ? (\n          !this.showDownload ? (\n            <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\" edge>\n              <ion-fab-button size=\"small\" color=\"trasteel\">\n                <ion-icon name=\"chevron-down\"></ion-icon>\n              </ion-fab-button>\n              <ion-fab-list side=\"bottom\">\n                <ion-fab-button\n                  onClick={() => this.addDatasheet()}\n                  color=\"trasteel\"\n                >\n                  <ion-icon name=\"add\"></ion-icon>\n                </ion-fab-button>\n                <ion-fab-button\n                  onClick={() => this.downloadDatasheets()}\n                  color=\"trasteel\"\n                >\n                  <ion-icon name=\"download\"></ion-icon>\n                </ion-fab-button>\n              </ion-fab-list>\n            </ion-fab>\n          ) : (\n            <ion-fab vertical=\"top\" horizontal=\"end\" slot=\"fixed\" edge>\n              <ion-fab-button\n                onClick={() => this.downloadDatasheets()}\n                size=\"small\"\n                color=\"trasteel\"\n              >\n                <ion-icon name=\"close\"></ion-icon>\n              </ion-fab-button>\n            </ion-fab>\n          )\n        ) : undefined}\n        <swiper-container class=\"slider-show-datasheet swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              {this.filter.isActive()\n                ? [\n                    <ion-breadcrumbs>\n                      <ion-button\n                        icon-only\n                        fill=\"clear\"\n                        onClick={() => this.clearDatasheetFilter()}\n                      >\n                        <ion-icon color=\"danger\" name=\"trash\"></ion-icon>\n                      </ion-button>\n                      <ion-breadcrumb>\n                        #{this.filteredDatasheetsList.length}\n                      </ion-breadcrumb>\n                      {Object.keys(this.filter).map((key) =>\n                        (\n                          isArray(this.filter[key])\n                            ? this.filter[key].length > 0\n                            : this.filter[key] !== null\n                        ) ? (\n                          <ion-breadcrumb>\n                            {this.makeBreadCrumb(key)}\n                          </ion-breadcrumb>\n                        ) : undefined\n                      )}\n                      <ion-breadcrumb></ion-breadcrumb>\n                    </ion-breadcrumbs>,\n                  ]\n                : undefined}\n              <app-infinite-scroll\n                list={this.filteredDatasheetsList}\n                loading={this.loading}\n                showFields={[\"productName\"]}\n                options={this.getOptions()}\n                returnField=\"id\"\n                icon={\n                  TrasteelFilterService.getMapDocs(DATASHEETSCOLLECTION).icon\n                    .name\n                }\n                onItemClicked={(ev) => this.openDatasheet(ev.detail)}\n                onListChanged={() => {\n                  this.updateSlider();\n                }}\n              ></app-infinite-scroll>\n            </swiper-slide>\n            {this.showDownload ? (\n              <swiper-slide class=\"swiper-slide\">\n                <ion-list>\n                  {this.basket.length == 0 ? (\n                    <ion-item>\n                      Click on the datasheets on the left to add to basket\n                    </ion-item>\n                  ) : (\n                    <ion-grid>\n                      <ion-row>\n                        <ion-col>\n                          <ion-button\n                            onClick={() => this.downloadDatasheetsList()}\n                            expand=\"block\"\n                            fill=\"outline\"\n                            color=\"trasteel\"\n                          >\n                            <ion-icon name=\"download\" slot=\"start\"></ion-icon>\n                            <ion-label>\n                              {TranslationService.getTransl(\n                                \"download\",\n                                \"Download\"\n                              )}\n                            </ion-label>\n                            <ion-badge slot=\"end\" color=\"trasteel\">\n                              {this.basket.length}\n                            </ion-badge>\n                          </ion-button>\n                        </ion-col>\n                        <ion-col size=\"1\">\n                          <ion-button\n                            fill=\"clear\"\n                            icon-only\n                            onClick={() => this.emptyBasket()}\n                          >\n                            <ion-icon name=\"trash\" color=\"danger\"></ion-icon>\n                          </ion-button>\n                        </ion-col>\n                      </ion-row>\n                    </ion-grid>\n                  )}\n                  {this.basket.map((ds, index) => (\n                    <ion-item color=\"light\">\n                      <ion-label>{ds.productName}</ion-label>\n                      <ion-button\n                        slot=\"end\"\n                        fill=\"clear\"\n                        icon-only\n                        onClick={() => this.removeItemFromBasket(index)}\n                      >\n                        <ion-icon name=\"trash\" color=\"danger\"></ion-icon>\n                      </ion-button>\n                    </ion-item>\n                  ))}\n                </ion-list>\n              </swiper-slide>\n            ) : undefined}\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n    ];\n  }\n}\n"],"version":3}