{"file":"app-user-cover.entry.esm.js","mappings":"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","names":[],"sources":["src/components/common/app/user/app-user-cover/app-user-cover.scss?tag=app-user-cover","src/components/common/app/user/app-user-cover/app-user-cover.tsx"],"sourcesContent":["app-user-cover {\n  width: 100%;\n\n  ion-grid {\n    height: 100%;\n    padding: 0;\n  }\n  ion-row {\n    align-items: center;\n    text-align: center;\n\n    height: 80%;\n    width: 100%;\n  }\n\n  .name {\n    margin-top: 20px;\n    font-weight: 600;\n    font-size: 18pt;\n    color: #777;\n  }\n\n  .info {\n    margin-top: -5px;\n    margin-bottom: 5px;\n    font-family: \"Montserrat\", sans-serif;\n    font-size: 11pt;\n    color: #aaa;\n  }\n\n  ion-thumbnail {\n    position: relative;\n    margin-top: -100px;\n    margin-bottom: 0;\n    width: 100px;\n    height: 100px;\n    img {\n      border-radius: 50%;\n      padding: 0.08em;\n      border: solid 0.25em lightsteelblue;\n      background-color: white;\n    }\n  }\n  .cover-main {\n    position: absolute;\n    background-color: lightblue;\n    background-size: cover;\n    background-position: center;\n    background-repeat: no-repeat;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n    margin-top: calc(-1 * var(--coverHeight));\n    height: var(--coverHeight);\n    width: 100%;\n    ion-button {\n      position: absolute;\n      right: 0px;\n    }\n    ion-menu-button {\n      position: absolute;\n      left: 0px;\n      top: 0px;\n      color: black;\n      mix-blend-mode: difference;\n    }\n  }\n}\n","import { Component, h, Prop, Host, State } from \"@stencil/core\";\nimport { Subscription } from \"rxjs\";\nimport { UserService } from \"../../../../../services/common/user\";\nimport { UserProfile } from \"../../../../../interfaces/common/user/user-profile\";\nimport { UserSettings } from \"../../../../../interfaces/udive/user/user-settings\";\nimport { Environment } from \"../../../../../global/env\";\nimport { AuthService } from \"../../../../../services/common/auth\";\n\n@Component({\n  tag: \"app-user-cover\",\n  styleUrl: \"app-user-cover.scss\",\n})\nexport class AppUserCover {\n  @State() userProfile: UserProfile;\n  @State() userSettings: UserSettings;\n  userProfileSub$: Subscription;\n  userSettingsSub$: Subscription;\n  @Prop() tmbPosition?: string;\n  @Prop() showCover?: boolean = true;\n  @Prop() showUserDetails?: boolean = true;\n  @State() updateView = false;\n\n  componentWillLoad() {\n    if (!this.userProfile) {\n      this.userProfileSub$ = UserService.userProfile$.subscribe(\n        (userProfile: UserProfile) => {\n          this.userProfile = new UserProfile(userProfile);\n        }\n      );\n      this.userSettingsSub$ = UserService.userSettings$.subscribe(\n        (userSettings: UserSettings) => {\n          this.userSettings = new UserSettings(userSettings);\n        }\n      );\n    }\n  }\n\n  componentDidLoad() {\n    //check if user is loaded or trigger local user\n    if (!this.userProfile) {\n      UserService.initLocalUser();\n    }\n  }\n\n  disconnectedCallback() {\n    this.userProfileSub$ ? this.userProfileSub$.unsubscribe() : undefined;\n    this.userSettingsSub$ ? this.userSettingsSub$.unsubscribe() : undefined;\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.showCover && this.userProfile && this.userProfile.uid ? (\n          [\n            <div\n              class='cover-main'\n              style={{\n                backgroundImage: this.userProfile.coverURL\n                  ? \"url(\" + this.userProfile.coverURL + \")\"\n                  : \"url('./assets/images/friendship2SM.jpg')\",\n              }}\n            >\n              <slot />\n            </div>,\n            <ion-thumbnail\n              style={{\n                marginLeft: this.tmbPosition == \"left\" ? \"10%\" : \"auto\",\n                marginRight: this.tmbPosition == \"right\" ? \"10%\" : \"auto\",\n              }}\n            >\n              <img\n                src={\n                  this.userProfile.photoURL\n                    ? this.userProfile.photoURL\n                    : \"assets/images/avatar.png\"\n                }\n                alt={this.userProfile.displayName}\n              />\n            </ion-thumbnail>,\n          ]\n        ) : (\n          <div\n            class='cover-main'\n            style={{\n              backgroundImage: \"url('./assets/images/friendship2SM.jpg')\",\n            }}\n          >\n            <slot />\n          </div>\n        )}\n        {this.showUserDetails && this.userProfile && this.userProfile.uid ? (\n          <div>\n            <ion-row>\n              <ion-col>\n                <h1 class='name'>{this.userProfile.displayName}</h1>\n              </ion-col>\n            </ion-row>\n            <ion-row>\n              <ion-col>\n                <p class='info'>\n                  <ion-icon name='mail'></ion-icon> {this.userProfile.email}\n                </p>\n              </ion-col>\n            </ion-row>\n            {this.userProfile.address ? (\n              <ion-row>\n                <ion-col>\n                  <p class='info'>\n                    <ion-icon name='navigate-outline'></ion-icon>{\" \"}\n                    {this.userProfile.address.display_name}\n                  </p>\n                </ion-col>\n              </ion-row>\n            ) : undefined}\n            {this.userSettings\n              ? [\n                  !Environment.isTrasteel() ? (\n                    <ion-row>\n                      <ion-col>\n                        <p class='info'>\n                          <my-transl tag='units' text='Units' />:{\" \"}\n                          {this.userSettings.settings.units}\n                        </p>\n                      </ion-col>\n                    </ion-row>\n                  ) : undefined,\n                  <ion-row>\n                    <ion-col>\n                      <app-language-picker\n                        class='info'\n                        selectedLangCode={this.userSettings.getLanguage()}\n                      />\n                    </ion-col>\n                  </ion-row>,\n                ]\n              : undefined}\n            {this.userProfile.bio ? (\n              <ion-row>\n                <ion-col>\n                  <ion-card class='info'>\n                    <ion-card-subtitle>\n                      <my-transl tag='biography' text='Biography'></my-transl>\n                    </ion-card-subtitle>\n                    <ion-card-content>{this.userProfile.bio}</ion-card-content>\n                  </ion-card>\n                </ion-col>\n              </ion-row>\n            ) : undefined}\n            <ion-row>\n              <ion-col>\n                <ion-button\n                  expand='block'\n                  color={Environment.getAppColor()}\n                  onClick={() => UserService.presentUserUpdate()}\n                >\n                  <ion-icon name='create' slot='start'></ion-icon>\n                  <ion-label>\n                    <my-transl tag='edit' text='Edit' />\n                  </ion-label>\n                </ion-button>\n              </ion-col>\n            </ion-row>\n            <ion-row>\n              <ion-col class='ion-text-right ion-padding-end'>\n                <a onClick={() => AuthService.deleteUser()}>\n                  <my-transl\n                    tag='delete-account'\n                    text='Delete Account'\n                  ></my-transl>\n                </a>\n              </ion-col>\n            </ion-row>\n          </div>\n        ) : undefined}\n      </Host>\n    );\n  }\n}\n"],"version":3}