import{r as e,h as t,H as s,f as i}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as o}from"./p-5d4a8e1f.js";import{a2 as n,W as a,T as r,b4 as c}from"./p-a7a717b1.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-1af05547.js";import"./p-e9c4f463.js";const h="popover-edit-customer-owner{}popover-edit-customer-owner ion-list{min-height:300px}";const p=h;const f=class{constructor(t){e(this,t);this.owner=undefined;this.group=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.selectedOwner=new n;this.sharePerc=this.owner.groupOwnershipPerc;this.custGroups=a.getCustomerGroups();if(this.owner&&this.owner.groupId){this.selectedOwner=this.custGroups.find((e=>e.groupId==this.owner.groupId));if(!this.selectedOwner){this.newOwnerName=this.owner.groupName}}}componentDidLoad(){this.setOwnersSelect();this.updateView=!this.updateView}setOwnersSelect(){const e=this.el.querySelector("#selectOwner");const t={header:r.getTransl(this.group?"customer_group":"customer_owner",this.group?"Customer Group":"Customer Owner")};e.interfaceOptions=t;const s=Array.from(e.getElementsByTagName("ion-select-option"));s.map((t=>{e.removeChild(t)}));e.placeholder=r.getTransl("select","Select");this.custGroups.map((t=>{const s=document.createElement("ion-select-option");s.value=t;s.textContent=t.groupName;e.appendChild(s)}))}handleSelect(e){this.selectedOwner=e.detail.value}handleChange(e){this[e.detail.name]=e.detail.value;this.updateView=!this.updateView}close(){o.dismiss()}save(){if(this.newOwnerName){this.owner.groupId=c(this.newOwnerName);this.owner.groupName=this.newOwnerName}else{this.owner.groupId=this.selectedOwner.groupId;this.owner.groupName=this.selectedOwner.groupName}this.owner.groupOwnershipPerc=this.sharePerc;o.dismiss({owner:this.owner,new:this.newOwnerName&&this.newOwnerName.length>0})}render(){return t(s,{key:"d28b68d8ca2ac3956975b190522369f216b02140"},t("ion-header",{key:"633bd675254e4a1b1c613bd7868a306791f0d283",translucent:true},t("ion-toolbar",{key:"542997869b240bb08ee81b8f4131f6c997242de7"},t("ion-title",{key:"e0126b35d0f4a48b13f9dfd8582b84206e509f29"},"Select Owner/Group"))),t("ion-content",{key:"b69ca518772af9e100dd75d4bf85ec5cfed82578"},t("ion-item",{key:"433ccb4b93ff1f0b25a74b8380f19e0e5bc77723",lines:"none"},t("ion-select",{key:"e33e9582eef9f306ec7f25a976d3b0460599ed1b",color:"trasteel",id:"selectOwner",interface:"action-sheet",label:"Customer","label-placement":"floating",disabled:this.newOwnerName&&this.newOwnerName.length>0,onIonChange:e=>this.handleSelect(e),value:this.selectedOwner})),t("ion-item-divider",{key:"7931c5189685de913f3f4c8661cdb01340ca12ae"}," - or insert new - "),t("app-form-item",{key:"f522510128916000a658377794d8bcb751aeda6f",lines:"none","label-tag":"name","label-text":"Name",value:this.newOwnerName,name:"newOwnerName","input-type":"string",onFormItemChanged:e=>this.handleChange(e)}),this.group?t("app-form-item",{lines:"full","label-tag":"share_perc","label-text":"Share Percentage",value:this.sharePerc,name:"sharePerc","input-type":"number",onFormItemChanged:e=>this.handleChange(e),validator:[{name:"minmaxvalue",options:{min:0,max:100}}]}):undefined),t("ion-footer",{key:"97b9cc300f1d2c96bf5fb64911404a0ebe06939b"},t("app-modal-footer",{key:"8e8438d6c1b93b1e89b96fc67c3f32aa6cb124d5",saveTag:{tag:"ok",text:"ok"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return i(this)}};f.style=p;export{f as popover_edit_customer_owner};
//# sourceMappingURL=p-5d6027f4.entry.js.map