import{r as e,h as t,H as i,f as o}from"./p-cbe60c68.js";import"./p-c7ee7cfe.js";import{n as a}from"./p-5d4a8e1f.js";import{a6 as l,b3 as n,T as s}from"./p-a7a717b1.js";import{l as c}from"./p-1af05547.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-694b8ade.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-e9c4f463.js";const r="popover-datasheets-filter{}popover-datasheets-filter ion-list{min-height:300px}";const h=r;const d=class{constructor(t){e(this,t);this.filter=undefined;this.showBaseFilter=true;this.propertyNames=[];this.newFilterCondition=undefined;this.showAddNewProperty=false;this.updateView=false}componentWillLoad(){this.popover=this.el.closest("ion-popover");this.datasheetMajorFamilies=l.getDatasheetMajorFamilies();this.datasheetFamilies=l.getDatasheetFamilies();this.propertyNames=l.getDatasheetPropertyNames();this.resetNewFilterCondition()}resetNewFilterCondition(){this.newFilterCondition=new n({field:"properties",fieldName:"name",valueName:"mgo",comparisonField:"lower"});this.validateProperty()}deleteCondition(e){this.filter.properties.splice(e,1);this.updateView=!this.updateView}handleFilter(e){this.filter[e.detail.name]=e.detail.value}handleMajorFamilySelect(e){this.filter.majorFamilyId=e.detail.value}handleFamilySelect(e){this.filter.familyId=e.detail.value}segmentChanged(e){if(e.detail.value=="base"){this.showBaseFilter=true}else{this.showBaseFilter=false}}selectPropertyName(e){this.newFilterCondition.valueName=e.detail.value;this.validateProperty()}selectOperator(e){this.newFilterCondition.operator=e.detail.value;this.validateProperty()}selectValue(e){this.newFilterCondition.value=e.detail.value;this.validateProperty()}addNewProperty(){this.filter.properties.push(c.exports.cloneDeep(this.newFilterCondition));this.resetNewFilterCondition()}validateProperty(){this.showAddNewProperty=c.exports.isString(this.newFilterCondition.field)&&c.exports.isString(this.newFilterCondition.fieldName)&&c.exports.isString(this.newFilterCondition.operator)&&c.exports.isString(this.newFilterCondition.valueName)&&!c.exports.isNull(this.newFilterCondition.value)}close(){a.dismiss()}save(){a.dismiss(this.filter)}render(){return t(i,{key:"bdead093938df3fdbd7bb7023f66050044edcca3"},t("ion-header",{key:"c08a599a12a3ba01ac1cde7a802eaaf7cb301984",translucent:true},t("ion-toolbar",{key:"e842231cbdb2b42eff7cacba90b4bf9d3d895566"},t("ion-title",{key:"22e40e1073b403c01fa0b7d13909860532d2b7bb"},"Filter Datasheets"))),t("ion-content",{key:"62b3c63abf5005482bc64ff5a879d14c7d6bec0d"},t("ion-segment",{key:"82ce3a41d1107aa69a7d891438852e81d6f387a1",mode:"ios",color:"trasteel",onIonChange:e=>this.segmentChanged(e),value:"base"},t("ion-segment-button",{key:"27263ed54cd8e10003f5c9c7425ef282fb81e206",value:"base"},t("ion-label",{key:"3a7fc6acadbb90e94104621e860e8973e08c55e6"},"Base")),t("ion-segment-button",{key:"63b05ce5739028c8b729303210dfbae432d188e8",value:"advanced"},t("ion-label",{key:"c50b29bb03694b280567e65aaf04f1bf06fc098c"},"Advanced"))),t("ion-list",{key:"174ea203f4f353bb140a14114e5e274aa086dc6e"},this.showBaseFilter?[t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("majorFamily","Major Family"),"label-placement":"floating",onIonChange:e=>this.handleMajorFamilySelect(e),value:this.filter.majorFamilyId},this.datasheetMajorFamilies.map((e=>t("ion-select-option",{value:e.majorFamilyId},e.majorFamilyName))))),t("ion-item",null,t("ion-select",{color:"trasteel",interface:"action-sheet",label:s.getTransl("family","Family"),"label-placement":"floating",onIonChange:e=>this.handleFamilySelect(e),value:this.filter.familyId},this.datasheetFamilies.map((e=>t("ion-select-option",{value:e.familyId},e.familyName))))),t("app-form-item",{"label-text":"Show Old Products",value:this.filter.oldProduct,name:"oldProduct","input-type":"boolean",onFormItemChanged:e=>this.handleFilter(e)})]:[t("ion-grid",null,t("ion-row",null,t("ion-col",null,t("app-select-search",{color:"trasteel",value:this.newFilterCondition.valueName,lines:"none",disabled:this.propertyNames.length==0,selectFn:e=>this.selectPropertyName(e),selectOptions:this.propertyNames,selectValueId:"nameId",selectValueText:["nameName"]})),t("ion-col",{size:"3"},t("ion-item",{lines:"none"},t("ion-select",{color:"trasteel",interface:"action-sheet",onIonChange:e=>this.selectOperator(e),value:this.newFilterCondition.operator},t("ion-select-option",{value:">="},t("ion-label",null,">=")),t("ion-select-option",{value:">"},t("ion-label",null,">")),t("ion-select-option",{value:"="},t("ion-label",null,"=")),t("ion-select-option",{value:"<"},t("ion-label",null,"<")),t("ion-select-option",{value:"<="},t("ion-label",null,"<=")))))),t("ion-row",null,t("ion-col",null,t("app-form-item",{value:this.newFilterCondition.value,name:"typical","input-type":"number",onFormItemChanged:e=>this.selectValue(e)})),t("ion-col",{size:"3"},t("ion-button",{"icon-only":true,fill:"outline",onClick:()=>this.addNewProperty(),disabled:!this.showAddNewProperty},t("ion-icon",{name:"add",color:"primary"}))))),t("ion-item-divider",null,t("ion-label",null,"Conditions")),this.filter.properties.map(((e,i)=>t("ion-item",null,t("ion-label",null,l.getDatasheetPropertyNames("id",e.valueName)[0].nameName+" "+e.operator+" "+e.value),t("ion-button",{"icon-only":true,fill:"clear",onClick:()=>this.deleteCondition(i)},t("ion-icon",{name:"trash",color:"danger"})))))])),t("ion-footer",{key:"e74b2b2336bdfb3bd0f3e477a47e5e7baf2161b8"},t("app-modal-footer",{key:"9f0d5b27ceb9cc4fafba4fdd34874a03849f3e50",saveTag:{tag:"filter",text:"Filter"},onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return o(this)}};d.style=h;export{d as popover_datasheets_filter};
//# sourceMappingURL=p-bd7cf3ff.entry.js.map