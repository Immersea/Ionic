{"file":"popover-new-dive-trip.entry.esm.js","mappings":"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","names":["toNumber","isDate","isNumber","isString"],"sources":["src/components/udive/popovers/popover-new-dive-trip/popover-new-dive-trip.scss?tag=popover-new-dive-trip","src/components/udive/popovers/popover-new-dive-trip/popover-new-dive-trip.tsx"],"sourcesContent":["popover-new-dive-trip {\n  .validation-error {\n    text-align: center;\n    font-size: 0.7rem;\n    color: red;\n  }\n}\n","import {Component, h, Host, Prop, State, Element} from \"@stencil/core\";\nimport {TranslationService} from \"../../../../services/common/translations\";\nimport {isDate, isNumber, isString, toNumber} from \"lodash\";\nimport {MapDataDiveSite} from \"../../../../interfaces/udive/dive-site/diveSite\";\nimport {popoverController} from \"@ionic/core\";\nimport {DiveSitesService} from \"../../../../services/udive/diveSites\";\nimport {TripDive} from \"../../../../interfaces/udive/dive-trip/diveTrip\";\nimport {MapDataDivingCenter} from \"../../../../interfaces/udive/diving-center/divingCenter\";\nimport {DivingCentersService} from \"../../../../services/udive/divingCenters\";\n\n@Component({\n  tag: \"popover-new-dive-trip\",\n  styleUrl: \"popover-new-dive-trip.scss\",\n})\nexport class PopoverNewDiveTrip {\n  @Element() el: HTMLElement;\n  @Prop() tripDive: TripDive;\n  @Prop() diveIndex: number;\n  @State() diveSite: MapDataDiveSite;\n  @State() updateView = false;\n  @State() noDivePlans = false;\n  @State() validTrip = false;\n  sitesList: MapDataDiveSite[] = [];\n  divingCentersList: MapDataDivingCenter[] = [];\n  tripDate: Date;\n  divePlanTitle: string;\n  divePlanName: string;\n  divingCenterId: string;\n  participants: number;\n  surfaceInterval: number;\n\n  async componentWillLoad() {\n    this.sitesList = DiveSitesService.diveSitesList;\n    this.divingCentersList = DivingCentersService.divingCentersList;\n  }\n\n  componentDidLoad() {\n    //if diveIndex is null -> add new dive - else edit existing dive\n    if (this.tripDive && this.diveIndex >= 0) {\n      this.participants = this.tripDive.numberOfParticipants;\n      this.tripDate = this.tripDive.divePlan.dives[0].date;\n      console.log(\n        \"this.tripDate\",\n        this.tripDive,\n        this.tripDate,\n        this.tripDate.toISOString()\n      );\n      this.diveSite = this.sitesList.find(\n        (site) =>\n          site.id === this.tripDive.divePlan.dives[this.diveIndex].diveSiteId\n      );\n      this.divingCenterId =\n        this.tripDive.divePlan.dives[this.diveIndex].divingCenterId;\n      this.setSelectDivePlans();\n      this.divePlanTitle = this.tripDive.divePlan.title;\n      this.divePlanName = this.tripDive.divePlan.configuration\n        ? this.tripDive.divePlan.configuration.stdName\n        : null;\n      this.surfaceInterval =\n        this.diveIndex > 0\n          ? this.tripDive.divePlan.dives[this.diveIndex].surfaceInterval\n          : undefined;\n      this.validateTrip();\n    }\n  }\n\n  async openSearchSite() {\n    const popover = await popoverController.create({\n      component: \"popover-search-dive-site\",\n      translucent: true,\n    });\n    popover.onDidDismiss().then((ev) => {\n      this.divePlanName = null;\n      const siteId = ev.data;\n      this.diveSite = this.sitesList.find((site) => site.id === siteId);\n      this.validateTrip();\n      this.setSelectDivePlans();\n    });\n    popover.present();\n  }\n\n  setSelectDivePlans() {\n    const selectElement: HTMLIonSelectElement =\n      this.el.querySelector(\"#selectDivePlans\");\n    const customPopoverOptions = {\n      header: TranslationService.getTransl(\"dive-profile\", \"Dive Profile\"),\n    };\n\n    selectElement.interfaceOptions = customPopoverOptions;\n    //remove previously defined options\n    const selectOptions = Array.from(\n      selectElement.getElementsByTagName(\"ion-select-option\")\n    );\n    selectOptions.map((option) => {\n      selectElement.removeChild(option);\n    });\n    if (this.diveSite.divePlans && this.diveSite.divePlans.length > 0) {\n      selectElement.placeholder = TranslationService.getTransl(\n        \"select\",\n        \"Select\"\n      );\n      this.diveSite.divePlans.map((plan) => {\n        const selectOption = document.createElement(\"ion-select-option\");\n        selectOption.value = plan;\n        selectOption.textContent = plan;\n        selectElement.appendChild(selectOption);\n      });\n      this.noDivePlans = false;\n      selectElement.disabled = false;\n    } else {\n      selectElement.placeholder = TranslationService.getTransl(\n        \"no-profiles\",\n        \"No Dive Profiles available for this site\"\n      );\n      selectElement.disabled = true;\n      this.noDivePlans = true;\n    }\n\n    const selectDCElement: HTMLIonSelectElement = this.el.querySelector(\n      \"#selectDivingCenter\"\n    );\n    const customDCPopoverOptions = {\n      header: TranslationService.getTransl(\"diving-center\", \"Diving Center\"),\n    };\n\n    selectDCElement.interfaceOptions = customDCPopoverOptions;\n    //remove previously defined options\n    const selectDCOptions = Array.from(\n      selectDCElement.getElementsByTagName(\"ion-select-option\")\n    );\n    selectDCOptions.map((option) => {\n      selectDCElement.removeChild(option);\n    });\n    if (this.diveSite.divingCenters && this.diveSite.divingCenters.length > 0) {\n      selectDCElement.placeholder = TranslationService.getTransl(\n        \"select\",\n        \"Select\"\n      );\n      //add empty selection\n      const selectOption = document.createElement(\"ion-select-option\");\n      selectOption.value = null;\n      selectOption.textContent = \"-\";\n      selectDCElement.appendChild(selectOption);\n      this.diveSite.divingCenters.map((dcId) => {\n        const selectOption = document.createElement(\"ion-select-option\");\n        const dc = this.divingCentersList.find((dc) => dc.id === dcId);\n        selectOption.value = dcId;\n        selectOption.textContent = dc.displayName;\n        selectDCElement.appendChild(selectOption);\n      });\n      selectDCElement.disabled = false;\n    } else {\n      selectDCElement.placeholder = TranslationService.getTransl(\n        \"no-divecenters\",\n        \"No Diving Centers available for this site\"\n      );\n      selectDCElement.disabled = true;\n    }\n\n    this.updateView = !this.updateView;\n  }\n\n  updateDate(ev) {\n    this.tripDate = new Date(ev.detail.value);\n    this.validateTrip();\n  }\n\n  updateSurfaceInterval(value) {\n    this.surfaceInterval = value;\n    this.validateTrip();\n  }\n\n  updateParticipants(ev) {\n    this.participants = toNumber(ev.detail.value);\n    this.validateTrip();\n  }\n\n  updateTitle(ev) {\n    this.divePlanTitle = ev.detail.value;\n    this.validateTrip();\n  }\n\n  updateDivePlanName(ev) {\n    this.divePlanName = ev.detail.value;\n  }\n\n  updateDivingCenter(ev) {\n    this.divingCenterId = ev.detail.value;\n  }\n\n  validateTrip() {\n    //\n    this.validTrip =\n      ((!this.diveIndex && !this.tripDive) || this.diveIndex === 0\n        ? isDate(this.tripDate) &&\n          isNumber(this.participants) &&\n          isString(this.divePlanTitle)\n        : isNumber(this.surfaceInterval)) &&\n      this.diveSite &&\n      isString(this.diveSite.id);\n    this.updateView = !this.updateView;\n  }\n\n  async save() {\n    popoverController.dismiss({\n      participants: this.participants,\n      date: this.tripDate,\n      title: this.divePlanTitle,\n      diveSiteId: this.diveSite.id,\n      divingCenterId: this.divingCenterId,\n      divePlanName: this.divePlanName,\n      surfaceInterval: this.surfaceInterval,\n    });\n  }\n\n  cancel() {\n    popoverController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-toolbar>\n          <ion-title>\n            <my-transl tag=\"dive-trip\" text=\"Dive Trip\" />\n          </ion-title>\n        </ion-toolbar>\n        {(!this.diveIndex && !this.tripDive) || this.diveIndex === 0 ? (\n          [\n            <app-form-item\n              label-tag=\"date-time\"\n              label-text=\"Date/Time\"\n              value={this.tripDate ? this.tripDate.toISOString() : null}\n              name=\"tripDate\"\n              input-type=\"date\"\n              datePresentation=\"date-time\"\n              lines=\"inset\"\n              onFormItemChanged={(ev) => this.updateDate(ev)}\n            ></app-form-item>,\n            <app-form-item\n              label-tag=\"title\"\n              label-text=\"Title\"\n              value={this.divePlanTitle}\n              name=\"divePlanTitle\"\n              input-type=\"text\"\n              lines=\"inset\"\n              onFormItemChanged={(ev) => this.updateTitle(ev)}\n            ></app-form-item>,\n            <app-form-item\n              label-tag=\"number-participants\"\n              label-text=\"Max Number of Participants\"\n              value={this.participants}\n              name=\"participants\"\n              input-type=\"number\"\n              lines=\"inset\"\n              onFormItemChanged={(ev) => this.updateParticipants(ev)}\n            ></app-form-item>,\n          ]\n        ) : (\n          <ion-item>\n            <ion-select\n              label={TranslationService.getTransl(\n                \"surface-interval\",\n                \"Surface Interval\"\n              )}\n              onIonChange={(ev) => this.updateSurfaceInterval(ev.detail.value)}\n              value={this.surfaceInterval}\n            >\n              <ion-select-option value={0.5}>0:30</ion-select-option>\n              <ion-select-option value={1}>1:00</ion-select-option>\n              <ion-select-option value={1.5}>1:30</ion-select-option>\n              <ion-select-option value={2}>2:00</ion-select-option>\n              <ion-select-option value={2.5}>2:30</ion-select-option>\n              <ion-select-option value={3}>3:00</ion-select-option>\n              <ion-select-option value={3.5}>3:30</ion-select-option>\n              <ion-select-option value={4}>4:00</ion-select-option>\n              <ion-select-option value={4.5}>4:30</ion-select-option>\n              <ion-select-option value={5}>5:00</ion-select-option>\n              <ion-select-option value={5.5}>5:30</ion-select-option>\n              <ion-select-option value={6}>6:00</ion-select-option>\n              <ion-select-option value={6.5}>6:30</ion-select-option>\n              <ion-select-option value={7}>7:00</ion-select-option>\n              <ion-select-option value={7.5}>7:30</ion-select-option>\n              <ion-select-option value={8}>8:00</ion-select-option>\n              <ion-select-option value={8.5}>8:30</ion-select-option>\n              <ion-select-option value={9}>9:00</ion-select-option>\n              <ion-select-option value={9.5}>9:30</ion-select-option>\n              <ion-select-option value={10}>10:00</ion-select-option>\n              <ion-select-option value={10.5}>10:30</ion-select-option>\n              <ion-select-option value={11}>11:00</ion-select-option>\n              <ion-select-option value={11.5}>11:30</ion-select-option>\n              <ion-select-option value={12}>12:00</ion-select-option>\n            </ion-select>\n          </ion-item>\n        )}\n\n        <ion-item button onClick={() => this.openSearchSite()}>\n          <ion-input\n            label={TranslationService.getTransl(\"dive-site\", \"Dive Site\")}\n            label-placement=\"floating\"\n            placeholder={TranslationService.getTransl(\n              \"select-dive-site\",\n              \"Select Dive Site\"\n            )}\n            value={this.diveSite ? this.diveSite.displayName : undefined}\n          ></ion-input>\n          <ion-icon slot=\"end\" name=\"search-outline\"></ion-icon>\n        </ion-item>\n        <ion-item>\n          <ion-select\n            label={TranslationService.getTransl(\"dive-profile\", \"Dive Profile\")}\n            id=\"selectDivePlans\"\n            onIonChange={(ev) => this.updateDivePlanName(ev)}\n            disabled={true}\n            value={this.divePlanName}\n          ></ion-select>\n        </ion-item>\n        <ion-item>\n          <ion-select\n            label={TranslationService.getTransl(\n              \"diving-center\",\n              \"Diving Center\"\n            )}\n            id=\"selectDivingCenter\"\n            onIonChange={(ev) => this.updateDivingCenter(ev)}\n            disabled={true}\n            value={this.divingCenterId}\n          ></ion-select>\n        </ion-item>\n\n        <app-modal-footer\n          disableSave={!this.validTrip}\n          onCancelEmit={() => this.cancel()}\n          onSaveEmit={() => this.save()}\n        />\n      </Host>\n    );\n  }\n}\n"],"version":3}