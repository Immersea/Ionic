{"version":3,"names":["DeviceWeb","WebPlugin","getId","identifier","this","getUid","getInfo","navigator","userAgent","unavailable","ua","uaFields","parseUa","model","platform","operatingSystem","osVersion","manufacturer","vendor","isVirtual","webViewVersion","browserVersion","getBatteryInfo","getBattery","battery","e","batteryLevel","level","isCharging","charging","getLanguageCode","value","language","split","toLowerCase","getLanguageTag","start","indexOf","end","fields","substring","tmpFields","replace","pop","oscpu","lastParts","length","test","window","MSStream","isSafari","ApplePaySession","isChrome","chrome","isFirefox","isEdge","isFirefoxIOS","isChromeIOS","isEdgeIOS","searchWord","words","word","includes","version","reverseUA","reverse","join","reverseVersion","localStorage","uid","getItem","uuid4","setItem","c","r","Math","random","v","toString"],"sources":["node_modules/@capacitor/device/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class DeviceWeb extends WebPlugin {\n    async getId() {\n        return {\n            identifier: this.getUid(),\n        };\n    }\n    async getInfo() {\n        if (typeof navigator === 'undefined' || !navigator.userAgent) {\n            throw this.unavailable('Device API not available in this browser');\n        }\n        const ua = navigator.userAgent;\n        const uaFields = this.parseUa(ua);\n        return {\n            model: uaFields.model,\n            platform: 'web',\n            operatingSystem: uaFields.operatingSystem,\n            osVersion: uaFields.osVersion,\n            manufacturer: navigator.vendor,\n            isVirtual: false,\n            webViewVersion: uaFields.browserVersion,\n        };\n    }\n    async getBatteryInfo() {\n        if (typeof navigator === 'undefined' || !navigator.getBattery) {\n            throw this.unavailable('Device API not available in this browser');\n        }\n        let battery = {};\n        try {\n            battery = await navigator.getBattery();\n        }\n        catch (e) {\n            // Let it fail, we don't care\n        }\n        return {\n            batteryLevel: battery.level,\n            isCharging: battery.charging,\n        };\n    }\n    async getLanguageCode() {\n        return {\n            value: navigator.language.split('-')[0].toLowerCase(),\n        };\n    }\n    async getLanguageTag() {\n        return {\n            value: navigator.language,\n        };\n    }\n    parseUa(ua) {\n        const uaFields = {};\n        const start = ua.indexOf('(') + 1;\n        let end = ua.indexOf(') AppleWebKit');\n        if (ua.indexOf(') Gecko') !== -1) {\n            end = ua.indexOf(') Gecko');\n        }\n        const fields = ua.substring(start, end);\n        if (ua.indexOf('Android') !== -1) {\n            const tmpFields = fields.replace('; wv', '').split('; ').pop();\n            if (tmpFields) {\n                uaFields.model = tmpFields.split(' Build')[0];\n            }\n            uaFields.osVersion = fields.split('; ')[1];\n        }\n        else {\n            uaFields.model = fields.split('; ')[0];\n            if (typeof navigator !== 'undefined' && navigator.oscpu) {\n                uaFields.osVersion = navigator.oscpu;\n            }\n            else {\n                if (ua.indexOf('Windows') !== -1) {\n                    uaFields.osVersion = fields;\n                }\n                else {\n                    const tmpFields = fields.split('; ').pop();\n                    if (tmpFields) {\n                        const lastParts = tmpFields\n                            .replace(' like Mac OS X', '')\n                            .split(' ');\n                        uaFields.osVersion = lastParts[lastParts.length - 1].replace(/_/g, '.');\n                    }\n                }\n            }\n        }\n        if (/android/i.test(ua)) {\n            uaFields.operatingSystem = 'android';\n        }\n        else if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {\n            uaFields.operatingSystem = 'ios';\n        }\n        else if (/Win/.test(ua)) {\n            uaFields.operatingSystem = 'windows';\n        }\n        else if (/Mac/i.test(ua)) {\n            uaFields.operatingSystem = 'mac';\n        }\n        else {\n            uaFields.operatingSystem = 'unknown';\n        }\n        // Check for browsers based on non-standard javascript apis, only not user agent\n        const isSafari = !!window.ApplePaySession;\n        const isChrome = !!window.chrome;\n        const isFirefox = /Firefox/.test(ua);\n        const isEdge = /Edg/.test(ua);\n        const isFirefoxIOS = /FxiOS/.test(ua);\n        const isChromeIOS = /CriOS/.test(ua);\n        const isEdgeIOS = /EdgiOS/.test(ua);\n        // FF and Edge User Agents both end with \"/MAJOR.MINOR\"\n        if (isSafari ||\n            (isChrome && !isEdge) ||\n            isFirefoxIOS ||\n            isChromeIOS ||\n            isEdgeIOS) {\n            // Safari version comes as     \"... Version/MAJOR.MINOR ...\"\n            // Chrome version comes as     \"... Chrome/MAJOR.MINOR ...\"\n            // FirefoxIOS version comes as \"... FxiOS/MAJOR.MINOR ...\"\n            // ChromeIOS version comes as  \"... CriOS/MAJOR.MINOR ...\"\n            let searchWord;\n            if (isFirefoxIOS) {\n                searchWord = 'FxiOS';\n            }\n            else if (isChromeIOS) {\n                searchWord = 'CriOS';\n            }\n            else if (isEdgeIOS) {\n                searchWord = 'EdgiOS';\n            }\n            else if (isSafari) {\n                searchWord = 'Version';\n            }\n            else {\n                searchWord = 'Chrome';\n            }\n            const words = ua.split(' ');\n            for (const word of words) {\n                if (word.includes(searchWord)) {\n                    const version = word.split('/')[1];\n                    uaFields.browserVersion = version;\n                }\n            }\n        }\n        else if (isFirefox || isEdge) {\n            const reverseUA = ua.split('').reverse().join('');\n            const reverseVersion = reverseUA.split('/')[0];\n            const version = reverseVersion.split('').reverse().join('');\n            uaFields.browserVersion = version;\n        }\n        return uaFields;\n    }\n    getUid() {\n        if (typeof window !== 'undefined' && window.localStorage) {\n            let uid = window.localStorage.getItem('_capuid');\n            if (uid) {\n                return uid;\n            }\n            uid = this.uuid4();\n            window.localStorage.setItem('_capuid', uid);\n            return uid;\n        }\n        return this.uuid4();\n    }\n    uuid4() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        });\n    }\n}\n//# sourceMappingURL=web.js.map"],"mappings":"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","ignoreList":[]}