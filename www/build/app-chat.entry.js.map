{"file":"app-chat.entry.esm.js","mappings":"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","names":["orderBy","fromUnixTime","toNumber","differenceInMinutes","differenceInDays","format"],"sources":["src/components/common/app/chat/app-chat/app-chat.scss?tag=app-chat","src/components/common/app/chat/app-chat/app-chat.tsx"],"sourcesContent":["app-chat {\n  width: 100%;\n  height: var(--chatHeight);\n\n  #chat-container {\n    --padding-bottom: 65px;\n  }\n\n  .chat-footer {\n    position: absolute;\n    bottom: 0 !important;\n    width: 100%;\n  }\n\n  .messages {\n    padding-left: 20px;\n    padding-right: 20px;\n    margin-bottom: 20px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .message {\n    border-radius: 20px;\n    padding: 8px 15px;\n    margin-top: 5px;\n    margin-bottom: 5px;\n    display: inline-block;\n  }\n\n  .system {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n  }\n  .system .message {\n    color: rgb(68, 68, 68);\n    padding: 0;\n    margin-top: 5px;\n    margin-bottom: 1px;\n    font-size: smaller;\n  }\n\n  .yours {\n    align-items: flex-start;\n  }\n  .yours .sendername {\n    color: rgb(201, 201, 201);\n    font-size: smaller;\n  }\n  .yours .message {\n    margin-right: 25%;\n    background: linear-gradient(to bottom, #eee 0%, rgb(212, 212, 212) 100%);\n    background-attachment: fixed;\n    position: relative;\n  }\n\n  .yours .message.last:before {\n    content: \"\";\n    position: absolute;\n    z-index: 0;\n    bottom: 0;\n    left: -7px;\n    height: 20px;\n    width: 20px;\n    background: linear-gradient(to bottom, #eee 0%, rgb(212, 212, 212) 100%);\n    background-attachment: fixed;\n    border-bottom-right-radius: 15px;\n  }\n  .yours .message.last:after {\n    content: \"\";\n    position: absolute;\n    z-index: 1;\n    bottom: 0;\n    left: -10px;\n    width: 10px;\n    height: 20px;\n    background: white;\n    border-bottom-right-radius: 10px;\n  }\n\n  .mine {\n    align-items: flex-end;\n  }\n  .mine .timestamp {\n    color: #00d0ea;\n    font-size: smaller;\n  }\n\n  .mine .message {\n    color: white;\n    margin-left: 25%;\n    background: linear-gradient(to bottom, #00d0ea 0%, #0085d1 100%);\n    background-attachment: fixed;\n    position: relative;\n  }\n\n  .mine .message.last:before {\n    content: \"\";\n    position: absolute;\n    z-index: 0;\n    bottom: 0;\n    right: -8px;\n    height: 20px;\n    width: 20px;\n    background: linear-gradient(to bottom, #00d0ea 0%, #0085d1 100%);\n    background-attachment: fixed;\n    border-bottom-left-radius: 15px;\n  }\n\n  .mine .message.last:after {\n    content: \"\";\n    position: absolute;\n    z-index: 1;\n    bottom: 0;\n    right: -10px;\n    width: 10px;\n    height: 20px;\n    background: white;\n    border-bottom-left-radius: 10px;\n  }\n}\n","import {Component, h, Prop, State, Host, Method} from \"@stencil/core\";\nimport {Subscription} from \"rxjs\";\nimport {ChatService} from \"../../../../../services/common/chat\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {popoverController, alertController} from \"@ionic/core\";\nimport {Chat} from \"../../../../../interfaces/common/chat/chat\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {\n  fromUnixTime,\n  differenceInMinutes,\n  differenceInDays,\n  format,\n} from \"date-fns\";\nimport {orderBy, toNumber} from \"lodash\";\n\n@Component({\n  tag: \"app-chat\",\n  styleUrl: \"app-chat.scss\",\n})\nexport class AppChat {\n  @Prop() chatId: string;\n  chat: Chat;\n  @State() messageGroups: any = [];\n  chatSub: Subscription;\n  showingPopover = false;\n  @State() message: string;\n  chatContainer: HTMLIonContentElement;\n  @State() sendingMessage = false;\n\n  @Method()\n  async addParticipants(ev) {\n    if (!this.showingPopover) {\n      this.showingPopover = true;\n      const popover = await popoverController.create({\n        component: \"popover-chat-participants\",\n        componentProps: {chat: this.chat},\n        event: ev,\n        translucent: true,\n      });\n      popover.onDidDismiss().then(async (ev) => {\n        if (ev && ev.data) {\n          const participants = ev.data;\n          ChatService.updateParticipants(this.chatId, this.chat, participants);\n        } else {\n          //checkif number of participants is >2\n          if (Object.keys(this.chat.participants).length <= 1) {\n            const alert = await alertController.create({\n              header: TranslationService.getTransl(\"chat\", \"Chat\"),\n              message: TranslationService.getTransl(\n                \"chat-participants-error\",\n                \"You should add at least another participant to the chat.\"\n              ),\n              buttons: [\n                {\n                  text: TranslationService.getTransl(\"cancel\", \"Cancel\"),\n                  role: \"cancel\",\n                  handler: async () => {\n                    RouterService.push(\"/chat\", \"root\");\n                  },\n                },\n                {\n                  text: TranslationService.getTransl(\"ok\", \"OK\"),\n                  handler: async () => {\n                    this.addParticipants(null);\n                  },\n                },\n              ],\n            });\n            alert.present();\n          }\n        }\n\n        this.showingPopover = false;\n      });\n      popover.present();\n    }\n  }\n\n  componentWillLoad() {\n    this.chatSub = ChatService.loadedChat$.subscribe((chat: Chat) => {\n      if (chat && chat.participants) {\n        this.chat = chat;\n        this.updateMessagesArrayArray();\n        if (Object.keys(this.chat.participants).length == 1) {\n          this.addParticipants(null);\n        }\n      }\n    });\n    ChatService.loadChatsForUser(UserService.userProfile.uid);\n    ChatService.loadChat(this.chatId);\n  }\n\n  componentDidLoad() {\n    this.chatContainer = document.getElementById(\n      \"chat-container\"\n    ) as HTMLIonContentElement;\n    this.scrollToBottom();\n  }\n\n  disconnectedCallback() {\n    ChatService.saveLastChatReadToUser(this.chatId, this.chat);\n    this.chatSub.unsubscribe();\n    ChatService.unloadChat();\n  }\n\n  scrollToBottom() {\n    setTimeout(() => {\n      this.chatContainer.scrollToBottom();\n    }, 100);\n  }\n\n  updateMessagesArrayArray() {\n    this.messageGroups = [];\n    let actualMessageSender = null;\n    let previousMessageSender = null;\n    let previousDate = null;\n    let nextMessageSender = null;\n    let messageGroupsCount = -1;\n    const thread = orderBy(this.chat.thread, \"created\");\n    for (let i = 0; i < thread.length; i++) {\n      const message = thread[i];\n      actualMessageSender = message.senderId;\n      nextMessageSender =\n        i == thread.length - 1 ? null : thread[i + 1].senderId;\n      //check if is last message\n      let isFirst =\n        previousMessageSender == null ||\n        previousMessageSender != actualMessageSender;\n      let isMine = actualMessageSender == ChatService.chatUser.id;\n      let isLast = actualMessageSender != nextMessageSender;\n      let isSystem = message.senderId == \"system\";\n      const messageObject = {\n        content:\n          message.content +\n          (isSystem\n            ? message.senderName == \"added\"\n              ? \" \" + TranslationService.getTransl(\"is-in\", \"is in\")\n              : \" \" + TranslationService.getTransl(\"is-out\", \"is out\")\n            : \"\"),\n        created: message.created,\n        isFirst: isFirst,\n        isLast: isLast,\n        senderName: message.senderName,\n      };\n      if (isFirst) {\n        const date = fromUnixTime(toNumber(message.created));\n        const showDate = previousDate\n          ? differenceInMinutes(previousDate, date) >= 10\n          : true;\n        if (!isSystem && showDate) {\n          //insert message group date\n          const today =\n            differenceInDays(new Date(), date) >= 1\n              ? format(date, \"PPPP\") // Full textual representation\n              : `${format(date, \"EEEE\")} ${format(date, \"p\")}`; // Day of the week + time\n          this.messageGroups.push({\n            isSystem: true,\n            messages: [\n              {\n                content: today,\n              },\n            ],\n          });\n          previousDate = date;\n          messageGroupsCount++;\n        }\n        //create message group\n        messageGroupsCount++;\n        const item = {\n          isMine: isMine,\n          isSystem: isSystem,\n          messages: [messageObject],\n        };\n        this.messageGroups.push(item);\n      } else {\n        this.messageGroups[messageGroupsCount].messages.push(messageObject);\n      }\n      previousMessageSender = message.senderId;\n    }\n    this.sendingMessage = false;\n    this.scrollToBottom();\n  }\n\n  handleChange(ev) {\n    this.message = ev.target.value;\n  }\n\n  handleKey(key) {\n    //send message on Enter key\n    if (key.code === \"Enter\") {\n      event.preventDefault();\n      this.sendMessage();\n    }\n  }\n\n  sendMessage() {\n    this.sendingMessage = true;\n    const message = this.message;\n    this.message = \"\";\n    ChatService.sendChatMessage(this.chatId, this.chat, message);\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-content id=\"chat-container\">\n          {this.messageGroups.map((messageGroup) => [\n            <div\n              class={\n                messageGroup.isMine\n                  ? \"mine messages\"\n                  : messageGroup.isSystem\n                    ? \"system\"\n                    : \"yours messages\"\n              }\n            >\n              {messageGroup.messages.map((message) => [\n                this.chat &&\n                this.chat.participants &&\n                Object.keys(this.chat.participants).length > 2 &&\n                !messageGroup.isMine &&\n                message.isFirst &&\n                !messageGroup.isSystem ? (\n                  <div class=\"sendername\">{message.senderName}</div>\n                ) : undefined,\n                <div\n                  class={\"message\" + (message.isLast ? \" last\" : \"\")}\n                  innerHTML={message.content}\n                ></div>,\n              ])}\n            </div>,\n          ])}\n        </ion-content>\n        <ion-footer class=\"chat-footer\">\n          <ion-toolbar>\n            <ion-item lines=\"none\">\n              {this.sendingMessage ? (\n                <ion-spinner name=\"dots\"></ion-spinner>\n              ) : undefined}\n              <ion-input\n                mode=\"ios\"\n                placeholder={\n                  !this.sendingMessage\n                    ? TranslationService.getTransl(\n                        \"write-message\",\n                        \"Write a message\"\n                      )\n                    : undefined\n                }\n                autofocus={true}\n                clearOnEdit={true}\n                value={this.message}\n                disabled={this.sendingMessage}\n                onIonInput={(ev) => this.handleChange(ev)}\n                onKeyUp={(ev) => this.handleKey(ev)}\n              ></ion-input>\n              <ion-button\n                slot=\"end\"\n                icon-only\n                fill=\"clear\"\n                disabled={this.sendingMessage}\n                onClick={() => this.sendMessage()}\n              >\n                <ion-icon name=\"paper-plane-outline\"></ion-icon>\n              </ion-button>\n            </ion-item>\n          </ion-toolbar>\n        </ion-footer>\n      </Host>\n    );\n  }\n}\n"],"version":3}