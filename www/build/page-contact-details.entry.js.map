{"file":"page-contact-details.entry.esm.js","mappings":"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","names":[],"sources":["src/components/trasteel/pages/crm/page-contact-details/page-contact-details.scss?tag=page-contact-details","src/components/trasteel/pages/crm/page-contact-details/page-contact-details.tsx"],"sourcesContent":["page-contact-details {\n  /* Component styles go here */\n}\n","import {Component, Element, Prop, State, h} from \"@stencil/core\";\nimport {Contact} from \"../../../../../interfaces/trasteel/contact/contact\";\nimport Swiper from \"swiper\";\nimport {TranslationService} from \"../../../../../services/common/translations\";\nimport {SystemService} from \"../../../../../services/common/system\";\nimport {ContactsService} from \"../../../../../services/trasteel/crm/contacts\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {fabButtonTopMarginString} from \"../../../../../helpers/utils\";\nimport {CustomersService} from \"../../../../../services/trasteel/crm/customers\";\nimport {TrasteelService} from \"../../../../../services/trasteel/common/services\";\nimport {Environment} from \"../../../../../global/env\";\n\n@Component({\n  tag: \"page-contact-details\",\n  styleUrl: \"page-contact-details.scss\",\n})\nexport class PageContactDetails {\n  @Element() el: HTMLElement;\n  @Prop() itemId: string;\n  @State() contact: Contact;\n  @State() segment = \"information\";\n\n  segmentTitles: {\n    information: string;\n  };\n  @State() slider: Swiper;\n\n  async componentWillLoad() {\n    await this.loadContact();\n    this.segmentTitles = {\n      information: TranslationService.getTransl(\"information\", \"Information\"),\n    };\n  }\n\n  async loadContact() {\n    await SystemService.presentLoading(\"loading\");\n    try {\n      this.contact = await ContactsService.getContact(this.itemId);\n    } catch (error) {}\n    SystemService.dismissLoading();\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-contact\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: false,\n      autoHeight: true,\n      on: {\n        slideChange: () => {\n          this.slider ? this.slider.updateAutoHeight() : null;\n        },\n      },\n    });\n  }\n\n  async editContact() {\n    const modal = await ContactsService.presentContactUpdate(this.itemId);\n    //update contact data after modal dismiss\n    modal.onDidDismiss().then(() => this.loadContact());\n  }\n\n  segmentChanged(ev) {\n    if (ev.detail.value) {\n      this.segment = ev.detail.value;\n      this.slider.update();\n      switch (this.segment) {\n        case \"information\":\n          this.slider.slideTo(0);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  updateSlider() {\n    setTimeout(() => {\n      //reset slider height to show address\n      this.slider ? this.slider.update() : undefined;\n    }, 100);\n  }\n\n  render() {\n    return [\n      this.contact.coverURL || this.contact.photoURL ? (\n        <ion-header>\n          <app-item-cover item={this.contact}></app-item-cover>\n        </ion-header>\n      ) : undefined,\n\n      <ion-header>\n        <app-navbar\n          text={this.contact.lastName + \" \" + this.contact.firstName}\n          color=\"trasteel\"\n          backButton={\n            this.contact && !this.contact.coverURL && !this.contact.photoURL\n          }\n          rightButtonText={\n            TrasteelService.isCustomerDBAdmin()\n              ? {\n                  icon: \"create\",\n                  fill: \"outline\",\n                  tag: \"edit\",\n                  text: \"Edit\",\n                }\n              : null\n          }\n          rightButtonFc={() => this.editContact()}\n        ></app-navbar>\n      </ion-header>,\n      <ion-header>\n        <ion-toolbar>\n          <ion-segment\n            mode=\"md\"\n            color={Environment.getAppColor()}\n            scrollable\n            onIonChange={(ev) => this.segmentChanged(ev)}\n            value={this.segment}\n          >\n            <ion-segment-button value=\"information\" layout=\"icon-start\">\n              <ion-label>{this.segmentTitles.information}</ion-label>\n            </ion-segment-button>\n          </ion-segment>\n        </ion-toolbar>\n      </ion-header>,\n      <ion-content class=\"slides\">\n        <ion-fab\n          vertical=\"top\"\n          horizontal=\"start\"\n          slot=\"fixed\"\n          style={{marginTop: fabButtonTopMarginString(2)}}\n        >\n          <ion-fab-button\n            onClick={() => RouterService.goBack()}\n            class=\"fab-icon\"\n          >\n            <ion-icon name=\"arrow-back-circle-outline\"></ion-icon>\n          </ion-fab-button>\n        </ion-fab>\n        <swiper-container class=\"slider-contact swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              <ion-list class=\"ion-no-padding\">\n                <ion-list-header>\n                  <my-transl\n                    tag=\"general-information\"\n                    text=\"General Information\"\n                    isLabel\n                  />\n                </ion-list-header>\n                <app-item-detail\n                  lines=\"none\"\n                  labelTag=\"customer\"\n                  labelText=\"Customer\"\n                  detailText={\n                    this.contact.customerId &&\n                    CustomersService.getCustomersDetails(\n                      this.contact.customerId\n                    )\n                      ? CustomersService.getCustomersDetails(\n                          this.contact.customerId\n                        ).fullName\n                      : null\n                  }\n                ></app-item-detail>\n                <app-item-detail\n                  lines=\"none\"\n                  labelTag=\"location\"\n                  labelText=\"Location\"\n                  detailText={\n                    this.contact.customerLocationId &&\n                    CustomersService.getLocationsTypes(\n                      this.contact.customerLocationId\n                    )\n                      ? CustomersService.getLocationsTypes(\n                          this.contact.customerLocationId\n                        )[0].locationName\n                      : null\n                  }\n                ></app-item-detail>\n\n                <app-form-item\n                  label-tag=\"name\"\n                  label-text=\"Name\"\n                  value={this.contact.firstName}\n                  read-only={true}\n                ></app-form-item>\n                <app-form-item\n                  label-tag=\"surname\"\n                  label-text=\"Surname\"\n                  value={this.contact.lastName}\n                  read-only={true}\n                ></app-form-item>\n                <app-form-item\n                  label-tag=\"work-position\"\n                  label-text=\"Work Position\"\n                  value={this.contact.workPosition}\n                  read-only={true}\n                ></app-form-item>\n                <app-form-item\n                  label-tag=\"office-phone\"\n                  label-text=\"Office Phone\"\n                  value={this.contact.officePhone}\n                  read-only={true}\n                ></app-form-item>\n                <app-form-item\n                  label-tag=\"mobile-phone\"\n                  label-text=\"Mobile Phone\"\n                  value={this.contact.mobilePhone}\n                  read-only={true}\n                ></app-form-item>\n                <app-form-item\n                  label-tag=\"email\"\n                  label-text=\"Email\"\n                  value={this.contact.email}\n                  read-only={true}\n                ></app-form-item>\n              </ion-list>\n            </swiper-slide>\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n    ];\n  }\n}\n"],"version":3}