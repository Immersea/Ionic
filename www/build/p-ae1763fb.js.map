{"version":3,"names":["defaultMode","getIonMode","ref","getMode","initialize","userConfig","window","doc","document","win","Ionic","platformHelpers","_ael","ael","_rel","rel","_ce","ce","setPlatformHelpers","configObj","Object","assign","configFromSession","persistConfig","config","configFromURL","reset","getBoolean","saveConfig","setupPlatforms","mode","get","documentElement","getAttribute","isPlatform","set","setAttribute","classList","add","isIonicElement","elm","_a","tagName","startsWith","isAllowedIonicModeValue","elmMode","includes","setMode","console","warn","parentElement"],"sources":["node_modules/@ionic/core/dist/collection/global/ionic-global.js"],"sourcesContent":["/*!\n * (C) Ionic http://ionicframework.com - MIT License\n */\nimport { getMode, setMode, setPlatformHelpers } from \"@stencil/core\";\nimport { isPlatform, setupPlatforms } from \"../utils/platform\";\nimport { config, configFromSession, configFromURL, saveConfig } from \"./config\";\n// TODO(FW-2832): types\nlet defaultMode;\nexport const getIonMode = (ref) => {\n    return (ref && getMode(ref)) || defaultMode;\n};\nexport const initialize = (userConfig = {}) => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n    const doc = window.document;\n    const win = window;\n    const Ionic = (win.Ionic = win.Ionic || {});\n    const platformHelpers = {};\n    if (userConfig._ael) {\n        platformHelpers.ael = userConfig._ael;\n    }\n    if (userConfig._rel) {\n        platformHelpers.rel = userConfig._rel;\n    }\n    if (userConfig._ce) {\n        platformHelpers.ce = userConfig._ce;\n    }\n    setPlatformHelpers(platformHelpers);\n    // create the Ionic.config from raw config object (if it exists)\n    // and convert Ionic.config into a ConfigApi that has a get() fn\n    const configObj = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, configFromSession(win)), { persistConfig: false }), Ionic.config), configFromURL(win)), userConfig);\n    config.reset(configObj);\n    if (config.getBoolean('persistConfig')) {\n        saveConfig(win, configObj);\n    }\n    // Setup platforms\n    setupPlatforms(win);\n    // first see if the mode was set as an attribute on <html>\n    // which could have been set by the user, or by pre-rendering\n    // otherwise get the mode via config settings, and fallback to md\n    Ionic.config = config;\n    Ionic.mode = defaultMode = config.get('mode', doc.documentElement.getAttribute('mode') || (isPlatform(win, 'ios') ? 'ios' : 'md'));\n    config.set('mode', defaultMode);\n    doc.documentElement.setAttribute('mode', defaultMode);\n    doc.documentElement.classList.add(defaultMode);\n    if (config.getBoolean('_testing')) {\n        config.set('animated', false);\n    }\n    const isIonicElement = (elm) => { var _a; return (_a = elm.tagName) === null || _a === void 0 ? void 0 : _a.startsWith('ION-'); };\n    const isAllowedIonicModeValue = (elmMode) => ['ios', 'md'].includes(elmMode);\n    setMode((elm) => {\n        while (elm) {\n            const elmMode = elm.mode || elm.getAttribute('mode');\n            if (elmMode) {\n                if (isAllowedIonicModeValue(elmMode)) {\n                    return elmMode;\n                }\n                else if (isIonicElement(elm)) {\n                    console.warn('Invalid ionic mode: \"' + elmMode + '\", expected: \"ios\" or \"md\"');\n                }\n            }\n            elm = elm.parentElement;\n        }\n        return defaultMode;\n    });\n};\nexport default initialize;\n"],"mappings":";;;;AAOA,IAAIA,EACQ,MAACC,EAAcC,GACfA,GAAOC,EAAQD,IAASF,EAExB,MAACI,EAAa,CAACC,EAAa,MACpC,UAAWC,SAAW,YAAa,CAC/B,MACR,CACI,MAAMC,EAAMD,OAAOE,SACnB,MAAMC,EAAMH,OACZ,MAAMI,EAASD,EAAIC,MAAQD,EAAIC,OAAS,GACxC,MAAMC,EAAkB,GACxB,GAAIN,EAAWO,KAAM,CACjBD,EAAgBE,IAAMR,EAAWO,IACzC,CACI,GAAIP,EAAWS,KAAM,CACjBH,EAAgBI,IAAMV,EAAWS,IACzC,CACI,GAAIT,EAAWW,IAAK,CAChBL,EAAgBM,GAAKZ,EAAWW,GACxC,CACIE,EAAmBP,GAGnB,MAAMQ,EAAYC,OAAOC,OAAOD,OAAOC,OAAOD,OAAOC,OAAOD,OAAOC,OAAOD,OAAOC,OAAO,GAAIC,EAAkBb,IAAO,CAAEc,cAAe,QAAUb,EAAMc,QAASC,EAAchB,IAAOJ,GACpLmB,EAAOE,MAAMP,GACb,GAAIK,EAAOG,WAAW,iBAAkB,CACpCC,EAAWnB,EAAKU,EACxB,CAEIU,EAAepB,GAIfC,EAAMc,OAASA,EACfd,EAAMoB,KAAO9B,EAAcwB,EAAOO,IAAI,OAAQxB,EAAIyB,gBAAgBC,aAAa,UAAYC,EAAWzB,EAAK,OAAS,MAAQ,OAC5He,EAAOW,IAAI,OAAQnC,GACnBO,EAAIyB,gBAAgBI,aAAa,OAAQpC,GACzCO,EAAIyB,gBAAgBK,UAAUC,IAAItC,GAClC,GAAIwB,EAAOG,WAAW,YAAa,CAC/BH,EAAOW,IAAI,WAAY,MAC/B,CACI,MAAMI,EAAkBC,IAAU,IAAIC,EAAI,OAAQA,EAAKD,EAAIE,WAAa,MAAQD,SAAY,OAAS,EAAIA,EAAGE,WAAW,OAAO,EAC9H,MAAMC,EAA2BC,GAAY,CAAC,MAAO,MAAMC,SAASD,GACpEE,GAASP,IACL,MAAOA,EAAK,CACR,MAAMK,EAAUL,EAAIV,MAAQU,EAAIP,aAAa,QAC7C,GAAIY,EAAS,CACT,GAAID,EAAwBC,GAAU,CAClC,OAAOA,CAC3B,MACqB,GAAIN,EAAeC,GAAM,CAC1BQ,QAAQC,KAAK,wBAA0BJ,EAAU,6BACrE,CACA,CACYL,EAAMA,EAAIU,aACtB,CACQ,OAAOlD,CAAW,GACpB,S","ignoreList":[]}