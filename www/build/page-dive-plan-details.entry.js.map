{"file":"page-dive-plan-details.entry.esm.js","mappings":"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","names":["toNumber","format"],"sources":["src/components/udive/pages/dive-plan/page-dive-plan-details/page-dive-plan-details.scss?tag=page-dive-plan-details","src/components/udive/pages/dive-plan/page-dive-plan-details/page-dive-plan-details.tsx"],"sourcesContent":["page-dive-plan-details {\n  ion-segment-button {\n    --color-checked: var(--ion-color-planner-contrast);\n  }\n}\n","import {Component, h, Prop, State, Element} from \"@stencil/core\";\nimport {UserRoles} from \"../../../../../interfaces/common/user/user-roles\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {DivePlansService} from \"../../../../../services/udive/divePlans\";\nimport {DecoplannerDive} from \"../../../../../interfaces/udive/planner/decoplanner-dive\";\nimport {DiveSitesService} from \"../../../../../services/udive/diveSites\";\nimport {DivePlan} from \"../../../../../services/udive/planner/dive-plan\";\nimport {MapDataDiveSite} from \"../../../../../interfaces/udive/dive-site/diveSite\";\nimport {RouterService} from \"../../../../../services/common/router\";\nimport {Environment} from \"../../../../../global/env\";\nimport Swiper from \"swiper\";\nimport {format} from \"date-fns\";\nimport {toNumber} from \"lodash\";\n\n@Component({\n  tag: \"page-dive-plan-details\",\n  styleUrl: \"page-dive-plan-details.scss\",\n})\nexport class PageDivePlanDetails {\n  @Element() el: HTMLElement;\n  @Prop() planid: string;\n  @Prop() diveid: number;\n  @State() divePlan: DivePlan;\n  dive: DecoplannerDive;\n  diveSite: MapDataDiveSite;\n  @State() segment = \"plan\";\n  @State() segmentNum = 0;\n  titles = [\n    {tag: \"plan\", text: \"Plan\", disabled: false},\n    {tag: \"profile\", text: \"Profile\", disabled: false},\n    {tag: \"gas\", text: \"Gas\", disabled: false},\n    {tag: \"charts\", text: \"Charts\", disabled: false},\n  ];\n  @State() slider: Swiper;\n  userRoles: UserRoles;\n  diveDataToShare: any;\n\n  async componentWillLoad() {\n    let divePlanModel = await DivePlansService.getDivePlan(this.planid);\n    if (divePlanModel) {\n      this.divePlan = new DivePlan();\n      this.divePlan.setConfiguration(divePlanModel.configuration);\n      this.divePlan.setWithDivePlanModel(divePlanModel);\n      this.diveid = toNumber(this.diveid);\n      this.dive = this.divePlan.dives[this.diveid];\n      this.getDiveSitesDetails();\n      this.userRoles = UserService.userRoles;\n      //send updated params to other views\n      this.diveDataToShare = {\n        divePlan: this.divePlan,\n        index: this.diveid,\n        user: this.userRoles,\n        editPlan: false,\n        diveSite: this.diveSite,\n      };\n    } else {\n      RouterService.goBack();\n    }\n  }\n\n  async componentDidLoad() {\n    this.slider = new Swiper(\".slider-dive-plan\", {\n      speed: 400,\n      spaceBetween: 100,\n      allowTouchMove: true,\n      autoHeight: true,\n    });\n  }\n\n  getDiveSitesDetails() {\n    if (this.dive.diveSiteId) {\n      this.diveSite = DiveSitesService.getDiveSitesDetails(\n        this.dive.diveSiteId\n      );\n    }\n  }\n\n  render() {\n    return [\n      <ion-header>\n        <ion-toolbar\n          color={Environment.isDecoplanner() ? \"gue-blue\" : \"planner\"}\n        >\n          <ion-buttons slot=\"start\">\n            <ion-button onClick={() => RouterService.goBack()} icon-only>\n              <ion-icon name=\"arrow-back\"></ion-icon>\n            </ion-button>\n          </ion-buttons>\n          <ion-title>\n            {format(this.dive.date, \"PP\")}\n            {this.diveSite ? \" - \" + this.diveSite.displayName : undefined}\n            {\" - \" + this.divePlan.configuration.stdName}\n          </ion-title>\n        </ion-toolbar>\n      </ion-header>,\n      this.diveSite && (this.diveSite.coverURL || this.diveSite.photoURL) ? (\n        <ion-header style={{height: \"var(--coverHeight)\"}}>\n          <app-item-cover item={this.diveSite} />\n        </ion-header>\n      ) : undefined,\n      <app-header-segment-toolbar\n        color={Environment.isDecoplanner() ? \"gue-blue\" : \"planner\"}\n        swiper={this.slider}\n        titles={this.titles}\n      ></app-header-segment-toolbar>,\n      <ion-content class=\"slides\">\n        <swiper-container class=\"slider-dive-plan swiper\">\n          <swiper-wrapper class=\"swiper-wrapper\">\n            <swiper-slide class=\"swiper-slide\">\n              <app-decoplanner-showplan\n                diveDataToShare={this.diveDataToShare}\n              />\n            </swiper-slide>\n            <swiper-slide class=\"swiper-slide\">\n              <app-decoplanner-profile diveDataToShare={this.diveDataToShare} />\n            </swiper-slide>\n            <swiper-slide class=\"swiper-slide\">\n              <app-decoplanner-gas\n                diveDataToShare={this.diveDataToShare}\n                isShown={this.segment == \"gas\"}\n              />\n            </swiper-slide>\n            <swiper-slide class=\"swiper-slide\">\n              <app-decoplanner-charts\n                diveDataToShare={this.diveDataToShare}\n                isShown={this.segment == \"charts\"}\n              />\n            </swiper-slide>\n          </swiper-wrapper>\n        </swiper-container>\n      </ion-content>,\n    ];\n  }\n}\n"],"version":3}