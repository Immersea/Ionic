{"file":"app-user-diving-schools.entry.esm.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,uBAAuB,GAAG,2BAA2B;;MCc9C,oBAAoB;;;QAI/B,iBAAY,GAAU,EAAE,CAAC;;yBACG,EAAE;;IAE9B,MAAM,iBAAiB;QACrB,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,SAAS;YACjE,IAAI,SAAS,IAAI,SAAS,CAAC,GAAG,EAAE;gBAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,SAAS,CAAC,SAAS,CAAC,CAAC;gBAC1C,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;SACF,CAAC,CAAC;;QAEH,IAAI,CAAC,OAAO,GAAG,oBAAoB,CAAC,kBAAkB,CAAC,SAAS,CAC9D,CAAC,UAAU;YACT,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC;YAC/B,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB,CACF,CAAC;KACH;IAED,oBAAoB;QAClB,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;KAC5B;IAED,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IACE,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC;YAC5B,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,SAAS,CAAC,QAAQ,EACvB;YACA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG;gBAC/C,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,UAAU,IAAI,sBAAsB,EAAE;oBACrE,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC;oBACtD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACzB;aACF,CAAC,CAAC;YACH,IAAI,CAAC,SAAS,GAAGA,sBAAO,CAAC,IAAI,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;SACzD;KACF;IAED,MAAM,CAAC,KAAK,EAAE,EAAE;QACd,KAAK,CAAC,eAAe,EAAE,CAAC;QACxB,oBAAoB,CAAC,yBAAyB,CAAC,EAAE,CAAC,CAAC;KACpD;IAED,MAAM;QACJ,QACE,EAAC,IAAI,uDACF,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,MACrB,gBACE,MAAM,QACN,OAAO,EAAE,MACP,oBAAoB,CAAC,0BAA0B,CAAC,EAAE,CAAC,EAAE,CAAC,EAExD,MAAM,UAEL,EAAE,CAAC,QAAQ,IACV,kBAAY,IAAI,EAAC,OAAO,IACtB,WAAK,GAAG,EAAE,EAAE,CAAC,QAAQ,GAAI,CACd,IACX,SAAS,EAEb,qBAAY,EAAE,CAAC,WAAW,CAAa,EACvC,kBACE,IAAI,EAAC,OAAO,qBAEZ,IAAI,EAAC,KAAK,EACV,OAAO,EAAE,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,IAEvC,gBAAU,IAAI,EAAC,QAAQ,EAAC,IAAI,EAAC,KAAK,GAAY,CACnC,CACJ,CACZ,CAAC,CACG,EACP;KACH;;;;;;","names":["orderBy"],"sources":["src/components/udive/app/user/app-user-diving-schools/app-user-diving-schools.scss?tag=app-user-diving-schools","src/components/udive/app/user/app-user-diving-schools/app-user-diving-schools.tsx"],"sourcesContent":["app-user-diving-schools {\n  /* Component styles go here */\n}\n","import {Component, h, State, Host} from \"@stencil/core\";\nimport {UserService} from \"../../../../../services/common/user\";\nimport {UserRoles} from \"../../../../../interfaces/common/user/user-roles\";\nimport {orderBy} from \"lodash\";\nimport {\n  DivingSchoolsService,\n  DIVESCHOOLSSCOLLECTION,\n} from \"../../../../../services/udive/divingSchools\";\nimport {Subscription} from \"rxjs\";\n\n@Component({\n  tag: \"app-user-diving-schools\",\n  styleUrl: \"app-user-diving-schools.scss\",\n})\nexport class AppUserDivingSchools {\n  @State() userRoles: UserRoles;\n  userRoles$: Subscription;\n  dsList$: Subscription;\n  dsCollection: any[] = [];\n  @State() mySchools: any[] = [];\n\n  async componentWillLoad() {\n    this.userRoles$ = UserService.userRoles$.subscribe(async (userRoles) => {\n      if (userRoles && userRoles.uid) {\n        this.userRoles = new UserRoles(userRoles);\n        this.filterMyCenters();\n      }\n    });\n    //load all dive sites\n    this.dsList$ = DivingSchoolsService.divingSchoolsList$.subscribe(\n      (collection) => {\n        this.dsCollection = collection;\n        this.filterMyCenters();\n      }\n    );\n  }\n\n  disconnectedCallback() {\n    this.userRoles$.unsubscribe();\n    this.dsList$.unsubscribe();\n  }\n\n  filterMyCenters() {\n    this.mySchools = [];\n    if (\n      this.dsCollection.length > 0 &&\n      this.userRoles &&\n      this.userRoles.editorOf\n    ) {\n      Object.keys(this.userRoles.editorOf).forEach((key) => {\n        if (this.userRoles.editorOf[key].collection == DIVESCHOOLSSCOLLECTION) {\n          let ds = this.dsCollection.find((ds) => ds.id == key);\n          this.mySchools.push(ds);\n        }\n      });\n      this.mySchools = orderBy(this.mySchools, \"displayname\");\n    }\n  }\n\n  update(event, id) {\n    event.stopPropagation();\n    DivingSchoolsService.presentDivingSchoolUpdate(id);\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.mySchools.map((dc) => (\n          <ion-item\n            button\n            onClick={() =>\n              DivingSchoolsService.presentDivingSchoolDetails(dc.id)\n            }\n            detail\n          >\n            {dc.photoURL ? (\n              <ion-avatar slot=\"start\">\n                <img src={dc.photoURL} />\n              </ion-avatar>\n            ) : undefined}\n\n            <ion-label>{dc.displayName}</ion-label>\n            <ion-button\n              fill=\"clear\"\n              icon-only\n              slot=\"end\"\n              onClick={(ev) => this.update(ev, dc.id)}\n            >\n              <ion-icon name=\"create\" slot=\"end\"></ion-icon>\n            </ion-button>\n          </ion-item>\n        ))}\n      </Host>\n    );\n  }\n}\n"],"version":3}