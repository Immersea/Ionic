{"version":3,"names":["modalSearchListCss","ModalSearchListStyle0","ModalSearchList","componentWillLoad","this","nonFilteredList","cloneDeep","list","clearFilterObject","filterObject","openFilter","filterPopup","filterFunction","clearFilter","handleSelect","item","modalController","dismiss","renderKey","key","res","DatasheetsService","getDatasheetFamilies","familyName","getDatasheetMajorFamilies","majorFamilyName","ShapesService","getShapeTypeName","en","close","render","h","Host","tag","searchTitle","text","color","Environment","getAppColor","rightButtonText","icon","fill","rightButtonFc","class","size","expand","onClick","name","undefined","orderFields","showField","placeholder","filterBy","onFilteredList","ev","filteredList","detail","isActive","Object","keys","map","showFields","orderBy","onItemClicked"],"sources":["src/components/trasteel/modals/modal-search-list/modal-search-list.scss?tag=modal-search-list","src/components/trasteel/modals/modal-search-list/modal-search-list.tsx"],"sourcesContent":["modal-search-list {\n  /* Component styles go here */\n}\n","import {Component, h, Host, State, Element, Prop} from \"@stencil/core\";\nimport {modalController} from \"@ionic/core\";\nimport {cloneDeep} from \"lodash\";\nimport {Environment} from \"../../../../global/env\";\nimport {DatasheetsService} from \"../../../../services/trasteel/refractories/datasheets\";\nimport {ShapesService} from \"../../../../services/trasteel/refractories/shapes\";\n\n@Component({\n  tag: \"modal-search-list\",\n  styleUrl: \"modal-search-list.scss\",\n})\nexport class ModalSearchList {\n  @Prop() list: any[];\n  @Prop() searchTitle: {tag: string; text: string};\n  nonFilteredList: any[];\n  @Prop() item: any;\n  @Prop() showField: string;\n  @Prop() orderBy: string[] = [];\n  @Prop() filterBy: string[];\n  @Prop() placeholder: string;\n  @Prop() filterObject: any;\n  clearFilterObject: any;\n  @Prop() filterPopup: any;\n  @Prop() filterFunction: any;\n  @Element() el: HTMLElement;\n  searchString: string;\n  @State() filteredList: any[];\n  start: number;\n  listLength: number;\n\n  componentWillLoad() {\n    this.nonFilteredList = cloneDeep(this.list);\n    this.clearFilterObject = cloneDeep(this.filterObject);\n  }\n\n  async openFilter() {\n    this.filterObject = await this.filterPopup(this.filterObject);\n    this.list = await this.filterFunction(this.filterObject);\n  }\n\n  clearFilter() {\n    this.filterObject = cloneDeep(this.clearFilterObject);\n    this.list = cloneDeep(this.nonFilteredList);\n  }\n\n  handleSelect(item) {\n    modalController.dismiss(item);\n  }\n\n  renderKey(key) {\n    let res = null;\n    switch (key) {\n      case \"familyId\":\n        res = DatasheetsService.getDatasheetFamilies(this.filterObject[key])[0]\n          .familyName;\n        break;\n      case \"majorFamilyId\":\n        res = DatasheetsService.getDatasheetMajorFamilies(\n          this.filterObject[key]\n        )[0].majorFamilyName;\n        break;\n      case \"shapeTypeId\":\n        res = ShapesService.getShapeTypeName(this.filterObject[key]).en;\n        break;\n      default:\n        res = key + \" = \" + this.filterObject[key];\n        break;\n    }\n    return res;\n  }\n\n  close() {\n    modalController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header>\n          <app-navbar\n            tag={this.searchTitle.tag ? this.searchTitle.tag : \"find\"}\n            text={this.searchTitle.text ? this.searchTitle.text : \"Find\"}\n            color={Environment.getAppColor()}\n            rightButtonText={{\n              icon: \"close\",\n              tag: null,\n              text: null,\n              fill: \"clear\",\n            }}\n            rightButtonFc={this.close}\n          ></app-navbar>\n          <ion-grid class=\"ion-no-padding\">\n            <ion-row class=\"ion-no-padding\">\n              {this.filterObject ? (\n                <ion-col size=\"1\" class=\"ion-no-padding\">\n                  <ion-toolbar color={Environment.getAppColor()}>\n                    <ion-button\n                      fill=\"clear\"\n                      expand=\"full\"\n                      icon-only\n                      onClick={() => this.openFilter()}\n                    >\n                      <ion-icon name=\"filter\" color=\"light\"></ion-icon>\n                    </ion-button>\n                  </ion-toolbar>\n                </ion-col>\n              ) : undefined}\n\n              <ion-col\n                size={this.filterObject ? \"11\" : \"12\"}\n                class=\"ion-no-padding\"\n              >\n                <app-search-toolbar\n                  list={this.list}\n                  orderFields={[this.showField]}\n                  color=\"trasteel\"\n                  placeholder={this.placeholder ? this.placeholder : \"search\"}\n                  filterBy={this.filterBy}\n                  onFilteredList={(ev) => (this.filteredList = ev.detail)}\n                ></app-search-toolbar>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </ion-header>\n        <ion-content>\n          {this.filterObject && this.filterObject.isActive()\n            ? [\n                <ion-breadcrumbs>\n                  <ion-button\n                    icon-only\n                    fill=\"clear\"\n                    onClick={() => this.clearFilter()}\n                  >\n                    <ion-icon color=\"danger\" name=\"trash\"></ion-icon>\n                  </ion-button>\n                  <ion-breadcrumb></ion-breadcrumb>\n                  {Object.keys(this.filterObject).map((key) =>\n                    key != \"oldProduct\" &&\n                    (this.filterObject[key] > 0 ||\n                      this.filterObject[key] !== null) ? (\n                      <ion-breadcrumb>{this.renderKey(key)}</ion-breadcrumb>\n                    ) : undefined\n                  )}\n                  <ion-breadcrumb></ion-breadcrumb>\n                </ion-breadcrumbs>,\n              ]\n            : undefined}\n          <app-infinite-scroll\n            list={this.filteredList}\n            showFields={[this.showField]}\n            orderBy={this.orderBy}\n            onItemClicked={(ev) => this.handleSelect(ev.detail)}\n          ></app-infinite-scroll>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"mappings":"qXAAA,MAAMA,EAAqB,sBAC3B,MAAAC,EAAeD,E,MCUFE,EAAe,M,kIAME,G,oKAa5B,iBAAAC,GACEC,KAAKC,gBAAkBC,oBAAUF,KAAKG,MACtCH,KAAKI,kBAAoBF,oBAAUF,KAAKK,a,CAG1C,gBAAMC,GACJN,KAAKK,mBAAqBL,KAAKO,YAAYP,KAAKK,cAChDL,KAAKG,WAAaH,KAAKQ,eAAeR,KAAKK,a,CAG7C,WAAAI,GACET,KAAKK,aAAeH,oBAAUF,KAAKI,mBACnCJ,KAAKG,KAAOD,oBAAUF,KAAKC,gB,CAG7B,YAAAS,CAAaC,GACXC,EAAgBC,QAAQF,E,CAG1B,SAAAG,CAAUC,GACR,IAAIC,EAAM,KACV,OAAQD,GACN,IAAK,WACHC,EAAMC,EAAkBC,qBAAqBlB,KAAKK,aAAaU,IAAM,GAClEI,WACH,MACF,IAAK,gBACHH,EAAMC,EAAkBG,0BACtBpB,KAAKK,aAAaU,IAClB,GAAGM,gBACL,MACF,IAAK,cACHL,EAAMM,EAAcC,iBAAiBvB,KAAKK,aAAaU,IAAMS,GAC7D,MACF,QACER,EAAMD,EAAM,MAAQf,KAAKK,aAAaU,GACtC,MAEJ,OAAOC,C,CAGT,KAAAS,GACEb,EAAgBC,S,CAGlB,MAAAa,GACE,OACEC,EAACC,EAAI,CAAAb,IAAA,4CACHY,EAAA,cAAAZ,IAAA,4CACEY,EAAA,cAAAZ,IAAA,2CACEc,IAAK7B,KAAK8B,YAAYD,IAAM7B,KAAK8B,YAAYD,IAAM,OACnDE,KAAM/B,KAAK8B,YAAYC,KAAO/B,KAAK8B,YAAYC,KAAO,OACtDC,MAAOC,EAAYC,cACnBC,gBAAiB,CACfC,KAAM,QACNP,IAAK,KACLE,KAAM,KACNM,KAAM,SAERC,cAAetC,KAAKyB,QAEtBE,EAAA,YAAAZ,IAAA,2CAAUwB,MAAM,kBACdZ,EAAA,WAAAZ,IAAA,2CAASwB,MAAM,kBACZvC,KAAKK,aACJsB,EAAA,WAASa,KAAK,IAAID,MAAM,kBACtBZ,EAAA,eAAaK,MAAOC,EAAYC,eAC9BP,EAAA,cACEU,KAAK,QACLI,OAAO,OAAM,iBAEbC,QAAS,IAAM1C,KAAKM,cAEpBqB,EAAA,YAAUgB,KAAK,SAASX,MAAM,aAIlCY,UAEJjB,EAAA,WAAAZ,IAAA,2CACEyB,KAAMxC,KAAKK,aAAe,KAAO,KACjCkC,MAAM,kBAENZ,EAAA,sBAAAZ,IAAA,2CACEZ,KAAMH,KAAKG,KACX0C,YAAa,CAAC7C,KAAK8C,WACnBd,MAAM,WACNe,YAAa/C,KAAK+C,YAAc/C,KAAK+C,YAAc,SACnDC,SAAUhD,KAAKgD,SACfC,eAAiBC,GAAQlD,KAAKmD,aAAeD,EAAGE,aAM1DzB,EAAA,eAAAZ,IAAA,4CACGf,KAAKK,cAAgBL,KAAKK,aAAagD,WACpC,CACE1B,EAAA,uBACEA,EAAA,+BAEEU,KAAK,QACLK,QAAS,IAAM1C,KAAKS,eAEpBkB,EAAA,YAAUK,MAAM,SAASW,KAAK,WAEhChB,EAAA,uBACC2B,OAAOC,KAAKvD,KAAKK,cAAcmD,KAAKzC,GACnCA,GAAO,eACNf,KAAKK,aAAaU,GAAO,GACxBf,KAAKK,aAAaU,KAAS,MAC3BY,EAAA,sBAAiB3B,KAAKc,UAAUC,IAC9B6B,YAENjB,EAAA,yBAGJiB,UACJjB,EAAA,uBAAAZ,IAAA,2CACEZ,KAAMH,KAAKmD,aACXM,WAAY,CAACzD,KAAK8C,WAClBY,QAAS1D,KAAK0D,QACdC,cAAgBT,GAAOlD,KAAKU,aAAawC,EAAGE,W","ignoreList":[]}