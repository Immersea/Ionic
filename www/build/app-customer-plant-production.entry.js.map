{"file":"app-customer-plant-production.entry.esm.js","mappings":"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","names":[],"sources":["src/components/trasteel/app/app-customer-plant-production/app-customer-plant-production.scss?tag=app-customer-plant-production","src/components/trasteel/app/app-customer-plant-production/app-customer-plant-production.tsx"],"sourcesContent":["app-customer-plant-production {\n  /* Component styles go here */\n}\n","import {Component, h, Prop, Host, Element, State} from \"@stencil/core\";\nimport {Customer} from \"../../../../interfaces/trasteel/customer/customer\";\n\n@Component({\n  tag: \"app-customer-plant-production\",\n  styleUrl: \"app-customer-plant-production.scss\",\n})\nexport class AppLocation {\n  @Element() el: HTMLElement;\n  @Prop() customer: Customer;\n  @Prop() editable = false;\n  @State() productionData = [];\n  @State() capacityData = [];\n  startYear = 2019;\n  endYear = new Date().getFullYear();\n\n  componentWillLoad() {\n    if (this.editable) {\n      this.startYear = this.endYear - 1;\n    }\n    const production = [\n      {tag: \"DRI_production\", text: \"DRI/HBI Production\"},\n      {tag: \"BF_production\", text: \"Blast Furnace Production\"},\n      {tag: \"iron_production\", text: \"Iron Production\"},\n      {tag: \"BOF_production\", text: \"BOF/Converter Production\"},\n      {tag: \"crude_steel_production\", text: \"Crude Steel Production\"},\n      {tag: \"EAF_steel_production\", text: \"EAF Steel Production\"},\n      {tag: \"OHF_steel_production\", text: \"OHF Steel Production\"},\n    ];\n    const capacity = [\n      {tag: \"coking_plant_capacity\", text: \"Coking Plant Capacity\"},\n      {tag: \"ferronickel_capacity\", text: \"Ferronickel Capacity\"},\n      {tag: \"pelletizing_plant_capacity\", text: \"Pelletizing Plant Capacity\"},\n      {tag: \"sinter_plant_capacity\", text: \"Sinter Plant Capacity\"},\n    ];\n    production.forEach((prod) => {\n      if (\n        this.customer.productionData[prod.tag] &&\n        this.customer.productionData[prod.tag].nominal != \"N/A\" &&\n        this.customer.productionData[prod.tag].nominal != \"unknown\"\n      ) {\n        const byYear = [];\n        if (\n          Object.keys(this.customer.productionData[prod.tag].byYear).length > 0\n        ) {\n          for (let year = this.startYear; year <= this.endYear; year++) {\n            if (\n              this.customer.productionData[prod.tag].byYear[year] &&\n              this.customer.productionData[prod.tag].byYear[year] != \"N/A\" &&\n              this.customer.productionData[prod.tag].byYear[year] != \"unknown\"\n            ) {\n              byYear.push({\n                year: year,\n                value: this.customer.productionData[prod.tag].byYear[year],\n              });\n            } else if (this.editable) {\n              byYear.push({\n                year: year,\n                value: null,\n              });\n            }\n          }\n        } else if (this.editable) {\n          for (let year = this.startYear; year <= this.endYear; year++) {\n            byYear.push({\n              year: year,\n              value: null,\n            });\n          }\n        }\n        this.productionData.push({\n          item: prod,\n          value: this.customer.productionData[prod.tag].nominal,\n          byYear: byYear,\n        });\n      } else if (this.editable) {\n        const byYear = [];\n        for (let year = this.startYear; year <= this.endYear; year++) {\n          byYear.push({\n            year: year,\n            value: null,\n          });\n        }\n        this.productionData.push({\n          item: prod,\n          value: null,\n          byYear: byYear,\n        });\n      }\n    });\n    capacity.forEach((cap) => {\n      if (\n        this.customer.productionData[cap.tag] &&\n        this.customer.productionData[cap.tag] != \"N/A\" &&\n        this.customer.productionData[cap.tag] != \"unknown\"\n      ) {\n        this.capacityData.push({\n          item: cap,\n          value: this.customer.productionData[cap.tag],\n        });\n      } else if (this.editable) {\n        this.capacityData.push({\n          item: cap,\n          value: null,\n        });\n      }\n    });\n  }\n\n  handleChange(ev) {\n    const item = ev.detail.name.split(\"^^\");\n    if (item[0] == \"production\") {\n      if (\n        !this.customer.productionData[item[1]] ||\n        !this.customer.productionData[item[1]].nominal\n      )\n        this.customer.productionData[item[1]] = {nominal: null, byYear: {}};\n      if (item.length < 3) {\n        this.customer.productionData[item[1]].nominal = ev.detail.value;\n      } else {\n        this.customer.productionData[item[1]].byYear[item[2]] = ev.detail.value;\n      }\n    } else {\n      //capacity\n      this.customer.productionData[item[1]] = ev.detail.value;\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        {this.productionData.length > 0\n          ? [\n              <ion-item-divider>\n                <my-transl\n                  tag=\"production_data\"\n                  text=\"Production Data\"\n                  appendText=\" (kTon/year)\"\n                ></my-transl>\n              </ion-item-divider>,\n              this.productionData.map((prod) => [\n                <app-form-item\n                  showItem\n                  labelTag={prod.item.tag}\n                  labelText={prod.item.text}\n                  value={prod.value}\n                  name={\"production^^\" + prod.item.tag}\n                  input-type=\"number\"\n                  onFormItemChanged={(ev) => this.handleChange(ev)}\n                  readonly={!this.editable}\n                ></app-form-item>,\n                this.editable ? (\n                  prod.byYear.map((year) => (\n                    <app-form-item\n                      showItem\n                      labelText={year.year}\n                      value={year.value}\n                      name={\"production^^\" + prod.item.tag + \"^^\" + year.year}\n                      input-type=\"number\"\n                      onFormItemChanged={(ev) => this.handleChange(ev)}\n                    ></app-form-item>\n                  ))\n                ) : prod.byYear && prod.byYear.length > 0 ? (\n                  <ion-item>\n                    <ion-label>\n                      {prod.byYear.map(\n                        (year, index) =>\n                          year.year +\n                          \": \" +\n                          year.value +\n                          (index < prod.byYear.length - 1 ? \", \" : \"\")\n                      )}\n                    </ion-label>\n                  </ion-item>\n                ) : undefined,\n              ]),\n            ]\n          : undefined}\n        {this.capacityData.length > 0\n          ? [\n              <ion-item-divider>\n                <my-transl\n                  tag=\"capacity_data\"\n                  text=\"Capacity Data\"\n                  appendText=\" (kTon/year)\"\n                ></my-transl>\n              </ion-item-divider>,\n              this.capacityData.map((cap) => [\n                <app-form-item\n                  showItem\n                  lines=\"none\"\n                  labelTag={cap.item.tag}\n                  labelText={cap.item.text}\n                  value={cap.value}\n                  name={\"capacity^^\" + cap.item.tag}\n                  input-type=\"number\"\n                  onFormItemChanged={(ev) => this.handleChange(ev)}\n                  readonly={!this.editable}\n                ></app-form-item>,\n              ]),\n            ]\n          : undefined}\n      </Host>\n    );\n  }\n}\n"],"version":3}