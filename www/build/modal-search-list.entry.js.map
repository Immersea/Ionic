{"file":"modal-search-list.entry.esm.js","mappings":"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","names":["cloneDeep"],"sources":["src/components/trasteel/modals/modal-search-list/modal-search-list.scss?tag=modal-search-list","src/components/trasteel/modals/modal-search-list/modal-search-list.tsx"],"sourcesContent":["modal-search-list {\n  /* Component styles go here */\n}\n","import {Component, h, Host, State, Element, Prop} from \"@stencil/core\";\nimport {modalController} from \"@ionic/core\";\nimport {cloneDeep} from \"lodash\";\nimport {Environment} from \"../../../../global/env\";\nimport {DatasheetsService} from \"../../../../services/trasteel/refractories/datasheets\";\nimport {ShapesService} from \"../../../../services/trasteel/refractories/shapes\";\n\n@Component({\n  tag: \"modal-search-list\",\n  styleUrl: \"modal-search-list.scss\",\n})\nexport class ModalSearchList {\n  @Prop() list: any[];\n  @Prop() searchTitle: {tag: string; text: string};\n  nonFilteredList: any[];\n  @Prop() item: any;\n  @Prop() showField: string;\n  @Prop() orderBy: string[] = [];\n  @Prop() filterBy: string[];\n  @Prop() placeholder: string;\n  @Prop() filterObject: any;\n  clearFilterObject: any;\n  @Prop() filterPopup: any;\n  @Prop() filterFunction: any;\n  @Element() el: HTMLElement;\n  searchString: string;\n  @State() filteredList: any[];\n  start: number;\n  listLength: number;\n\n  componentWillLoad() {\n    this.nonFilteredList = cloneDeep(this.list);\n    this.clearFilterObject = cloneDeep(this.filterObject);\n  }\n\n  async openFilter() {\n    this.filterObject = await this.filterPopup(this.filterObject);\n    this.list = await this.filterFunction(this.filterObject);\n  }\n\n  clearFilter() {\n    this.filterObject = cloneDeep(this.clearFilterObject);\n    this.list = cloneDeep(this.nonFilteredList);\n  }\n\n  handleSelect(item) {\n    modalController.dismiss(item);\n  }\n\n  renderKey(key) {\n    let res = null;\n    switch (key) {\n      case \"familyId\":\n        res = DatasheetsService.getDatasheetFamilies(this.filterObject[key])[0]\n          .familyName;\n        break;\n      case \"majorFamilyId\":\n        res = DatasheetsService.getDatasheetMajorFamilies(\n          this.filterObject[key]\n        )[0].majorFamilyName;\n        break;\n      case \"shapeTypeId\":\n        res = ShapesService.getShapeTypeName(this.filterObject[key]).en;\n        break;\n      default:\n        res = key + \" = \" + this.filterObject[key];\n        break;\n    }\n    return res;\n  }\n\n  close() {\n    modalController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header>\n          <app-navbar\n            tag={this.searchTitle.tag ? this.searchTitle.tag : \"find\"}\n            text={this.searchTitle.text ? this.searchTitle.text : \"Find\"}\n            color={Environment.getAppColor()}\n            rightButtonText={{\n              icon: \"close\",\n              tag: null,\n              text: null,\n              fill: \"clear\",\n            }}\n            rightButtonFc={this.close}\n          ></app-navbar>\n          <ion-grid class=\"ion-no-padding\">\n            <ion-row class=\"ion-no-padding\">\n              {this.filterObject ? (\n                <ion-col size=\"1\" class=\"ion-no-padding\">\n                  <ion-toolbar color={Environment.getAppColor()}>\n                    <ion-button\n                      fill=\"clear\"\n                      expand=\"full\"\n                      icon-only\n                      onClick={() => this.openFilter()}\n                    >\n                      <ion-icon name=\"filter\" color=\"light\"></ion-icon>\n                    </ion-button>\n                  </ion-toolbar>\n                </ion-col>\n              ) : undefined}\n\n              <ion-col\n                size={this.filterObject ? \"11\" : \"12\"}\n                class=\"ion-no-padding\"\n              >\n                <app-search-toolbar\n                  list={this.list}\n                  orderFields={[this.showField]}\n                  color=\"trasteel\"\n                  placeholder={this.placeholder ? this.placeholder : \"search\"}\n                  filterBy={this.filterBy}\n                  onFilteredList={(ev) => (this.filteredList = ev.detail)}\n                ></app-search-toolbar>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </ion-header>\n        <ion-content>\n          {this.filterObject && this.filterObject.isActive()\n            ? [\n                <ion-breadcrumbs>\n                  <ion-button\n                    icon-only\n                    fill=\"clear\"\n                    onClick={() => this.clearFilter()}\n                  >\n                    <ion-icon color=\"danger\" name=\"trash\"></ion-icon>\n                  </ion-button>\n                  <ion-breadcrumb></ion-breadcrumb>\n                  {Object.keys(this.filterObject).map((key) =>\n                    key != \"oldProduct\" &&\n                    (this.filterObject[key] > 0 ||\n                      this.filterObject[key] !== null) ? (\n                      <ion-breadcrumb>{this.renderKey(key)}</ion-breadcrumb>\n                    ) : undefined\n                  )}\n                  <ion-breadcrumb></ion-breadcrumb>\n                </ion-breadcrumbs>,\n              ]\n            : undefined}\n          <app-infinite-scroll\n            list={this.filteredList}\n            showFields={[this.showField]}\n            orderBy={this.orderBy}\n            onItemClicked={(ev) => this.handleSelect(ev.detail)}\n          ></app-infinite-scroll>\n        </ion-content>\n      </Host>\n    );\n  }\n}\n"],"version":3}