{"file":"modal-user-teams-update.entry.esm.js","mappings":"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","names":[],"sources":["src/components/trasteel/modals/modal-user-teams-update/modal-user-teams-update.scss?tag=modal-user-teams-update","src/components/trasteel/modals/modal-user-teams-update/modal-user-teams-update.tsx"],"sourcesContent":["modal-user-teams-update {\n  ion-list {\n    width: 100%;\n  }\n}\n","import {Component, h, Host, Prop, State, Element} from \"@stencil/core\";\nimport {actionSheetController, modalController} from \"@ionic/core\";\nimport {Environment} from \"../../../../global/env\";\nimport {\n  UserTeams,\n  UsersTeams,\n} from \"../../../../interfaces/trasteel/users/users-teams\";\nimport {TrasteelService} from \"../../../../services/trasteel/common/services\";\nimport {UserPubicProfile} from \"../../../../components\";\nimport {ProductLines} from \"../../../../interfaces/trasteel/users/user-plans\";\n\n@Component({\n  tag: \"modal-user-teams-update\",\n  styleUrl: \"modal-user-teams-update.scss\",\n})\nexport class ModalUserTeamsUpdate {\n  @Element() el: HTMLElement;\n  @Prop() user: UserPubicProfile;\n  @State() usersTeams: UsersTeams;\n  @State() userIndex: number;\n  @State() userTeams: UserTeams;\n  @State() updateView = false;\n\n  async componentWillLoad() {\n    this.usersTeams = await TrasteelService.getUsersTeams();\n    this.userIndex =\n      this.usersTeams.usersTeams.length > 0\n        ? this.usersTeams.usersTeams.findIndex((x) => x.uid === this.user.uid)\n        : -1;\n    if (this.userIndex < 0) {\n      this.userTeams = new UserTeams(this.user);\n    } else {\n      this.userTeams = this.usersTeams.usersTeams[this.userIndex];\n    }\n  }\n\n  async addTeam() {\n    let buttons = [];\n    let teams = Object.keys(ProductLines);\n    teams.forEach((team) => {\n      if (!this.userTeams.teams.includes(team)) {\n        buttons.push({\n          text: team,\n          handler: () => {\n            this.userTeams.teams.push(team);\n            this.updateView = !this.updateView;\n          },\n        });\n      }\n    });\n    buttons.push({\n      text: \"Close\",\n      icon: \"close\",\n      role: \"cancel\",\n      handler: () => {},\n    });\n    const actionSheet = await actionSheetController.create({\n      header: \"Add\",\n      buttons: buttons,\n    });\n    await actionSheet.present();\n  }\n\n  async deleteTeam(index) {\n    this.userTeams.teams.splice(index);\n    this.updateView = !this.updateView;\n  }\n\n  async save() {\n    if (this.userIndex >= 0) {\n      this.usersTeams.usersTeams[this.userIndex] = this.userTeams;\n    } else {\n      this.usersTeams.usersTeams.push(this.userTeams);\n    }\n    TrasteelService.updateUsersTeams(this.usersTeams);\n    modalController.dismiss();\n  }\n\n  async cancel() {\n    return modalController.dismiss();\n  }\n\n  render() {\n    return (\n      <Host>\n        <ion-header>\n          <ion-toolbar color=\"trasteel\">\n            <ion-title>USER TEAMS MANAGER</ion-title>\n          </ion-toolbar>\n        </ion-header>\n        <ion-content>\n          <ion-list>\n            <ion-item>{this.user.email}</ion-item>\n            <ion-item-divider>\n              <ion-label>\n                <my-transl tag=\"teams\" text=\"Teams\"></my-transl>\n              </ion-label>\n            </ion-item-divider>\n            {this.userTeams.teams.map((team, index) => (\n              <ion-item>\n                <ion-label>{team}</ion-label>\n                <ion-button\n                  slot=\"end\"\n                  fill=\"clear\"\n                  onClick={() => this.deleteTeam(index)}\n                >\n                  <ion-icon name=\"trash\" color=\"danger\"></ion-icon>\n                </ion-button>\n              </ion-item>\n            ))}\n            <ion-button\n              color=\"trasteel\"\n              fill=\"outline\"\n              expand=\"full\"\n              onClick={() => {\n                this.addTeam();\n              }}\n            >\n              <ion-icon name=\"add\" slot=\"start\"></ion-icon>\n              <ion-label>\n                <my-transl tag=\"add-team\" text=\"Add Team\"></my-transl>\n              </ion-label>\n            </ion-button>\n          </ion-list>\n        </ion-content>\n        <app-modal-footer\n          color={Environment.getAppColor()}\n          onCancelEmit={() => this.cancel()}\n          onSaveEmit={() => this.save()}\n        />\n      </Host>\n    );\n  }\n}\n"],"version":3}