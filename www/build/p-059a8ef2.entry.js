import{r as e,h as t,f as i}from"./p-cbe60c68.js";import{c as a,aa as s,b as n,U as o,h as c,B as d,a3 as l,R as r,ay as f}from"./p-4a2e1f71.js";import{S as b}from"./p-a75993af.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-a9f4af61.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";const h="page-diving-center-details ion-segment-button{--color-checked:var(--ion-color-divingcenter-contrast)}";const p=h;const m=class{constructor(t){e(this,t);this.admin=false;this.markers=[];this.dcid=undefined;this.divingCenter=undefined;this.diveTrips=undefined;this.diveSites=undefined;this.titles=[{tag:"map"},{tag:"information"},{tag:"dive-sites"},{tag:"team"},{tag:"next-trips",text:"Next Dive Trips"}];this.slider=undefined}async componentWillLoad(){if(a.selectedDivingCenter){this.admin=true;this.dcSubscription=a.selectedDivingCenter$.subscribe((e=>{if(e&&e.displayName){this.divingCenter=e;this.dcid=a.selectedDivingCenterId}}))}else{this.admin=false;delete this.titles[4];delete this.titles[3];this.divingCenter=await a.getDivingCenter(this.dcid);this.diveTrips=await s.getTripsSummary(n,this.dcid)}this.userRoles=o.userRoles;this.diveSites=a.loadDivingCenterSites(this.divingCenter);let e=c.getMapDocs()[n].icon;e.size="large";this.markers.push({icon:e,latitude:this.divingCenter.position.geopoint.latitude,longitude:this.divingCenter.position.geopoint.longitude});let t=c.getMapDocs()[d].icon;t.size="small";this.diveSites.divingCenterSites.forEach((e=>{this.markers.push({name:e.displayName,icon:t,latitude:e.position.geopoint.latitude,longitude:e.position.geopoint.longitude})}))}async componentDidLoad(){this.slider=new b(".slider-diving-center",{speed:400,spaceBetween:100,allowTouchMove:false,autoHeight:true});await customElements.whenDefined("app-map");this.mapElement=this.el.querySelector("#map");const e=this.el.querySelector("#map-container");e.setAttribute("style","height: "+l(this.divingCenter)+"px");this.mapElement["mapLoaded"]().then((()=>{this.setLinesForDiveCenter()}));this.setLinesForDiveCenter()}disconnectedCallback(){if(this.dcSubscription)this.dcSubscription.unsubscribe()}setLinesForDiveCenter(){this.mapElement.triggerMapResize();const e=[this.divingCenter];this.diveSites.divingCenterSites.forEach((async t=>{e.push(t);this.mapElement["createLine"](t.id,this.divingCenter,t)}));this.mapElement["fitToBounds"](e)}render(){return[t("ion-header",{key:"4a1def5846750bfac4e9e0d3bd35515ced251a7d"},t("app-item-cover",{key:"168b1423ae638f6c2f31d06b70d86fc59cacb4da",item:this.divingCenter})),t("ion-header",{key:"659854ce429263632802d68bcf4bbad30bd3a4b4"},t("ion-toolbar",{key:"655a49cdacc53115bc79be338958c8bc2be4576a",color:"divingcenter",class:"no-safe-padding"},this.divingCenter&&!this.divingCenter.coverURL?[t("ion-buttons",{slot:"start"},this.admin?t("ion-menu-button",null):t("ion-button",{onClick:()=>r.goBack(),"icon-only":true},t("ion-icon",{name:"arrow-back"}))),t("ion-buttons",{slot:"end"},this.admin?t("ion-button",{onClick:()=>a.presentDivingCenterUpdate(this.dcid),"icon-only":true},t("ion-icon",{name:"create"})):undefined)]:undefined,t("ion-title",{key:"a19c56a3bee486fb4347b9f5742df6d25ba874aa"},this.divingCenter.displayName))),t("app-header-segment-toolbar",{key:"45d845fb7a0f31e080038eda5202fbcd19de3f45",color:"divingcenter",swiper:this.slider,titles:this.titles}),t("ion-content",{key:"7903c144eb45b3e80622c54097d0e41c71f3340a",class:"slides"},this.divingCenter&&this.divingCenter.coverURL?t("ion-fab",{vertical:"top",horizontal:"start",slot:"fixed",style:{marginTop:f(2)}},this.admin?t("ion-fab-button",{class:"fab-icon"},t("ion-menu-button",null)):t("ion-fab-button",{onClick:()=>r.goBack(),class:"fab-icon"},t("ion-icon",{name:"arrow-back-circle-outline"}))):undefined,this.admin?t("ion-fab",{vertical:"top",horizontal:"end",slot:"fixed",style:{marginTop:f(2)}},t("ion-fab-button",{onClick:()=>a.presentDivingCenterUpdate(this.dcid),class:"fab-icon"},t("ion-icon",{name:"create"}))):undefined,t("swiper-container",{key:"e873d4e7da4952deaefe289d9f28dbb004092e0c",class:"slider-diving-center swiper"},t("swiper-wrapper",{key:"efa5e462a82346aa8b209b91bc0393915035d064",class:"swiper-wrapper"},t("swiper-slide",{key:"c57516f1082301bdf76d49a1bcdfc41439b3014c",class:"swiper-slide"},t("ion-list",{key:"9b8e06b82805fc99b9d33287c409fe13ce772e6e",class:"ion-no-padding"},t("ion-list-header",{key:"bfd01c7ca4fef3db7b21381b38596aefa360fece"},t("ion-label",{key:"68dd1567511e31bf3e8881805f26c4645c51289e",color:"divingcenter"},t("my-transl",{key:"2f87560d4ca9beba5a50a8d6b5c1c63ab1d5b727",tag:"general-information",text:"General Information"}))),t("ion-item",{key:"18103c9490a92d19219152378353c460cdf38d60"},t("ion-label",{key:"2d56e78eac34e5c2f6fcb2c4a08a655b159e6e7d",class:"ion-text-wrap"},t("ion-text",{key:"fd9014a8c9a0a47b0b8f8a746f3e31e7202cb5a2",color:"dark"},t("p",{key:"30697e558392db3ff89ba261fce9e5045ee0db7d"},this.divingCenter.description)))),this.divingCenter.email?t("ion-item",{button:true,href:"mailto:"+this.divingCenter.email},t("ion-icon",{slot:"start",name:"at-outline"}),t("ion-label",null,this.divingCenter.email)):undefined,this.divingCenter.phoneNumber?t("ion-item",{button:true,href:"tel:"+this.divingCenter.phoneNumber},t("ion-icon",{slot:"start",name:"call-outline"}),t("ion-label",null,this.divingCenter.phoneNumber)):undefined,this.divingCenter.website?t("ion-item",{button:true,href:"http://"+this.divingCenter.website,target:"_blank"},t("ion-icon",{slot:"start",name:"link-outline"}),t("ion-label",null,this.divingCenter.website)):undefined,this.divingCenter.facebook?t("ion-item",{button:true,href:"https://www.facebook.com/"+this.divingCenter.facebook,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-facebook"}),t("ion-label",null,this.divingCenter.facebook)):undefined,this.divingCenter.instagram?t("ion-item",{button:true,href:"https://www.instagram.com/"+this.divingCenter.instagram,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-instagram"}),t("ion-label",null,this.divingCenter.instagram)):undefined,this.divingCenter.twitter?t("ion-item",{button:true,href:"https://www.twitter.com/"+this.divingCenter.twitter,target:"_blank"},t("ion-icon",{slot:"start",name:"logo-twitter"}),t("ion-label",null,"@",this.divingCenter.twitter)):undefined)),t("swiper-slide",{key:"ba6a935de62f04ee0a9b149aa59ef762ec67eac8",class:"swiper-slide"},t("div",{key:"d2e5f3e29323b73ae35c97805d1902c568824646",id:"map-container"},t("app-map",{key:"465abf3fca99c3c09704fcedb1d49a1083a06658",id:"map",pageId:"diving-center-details",center:this.divingCenter,markers:this.markers}))),t("swiper-slide",{key:"a0c20894e59aa41c3d9967ffef1490e6c4c4f805",class:"swiper-slide"},t("ion-grid",{key:"d4ba8c45dbd5777f27fdee57b026ec28709590f2"},t("ion-row",{key:"86073d37a479c9196358bceda1e5adf7de8fc33b",class:"ion-text-start"},this.diveSites.divingCenterSites.map((e=>t("ion-col",{"size-sm":"12","size-md":"6","size-lg":"4"},t("app-dive-site-card",{diveSite:e,startlocation:this.divingCenter,edit:false}))))))),this.admin?t("swiper-slide",{class:"swiper-slide"},t("app-users-list",{item:this.divingCenter,show:["owner","editor"]})):t("swiper-slide",{class:"swiper-slide"},t("app-calendar",{calendarId:"diving-center-calendar",addEvents:{trips:this.diveTrips}}))))),this.admin?t("ion-footer",{class:"ion-no-border"},t("ion-toolbar",null,t("ion-button",{expand:"block",fill:"solid",color:"danger",onClick:()=>a.deleteDivingCenter(this.dcid)},t("ion-icon",{slot:"start",name:"trash"}),t("my-transl",{tag:"delete",text:"Delete",isLabel:true})))):undefined]}get el(){return i(this)}};m.style=p;export{m as page_diving_center_details};
//# sourceMappingURL=p-059a8ef2.entry.js.map