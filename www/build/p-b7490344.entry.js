import{r as t,h as e,H as n,f as r}from"./p-cbe60c68.js";import{E as o}from"./p-a9f4af61.js";import{aR as s,w as i}from"./p-4a2e1f71.js";import"./p-c7ee7cfe.js";import"./p-694b8ade.js";import"./p-2578d979.js";import"./p-1af05547.js";import"./p-e9c4f463.js";import"./p-5d4a8e1f.js";import"./p-3647f076.js";import"./p-9c77ce6f.js";import"./p-ae1763fb.js";import"./p-c5936999.js";import"./p-6879854f.js";import"./p-7ee16e8d.js";function a(t,e){const n=f(e);return"formatToParts"in n?u(n,t):d(n,t)}const c={year:0,month:1,day:2,hour:3,minute:4,second:5};function u(t,e){try{const n=t.formatToParts(e);const r=[];for(let t=0;t<n.length;t++){const e=c[n[t].type];if(e!==undefined){r[e]=parseInt(n[t].value,10)}}return r}catch(t){if(t instanceof RangeError){return[NaN]}throw t}}function d(t,e){const n=t.format(e);const r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(r[3],10),parseInt(r[1],10),parseInt(r[2],10),parseInt(r[4],10),parseInt(r[5],10),parseInt(r[6],10)]}const l={};function f(t){if(!l[t]){const e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));const n=e==="06/25/2014, 00:00:00"||e==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";l[t]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:false,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return l[t]}function m(t,e,n,r,o,s,i){const a=new Date(0);a.setUTCFullYear(t,e,n);a.setUTCHours(r,o,s,i);return a}const h=36e5;const p=6e4;const S={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function v(t,e,n){if(!t){return 0}let r=S.timezoneZ.exec(t);if(r){return 0}let o;let s;r=S.timezoneHH.exec(t);if(r){o=parseInt(r[1],10);if(!M(o)){return NaN}return-(o*h)}r=S.timezoneHHMM.exec(t);if(r){o=parseInt(r[2],10);const t=parseInt(r[3],10);if(!M(o,t)){return NaN}s=Math.abs(o)*h+t*p;return r[1]==="+"?-s:s}if(D(t)){e=new Date(e||Date.now());const r=n?e:g(e);const o=y(r,t);const s=n?o:w(e,o,t);return-s}return NaN}function g(t){return m(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function y(t,e){const n=a(t,e);const r=m(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let o=t.getTime();const s=o%1e3;o-=s>=0?s:1e3+s;return r-o}function w(t,e,n){const r=t.getTime();let o=r-e;const s=y(new Date(o),n);if(e===s){return e}o-=s-e;const i=y(new Date(o),n);if(s===i){return s}return Math.max(s,i)}function M(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}const b={};function D(t){if(b[t])return true;try{b[t]=true;return true}catch(t){return false}}function T(t){const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));e.setUTCFullYear(t.getFullYear());return+t-+e}const N=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;const $=36e5;const j=6e4;const x=2;const I={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:N};function E(t,e={}){if(arguments.length<1){throw new TypeError("1 argument required, but only "+arguments.length+" present")}if(t===null){return new Date(NaN)}const n=e.additionalDigits==null?x:Number(e.additionalDigits);if(n!==2&&n!==1&&n!==0){throw new RangeError("additionalDigits must be 0, 1 or 2")}if(t instanceof Date||typeof t==="object"&&Object.prototype.toString.call(t)==="[object Date]"){return new Date(t.getTime())}else if(typeof t==="number"||Object.prototype.toString.call(t)==="[object Number]"){return new Date(t)}else if(!(Object.prototype.toString.call(t)==="[object String]")){return new Date(NaN)}const r=O(t);const{year:o,restDateString:s}=k(r.date,n);const i=H(s,o);if(i===null||isNaN(i.getTime())){return new Date(NaN)}if(i){const t=i.getTime();let n=0;let o;if(r.time){n=A(r.time);if(n===null||isNaN(n)){return new Date(NaN)}}if(r.timeZone||e.timeZone){o=v(r.timeZone||e.timeZone,new Date(t+n));if(isNaN(o)){return new Date(NaN)}}else{o=T(new Date(t+n));o=T(new Date(t+n+o))}return new Date(t+n+o)}else{return new Date(NaN)}}function O(t){const e={};let n=I.dateTimePattern.exec(t);let r;if(!n){n=I.datePattern.exec(t);if(n){e.date=n[1];r=n[2]}else{e.date=null;r=t}}else{e.date=n[1];r=n[3]}if(r){const t=I.timeZone.exec(r);if(t){e.time=r.replace(t[1],"");e.timeZone=t[1].trim()}else{e.time=r}}return e}function k(t,e){if(t){const n=I.YYY[e];const r=I.YYYYY[e];let o=I.YYYY.exec(t)||r.exec(t);if(o){const e=o[1];return{year:parseInt(e,10),restDateString:t.slice(e.length)}}o=I.YY.exec(t)||n.exec(t);if(o){const e=o[1];return{year:parseInt(e,10)*100,restDateString:t.slice(e.length)}}}return{year:null}}function H(t,e){if(e===null){return null}let n;let r;let o;if(!t||!t.length){n=new Date(0);n.setUTCFullYear(e);return n}let s=I.MM.exec(t);if(s){n=new Date(0);r=parseInt(s[1],10)-1;if(!Y(e,r)){return new Date(NaN)}n.setUTCFullYear(e,r);return n}s=I.DDD.exec(t);if(s){n=new Date(0);const t=parseInt(s[1],10);if(!B(e,t)){return new Date(NaN)}n.setUTCFullYear(e,0,t);return n}s=I.MMDD.exec(t);if(s){n=new Date(0);r=parseInt(s[1],10)-1;const t=parseInt(s[2],10);if(!Y(e,r,t)){return new Date(NaN)}n.setUTCFullYear(e,r,t);return n}s=I.Www.exec(t);if(s){o=parseInt(s[1],10)-1;if(!L(o)){return new Date(NaN)}return F(e,o)}s=I.WwwD.exec(t);if(s){o=parseInt(s[1],10)-1;const t=parseInt(s[2],10)-1;if(!L(o,t)){return new Date(NaN)}return F(e,o,t)}return null}function A(t){let e;let n;let r=I.HH.exec(t);if(r){e=parseFloat(r[1].replace(",","."));if(!W(e)){return NaN}return e%24*$}r=I.HHMM.exec(t);if(r){e=parseInt(r[1],10);n=parseFloat(r[2].replace(",","."));if(!W(e,n)){return NaN}return e%24*$+n*j}r=I.HHMMSS.exec(t);if(r){e=parseInt(r[1],10);n=parseInt(r[2],10);const t=parseFloat(r[3].replace(",","."));if(!W(e,n,t)){return NaN}return e%24*$+n*j+t*1e3}return null}function F(t,e,n){e=e||0;n=n||0;const r=new Date(0);r.setUTCFullYear(t,0,4);const o=r.getUTCDay()||7;const s=e*7+n+1-o;r.setUTCDate(r.getUTCDate()+s);return r}const C=[31,28,31,30,31,30,31,31,30,31,30,31];const R=[31,29,31,30,31,30,31,31,30,31,30,31];function Z(t){return t%400===0||t%4===0&&t%100!==0}function Y(t,e,n){if(e<0||e>11){return false}if(n!=null){if(n<1){return false}const r=Z(t);if(r&&n>R[e]){return false}if(!r&&n>C[e]){return false}}return true}function B(t,e){if(e<1){return false}const n=Z(t);if(n&&e>366){return false}if(!n&&e>365){return false}return true}function L(t,e){if(t<0||t>52){return false}if(e!=null&&(e<0||e>6)){return false}return true}function W(t,e,n){if(t<0||t>=25){return false}if(e!=null&&(e<0||e>=60)){return false}if(n!=null&&(n<0||n>=60)){return false}return true}function V(t,e,n){t=E(t,n);const r=v(e,t,true);const o=new Date(t.getTime()-r);const s=new Date(0);s.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate());s.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds());return s}const U={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class z{constructor(){this.now=null;this.past=[];this.future=[]}undo(){const t=this.past.pop();if(t&&this.now){this.future.push(this.now);this.updateElement(t,"historyUndo")}}redo(){const t=this.future.pop();if(t&&this.now){this.past.push(this.now);this.updateElement(t,"historyRedo")}}updateHistory(t){if(!this.now){this.now=t;return}const e=this.now.value!==t.value;const n=this.now.selection.some(((e,n)=>e!==t.selection[n]));if(!e&&!n){return}if(e){this.past.push(this.now);this.future=[]}this.now=t}updateElement(t,e){this.now=t;this.updateElementState(t,{inputType:e,data:null})}}function P(t,...e){return e.every((({value:e})=>e===t.value))}function _(t,...e){return e.every((({value:e,selection:n})=>e===t.value&&n[0]===t.selection[0]&&n[1]===t.selection[1]))}function q({value:t,selection:e},n,r){const[o,s]=e;const i=typeof r==="function"?r({value:t,selection:e}):r;return{value:t,selection:i==="replace"?[o,o+n.length]:[o,s]}}function X(t){return typeof t==="string"}function G(t,e,n,r){let o="";for(let s=e.length;s<t.length;s++){const e=t[s]||"";const i=(r===null||r===void 0?void 0:r.value[s])===e;if(!X(e)||e===n&&!i){return o}o+=e}return o}function J(t,e){if(Array.isArray(e)){return t.length===e.length&&Array.from(t).every(((t,n)=>{const r=e[n]||"";return X(r)?t===r:t.match(r)}))}return e.test(t)}function K(t,e,n){let r=null;let o=null;const s=Array.from(t.value).reduce(((s,i,a)=>{const c=G(e,s,i,n);const u=s+c;const d=e[u.length]||"";if(X(d)){return u+d}if(!i.match(d)){return u}if(r===null&&a>=t.selection[0]){r=u.length}if(o===null&&a>=t.selection[1]){o=u.length}return u+i}),"");const i=G(e,s,"",n);return{value:J(s+i,e)?s+i:s,selection:[r!==null&&r!==void 0?r:s.length,o!==null&&o!==void 0?o:s.length]}}function Q({value:t,selection:e},n){const[r,o]=e;let s=r;let i=o;const a=Array.from(t).reduce(((t,e,a)=>{const c=t+e;if(r===a){s=t.length}if(o===a){i=t.length}return c.match(n)?c:t}),"");return{value:a,selection:[s,i]}}function tt(t,e,n=null){if(J(t.value,e)){return t}const{value:r,selection:o}=Array.isArray(e)?K(t,e,n):Q(t,e);return{selection:o,value:Array.isArray(e)?r.slice(0,e.length):r}}function et(t,e){if(!Array.isArray(e)){return t}const[n,r]=t.selection;const o=[];const s=Array.from(t.value).reduce(((t,s,i)=>{const a=e[i]||"";if(i===n){o.push(t.length)}if(i===r){o.push(t.length)}return X(a)&&a===s?t:t+s}),"");if(o.length<2){o.push(...new Array(2-o.length).fill(s.length))}return{value:s,selection:[o[0],o[1]]}}class nt{constructor(t,e){this.initialElementState=t;this.maskOptions=e;this.value="";this.selection=[0,0];const{value:n,selection:r}=tt(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=n;this.selection=r}addCharacters([t,e],n){const{value:r,maskOptions:o}=this;const s=this.getMaskExpression({value:r.slice(0,t)+n+r.slice(e),selection:[t+n.length,t+n.length]});const i={value:r,selection:[t,e]};const a=et(i,s);const[c,u]=q(a,n,o.overwriteMode).selection;const d=a.value.slice(0,c)+n;const l=d.length;const f=tt({value:d+a.value.slice(u),selection:[l,l]},s,i);const m=r.slice(0,c)===tt({value:d,selection:[l,l]},s,i).value;if(m||_(this,f)){throw new Error("Invalid mask value")}this.value=f.value;this.selection=f.selection}deleteCharacters([t,e]){if(t===e||!e){return}const{value:n}=this;const r=this.getMaskExpression({value:n.slice(0,t)+n.slice(e),selection:[t,t]});const o={value:n,selection:[t,e]};const s=et(o,r);const[i,a]=s.selection;const c=s.value.slice(0,i)+s.value.slice(a);const u=tt({value:c,selection:[i,i]},r,o);this.value=u.value;this.selection=u.selection}getMaskExpression(t){const{mask:e}=this.maskOptions;return typeof e==="function"?e(t):e}}class rt{constructor(t){this.element=t;this.listeners=[]}listen(t,e,n){const r=e;this.element.addEventListener(t,r,n);this.listeners.push((()=>this.element.removeEventListener(t,r)))}destroy(){this.listeners.forEach((t=>t()))}}const ot={CTRL:1<<0,ALT:1<<1,SHIFT:1<<2,META:1<<3};const st={Y:89,Z:90};function it(t,e,n){return t.ctrlKey===!!(e&ot.CTRL)&&t.altKey===!!(e&ot.ALT)&&t.shiftKey===!!(e&ot.SHIFT)&&t.metaKey===!!(e&ot.META)&&t.keyCode===n}function at(t){return it(t,ot.CTRL,st.Y)||it(t,ot.CTRL|ot.SHIFT,st.Z)||it(t,ot.META|ot.SHIFT,st.Z)}function ct(t){return it(t,ot.CTRL,st.Z)||it(t,ot.META,st.Z)}function ut(t,e){var n;const r=t.value;if(typeof e==="string"){t.value=e}else{const[r,o]=e.selection;t.value=e.value;if(t.matches(":focus")){(n=t.setSelectionRange)===null||n===void 0?void 0:n.call(t,r,o)}}if(t.value!==r){t.dispatchEvent(new Event("input",{bubbles:true}))}}function dt({value:t,selection:e},n){const[r,o]=e;if(r!==o){return[r,o]}const s=n?t.slice(r).indexOf("\n")+1||t.length:t.slice(0,o).lastIndexOf("\n")+1;const i=n?r:s;const a=n?s:o;return[i,a]}function lt({value:t,selection:e},n){const[r,o]=e;if(r!==o){return[r,o]}const s=n?[r,o+1]:[r-1,o];return s.map((e=>Math.min(Math.max(e,0),t.length)))}const ft=/\s+$/g;const mt=/^\s+/g;const ht=/\s/;function pt({value:t,selection:e},n){const[r,o]=e;if(r!==o){return[r,o]}if(n){const e=t.slice(r);const[n]=e.match(mt)||[""];const o=e.trimStart().search(ht);return[r,o!==-1?r+n.length+o:t.length]}const s=t.slice(0,o);const[i]=s.match(ft)||[""];const a=s.trimEnd().split("").reverse().findIndex((t=>t.match(ht)));return[a!==-1?o-i.length-a:0,o]}function St(t=[]){return(e,...n)=>t.reduce(((t,e)=>Object.assign(Object.assign({},t),e(t,...n))),e)}function vt(t,e){const n=Object.assign(Object.assign({},U),e);const r=St(n.preprocessors);const o=St(n.postprocessors);const s=typeof t==="string"?{value:t,selection:[0,0]}:t;const{elementState:i}=r({elementState:s,data:""},"validation");const a=new nt(i,n);const{value:c,selection:u}=o(a,s);return typeof t==="string"?c:{value:c,selection:u}}class gt extends z{constructor(t,e){super();this.element=t;this.maskitoOptions=e;this.isTextArea=this.element.nodeName==="TEXTAREA";this.eventListener=new rt(this.element);this.options=Object.assign(Object.assign({},U),this.maskitoOptions);this.preprocessor=St(this.options.preprocessors);this.postprocessor=St(this.options.postprocessors);this.teardowns=this.options.plugins.map((t=>t(this.element,this.options)));this.updateHistory(this.elementState);this.eventListener.listen("keydown",(t=>{if(at(t)){t.preventDefault();return this.redo()}if(ct(t)){t.preventDefault();return this.undo()}}));this.eventListener.listen("beforeinput",(t=>{var e;const n=t.inputType.includes("Forward");this.updateHistory(this.elementState);switch(t.inputType){case"historyUndo":t.preventDefault();return this.undo();case"historyRedo":t.preventDefault();return this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:n,selection:lt(this.elementState,n)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:n,selection:pt(this.elementState,n),force:true});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:n,selection:dt(this.elementState,n),force:true});case"insertCompositionText":return;case"insertReplacementText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(t);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(t,t.data||((e=t.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain"))||"")}}));this.eventListener.listen("input",(({inputType:t})=>{if(t==="insertCompositionText"){return}this.ensureValueFitsMask();this.updateHistory(this.elementState)}));this.eventListener.listen("compositionend",(()=>{this.ensureValueFitsMask();this.updateHistory(this.elementState)}))}get elementState(){const{value:t,selectionStart:e,selectionEnd:n}=this.element;return{value:t,selection:[e||0,n||0]}}get maxLength(){const{maxLength:t}=this.element;return t===-1?Infinity:t}destroy(){this.eventListener.destroy();this.teardowns.forEach((t=>t===null||t===void 0?void 0:t()))}updateElementState({value:t,selection:e},n={inputType:"insertText",data:null}){const r=this.elementState.value;this.updateValue(t);this.updateSelectionRange(e);if(r!==t){this.dispatchInputEvent(n)}}updateSelectionRange([t,e]){var n;const{element:r}=this;if(r.matches(":focus")&&(r.selectionStart!==t||r.selectionEnd!==e)){(n=r.setSelectionRange)===null||n===void 0?void 0:n.call(r,t,e)}}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(vt(this.elementState,this.options))}dispatchInputEvent(t={inputType:"insertText",data:null}){if(globalThis.InputEvent){this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:true,cancelable:false})))}}handleDelete({event:t,selection:e,isForward:n,force:r=false}){const o={value:this.elementState.value,selection:e};const[s,i]=o.selection;const{elementState:a}=this.preprocessor({elementState:o,data:""},n?"deleteForward":"deleteBackward");const c=new nt(a,this.options);const[u,d]=a.selection;c.deleteCharacters([u,d]);const l=this.postprocessor(c,o);const f=o.value.slice(0,s)+o.value.slice(i);if(f===l.value&&!r&&!this.element.isContentEditable){return}t.preventDefault();if(P(o,a,c,l)){return this.updateSelectionRange(n?[d,d]:[u,u])}this.updateElementState(l,{inputType:t.inputType,data:null});this.updateHistory(l)}handleInsert(t,e){const n=this.elementState;const{elementState:r,data:o=e}=this.preprocessor({data:e,elementState:n},"insert");const s=new nt(r,this.options);try{s.addCharacters(r.selection,o)}catch(e){return t.preventDefault()}const[i,a]=r.selection;const c=n.value.slice(0,i)+e+n.value.slice(a);const u=this.postprocessor(s,n);if(u.value.length>this.maxLength){return t.preventDefault()}if(c!==u.value||this.element.isContentEditable){t.preventDefault();this.updateElementState(u,{data:e,inputType:t.inputType});this.updateHistory(u)}}handleEnter(t){if(this.isTextArea||this.element.isContentEditable){this.handleInsert(t,"\n")}}}function yt(t,e,n){const r=Math.min(Number(n),Math.max(Number(e),Number(t)));return t instanceof Date?new Date(r):r}function wt(t){return t.replaceAll(/\W/g,"").length}const Mt=t=>{var e,n,r;return{day:((e=t.match(/d/g))===null||e===void 0?void 0:e.length)||0,month:((n=t.match(/m/g))===null||n===void 0?void 0:n.length)||0,year:((r=t.match(/y/g))===null||r===void 0?void 0:r.length)||0}};function bt(t){return{day:String(t.getDate()).padStart(2,"0"),month:String(t.getMonth()+1).padStart(2,"0"),year:String(t.getFullYear()).padStart(4,"0"),hours:String(t.getHours()).padStart(2,"0"),minutes:String(t.getMinutes()).padStart(2,"0"),seconds:String(t.getSeconds()).padStart(2,"0"),milliseconds:String(t.getMilliseconds()).padStart(3,"0")}}function Dt(t,e){const n=wt(e);const[r=""]=t.match(new RegExp(`(\\D*\\d){${n}}`))||[];return r}function Tt(t,e){if(t.length<e.length){return false}return t.split(/\D/).every((t=>!t.match(/^0+$/)))}function Nt(t,e,n){const r=wt(e);return t.replace(n,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${r}}`,"g"))||[]}function $t(t,e){const n=e.replaceAll(/[^dmy]/g,"");const r=t.replaceAll(/\D+/g,"");const o={day:r.slice(n.indexOf("d"),n.lastIndexOf("d")+1),month:r.slice(n.indexOf("m"),n.lastIndexOf("m")+1),year:r.slice(n.indexOf("y"),n.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(o).filter((([t,e])=>Boolean(e))).sort((([t],[n])=>e.toLowerCase().indexOf(t.slice(0,1))>e.toLowerCase().indexOf(n.slice(0,1))?1:-1)))}function jt(t,e){var n,r,o,s,i,a,c;const u=((n=t.year)===null||n===void 0?void 0:n.length)===2?`20${t.year}`:t.year;const d=new Date(Number(u!==null&&u!==void 0?u:"0"),Number((r=t.month)!==null&&r!==void 0?r:"1")-1,Number((o=t.day)!==null&&o!==void 0?o:"1"),Number((s=e===null||e===void 0?void 0:e.hours)!==null&&s!==void 0?s:"0"),Number((i=e===null||e===void 0?void 0:e.minutes)!==null&&i!==void 0?i:"0"),Number((a=e===null||e===void 0?void 0:e.seconds)!==null&&a!==void 0?a:"0"),Number((c=e===null||e===void 0?void 0:e.milliseconds)!==null&&c!==void 0?c:"0"));d.setFullYear(Number(u!==null&&u!==void 0?u:"0"));return d}const xt=", ";function It({day:t,month:e,year:n,hours:r,minutes:o,seconds:s,milliseconds:i},{dateMode:a,dateTimeSeparator:c=xt,timeMode:u}){var d;const l=((d=a.match(/y/g))===null||d===void 0?void 0:d.length)===2?n===null||n===void 0?void 0:n.slice(-2):n;const f=a+(u?c+u:"");return f.replaceAll(/d+/g,t!==null&&t!==void 0?t:"").replaceAll(/m+/g,e!==null&&e!==void 0?e:"").replaceAll(/y+/g,l!==null&&l!==void 0?l:"").replaceAll(/H+/g,r!==null&&r!==void 0?r:"").replaceAll("MSS",i!==null&&i!==void 0?i:"").replaceAll(/M+/g,o!==null&&o!==void 0?o:"").replaceAll(/S+/g,s!==null&&s!==void 0?s:"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}const Et={day:31,month:12,year:9999};const Ot=new Date("0001-01-01");const kt=new Date("9999-12-31");const Ht={hours:23,minutes:59,seconds:59,milliseconds:999};const At=[":","."];const Ft={hours:2,minutes:2,seconds:2,milliseconds:3};const Ct=":";const Rt="：";function Zt({dateString:t,dateModeTemplate:e,dateSegmentsSeparator:n,offset:r,selection:[o,s]}){const i=$t(t,e);const a=Object.entries(i);const c={};for(const[t,i]of a){const a=It(c,{dateMode:e});const u=Et[t];const d=a.length&&n.length;const l=r+a.length+d+Mt(e)[t];const f=l>=o&&l===s;if(f&&Number(i)>Number(u)){return{validatedDateString:"",updatedSelection:[o,s]}}if(f&&Number(i)<1){return{validatedDateString:"",updatedSelection:[o,s]}}c[t]=i}const u=It(c,{dateMode:e});const d=u.length-t.length;return{validatedDateString:u,updatedSelection:[o+d,s+d]}}const Yt=/[\\^$.*+?()[\]{}|]/g;const Bt=new RegExp(Yt.source);function Lt(t){return t&&Bt.test(t)?t.replaceAll(Yt,String.raw`\$&`):t}const Wt=/^0+$/;function Vt(t,e,n=0){const r=t.padEnd(e.length,"0");if(Number(r)<=Number(e)){return{validatedSegmentValue:t,prefixedZeroesCount:n}}if(r.endsWith("0")){return Vt(`0${t.slice(0,e.length-1)}`,e,n+1)}const o=t.slice(0,e.length-1);if(o.match(Wt)){return{validatedSegmentValue:"",prefixedZeroesCount:n}}return Vt(`${o}0`,e,n)}function Ut(t){return t.replaceAll(new RegExp(Rt,"g"),Ct)}function zt(t){return t.replaceAll(/[０-９]/g,(t=>String.fromCharCode(t.charCodeAt(0)-65248)))}function Pt(){return({elementState:t,data:e})=>{const{value:n,selection:r}=t;return{elementState:{selection:r,value:Ut(n)},data:Ut(e)}}}function _t({dateModeTemplate:t,dateSegmentSeparator:e,splitFn:n,uniteFn:r}){return({value:o,selection:s})=>{var i;const[a,c]=s;const{dateStrings:u,restPart:d=""}=n(o);const l=[];let f=0;u.forEach((e=>{const n=$t(e,t);const r=Object.entries(n);const o=r.reduce(((t,[e,n])=>{const{validatedSegmentValue:r,prefixedZeroesCount:o}=Vt(n,`${Et[e]}`);f+=o;return Object.assign(Object.assign({},t),{[e]:r})}),{});l.push(It(o,{dateMode:t}))}));const m=r(l,o)+(((i=u[u.length-1])===null||i===void 0?void 0:i.endsWith(e))?e:"")+d;if(f&&m.slice(c+f,c+f+e.length)===e){f+=e.length}return{selection:[a+f,c+f],value:m}}}function qt({dateModeTemplate:t,firstDateEndSeparator:e,dateSegmentSeparator:n,pseudoFirstDateEndSeparators:r}){return({elementState:o,data:s})=>{const{value:i,selection:a}=o;const c=Dt(i,t);const u=r.filter((t=>!e.includes(t)&&t!==n));const d=new RegExp(`[${u.join("")}]`,"gi");return{elementState:{selection:a,value:c&&i.length>c.length?c+i.slice(c.length).replace(/^[\D\s]*/,e):i},data:s.replace(d,e)}}}function Xt(){return({elementState:t,data:e})=>{const{value:n,selection:r}=t;return{elementState:{selection:r,value:zt(n)},data:zt(e)}}}function Gt(t,e){const n=Mt(e);return Object.fromEntries(Object.entries(t).map((([t,e])=>{const r=n[t];return[t,e.length===r&&e.match(/^0+$/)?"1".padStart(r,"0"):e]})))}function Jt({dateModeTemplate:t,min:e=Ot,max:n=kt,rangeSeparator:r="",dateSegmentSeparator:o="."}){return({value:s,selection:i})=>{const a=r&&s.endsWith(r);const c=Nt(s,t,r);let u="";for(const s of c){u+=u?r:"";const i=$t(s,t);if(!Tt(s,t)){const e=Gt(i,t);const n=It(e,{dateMode:t});const r=s.endsWith(o)?o:"";u+=n+r;continue}const a=jt(i);const c=yt(a,e,n);u+=It(bt(c),{dateMode:t})}return{selection:i,value:u+(a?r:"")}}}function Kt({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n="",dateTimeSeparator:r=xt}){return({elementState:o,data:s})=>{const i=n?new RegExp(`${n}|-`):r;const a=s.split(i);const c=s.includes(r)?[a[0]||""]:a;if(c.every((n=>n.trim().split(/\D/).filter(Boolean).length===t.split(e).length))){const i=c.map((n=>Qt(n,t,e))).join(n);return{elementState:o,data:`${i}${s.includes(r)?r+a[1]||"":""}`}}return{elementState:o,data:s}}}function Qt(t,e,n){const r=t.split(/\D/).filter(Boolean);const o=e.split(n);const s=r.map(((t,e)=>{var n;return e===o.length-1?t:t.padStart(((n=o[e])===null||n===void 0?void 0:n.length)||0,"0")}));return s.join(n)}function te({dateModeTemplate:t,dateSegmentsSeparator:e,rangeSeparator:n=""}){return({elementState:r,data:o})=>{const{value:s,selection:i}=r;if(o===e){return{elementState:r,data:i[0]===s.length?o:""}}const a=o.replaceAll(new RegExp(`[^\\d${Lt(e)}${n}]`,"g"),"");if(!a){return{elementState:r,data:""}}const[c,u]=i;let d=u+o.length;const l=s.slice(0,c)+a+s.slice(d);const f=Nt(l,t,n);let m="";const h=Boolean(n)&&l.includes(n);for(const o of f){const{validatedDateString:s,updatedSelection:i}=Zt({dateString:o,dateModeTemplate:t,dateSegmentsSeparator:e,offset:m.length,selection:[c,d]});if(o&&!s){return{elementState:r,data:""}}d=i[1];m+=h&&!m?s+n:s}const p=m.slice(c,d);return{elementState:{selection:i,value:m.slice(0,c)+p.split(e).map((t=>"0".repeat(t.length))).join(e)+m.slice(d)},data:p}}}const ee=()=>{};function ne({step:t,fullMode:e,timeSegmentMaxValues:n}){const r=re(e);return t<=0?ee:e=>{const o=o=>{if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"){return}o.preventDefault();const s=e.selectionStart||0;const i=se({segmentsIndexes:r,selectionStart:s});if(!i){return}const a=ie({selection:r.get(i),value:e.value,toAdd:o.key==="ArrowUp"?t:-t,max:n[i]});ut(e,{value:a,selection:[s,s]})};e.addEventListener("keydown",o);return()=>e.removeEventListener("keydown",o)}}function re(t){return new Map([["hours",oe(t,"HH")],["minutes",oe(t,"MM")],["seconds",oe(t,"SS")],["milliseconds",oe(t,"MSS")]])}function oe(t,e){const n=t.indexOf(e);return n===-1?[-1,-1]:[n,n+e.length]}function se({segmentsIndexes:t,selectionStart:e}){for(const[n,r]of t.entries()){const[t,o]=r;if(t<=e&&e<=o){return n}}return null}function ie({selection:t,value:e,toAdd:n,max:r}){const[o,s]=t;const i=Number(e.slice(o,s).padEnd(s-o,"0"));const a=ae(i+n,r+1);return e.slice(0,o)+String(a).padStart(s-o,"0")+e.slice(s,e.length)}function ae(t,e){if(t<0){t+=Math.floor(Math.abs(t)/e+1)*e}return t%e}function ce(){return({elementState:t},e)=>{const{value:n,selection:r}=t;if(!n||ue(n,r)){return{elementState:t}}const[o,s]=r;const i=n.slice(o,s).replaceAll(/\d/g,"0");const a=n.slice(0,o)+i+n.slice(s);if(e==="validation"||e==="insert"&&o===s){return{elementState:{selection:r,value:a}}}return{elementState:{selection:e==="deleteBackward"||e==="insert"?[o,o]:[s,s],value:a}}}}function ue(t,[e,n]){return n===t.length}function de({mode:t,separator:e=".",max:n,min:r}){const o=t.split("/").join(e);return Object.assign(Object.assign({},U),{mask:Array.from(o).map((t=>e.includes(t)?t:/\d/)),overwriteMode:"replace",preprocessors:[Xt(),ce(),Kt({dateModeTemplate:o,dateSegmentsSeparator:e}),te({dateModeTemplate:o,dateSegmentsSeparator:e})],postprocessors:[_t({dateModeTemplate:o,dateSegmentSeparator:e,splitFn:t=>({dateStrings:[t]}),uniteFn:([t=""])=>t}),Jt({min:r,max:n,dateModeTemplate:o,dateSegmentSeparator:e})]})}function le(t,e){return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,e(String(n),Ft[t])])))}function fe(t){return le(t,((t,e)=>t.padStart(e,"0")))}const me={HH:"hours",MM:"minutes",SS:"seconds",MSS:"milliseconds"};function he(t,e){const n=t.replaceAll(/\D+/g,"");let r=0;return Object.fromEntries(e.split(/\W/).map((t=>{const e=n.slice(r,r+t.length);r+=t.length;return[me[t],e]})))}const pe=/^\D*/;const Se=/\D*$/;function ve({hours:t="",minutes:e="",seconds:n="",milliseconds:r=""}){return`${t}:${e}:${n}.${r}`.replace(pe,"").replace(Se,"")}const ge=new RegExp(`[${At.map(Lt).join("")}]$`);function ye({timeString:t,paddedMaxValues:e,offset:n,selection:[r,o],timeMode:s}){const i=he(t,s);const a=Object.entries(i);const c={};let u=0;for(const[t,s]of a){const i=ve(c);const a=e[t];const d=i.length&&1;const l=n+i.length+d+Ft[t];const f=l>=r&&l<=o;if(f&&Number(s)>Number(a)){return{validatedTimeString:"",updatedTimeSelection:[r,o]}}const{validatedSegmentValue:m,prefixedZeroesCount:h}=Vt(s,`${a}`);u+=h;c[t]=m}const[d=""]=t.match(ge)||[];const l=ve(c)+d;const f=Math.max(l.length-t.length,0);return{validatedTimeString:l,updatedTimeSelection:[r+u+f,o+u+f]}}function we(t,{dateMode:e,timeMode:n,dateTimeSeparator:r=xt}){return t.length>=e.length+n.length+r.length&&(t.split(r)[0]||"").split(/\D/).every((t=>!t.match(/^0+$/)))}function Me(t,{dateModeTemplate:e,dateTimeSeparator:n}){const r=t.includes(n);return[t.slice(0,e.length),t.slice(r?e.length+n.length:e.length)]}function be({dateModeTemplate:t,timeMode:e,min:n=Ot,max:r=kt,dateTimeSeparator:o}){return({value:s,selection:i})=>{const[a,c]=Me(s,{dateModeTemplate:t,dateTimeSeparator:o});const u=$t(a,t);const d=he(c,e);if(!we(s,{dateMode:t,timeMode:e,dateTimeSeparator:o})){const c=Gt(u,t);const{year:l,month:f,day:m}=Tt(a,t)?bt(yt(jt(c),n,r)):c;const h=It(Object.assign({year:l,month:f,day:m},d),{dateMode:t,dateTimeSeparator:o,timeMode:e});const p=s.slice(h.length);return{selection:i,value:h+p}}const l=jt(u,d);const f=yt(l,n,r);const m=It(bt(f),{dateMode:t,dateTimeSeparator:o,timeMode:e});return{selection:i,value:m}}}function De({dateModeTemplate:t,dateSegmentsSeparator:e,dateTimeSeparator:n,timeMode:r}){const o=new RegExp(`[^\\d${At.map(Lt).join("")}${Lt(e)}]+`);return({elementState:s,data:i})=>{const{value:a,selection:c}=s;if(i===e){return{elementState:s,data:c[0]===a.length?i:""}}const u=i.replace(o,"");if(!u){return{elementState:s,data:""}}const[d,l]=c;let f=l+i.length;const m=a.slice(0,d)+u+a.slice(f);const[h,p]=Me(m,{dateModeTemplate:t,dateTimeSeparator:n});let S="";const v=m.includes(n);const{validatedDateString:g,updatedSelection:y}=Zt({dateString:h,dateSegmentsSeparator:e,dateModeTemplate:t,offset:0,selection:[d,f]});if(h&&!g){return{elementState:s,data:""}}f=y[1];S+=g;const w=fe(Ht);const{validatedTimeString:M,updatedTimeSelection:b}=ye({timeString:p,paddedMaxValues:w,offset:S.length+n.length,selection:[d,f],timeMode:r});if(p&&!M){return{elementState:s,data:""}}f=b[1];S+=v?n+M:M;const D=S.slice(d,f);return{elementState:{selection:c,value:S.slice(0,d)+D.split(e).map((t=>"0".repeat(t.length))).join(e)+S.slice(f)},data:D}}}function Te({dateMode:t,timeMode:e,dateSeparator:n=".",min:r,max:o,dateTimeSeparator:s=xt,timeStep:i=0}){const a=t.split("/").join(n);return Object.assign(Object.assign({},U),{mask:[...Array.from(a).map((t=>n.includes(t)?t:/\d/)),...s.split(""),...Array.from(e).map((t=>At.includes(t)?t:/\d/))],overwriteMode:"replace",preprocessors:[Xt(),Pt(),qt({dateModeTemplate:a,dateSegmentSeparator:n,firstDateEndSeparator:s,pseudoFirstDateEndSeparators:s.split("")}),ce(),Kt({dateModeTemplate:a,dateSegmentsSeparator:n,dateTimeSeparator:s}),De({dateModeTemplate:a,dateSegmentsSeparator:n,dateTimeSeparator:s,timeMode:e})],postprocessors:[_t({dateModeTemplate:a,dateSegmentSeparator:n,splitFn:t=>{const[e,n]=Me(t,{dateModeTemplate:a,dateTimeSeparator:s});return{dateStrings:[e],restPart:n}},uniteFn:([t],e)=>t+(e.includes(s)?s:"")}),be({min:r,max:o,dateModeTemplate:a,timeMode:e,dateTimeSeparator:s})],plugins:[ne({step:i,fullMode:`${a}${s}${e}`,timeSegmentMaxValues:Ht})]})}const Ne="";const $e=Ne;const je=class{constructor(e){t(this,e);this.inputValue=undefined;this.value=undefined;this.labelTag=undefined;this.labelText=undefined;this.labelReplace=undefined;this.appendText=undefined;this.datePresentation="date";this.preferWheel=false;this.showDateTitle=true;this.maxDate=undefined;this.updateView=true}componentWillLoad(){this.targetTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setLocalTime(this.value);this.popover=this.el.closest("ion-popover")}componentDidLoad(){this.initializeMask()}disconnectedCallback(){this.maskedInput.destroy()}setLocalTime(t){this.localTime=V(new Date(t),this.targetTimeZone);this.inputValue=s(i.formatISO(this.localTime),this.datePresentation,true);this.updateView=!this.updateView}async initializeMask(){const t=de({mode:"dd/mm/yyyy",separator:"/"});const e=Te({dateMode:"dd/mm/yyyy",timeMode:"HH:MM",dateSeparator:"/"});const n=document.querySelector("#dateInput");const r=await n.getInputElement();this.maskedInput=new gt(r,this.datePresentation=="date"?t:e)}handleChange(t){this.value=t.detail.value;this.setLocalTime(this.value)}handleInputChange(t){const e=t.target.value;const n=i.parse(e,this.datePresentation=="date"?"dd/MM/yyyy":"dd/MM/yyyy HH:ss",new Date);if(i.isValid(n)){this.value=i.formatISO(n);this.setLocalTime(this.value)}}close(){this.popover.dismiss()}save(){const t=V(this.value,"UTC");const e=i.format(t,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");this.popover.dismiss(e)}render(){return e(n,{key:"ae039d575c682151a3a7a24bafdaa74e3455598d"},e("ion-content",{key:"24fda786bdda3306ba4f5f9b4581c6687d4aec18"},e("ion-datetime",{key:"a4fa9a57f3f1944d4e36baa6b3f68bbb3039167c",color:o.getAppColor(),presentation:this.datePresentation,"prefer-wheel":this.preferWheel,"show-default-title":!this.showDateTitle,onIonChange:t=>this.handleChange(t),max:this.maxDate,value:i.formatISO(this.localTime)},this.showDateTitle?e("span",{slot:"title"},this.labelTag?e("my-transl",{tag:this.labelTag,text:this.labelText,replace:this.labelReplace}):this.labelText?this.labelText:undefined,this.appendText?this.appendText:undefined):undefined),this.datePresentation=="date-time"||this.datePresentation=="time-date"||this.datePresentation=="date"?e("ion-item",null,e("ion-input",{id:"dateInput",fill:"outline",type:"text",debounce:300,inputmode:"numeric",value:this.inputValue,onIonInput:t=>this.handleInputChange(t)})):undefined),e("ion-footer",{key:"ed48b0d87927cc8eed2bff71715d92ba3288ccee"},e("app-modal-footer",{key:"309807e84db5d4a78befa1e0379ec83c88f26c87",onCancelEmit:()=>this.close(),onSaveEmit:()=>this.save()})))}get el(){return r(this)}};je.style=$e;export{je as popover_select_date};
//# sourceMappingURL=p-b7490344.entry.js.map